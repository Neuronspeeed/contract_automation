2024-10-14 13:40:47,819 - WARNING - Neither CUDA nor MPS are available - defaulting to CPU. Note: This module is much faster with a GPU.
2024-10-14 13:41:10,056 - WARNING - Neither CUDA nor MPS are available - defaulting to CPU. Note: This module is much faster with a GPU.
2024-10-14 13:41:36,318 - WARNING - Neither CUDA nor MPS are available - defaulting to CPU. Note: This module is much faster with a GPU.
2024-10-14 13:42:09,589 - WARNING - Neither CUDA nor MPS are available - defaulting to CPU. Note: This module is much faster with a GPU.
2024-10-14 13:42:18,562 - WARNING - Neither CUDA nor MPS are available - defaulting to CPU. Note: This module is much faster with a GPU.
2024-10-14 13:42:50,299 - WARNING - Neither CUDA nor MPS are available - defaulting to CPU. Note: This module is much faster with a GPU.
2024-10-14 13:42:58,339 - WARNING - Neither CUDA nor MPS are available - defaulting to CPU. Note: This module is much faster with a GPU.
2024-10-14 13:42:59,599 - DEBUG - load_ssl_context verify=True cert=None trust_env=True http2=False
2024-10-14 13:42:59,599 - DEBUG - load_verify_locations cafile='D:\\deve\\contract_automation\\.venv\\Lib\\site-packages\\certifi\\cacert.pem'
2024-10-14 13:42:59,922 - DEBUG - Patching `client.chat.completions.create` with mode=<Mode.TOOLS: 'tool_call'>
2024-10-14 13:43:19,660 - WARNING - Neither CUDA nor MPS are available - defaulting to CPU. Note: This module is much faster with a GPU.
2024-10-14 13:43:20,939 - DEBUG - load_ssl_context verify=True cert=None trust_env=True http2=False
2024-10-14 13:43:20,940 - DEBUG - load_verify_locations cafile='D:\\deve\\contract_automation\\.venv\\Lib\\site-packages\\certifi\\cacert.pem'
2024-10-14 13:43:21,274 - DEBUG - Patching `client.chat.completions.create` with mode=<Mode.TOOLS: 'tool_call'>
2024-10-14 13:43:21,278 - DEBUG - Using proactor: IocpProactor
2024-10-14 13:44:39,462 - WARNING - Neither CUDA nor MPS are available - defaulting to CPU. Note: This module is much faster with a GPU.
2024-10-14 13:44:40,741 - DEBUG - load_ssl_context verify=True cert=None trust_env=True http2=False
2024-10-14 13:44:40,742 - DEBUG - load_verify_locations cafile='D:\\deve\\contract_automation\\.venv\\Lib\\site-packages\\certifi\\cacert.pem'
2024-10-14 13:44:41,067 - DEBUG - Patching `client.chat.completions.create` with mode=<Mode.TOOLS: 'tool_call'>
2024-10-14 13:44:41,067 - DEBUG - Using proactor: IocpProactor
2024-10-14 13:44:48,782 - WARNING - Neither CUDA nor MPS are available - defaulting to CPU. Note: This module is much faster with a GPU.
2024-10-14 13:44:50,044 - DEBUG - load_ssl_context verify=True cert=None trust_env=True http2=False
2024-10-14 13:44:50,044 - DEBUG - load_verify_locations cafile='D:\\deve\\contract_automation\\.venv\\Lib\\site-packages\\certifi\\cacert.pem'
2024-10-14 13:44:50,368 - DEBUG - Patching `client.chat.completions.create` with mode=<Mode.TOOLS: 'tool_call'>
2024-10-14 13:44:50,368 - DEBUG - Using proactor: IocpProactor
2024-10-14 13:44:50,372 - INFO - Template selected based on metadata: airbnb.txt
2024-10-14 13:44:50,423 - DEBUG - STREAM b'IHDR' 16 13
2024-10-14 13:44:50,423 - DEBUG - STREAM b'iCCP' 41 3152
2024-10-14 13:44:50,423 - DEBUG - iCCP profile name b'ICC Profile'
2024-10-14 13:44:50,423 - DEBUG - Compression method 0
2024-10-14 13:44:50,423 - DEBUG - STREAM b'eXIf' 3205 138
2024-10-14 13:44:50,423 - DEBUG - STREAM b'pHYs' 3355 9
2024-10-14 13:44:50,423 - DEBUG - STREAM b'iTXt' 3376 470
2024-10-14 13:44:50,423 - DEBUG - STREAM b'iDOT' 3858 28
2024-10-14 13:44:50,423 - DEBUG - b'iDOT' 3858 28 (unknown)
2024-10-14 13:44:50,423 - DEBUG - STREAM b'IDAT' 3898 16384
2024-10-14 13:44:50,423 - DEBUG - STREAM b'IHDR' 16 13
2024-10-14 13:44:50,423 - DEBUG - STREAM b'iCCP' 41 3152
2024-10-14 13:44:50,423 - DEBUG - iCCP profile name b'ICC Profile'
2024-10-14 13:44:50,424 - DEBUG - Compression method 0
2024-10-14 13:44:50,424 - DEBUG - STREAM b'eXIf' 3205 138
2024-10-14 13:44:50,424 - DEBUG - STREAM b'pHYs' 3355 9
2024-10-14 13:44:50,424 - DEBUG - STREAM b'iTXt' 3376 470
2024-10-14 13:44:50,424 - DEBUG - STREAM b'iDOT' 3858 28
2024-10-14 13:44:50,424 - DEBUG - b'iDOT' 3858 28 (unknown)
2024-10-14 13:44:50,424 - DEBUG - STREAM b'IDAT' 3898 16384
2024-10-14 13:44:50,435 - DEBUG - tag: XResolution (282) - type: rational (5) Tag Location: 22 - Data Location: 62 - value: b'\x00\x00\x00\x90\x00\x00\x00\x01'
2024-10-14 13:44:50,435 - DEBUG - tag: YResolution (283) - type: rational (5) Tag Location: 34 - Data Location: 70 - value: b'\x00\x00\x00\x90\x00\x00\x00\x01'
2024-10-14 13:44:50,435 - DEBUG - tag: ResolutionUnit (296) - type: short (3) - value: b'\x00\x02'
2024-10-14 13:44:50,435 - DEBUG - tag: ExifIFD (34665) - type: long (4) - value: b'\x00\x00\x00N'
2024-10-14 13:44:50,436 - DEBUG - Error closing: Operation on closed image
2024-10-14 13:44:52,427 - DEBUG - STREAM b'IHDR' 16 13
2024-10-14 13:44:52,427 - DEBUG - STREAM b'iCCP' 41 3152
2024-10-14 13:44:52,427 - DEBUG - iCCP profile name b'ICC Profile'
2024-10-14 13:44:52,427 - DEBUG - Compression method 0
2024-10-14 13:44:52,427 - DEBUG - STREAM b'eXIf' 3205 138
2024-10-14 13:44:52,427 - DEBUG - STREAM b'pHYs' 3355 9
2024-10-14 13:44:52,427 - DEBUG - STREAM b'iTXt' 3376 471
2024-10-14 13:44:52,427 - DEBUG - STREAM b'iDOT' 3859 28
2024-10-14 13:44:52,427 - DEBUG - b'iDOT' 3859 28 (unknown)
2024-10-14 13:44:52,427 - DEBUG - STREAM b'IDAT' 3899 16384
2024-10-14 13:44:52,427 - DEBUG - STREAM b'IHDR' 16 13
2024-10-14 13:44:52,427 - DEBUG - STREAM b'iCCP' 41 3152
2024-10-14 13:44:52,427 - DEBUG - iCCP profile name b'ICC Profile'
2024-10-14 13:44:52,427 - DEBUG - Compression method 0
2024-10-14 13:44:52,427 - DEBUG - STREAM b'eXIf' 3205 138
2024-10-14 13:44:52,427 - DEBUG - STREAM b'pHYs' 3355 9
2024-10-14 13:44:52,427 - DEBUG - STREAM b'iTXt' 3376 471
2024-10-14 13:44:52,427 - DEBUG - STREAM b'iDOT' 3859 28
2024-10-14 13:44:52,427 - DEBUG - b'iDOT' 3859 28 (unknown)
2024-10-14 13:44:52,427 - DEBUG - STREAM b'IDAT' 3899 16384
2024-10-14 13:44:52,445 - DEBUG - tag: XResolution (282) - type: rational (5) Tag Location: 22 - Data Location: 62 - value: b'\x00\x00\x00\x90\x00\x00\x00\x01'
2024-10-14 13:44:52,445 - DEBUG - tag: YResolution (283) - type: rational (5) Tag Location: 34 - Data Location: 70 - value: b'\x00\x00\x00\x90\x00\x00\x00\x01'
2024-10-14 13:44:52,445 - DEBUG - tag: ResolutionUnit (296) - type: short (3) - value: b'\x00\x02'
2024-10-14 13:44:52,445 - DEBUG - tag: ExifIFD (34665) - type: long (4) - value: b'\x00\x00\x00N'
2024-10-14 13:44:52,446 - DEBUG - Error closing: Operation on closed image
2024-10-14 13:46:10,517 - WARNING - Neither CUDA nor MPS are available - defaulting to CPU. Note: This module is much faster with a GPU.
2024-10-14 13:46:11,788 - DEBUG - load_ssl_context verify=True cert=None trust_env=True http2=False
2024-10-14 13:46:11,789 - DEBUG - load_verify_locations cafile='D:\\deve\\contract_automation\\.venv\\Lib\\site-packages\\certifi\\cacert.pem'
2024-10-14 13:46:12,113 - DEBUG - Patching `client.chat.completions.create` with mode=<Mode.TOOLS: 'tool_call'>
2024-10-14 13:46:12,114 - DEBUG - Using proactor: IocpProactor
2024-10-14 13:46:12,119 - INFO - Template selected based on metadata: airbnb.txt
2024-10-14 13:46:12,134 - DEBUG - STREAM b'IHDR' 16 13
2024-10-14 13:46:12,135 - DEBUG - STREAM b'iCCP' 41 3152
2024-10-14 13:46:12,135 - DEBUG - iCCP profile name b'ICC Profile'
2024-10-14 13:46:12,135 - DEBUG - Compression method 0
2024-10-14 13:46:12,135 - DEBUG - STREAM b'eXIf' 3205 138
2024-10-14 13:46:12,135 - DEBUG - STREAM b'pHYs' 3355 9
2024-10-14 13:46:12,135 - DEBUG - STREAM b'iTXt' 3376 470
2024-10-14 13:46:12,135 - DEBUG - STREAM b'iDOT' 3858 28
2024-10-14 13:46:12,135 - DEBUG - b'iDOT' 3858 28 (unknown)
2024-10-14 13:46:12,135 - DEBUG - STREAM b'IDAT' 3898 16384
2024-10-14 13:46:12,135 - DEBUG - STREAM b'IHDR' 16 13
2024-10-14 13:46:12,135 - DEBUG - STREAM b'iCCP' 41 3152
2024-10-14 13:46:12,135 - DEBUG - iCCP profile name b'ICC Profile'
2024-10-14 13:46:12,135 - DEBUG - Compression method 0
2024-10-14 13:46:12,135 - DEBUG - STREAM b'eXIf' 3205 138
2024-10-14 13:46:12,135 - DEBUG - STREAM b'pHYs' 3355 9
2024-10-14 13:46:12,135 - DEBUG - STREAM b'iTXt' 3376 470
2024-10-14 13:46:12,135 - DEBUG - STREAM b'iDOT' 3858 28
2024-10-14 13:46:12,135 - DEBUG - b'iDOT' 3858 28 (unknown)
2024-10-14 13:46:12,135 - DEBUG - STREAM b'IDAT' 3898 16384
2024-10-14 13:46:12,145 - DEBUG - tag: XResolution (282) - type: rational (5) Tag Location: 22 - Data Location: 62 - value: b'\x00\x00\x00\x90\x00\x00\x00\x01'
2024-10-14 13:46:12,145 - DEBUG - tag: YResolution (283) - type: rational (5) Tag Location: 34 - Data Location: 70 - value: b'\x00\x00\x00\x90\x00\x00\x00\x01'
2024-10-14 13:46:12,145 - DEBUG - tag: ResolutionUnit (296) - type: short (3) - value: b'\x00\x02'
2024-10-14 13:46:12,145 - DEBUG - tag: ExifIFD (34665) - type: long (4) - value: b'\x00\x00\x00N'
2024-10-14 13:46:12,146 - DEBUG - Error closing: Operation on closed image
2024-10-14 13:46:14,129 - DEBUG - STREAM b'IHDR' 16 13
2024-10-14 13:46:14,129 - DEBUG - STREAM b'iCCP' 41 3152
2024-10-14 13:46:14,129 - DEBUG - iCCP profile name b'ICC Profile'
2024-10-14 13:46:14,129 - DEBUG - Compression method 0
2024-10-14 13:46:14,129 - DEBUG - STREAM b'eXIf' 3205 138
2024-10-14 13:46:14,129 - DEBUG - STREAM b'pHYs' 3355 9
2024-10-14 13:46:14,129 - DEBUG - STREAM b'iTXt' 3376 471
2024-10-14 13:46:14,129 - DEBUG - STREAM b'iDOT' 3859 28
2024-10-14 13:46:14,129 - DEBUG - b'iDOT' 3859 28 (unknown)
2024-10-14 13:46:14,129 - DEBUG - STREAM b'IDAT' 3899 16384
2024-10-14 13:46:14,129 - DEBUG - STREAM b'IHDR' 16 13
2024-10-14 13:46:14,129 - DEBUG - STREAM b'iCCP' 41 3152
2024-10-14 13:46:14,129 - DEBUG - iCCP profile name b'ICC Profile'
2024-10-14 13:46:14,129 - DEBUG - Compression method 0
2024-10-14 13:46:14,129 - DEBUG - STREAM b'eXIf' 3205 138
2024-10-14 13:46:14,129 - DEBUG - STREAM b'pHYs' 3355 9
2024-10-14 13:46:14,129 - DEBUG - STREAM b'iTXt' 3376 471
2024-10-14 13:46:14,129 - DEBUG - STREAM b'iDOT' 3859 28
2024-10-14 13:46:14,129 - DEBUG - b'iDOT' 3859 28 (unknown)
2024-10-14 13:46:14,129 - DEBUG - STREAM b'IDAT' 3899 16384
2024-10-14 13:46:14,146 - DEBUG - tag: XResolution (282) - type: rational (5) Tag Location: 22 - Data Location: 62 - value: b'\x00\x00\x00\x90\x00\x00\x00\x01'
2024-10-14 13:46:14,146 - DEBUG - tag: YResolution (283) - type: rational (5) Tag Location: 34 - Data Location: 70 - value: b'\x00\x00\x00\x90\x00\x00\x00\x01'
2024-10-14 13:46:14,146 - DEBUG - tag: ResolutionUnit (296) - type: short (3) - value: b'\x00\x02'
2024-10-14 13:46:14,146 - DEBUG - tag: ExifIFD (34665) - type: long (4) - value: b'\x00\x00\x00N'
2024-10-14 13:46:14,147 - DEBUG - Error closing: Operation on closed image
2024-10-14 13:46:26,165 - WARNING - Neither CUDA nor MPS are available - defaulting to CPU. Note: This module is much faster with a GPU.
2024-10-14 13:46:27,417 - DEBUG - load_ssl_context verify=True cert=None trust_env=True http2=False
2024-10-14 13:46:27,417 - DEBUG - load_verify_locations cafile='D:\\deve\\contract_automation\\.venv\\Lib\\site-packages\\certifi\\cacert.pem'
2024-10-14 13:46:27,732 - DEBUG - Patching `client.chat.completions.create` with mode=<Mode.TOOLS: 'tool_call'>
2024-10-14 13:46:27,733 - DEBUG - Using proactor: IocpProactor
2024-10-14 13:46:27,737 - INFO - Template selected based on metadata: airbnb.txt
2024-10-14 13:46:27,753 - DEBUG - STREAM b'IHDR' 16 13
2024-10-14 13:46:27,753 - DEBUG - STREAM b'iCCP' 41 3152
2024-10-14 13:46:27,753 - DEBUG - iCCP profile name b'ICC Profile'
2024-10-14 13:46:27,753 - DEBUG - Compression method 0
2024-10-14 13:46:27,753 - DEBUG - STREAM b'eXIf' 3205 138
2024-10-14 13:46:27,753 - DEBUG - STREAM b'pHYs' 3355 9
2024-10-14 13:46:27,753 - DEBUG - STREAM b'iTXt' 3376 470
2024-10-14 13:46:27,753 - DEBUG - STREAM b'iDOT' 3858 28
2024-10-14 13:46:27,753 - DEBUG - b'iDOT' 3858 28 (unknown)
2024-10-14 13:46:27,753 - DEBUG - STREAM b'IDAT' 3898 16384
2024-10-14 13:46:27,753 - DEBUG - STREAM b'IHDR' 16 13
2024-10-14 13:46:27,753 - DEBUG - STREAM b'iCCP' 41 3152
2024-10-14 13:46:27,753 - DEBUG - iCCP profile name b'ICC Profile'
2024-10-14 13:46:27,753 - DEBUG - Compression method 0
2024-10-14 13:46:27,754 - DEBUG - STREAM b'eXIf' 3205 138
2024-10-14 13:46:27,754 - DEBUG - STREAM b'pHYs' 3355 9
2024-10-14 13:46:27,754 - DEBUG - STREAM b'iTXt' 3376 470
2024-10-14 13:46:27,754 - DEBUG - STREAM b'iDOT' 3858 28
2024-10-14 13:46:27,754 - DEBUG - b'iDOT' 3858 28 (unknown)
2024-10-14 13:46:27,754 - DEBUG - STREAM b'IDAT' 3898 16384
2024-10-14 13:46:27,763 - DEBUG - tag: XResolution (282) - type: rational (5) Tag Location: 22 - Data Location: 62 - value: b'\x00\x00\x00\x90\x00\x00\x00\x01'
2024-10-14 13:46:27,763 - DEBUG - tag: YResolution (283) - type: rational (5) Tag Location: 34 - Data Location: 70 - value: b'\x00\x00\x00\x90\x00\x00\x00\x01'
2024-10-14 13:46:27,763 - DEBUG - tag: ResolutionUnit (296) - type: short (3) - value: b'\x00\x02'
2024-10-14 13:46:27,763 - DEBUG - tag: ExifIFD (34665) - type: long (4) - value: b'\x00\x00\x00N'
2024-10-14 13:46:27,764 - DEBUG - Error closing: Operation on closed image
2024-10-14 13:46:29,758 - DEBUG - STREAM b'IHDR' 16 13
2024-10-14 13:46:29,758 - DEBUG - STREAM b'iCCP' 41 3152
2024-10-14 13:46:29,758 - DEBUG - iCCP profile name b'ICC Profile'
2024-10-14 13:46:29,758 - DEBUG - Compression method 0
2024-10-14 13:46:29,758 - DEBUG - STREAM b'eXIf' 3205 138
2024-10-14 13:46:29,758 - DEBUG - STREAM b'pHYs' 3355 9
2024-10-14 13:46:29,758 - DEBUG - STREAM b'iTXt' 3376 471
2024-10-14 13:46:29,758 - DEBUG - STREAM b'iDOT' 3859 28
2024-10-14 13:46:29,758 - DEBUG - b'iDOT' 3859 28 (unknown)
2024-10-14 13:46:29,758 - DEBUG - STREAM b'IDAT' 3899 16384
2024-10-14 13:46:29,759 - DEBUG - STREAM b'IHDR' 16 13
2024-10-14 13:46:29,759 - DEBUG - STREAM b'iCCP' 41 3152
2024-10-14 13:46:29,759 - DEBUG - iCCP profile name b'ICC Profile'
2024-10-14 13:46:29,759 - DEBUG - Compression method 0
2024-10-14 13:46:29,759 - DEBUG - STREAM b'eXIf' 3205 138
2024-10-14 13:46:29,759 - DEBUG - STREAM b'pHYs' 3355 9
2024-10-14 13:46:29,759 - DEBUG - STREAM b'iTXt' 3376 471
2024-10-14 13:46:29,759 - DEBUG - STREAM b'iDOT' 3859 28
2024-10-14 13:46:29,759 - DEBUG - b'iDOT' 3859 28 (unknown)
2024-10-14 13:46:29,759 - DEBUG - STREAM b'IDAT' 3899 16384
2024-10-14 13:46:29,776 - DEBUG - tag: XResolution (282) - type: rational (5) Tag Location: 22 - Data Location: 62 - value: b'\x00\x00\x00\x90\x00\x00\x00\x01'
2024-10-14 13:46:29,776 - DEBUG - tag: YResolution (283) - type: rational (5) Tag Location: 34 - Data Location: 70 - value: b'\x00\x00\x00\x90\x00\x00\x00\x01'
2024-10-14 13:46:29,776 - DEBUG - tag: ResolutionUnit (296) - type: short (3) - value: b'\x00\x02'
2024-10-14 13:46:29,776 - DEBUG - tag: ExifIFD (34665) - type: long (4) - value: b'\x00\x00\x00N'
2024-10-14 13:46:29,777 - DEBUG - Error closing: Operation on closed image
2024-10-14 13:47:02,877 - WARNING - Neither CUDA nor MPS are available - defaulting to CPU. Note: This module is much faster with a GPU.
2024-10-14 13:47:04,164 - DEBUG - load_ssl_context verify=True cert=None trust_env=True http2=False
2024-10-14 13:47:04,165 - DEBUG - load_verify_locations cafile='D:\\deve\\contract_automation\\.venv\\Lib\\site-packages\\certifi\\cacert.pem'
2024-10-14 13:47:04,489 - DEBUG - Patching `client.chat.completions.create` with mode=<Mode.TOOLS: 'tool_call'>
2024-10-14 13:47:04,489 - DEBUG - Using proactor: IocpProactor
2024-10-14 13:47:04,494 - INFO - Template selected based on metadata: airbnb.txt
2024-10-14 13:47:04,508 - DEBUG - STREAM b'IHDR' 16 13
2024-10-14 13:47:04,509 - DEBUG - STREAM b'iCCP' 41 3152
2024-10-14 13:47:04,509 - DEBUG - iCCP profile name b'ICC Profile'
2024-10-14 13:47:04,509 - DEBUG - Compression method 0
2024-10-14 13:47:04,509 - DEBUG - STREAM b'eXIf' 3205 138
2024-10-14 13:47:04,509 - DEBUG - STREAM b'pHYs' 3355 9
2024-10-14 13:47:04,509 - DEBUG - STREAM b'iTXt' 3376 470
2024-10-14 13:47:04,509 - DEBUG - STREAM b'iDOT' 3858 28
2024-10-14 13:47:04,509 - DEBUG - b'iDOT' 3858 28 (unknown)
2024-10-14 13:47:04,509 - DEBUG - STREAM b'IDAT' 3898 16384
2024-10-14 13:47:04,509 - DEBUG - STREAM b'IHDR' 16 13
2024-10-14 13:47:04,509 - DEBUG - STREAM b'iCCP' 41 3152
2024-10-14 13:47:04,509 - DEBUG - iCCP profile name b'ICC Profile'
2024-10-14 13:47:04,509 - DEBUG - Compression method 0
2024-10-14 13:47:04,510 - DEBUG - STREAM b'eXIf' 3205 138
2024-10-14 13:47:04,510 - DEBUG - STREAM b'pHYs' 3355 9
2024-10-14 13:47:04,510 - DEBUG - STREAM b'iTXt' 3376 470
2024-10-14 13:47:04,510 - DEBUG - STREAM b'iDOT' 3858 28
2024-10-14 13:47:04,510 - DEBUG - b'iDOT' 3858 28 (unknown)
2024-10-14 13:47:04,510 - DEBUG - STREAM b'IDAT' 3898 16384
2024-10-14 13:47:04,520 - DEBUG - tag: XResolution (282) - type: rational (5) Tag Location: 22 - Data Location: 62 - value: b'\x00\x00\x00\x90\x00\x00\x00\x01'
2024-10-14 13:47:04,520 - DEBUG - tag: YResolution (283) - type: rational (5) Tag Location: 34 - Data Location: 70 - value: b'\x00\x00\x00\x90\x00\x00\x00\x01'
2024-10-14 13:47:04,520 - DEBUG - tag: ResolutionUnit (296) - type: short (3) - value: b'\x00\x02'
2024-10-14 13:47:04,520 - DEBUG - tag: ExifIFD (34665) - type: long (4) - value: b'\x00\x00\x00N'
2024-10-14 13:47:04,520 - DEBUG - Error closing: Operation on closed image
2024-10-14 13:47:06,501 - DEBUG - STREAM b'IHDR' 16 13
2024-10-14 13:47:06,501 - DEBUG - STREAM b'iCCP' 41 3152
2024-10-14 13:47:06,501 - DEBUG - iCCP profile name b'ICC Profile'
2024-10-14 13:47:06,501 - DEBUG - Compression method 0
2024-10-14 13:47:06,501 - DEBUG - STREAM b'eXIf' 3205 138
2024-10-14 13:47:06,501 - DEBUG - STREAM b'pHYs' 3355 9
2024-10-14 13:47:06,501 - DEBUG - STREAM b'iTXt' 3376 471
2024-10-14 13:47:06,501 - DEBUG - STREAM b'iDOT' 3859 28
2024-10-14 13:47:06,501 - DEBUG - b'iDOT' 3859 28 (unknown)
2024-10-14 13:47:06,501 - DEBUG - STREAM b'IDAT' 3899 16384
2024-10-14 13:47:06,501 - DEBUG - STREAM b'IHDR' 16 13
2024-10-14 13:47:06,501 - DEBUG - STREAM b'iCCP' 41 3152
2024-10-14 13:47:06,501 - DEBUG - iCCP profile name b'ICC Profile'
2024-10-14 13:47:06,501 - DEBUG - Compression method 0
2024-10-14 13:47:06,501 - DEBUG - STREAM b'eXIf' 3205 138
2024-10-14 13:47:06,501 - DEBUG - STREAM b'pHYs' 3355 9
2024-10-14 13:47:06,501 - DEBUG - STREAM b'iTXt' 3376 471
2024-10-14 13:47:06,501 - DEBUG - STREAM b'iDOT' 3859 28
2024-10-14 13:47:06,501 - DEBUG - b'iDOT' 3859 28 (unknown)
2024-10-14 13:47:06,501 - DEBUG - STREAM b'IDAT' 3899 16384
2024-10-14 13:47:06,519 - DEBUG - tag: XResolution (282) - type: rational (5) Tag Location: 22 - Data Location: 62 - value: b'\x00\x00\x00\x90\x00\x00\x00\x01'
2024-10-14 13:47:06,519 - DEBUG - tag: YResolution (283) - type: rational (5) Tag Location: 34 - Data Location: 70 - value: b'\x00\x00\x00\x90\x00\x00\x00\x01'
2024-10-14 13:47:06,519 - DEBUG - tag: ResolutionUnit (296) - type: short (3) - value: b'\x00\x02'
2024-10-14 13:47:06,519 - DEBUG - tag: ExifIFD (34665) - type: long (4) - value: b'\x00\x00\x00N'
2024-10-14 13:47:06,520 - DEBUG - Error closing: Operation on closed image
2024-10-14 13:47:20,942 - WARNING - Neither CUDA nor MPS are available - defaulting to CPU. Note: This module is much faster with a GPU.
2024-10-14 13:47:22,209 - DEBUG - load_ssl_context verify=True cert=None trust_env=True http2=False
2024-10-14 13:47:22,209 - DEBUG - load_verify_locations cafile='D:\\deve\\contract_automation\\.venv\\Lib\\site-packages\\certifi\\cacert.pem'
2024-10-14 13:47:22,533 - DEBUG - Patching `client.chat.completions.create` with mode=<Mode.TOOLS: 'tool_call'>
2024-10-14 13:47:22,534 - DEBUG - Using proactor: IocpProactor
2024-10-14 13:47:22,540 - INFO - Template selected based on metadata: airbnb.txt
2024-10-14 13:47:22,556 - DEBUG - STREAM b'IHDR' 16 13
2024-10-14 13:47:22,557 - DEBUG - STREAM b'iCCP' 41 3152
2024-10-14 13:47:22,557 - DEBUG - iCCP profile name b'ICC Profile'
2024-10-14 13:47:22,557 - DEBUG - Compression method 0
2024-10-14 13:47:22,557 - DEBUG - STREAM b'eXIf' 3205 138
2024-10-14 13:47:22,557 - DEBUG - STREAM b'pHYs' 3355 9
2024-10-14 13:47:22,557 - DEBUG - STREAM b'iTXt' 3376 470
2024-10-14 13:47:22,557 - DEBUG - STREAM b'iDOT' 3858 28
2024-10-14 13:47:22,557 - DEBUG - b'iDOT' 3858 28 (unknown)
2024-10-14 13:47:22,557 - DEBUG - STREAM b'IDAT' 3898 16384
2024-10-14 13:47:22,557 - DEBUG - STREAM b'IHDR' 16 13
2024-10-14 13:47:22,557 - DEBUG - STREAM b'iCCP' 41 3152
2024-10-14 13:47:22,557 - DEBUG - iCCP profile name b'ICC Profile'
2024-10-14 13:47:22,557 - DEBUG - Compression method 0
2024-10-14 13:47:22,557 - DEBUG - STREAM b'eXIf' 3205 138
2024-10-14 13:47:22,557 - DEBUG - STREAM b'pHYs' 3355 9
2024-10-14 13:47:22,557 - DEBUG - STREAM b'iTXt' 3376 470
2024-10-14 13:47:22,557 - DEBUG - STREAM b'iDOT' 3858 28
2024-10-14 13:47:22,557 - DEBUG - b'iDOT' 3858 28 (unknown)
2024-10-14 13:47:22,557 - DEBUG - STREAM b'IDAT' 3898 16384
2024-10-14 13:47:22,567 - DEBUG - tag: XResolution (282) - type: rational (5) Tag Location: 22 - Data Location: 62 - value: b'\x00\x00\x00\x90\x00\x00\x00\x01'
2024-10-14 13:47:22,567 - DEBUG - tag: YResolution (283) - type: rational (5) Tag Location: 34 - Data Location: 70 - value: b'\x00\x00\x00\x90\x00\x00\x00\x01'
2024-10-14 13:47:22,567 - DEBUG - tag: ResolutionUnit (296) - type: short (3) - value: b'\x00\x02'
2024-10-14 13:47:22,567 - DEBUG - tag: ExifIFD (34665) - type: long (4) - value: b'\x00\x00\x00N'
2024-10-14 13:47:22,567 - DEBUG - Error closing: Operation on closed image
2024-10-14 13:47:24,615 - DEBUG - STREAM b'IHDR' 16 13
2024-10-14 13:47:24,615 - DEBUG - STREAM b'iCCP' 41 3152
2024-10-14 13:47:24,615 - DEBUG - iCCP profile name b'ICC Profile'
2024-10-14 13:47:24,615 - DEBUG - Compression method 0
2024-10-14 13:47:24,615 - DEBUG - STREAM b'eXIf' 3205 138
2024-10-14 13:47:24,615 - DEBUG - STREAM b'pHYs' 3355 9
2024-10-14 13:47:24,615 - DEBUG - STREAM b'iTXt' 3376 471
2024-10-14 13:47:24,615 - DEBUG - STREAM b'iDOT' 3859 28
2024-10-14 13:47:24,615 - DEBUG - b'iDOT' 3859 28 (unknown)
2024-10-14 13:47:24,615 - DEBUG - STREAM b'IDAT' 3899 16384
2024-10-14 13:47:24,615 - DEBUG - STREAM b'IHDR' 16 13
2024-10-14 13:47:24,615 - DEBUG - STREAM b'iCCP' 41 3152
2024-10-14 13:47:24,615 - DEBUG - iCCP profile name b'ICC Profile'
2024-10-14 13:47:24,615 - DEBUG - Compression method 0
2024-10-14 13:47:24,615 - DEBUG - STREAM b'eXIf' 3205 138
2024-10-14 13:47:24,616 - DEBUG - STREAM b'pHYs' 3355 9
2024-10-14 13:47:24,616 - DEBUG - STREAM b'iTXt' 3376 471
2024-10-14 13:47:24,616 - DEBUG - STREAM b'iDOT' 3859 28
2024-10-14 13:47:24,616 - DEBUG - b'iDOT' 3859 28 (unknown)
2024-10-14 13:47:24,616 - DEBUG - STREAM b'IDAT' 3899 16384
2024-10-14 13:47:24,633 - DEBUG - tag: XResolution (282) - type: rational (5) Tag Location: 22 - Data Location: 62 - value: b'\x00\x00\x00\x90\x00\x00\x00\x01'
2024-10-14 13:47:24,633 - DEBUG - tag: YResolution (283) - type: rational (5) Tag Location: 34 - Data Location: 70 - value: b'\x00\x00\x00\x90\x00\x00\x00\x01'
2024-10-14 13:47:24,633 - DEBUG - tag: ResolutionUnit (296) - type: short (3) - value: b'\x00\x02'
2024-10-14 13:47:24,633 - DEBUG - tag: ExifIFD (34665) - type: long (4) - value: b'\x00\x00\x00N'
2024-10-14 13:47:24,634 - DEBUG - Error closing: Operation on closed image
2024-10-14 13:48:57,860 - WARNING - Neither CUDA nor MPS are available - defaulting to CPU. Note: This module is much faster with a GPU.
2024-10-14 13:48:59,124 - DEBUG - load_ssl_context verify=True cert=None trust_env=True http2=False
2024-10-14 13:48:59,125 - DEBUG - load_verify_locations cafile='D:\\deve\\contract_automation\\.venv\\Lib\\site-packages\\certifi\\cacert.pem'
2024-10-14 13:48:59,452 - DEBUG - Patching `client.chat.completions.create` with mode=<Mode.TOOLS: 'tool_call'>
2024-10-14 13:48:59,453 - DEBUG - Using proactor: IocpProactor
2024-10-14 13:48:59,458 - INFO - Template selected based on metadata: airbnb.txt
2024-10-14 13:48:59,472 - DEBUG - STREAM b'IHDR' 16 13
2024-10-14 13:48:59,472 - DEBUG - STREAM b'iCCP' 41 3152
2024-10-14 13:48:59,472 - DEBUG - iCCP profile name b'ICC Profile'
2024-10-14 13:48:59,472 - DEBUG - Compression method 0
2024-10-14 13:48:59,472 - DEBUG - STREAM b'eXIf' 3205 138
2024-10-14 13:48:59,472 - DEBUG - STREAM b'pHYs' 3355 9
2024-10-14 13:48:59,472 - DEBUG - STREAM b'iTXt' 3376 470
2024-10-14 13:48:59,472 - DEBUG - STREAM b'iDOT' 3858 28
2024-10-14 13:48:59,472 - DEBUG - b'iDOT' 3858 28 (unknown)
2024-10-14 13:48:59,472 - DEBUG - STREAM b'IDAT' 3898 16384
2024-10-14 13:48:59,473 - DEBUG - STREAM b'IHDR' 16 13
2024-10-14 13:48:59,473 - DEBUG - STREAM b'iCCP' 41 3152
2024-10-14 13:48:59,473 - DEBUG - iCCP profile name b'ICC Profile'
2024-10-14 13:48:59,473 - DEBUG - Compression method 0
2024-10-14 13:48:59,473 - DEBUG - STREAM b'eXIf' 3205 138
2024-10-14 13:48:59,473 - DEBUG - STREAM b'pHYs' 3355 9
2024-10-14 13:48:59,473 - DEBUG - STREAM b'iTXt' 3376 470
2024-10-14 13:48:59,473 - DEBUG - STREAM b'iDOT' 3858 28
2024-10-14 13:48:59,473 - DEBUG - b'iDOT' 3858 28 (unknown)
2024-10-14 13:48:59,473 - DEBUG - STREAM b'IDAT' 3898 16384
2024-10-14 13:48:59,482 - DEBUG - tag: XResolution (282) - type: rational (5) Tag Location: 22 - Data Location: 62 - value: b'\x00\x00\x00\x90\x00\x00\x00\x01'
2024-10-14 13:48:59,482 - DEBUG - tag: YResolution (283) - type: rational (5) Tag Location: 34 - Data Location: 70 - value: b'\x00\x00\x00\x90\x00\x00\x00\x01'
2024-10-14 13:48:59,482 - DEBUG - tag: ResolutionUnit (296) - type: short (3) - value: b'\x00\x02'
2024-10-14 13:48:59,483 - DEBUG - tag: ExifIFD (34665) - type: long (4) - value: b'\x00\x00\x00N'
2024-10-14 13:48:59,483 - DEBUG - Error closing: Operation on closed image
2024-10-14 13:49:01,481 - DEBUG - STREAM b'IHDR' 16 13
2024-10-14 13:49:01,481 - DEBUG - STREAM b'iCCP' 41 3152
2024-10-14 13:49:01,481 - DEBUG - iCCP profile name b'ICC Profile'
2024-10-14 13:49:01,481 - DEBUG - Compression method 0
2024-10-14 13:49:01,481 - DEBUG - STREAM b'eXIf' 3205 138
2024-10-14 13:49:01,481 - DEBUG - STREAM b'pHYs' 3355 9
2024-10-14 13:49:01,481 - DEBUG - STREAM b'iTXt' 3376 471
2024-10-14 13:49:01,481 - DEBUG - STREAM b'iDOT' 3859 28
2024-10-14 13:49:01,481 - DEBUG - b'iDOT' 3859 28 (unknown)
2024-10-14 13:49:01,481 - DEBUG - STREAM b'IDAT' 3899 16384
2024-10-14 13:49:01,481 - DEBUG - STREAM b'IHDR' 16 13
2024-10-14 13:49:01,481 - DEBUG - STREAM b'iCCP' 41 3152
2024-10-14 13:49:01,481 - DEBUG - iCCP profile name b'ICC Profile'
2024-10-14 13:49:01,481 - DEBUG - Compression method 0
2024-10-14 13:49:01,482 - DEBUG - STREAM b'eXIf' 3205 138
2024-10-14 13:49:01,482 - DEBUG - STREAM b'pHYs' 3355 9
2024-10-14 13:49:01,482 - DEBUG - STREAM b'iTXt' 3376 471
2024-10-14 13:49:01,482 - DEBUG - STREAM b'iDOT' 3859 28
2024-10-14 13:49:01,482 - DEBUG - b'iDOT' 3859 28 (unknown)
2024-10-14 13:49:01,482 - DEBUG - STREAM b'IDAT' 3899 16384
2024-10-14 13:49:01,499 - DEBUG - tag: XResolution (282) - type: rational (5) Tag Location: 22 - Data Location: 62 - value: b'\x00\x00\x00\x90\x00\x00\x00\x01'
2024-10-14 13:49:01,499 - DEBUG - tag: YResolution (283) - type: rational (5) Tag Location: 34 - Data Location: 70 - value: b'\x00\x00\x00\x90\x00\x00\x00\x01'
2024-10-14 13:49:01,499 - DEBUG - tag: ResolutionUnit (296) - type: short (3) - value: b'\x00\x02'
2024-10-14 13:49:01,499 - DEBUG - tag: ExifIFD (34665) - type: long (4) - value: b'\x00\x00\x00N'
2024-10-14 13:49:01,500 - DEBUG - Error closing: Operation on closed image
2024-10-14 13:49:04,037 - DEBUG - Document content: ROUMANIE ROMAWI ROMANIA Carte CARTE De |Dentitate IDEnTITY D'iDENTITE seria TR Na 409131 CarD cNP 18...
2024-10-14 13:49:04,037 - ERROR - PII extraction error: name 'ChatCompletion' is not defined
2024-10-14 13:49:04,037 - DEBUG - Document content: ROUMANIE ROVIAINIA ROMANIA Carte Carte DE iDentitate IdEnTITY Didentite seala SS Nr 099994 Card CNP ...
2024-10-14 13:49:04,037 - ERROR - PII extraction error: name 'ChatCompletion' is not defined
2024-10-14 13:50:37,123 - WARNING - Neither CUDA nor MPS are available - defaulting to CPU. Note: This module is much faster with a GPU.
2024-10-14 13:50:38,379 - DEBUG - load_ssl_context verify=True cert=None trust_env=True http2=False
2024-10-14 13:50:38,380 - DEBUG - load_verify_locations cafile='D:\\deve\\contract_automation\\.venv\\Lib\\site-packages\\certifi\\cacert.pem'
2024-10-14 13:50:38,702 - DEBUG - Patching `client.chat.completions.create` with mode=<Mode.TOOLS: 'tool_call'>
2024-10-14 13:50:38,703 - DEBUG - Using proactor: IocpProactor
2024-10-14 13:50:38,709 - INFO - Template selected based on metadata: airbnb.txt
2024-10-14 13:50:38,725 - DEBUG - STREAM b'IHDR' 16 13
2024-10-14 13:50:38,725 - DEBUG - STREAM b'iCCP' 41 3152
2024-10-14 13:50:38,725 - DEBUG - iCCP profile name b'ICC Profile'
2024-10-14 13:50:38,725 - DEBUG - Compression method 0
2024-10-14 13:50:38,725 - DEBUG - STREAM b'eXIf' 3205 138
2024-10-14 13:50:38,725 - DEBUG - STREAM b'pHYs' 3355 9
2024-10-14 13:50:38,725 - DEBUG - STREAM b'iTXt' 3376 470
2024-10-14 13:50:38,725 - DEBUG - STREAM b'iDOT' 3858 28
2024-10-14 13:50:38,725 - DEBUG - b'iDOT' 3858 28 (unknown)
2024-10-14 13:50:38,725 - DEBUG - STREAM b'IDAT' 3898 16384
2024-10-14 13:50:38,726 - DEBUG - STREAM b'IHDR' 16 13
2024-10-14 13:50:38,726 - DEBUG - STREAM b'iCCP' 41 3152
2024-10-14 13:50:38,726 - DEBUG - iCCP profile name b'ICC Profile'
2024-10-14 13:50:38,726 - DEBUG - Compression method 0
2024-10-14 13:50:38,726 - DEBUG - STREAM b'eXIf' 3205 138
2024-10-14 13:50:38,726 - DEBUG - STREAM b'pHYs' 3355 9
2024-10-14 13:50:38,726 - DEBUG - STREAM b'iTXt' 3376 470
2024-10-14 13:50:38,726 - DEBUG - STREAM b'iDOT' 3858 28
2024-10-14 13:50:38,726 - DEBUG - b'iDOT' 3858 28 (unknown)
2024-10-14 13:50:38,726 - DEBUG - STREAM b'IDAT' 3898 16384
2024-10-14 13:50:38,735 - DEBUG - tag: XResolution (282) - type: rational (5) Tag Location: 22 - Data Location: 62 - value: b'\x00\x00\x00\x90\x00\x00\x00\x01'
2024-10-14 13:50:38,735 - DEBUG - tag: YResolution (283) - type: rational (5) Tag Location: 34 - Data Location: 70 - value: b'\x00\x00\x00\x90\x00\x00\x00\x01'
2024-10-14 13:50:38,735 - DEBUG - tag: ResolutionUnit (296) - type: short (3) - value: b'\x00\x02'
2024-10-14 13:50:38,735 - DEBUG - tag: ExifIFD (34665) - type: long (4) - value: b'\x00\x00\x00N'
2024-10-14 13:50:38,736 - DEBUG - Error closing: Operation on closed image
2024-10-14 13:50:40,725 - DEBUG - STREAM b'IHDR' 16 13
2024-10-14 13:50:40,726 - DEBUG - STREAM b'iCCP' 41 3152
2024-10-14 13:50:40,726 - DEBUG - iCCP profile name b'ICC Profile'
2024-10-14 13:50:40,726 - DEBUG - Compression method 0
2024-10-14 13:50:40,726 - DEBUG - STREAM b'eXIf' 3205 138
2024-10-14 13:50:40,726 - DEBUG - STREAM b'pHYs' 3355 9
2024-10-14 13:50:40,726 - DEBUG - STREAM b'iTXt' 3376 471
2024-10-14 13:50:40,726 - DEBUG - STREAM b'iDOT' 3859 28
2024-10-14 13:50:40,726 - DEBUG - b'iDOT' 3859 28 (unknown)
2024-10-14 13:50:40,726 - DEBUG - STREAM b'IDAT' 3899 16384
2024-10-14 13:50:40,726 - DEBUG - STREAM b'IHDR' 16 13
2024-10-14 13:50:40,726 - DEBUG - STREAM b'iCCP' 41 3152
2024-10-14 13:50:40,726 - DEBUG - iCCP profile name b'ICC Profile'
2024-10-14 13:50:40,726 - DEBUG - Compression method 0
2024-10-14 13:50:40,726 - DEBUG - STREAM b'eXIf' 3205 138
2024-10-14 13:50:40,726 - DEBUG - STREAM b'pHYs' 3355 9
2024-10-14 13:50:40,726 - DEBUG - STREAM b'iTXt' 3376 471
2024-10-14 13:50:40,726 - DEBUG - STREAM b'iDOT' 3859 28
2024-10-14 13:50:40,726 - DEBUG - b'iDOT' 3859 28 (unknown)
2024-10-14 13:50:40,726 - DEBUG - STREAM b'IDAT' 3899 16384
2024-10-14 13:50:40,743 - DEBUG - tag: XResolution (282) - type: rational (5) Tag Location: 22 - Data Location: 62 - value: b'\x00\x00\x00\x90\x00\x00\x00\x01'
2024-10-14 13:50:40,743 - DEBUG - tag: YResolution (283) - type: rational (5) Tag Location: 34 - Data Location: 70 - value: b'\x00\x00\x00\x90\x00\x00\x00\x01'
2024-10-14 13:50:40,743 - DEBUG - tag: ResolutionUnit (296) - type: short (3) - value: b'\x00\x02'
2024-10-14 13:50:40,743 - DEBUG - tag: ExifIFD (34665) - type: long (4) - value: b'\x00\x00\x00N'
2024-10-14 13:50:40,744 - DEBUG - Error closing: Operation on closed image
2024-10-14 13:50:43,238 - DEBUG - Document content: ROUMANIE ROMAWI ROMANIA Carte CARTE De |Dentitate IDEnTITY D'iDENTITE seria TR Na 409131 CarD cNP 18...
2024-10-14 13:50:43,239 - ERROR - PII extraction error: name 'ChatCompletion' is not defined
2024-10-14 13:50:43,239 - DEBUG - Document content: ROUMANIE ROVIAINIA ROMANIA Carte Carte DE iDentitate IdEnTITY Didentite seala SS Nr 099994 Card CNP ...
2024-10-14 13:50:43,240 - ERROR - PII extraction error: name 'ChatCompletion' is not defined
2024-10-14 13:52:20,852 - WARNING - Neither CUDA nor MPS are available - defaulting to CPU. Note: This module is much faster with a GPU.
2024-10-14 13:52:22,118 - DEBUG - load_ssl_context verify=True cert=None trust_env=True http2=False
2024-10-14 13:52:22,118 - DEBUG - load_verify_locations cafile='D:\\deve\\contract_automation\\.venv\\Lib\\site-packages\\certifi\\cacert.pem'
2024-10-14 13:52:22,439 - DEBUG - Patching `client.chat.completions.create` with mode=<Mode.TOOLS: 'tool_call'>
2024-10-14 13:52:22,439 - DEBUG - Using proactor: IocpProactor
2024-10-14 13:52:22,444 - INFO - Template selected based on metadata: airbnb.txt
2024-10-14 13:52:22,460 - DEBUG - STREAM b'IHDR' 16 13
2024-10-14 13:52:22,460 - DEBUG - STREAM b'iCCP' 41 3152
2024-10-14 13:52:22,460 - DEBUG - iCCP profile name b'ICC Profile'
2024-10-14 13:52:22,460 - DEBUG - Compression method 0
2024-10-14 13:52:22,461 - DEBUG - STREAM b'eXIf' 3205 138
2024-10-14 13:52:22,461 - DEBUG - STREAM b'pHYs' 3355 9
2024-10-14 13:52:22,461 - DEBUG - STREAM b'iTXt' 3376 470
2024-10-14 13:52:22,461 - DEBUG - STREAM b'iDOT' 3858 28
2024-10-14 13:52:22,461 - DEBUG - b'iDOT' 3858 28 (unknown)
2024-10-14 13:52:22,461 - DEBUG - STREAM b'IDAT' 3898 16384
2024-10-14 13:52:22,461 - DEBUG - STREAM b'IHDR' 16 13
2024-10-14 13:52:22,461 - DEBUG - STREAM b'iCCP' 41 3152
2024-10-14 13:52:22,461 - DEBUG - iCCP profile name b'ICC Profile'
2024-10-14 13:52:22,461 - DEBUG - Compression method 0
2024-10-14 13:52:22,462 - DEBUG - STREAM b'eXIf' 3205 138
2024-10-14 13:52:22,462 - DEBUG - STREAM b'pHYs' 3355 9
2024-10-14 13:52:22,462 - DEBUG - STREAM b'iTXt' 3376 470
2024-10-14 13:52:22,462 - DEBUG - STREAM b'iDOT' 3858 28
2024-10-14 13:52:22,462 - DEBUG - b'iDOT' 3858 28 (unknown)
2024-10-14 13:52:22,462 - DEBUG - STREAM b'IDAT' 3898 16384
2024-10-14 13:52:22,476 - DEBUG - tag: XResolution (282) - type: rational (5) Tag Location: 22 - Data Location: 62 - value: b'\x00\x00\x00\x90\x00\x00\x00\x01'
2024-10-14 13:52:22,476 - DEBUG - tag: YResolution (283) - type: rational (5) Tag Location: 34 - Data Location: 70 - value: b'\x00\x00\x00\x90\x00\x00\x00\x01'
2024-10-14 13:52:22,476 - DEBUG - tag: ResolutionUnit (296) - type: short (3) - value: b'\x00\x02'
2024-10-14 13:52:22,476 - DEBUG - tag: ExifIFD (34665) - type: long (4) - value: b'\x00\x00\x00N'
2024-10-14 13:52:22,477 - DEBUG - Error closing: Operation on closed image
2024-10-14 13:52:24,462 - DEBUG - STREAM b'IHDR' 16 13
2024-10-14 13:52:24,462 - DEBUG - STREAM b'iCCP' 41 3152
2024-10-14 13:52:24,462 - DEBUG - iCCP profile name b'ICC Profile'
2024-10-14 13:52:24,462 - DEBUG - Compression method 0
2024-10-14 13:52:24,462 - DEBUG - STREAM b'eXIf' 3205 138
2024-10-14 13:52:24,463 - DEBUG - STREAM b'pHYs' 3355 9
2024-10-14 13:52:24,463 - DEBUG - STREAM b'iTXt' 3376 471
2024-10-14 13:52:24,463 - DEBUG - STREAM b'iDOT' 3859 28
2024-10-14 13:52:24,463 - DEBUG - b'iDOT' 3859 28 (unknown)
2024-10-14 13:52:24,463 - DEBUG - STREAM b'IDAT' 3899 16384
2024-10-14 13:52:24,463 - DEBUG - STREAM b'IHDR' 16 13
2024-10-14 13:52:24,463 - DEBUG - STREAM b'iCCP' 41 3152
2024-10-14 13:52:24,463 - DEBUG - iCCP profile name b'ICC Profile'
2024-10-14 13:52:24,463 - DEBUG - Compression method 0
2024-10-14 13:52:24,463 - DEBUG - STREAM b'eXIf' 3205 138
2024-10-14 13:52:24,463 - DEBUG - STREAM b'pHYs' 3355 9
2024-10-14 13:52:24,463 - DEBUG - STREAM b'iTXt' 3376 471
2024-10-14 13:52:24,463 - DEBUG - STREAM b'iDOT' 3859 28
2024-10-14 13:52:24,463 - DEBUG - b'iDOT' 3859 28 (unknown)
2024-10-14 13:52:24,463 - DEBUG - STREAM b'IDAT' 3899 16384
2024-10-14 13:52:24,480 - DEBUG - tag: XResolution (282) - type: rational (5) Tag Location: 22 - Data Location: 62 - value: b'\x00\x00\x00\x90\x00\x00\x00\x01'
2024-10-14 13:52:24,481 - DEBUG - tag: YResolution (283) - type: rational (5) Tag Location: 34 - Data Location: 70 - value: b'\x00\x00\x00\x90\x00\x00\x00\x01'
2024-10-14 13:52:24,481 - DEBUG - tag: ResolutionUnit (296) - type: short (3) - value: b'\x00\x02'
2024-10-14 13:52:24,481 - DEBUG - tag: ExifIFD (34665) - type: long (4) - value: b'\x00\x00\x00N'
2024-10-14 13:52:24,481 - DEBUG - Error closing: Operation on closed image
2024-10-14 13:52:26,940 - DEBUG - Document content: ROUMANIE ROMAWI ROMANIA Carte CARTE De |Dentitate IDEnTITY D'iDENTITE seria TR Na 409131 CarD cNP 18...
2024-10-14 13:52:26,940 - ERROR - PII extraction error: name 'ChatCompletion' is not defined
2024-10-14 13:52:26,940 - DEBUG - Document content: ROUMANIE ROVIAINIA ROMANIA Carte Carte DE iDentitate IdEnTITY Didentite seala SS Nr 099994 Card CNP ...
2024-10-14 13:52:26,940 - ERROR - PII extraction error: name 'ChatCompletion' is not defined
2024-10-14 13:53:53,059 - WARNING - Neither CUDA nor MPS are available - defaulting to CPU. Note: This module is much faster with a GPU.
2024-10-14 13:53:54,339 - DEBUG - load_ssl_context verify=True cert=None trust_env=True http2=False
2024-10-14 13:53:54,339 - DEBUG - load_verify_locations cafile='D:\\deve\\contract_automation\\.venv\\Lib\\site-packages\\certifi\\cacert.pem'
2024-10-14 13:53:54,666 - DEBUG - Patching `client.chat.completions.create` with mode=<Mode.TOOLS: 'tool_call'>
2024-10-14 13:53:54,667 - DEBUG - Using proactor: IocpProactor
2024-10-14 13:53:54,671 - INFO - Template selected based on metadata: airbnb.txt
2024-10-14 13:53:54,686 - DEBUG - STREAM b'IHDR' 16 13
2024-10-14 13:53:54,686 - DEBUG - STREAM b'iCCP' 41 3152
2024-10-14 13:53:54,686 - DEBUG - iCCP profile name b'ICC Profile'
2024-10-14 13:53:54,686 - DEBUG - Compression method 0
2024-10-14 13:53:54,687 - DEBUG - STREAM b'eXIf' 3205 138
2024-10-14 13:53:54,687 - DEBUG - STREAM b'pHYs' 3355 9
2024-10-14 13:53:54,687 - DEBUG - STREAM b'iTXt' 3376 470
2024-10-14 13:53:54,687 - DEBUG - STREAM b'iDOT' 3858 28
2024-10-14 13:53:54,687 - DEBUG - b'iDOT' 3858 28 (unknown)
2024-10-14 13:53:54,687 - DEBUG - STREAM b'IDAT' 3898 16384
2024-10-14 13:53:54,687 - DEBUG - STREAM b'IHDR' 16 13
2024-10-14 13:53:54,687 - DEBUG - STREAM b'iCCP' 41 3152
2024-10-14 13:53:54,687 - DEBUG - iCCP profile name b'ICC Profile'
2024-10-14 13:53:54,687 - DEBUG - Compression method 0
2024-10-14 13:53:54,687 - DEBUG - STREAM b'eXIf' 3205 138
2024-10-14 13:53:54,687 - DEBUG - STREAM b'pHYs' 3355 9
2024-10-14 13:53:54,687 - DEBUG - STREAM b'iTXt' 3376 470
2024-10-14 13:53:54,687 - DEBUG - STREAM b'iDOT' 3858 28
2024-10-14 13:53:54,687 - DEBUG - b'iDOT' 3858 28 (unknown)
2024-10-14 13:53:54,687 - DEBUG - STREAM b'IDAT' 3898 16384
2024-10-14 13:53:54,697 - DEBUG - tag: XResolution (282) - type: rational (5) Tag Location: 22 - Data Location: 62 - value: b'\x00\x00\x00\x90\x00\x00\x00\x01'
2024-10-14 13:53:54,697 - DEBUG - tag: YResolution (283) - type: rational (5) Tag Location: 34 - Data Location: 70 - value: b'\x00\x00\x00\x90\x00\x00\x00\x01'
2024-10-14 13:53:54,697 - DEBUG - tag: ResolutionUnit (296) - type: short (3) - value: b'\x00\x02'
2024-10-14 13:53:54,697 - DEBUG - tag: ExifIFD (34665) - type: long (4) - value: b'\x00\x00\x00N'
2024-10-14 13:53:54,698 - DEBUG - Error closing: Operation on closed image
2024-10-14 13:53:56,715 - DEBUG - STREAM b'IHDR' 16 13
2024-10-14 13:53:56,715 - DEBUG - STREAM b'iCCP' 41 3152
2024-10-14 13:53:56,715 - DEBUG - iCCP profile name b'ICC Profile'
2024-10-14 13:53:56,715 - DEBUG - Compression method 0
2024-10-14 13:53:56,715 - DEBUG - STREAM b'eXIf' 3205 138
2024-10-14 13:53:56,715 - DEBUG - STREAM b'pHYs' 3355 9
2024-10-14 13:53:56,715 - DEBUG - STREAM b'iTXt' 3376 471
2024-10-14 13:53:56,715 - DEBUG - STREAM b'iDOT' 3859 28
2024-10-14 13:53:56,715 - DEBUG - b'iDOT' 3859 28 (unknown)
2024-10-14 13:53:56,716 - DEBUG - STREAM b'IDAT' 3899 16384
2024-10-14 13:53:56,716 - DEBUG - STREAM b'IHDR' 16 13
2024-10-14 13:53:56,716 - DEBUG - STREAM b'iCCP' 41 3152
2024-10-14 13:53:56,716 - DEBUG - iCCP profile name b'ICC Profile'
2024-10-14 13:53:56,716 - DEBUG - Compression method 0
2024-10-14 13:53:56,716 - DEBUG - STREAM b'eXIf' 3205 138
2024-10-14 13:53:56,716 - DEBUG - STREAM b'pHYs' 3355 9
2024-10-14 13:53:56,716 - DEBUG - STREAM b'iTXt' 3376 471
2024-10-14 13:53:56,716 - DEBUG - STREAM b'iDOT' 3859 28
2024-10-14 13:53:56,716 - DEBUG - b'iDOT' 3859 28 (unknown)
2024-10-14 13:53:56,716 - DEBUG - STREAM b'IDAT' 3899 16384
2024-10-14 13:53:56,733 - DEBUG - tag: XResolution (282) - type: rational (5) Tag Location: 22 - Data Location: 62 - value: b'\x00\x00\x00\x90\x00\x00\x00\x01'
2024-10-14 13:53:56,733 - DEBUG - tag: YResolution (283) - type: rational (5) Tag Location: 34 - Data Location: 70 - value: b'\x00\x00\x00\x90\x00\x00\x00\x01'
2024-10-14 13:53:56,733 - DEBUG - tag: ResolutionUnit (296) - type: short (3) - value: b'\x00\x02'
2024-10-14 13:53:56,733 - DEBUG - tag: ExifIFD (34665) - type: long (4) - value: b'\x00\x00\x00N'
2024-10-14 13:53:56,734 - DEBUG - Error closing: Operation on closed image
2024-10-14 13:53:59,300 - DEBUG - Document content: ROUMANIE ROMAWI ROMANIA Carte CARTE De |Dentitate IDEnTITY D'iDENTITE seria TR Na 409131 CarD cNP 18...
2024-10-14 13:53:59,300 - ERROR - PII extraction error: name 'ChatCompletion' is not defined
2024-10-14 13:53:59,300 - DEBUG - Document content: ROUMANIE ROVIAINIA ROMANIA Carte Carte DE iDentitate IdEnTITY Didentite seala SS Nr 099994 Card CNP ...
2024-10-14 13:53:59,300 - ERROR - PII extraction error: name 'ChatCompletion' is not defined
2024-10-14 13:54:42,629 - WARNING - Neither CUDA nor MPS are available - defaulting to CPU. Note: This module is much faster with a GPU.
2024-10-14 13:54:43,884 - DEBUG - load_ssl_context verify=True cert=None trust_env=True http2=False
2024-10-14 13:54:43,885 - DEBUG - load_verify_locations cafile='D:\\deve\\contract_automation\\.venv\\Lib\\site-packages\\certifi\\cacert.pem'
2024-10-14 13:54:44,206 - DEBUG - Patching `client.chat.completions.create` with mode=<Mode.TOOLS: 'tool_call'>
2024-10-14 13:54:44,207 - DEBUG - Using proactor: IocpProactor
2024-10-14 13:54:44,211 - INFO - Template selected based on metadata: airbnb.txt
2024-10-14 13:54:44,227 - DEBUG - STREAM b'IHDR' 16 13
2024-10-14 13:54:44,227 - DEBUG - STREAM b'iCCP' 41 3152
2024-10-14 13:54:44,227 - DEBUG - iCCP profile name b'ICC Profile'
2024-10-14 13:54:44,227 - DEBUG - Compression method 0
2024-10-14 13:54:44,227 - DEBUG - STREAM b'eXIf' 3205 138
2024-10-14 13:54:44,227 - DEBUG - STREAM b'pHYs' 3355 9
2024-10-14 13:54:44,227 - DEBUG - STREAM b'iTXt' 3376 470
2024-10-14 13:54:44,227 - DEBUG - STREAM b'iDOT' 3858 28
2024-10-14 13:54:44,227 - DEBUG - b'iDOT' 3858 28 (unknown)
2024-10-14 13:54:44,227 - DEBUG - STREAM b'IDAT' 3898 16384
2024-10-14 13:54:44,227 - DEBUG - STREAM b'IHDR' 16 13
2024-10-14 13:54:44,227 - DEBUG - STREAM b'iCCP' 41 3152
2024-10-14 13:54:44,227 - DEBUG - iCCP profile name b'ICC Profile'
2024-10-14 13:54:44,227 - DEBUG - Compression method 0
2024-10-14 13:54:44,227 - DEBUG - STREAM b'eXIf' 3205 138
2024-10-14 13:54:44,228 - DEBUG - STREAM b'pHYs' 3355 9
2024-10-14 13:54:44,228 - DEBUG - STREAM b'iTXt' 3376 470
2024-10-14 13:54:44,228 - DEBUG - STREAM b'iDOT' 3858 28
2024-10-14 13:54:44,228 - DEBUG - b'iDOT' 3858 28 (unknown)
2024-10-14 13:54:44,228 - DEBUG - STREAM b'IDAT' 3898 16384
2024-10-14 13:54:44,239 - DEBUG - tag: XResolution (282) - type: rational (5) Tag Location: 22 - Data Location: 62 - value: b'\x00\x00\x00\x90\x00\x00\x00\x01'
2024-10-14 13:54:44,239 - DEBUG - tag: YResolution (283) - type: rational (5) Tag Location: 34 - Data Location: 70 - value: b'\x00\x00\x00\x90\x00\x00\x00\x01'
2024-10-14 13:54:44,239 - DEBUG - tag: ResolutionUnit (296) - type: short (3) - value: b'\x00\x02'
2024-10-14 13:54:44,239 - DEBUG - tag: ExifIFD (34665) - type: long (4) - value: b'\x00\x00\x00N'
2024-10-14 13:54:44,240 - DEBUG - Error closing: Operation on closed image
2024-10-14 13:54:46,263 - DEBUG - STREAM b'IHDR' 16 13
2024-10-14 13:54:46,264 - DEBUG - STREAM b'iCCP' 41 3152
2024-10-14 13:54:46,264 - DEBUG - iCCP profile name b'ICC Profile'
2024-10-14 13:54:46,264 - DEBUG - Compression method 0
2024-10-14 13:54:46,264 - DEBUG - STREAM b'eXIf' 3205 138
2024-10-14 13:54:46,264 - DEBUG - STREAM b'pHYs' 3355 9
2024-10-14 13:54:46,264 - DEBUG - STREAM b'iTXt' 3376 471
2024-10-14 13:54:46,264 - DEBUG - STREAM b'iDOT' 3859 28
2024-10-14 13:54:46,264 - DEBUG - b'iDOT' 3859 28 (unknown)
2024-10-14 13:54:46,264 - DEBUG - STREAM b'IDAT' 3899 16384
2024-10-14 13:54:46,264 - DEBUG - STREAM b'IHDR' 16 13
2024-10-14 13:54:46,264 - DEBUG - STREAM b'iCCP' 41 3152
2024-10-14 13:54:46,264 - DEBUG - iCCP profile name b'ICC Profile'
2024-10-14 13:54:46,264 - DEBUG - Compression method 0
2024-10-14 13:54:46,264 - DEBUG - STREAM b'eXIf' 3205 138
2024-10-14 13:54:46,264 - DEBUG - STREAM b'pHYs' 3355 9
2024-10-14 13:54:46,264 - DEBUG - STREAM b'iTXt' 3376 471
2024-10-14 13:54:46,264 - DEBUG - STREAM b'iDOT' 3859 28
2024-10-14 13:54:46,264 - DEBUG - b'iDOT' 3859 28 (unknown)
2024-10-14 13:54:46,264 - DEBUG - STREAM b'IDAT' 3899 16384
2024-10-14 13:54:46,281 - DEBUG - tag: XResolution (282) - type: rational (5) Tag Location: 22 - Data Location: 62 - value: b'\x00\x00\x00\x90\x00\x00\x00\x01'
2024-10-14 13:54:46,281 - DEBUG - tag: YResolution (283) - type: rational (5) Tag Location: 34 - Data Location: 70 - value: b'\x00\x00\x00\x90\x00\x00\x00\x01'
2024-10-14 13:54:46,281 - DEBUG - tag: ResolutionUnit (296) - type: short (3) - value: b'\x00\x02'
2024-10-14 13:54:46,282 - DEBUG - tag: ExifIFD (34665) - type: long (4) - value: b'\x00\x00\x00N'
2024-10-14 13:54:46,282 - DEBUG - Error closing: Operation on closed image
2024-10-14 13:54:48,819 - DEBUG - Document content: ROUMANIE ROMAWI ROMANIA Carte CARTE De |Dentitate IDEnTITY D'iDENTITE seria TR Na 409131 CarD cNP 18...
2024-10-14 13:54:48,819 - ERROR - PII extraction error: name 'ChatCompletion' is not defined
2024-10-14 13:54:48,819 - DEBUG - Document content: ROUMANIE ROVIAINIA ROMANIA Carte Carte DE iDentitate IdEnTITY Didentite seala SS Nr 099994 Card CNP ...
2024-10-14 13:54:48,819 - ERROR - PII extraction error: name 'ChatCompletion' is not defined
2024-10-14 13:56:16,555 - WARNING - Neither CUDA nor MPS are available - defaulting to CPU. Note: This module is much faster with a GPU.
2024-10-14 13:56:17,811 - DEBUG - load_ssl_context verify=True cert=None trust_env=True http2=False
2024-10-14 13:56:17,811 - DEBUG - load_verify_locations cafile='D:\\deve\\contract_automation\\.venv\\Lib\\site-packages\\certifi\\cacert.pem'
2024-10-14 13:56:18,141 - DEBUG - Patching `client.chat.completions.create` with mode=<Mode.TOOLS: 'tool_call'>
2024-10-14 13:56:18,142 - DEBUG - Using proactor: IocpProactor
2024-10-14 13:56:18,162 - DEBUG - STREAM b'IHDR' 16 13
2024-10-14 13:56:18,163 - DEBUG - STREAM b'iCCP' 41 3152
2024-10-14 13:56:18,163 - DEBUG - iCCP profile name b'ICC Profile'
2024-10-14 13:56:18,163 - DEBUG - Compression method 0
2024-10-14 13:56:18,163 - DEBUG - STREAM b'eXIf' 3205 138
2024-10-14 13:56:18,163 - DEBUG - STREAM b'pHYs' 3355 9
2024-10-14 13:56:18,163 - DEBUG - STREAM b'iTXt' 3376 470
2024-10-14 13:56:18,163 - DEBUG - STREAM b'iDOT' 3858 28
2024-10-14 13:56:18,163 - DEBUG - b'iDOT' 3858 28 (unknown)
2024-10-14 13:56:18,163 - DEBUG - STREAM b'IDAT' 3898 16384
2024-10-14 13:56:18,163 - DEBUG - STREAM b'IHDR' 16 13
2024-10-14 13:56:18,163 - DEBUG - STREAM b'iCCP' 41 3152
2024-10-14 13:56:18,163 - DEBUG - iCCP profile name b'ICC Profile'
2024-10-14 13:56:18,163 - DEBUG - Compression method 0
2024-10-14 13:56:18,163 - DEBUG - STREAM b'eXIf' 3205 138
2024-10-14 13:56:18,163 - DEBUG - STREAM b'pHYs' 3355 9
2024-10-14 13:56:18,163 - DEBUG - STREAM b'iTXt' 3376 470
2024-10-14 13:56:18,163 - DEBUG - STREAM b'iDOT' 3858 28
2024-10-14 13:56:18,163 - DEBUG - b'iDOT' 3858 28 (unknown)
2024-10-14 13:56:18,163 - DEBUG - STREAM b'IDAT' 3898 16384
2024-10-14 13:56:18,174 - DEBUG - tag: XResolution (282) - type: rational (5) Tag Location: 22 - Data Location: 62 - value: b'\x00\x00\x00\x90\x00\x00\x00\x01'
2024-10-14 13:56:18,174 - DEBUG - tag: YResolution (283) - type: rational (5) Tag Location: 34 - Data Location: 70 - value: b'\x00\x00\x00\x90\x00\x00\x00\x01'
2024-10-14 13:56:18,174 - DEBUG - tag: ResolutionUnit (296) - type: short (3) - value: b'\x00\x02'
2024-10-14 13:56:18,174 - DEBUG - tag: ExifIFD (34665) - type: long (4) - value: b'\x00\x00\x00N'
2024-10-14 13:56:18,174 - DEBUG - Error closing: Operation on closed image
2024-10-14 13:56:20,211 - DEBUG - STREAM b'IHDR' 16 13
2024-10-14 13:56:20,211 - DEBUG - STREAM b'iCCP' 41 3152
2024-10-14 13:56:20,211 - DEBUG - iCCP profile name b'ICC Profile'
2024-10-14 13:56:20,211 - DEBUG - Compression method 0
2024-10-14 13:56:20,211 - DEBUG - STREAM b'eXIf' 3205 138
2024-10-14 13:56:20,211 - DEBUG - STREAM b'pHYs' 3355 9
2024-10-14 13:56:20,211 - DEBUG - STREAM b'iTXt' 3376 471
2024-10-14 13:56:20,211 - DEBUG - STREAM b'iDOT' 3859 28
2024-10-14 13:56:20,211 - DEBUG - b'iDOT' 3859 28 (unknown)
2024-10-14 13:56:20,211 - DEBUG - STREAM b'IDAT' 3899 16384
2024-10-14 13:56:20,211 - DEBUG - STREAM b'IHDR' 16 13
2024-10-14 13:56:20,211 - DEBUG - STREAM b'iCCP' 41 3152
2024-10-14 13:56:20,211 - DEBUG - iCCP profile name b'ICC Profile'
2024-10-14 13:56:20,211 - DEBUG - Compression method 0
2024-10-14 13:56:20,211 - DEBUG - STREAM b'eXIf' 3205 138
2024-10-14 13:56:20,212 - DEBUG - STREAM b'pHYs' 3355 9
2024-10-14 13:56:20,212 - DEBUG - STREAM b'iTXt' 3376 471
2024-10-14 13:56:20,212 - DEBUG - STREAM b'iDOT' 3859 28
2024-10-14 13:56:20,212 - DEBUG - b'iDOT' 3859 28 (unknown)
2024-10-14 13:56:20,212 - DEBUG - STREAM b'IDAT' 3899 16384
2024-10-14 13:56:20,229 - DEBUG - tag: XResolution (282) - type: rational (5) Tag Location: 22 - Data Location: 62 - value: b'\x00\x00\x00\x90\x00\x00\x00\x01'
2024-10-14 13:56:20,229 - DEBUG - tag: YResolution (283) - type: rational (5) Tag Location: 34 - Data Location: 70 - value: b'\x00\x00\x00\x90\x00\x00\x00\x01'
2024-10-14 13:56:20,229 - DEBUG - tag: ResolutionUnit (296) - type: short (3) - value: b'\x00\x02'
2024-10-14 13:56:20,229 - DEBUG - tag: ExifIFD (34665) - type: long (4) - value: b'\x00\x00\x00N'
2024-10-14 13:56:20,230 - DEBUG - Error closing: Operation on closed image
2024-10-14 13:56:22,762 - DEBUG - Document content: ROUMANIE ROMAWI ROMANIA Carte CARTE De |Dentitate IDEnTITY D'iDENTITE seria TR Na 409131 CarD cNP 18...
2024-10-14 13:56:22,769 - DEBUG - Instructor Request: mode.value='tool_call', response_model=<class 'models.PIIData'>, new_kwargs={'model': 'gpt-4', 'messages': [{'role': 'system', 'content': '\nYou are an AI agent specializing in contract creation and personal information extraction. \n\nYour role is:\n 1. Guide the process of extracting information from documents..\n 2. Verifying the extracted information with human input.\n 3. Identifying parties. \n 4. Constructing a contract. \n\n\nFollow the workflow precisely and ask for human input when needed.\n\n'}, {'role': 'user', 'content': "Extract the name and address from the given text:\n\nROUMANIE ROMAWI ROMANIA Carte CARTE De |Dentitate IDEnTITY D'iDENTITE seria TR Na 409131 CarD cNP 1891113341181 Nume/Nom/Last name T525M ISPILANTE Prenume/Prenom/First namo SENTIMENT BRUSLI Cetatenle/Nallonallte/Nallonallly Sox SexeiSox Romn\u0103 ROU M Loc nastere/Liou do naissancelPlace ol birth Or\u0219. Videle Jud.Teleorman Dom IlulAdresse/Addrass Videle Jud: Teleorman Sos. Giurgiului nr.1 695 TR Emisa dolDelivree parlIssuad by ValabilltatelValldlte Valldlty SPCLEP Videle 04.11.11-13.11.2018 IDROUISPILANTE<<SENTIMENT <BRUSLI<<<< TR409131<0R0u8911137M181113513411813 Or\u0219:"}], 'tools': [{'type': 'function', 'function': {'name': 'PIIData', 'description': 'Correctly extracted `PIIData` with all the required parameters with correct types', 'parameters': {'properties': {'name': {'description': 'Full name of the person', 'title': 'Name', 'type': 'string'}, 'address': {'description': 'Residential address of the person', 'title': 'Address', 'type': 'string'}}, 'required': ['address', 'name'], 'type': 'object'}}}], 'tool_choice': {'type': 'function', 'function': {'name': 'PIIData'}}}
2024-10-14 13:56:22,770 - DEBUG - max_retries: 1
2024-10-14 13:56:22,773 - DEBUG - Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'json_data': {'messages': [{'role': 'system', 'content': '\nYou are an AI agent specializing in contract creation and personal information extraction. \n\nYour role is:\n 1. Guide the process of extracting information from documents..\n 2. Verifying the extracted information with human input.\n 3. Identifying parties. \n 4. Constructing a contract. \n\n\nFollow the workflow precisely and ask for human input when needed.\n\n'}, {'role': 'user', 'content': "Extract the name and address from the given text:\n\nROUMANIE ROMAWI ROMANIA Carte CARTE De |Dentitate IDEnTITY D'iDENTITE seria TR Na 409131 CarD cNP 1891113341181 Nume/Nom/Last name T525M ISPILANTE Prenume/Prenom/First namo SENTIMENT BRUSLI Cetatenle/Nallonallte/Nallonallly Sox SexeiSox Romn\u0103 ROU M Loc nastere/Liou do naissancelPlace ol birth Or\u0219. Videle Jud.Teleorman Dom IlulAdresse/Addrass Videle Jud: Teleorman Sos. Giurgiului nr.1 695 TR Emisa dolDelivree parlIssuad by ValabilltatelValldlte Valldlty SPCLEP Videle 04.11.11-13.11.2018 IDROUISPILANTE<<SENTIMENT <BRUSLI<<<< TR409131<0R0u8911137M181113513411813 Or\u0219:"}], 'model': 'gpt-4', 'tool_choice': {'type': 'function', 'function': {'name': 'PIIData'}}, 'tools': [{'type': 'function', 'function': {'name': 'PIIData', 'description': 'Correctly extracted `PIIData` with all the required parameters with correct types', 'parameters': {'properties': {'name': {'description': 'Full name of the person', 'title': 'Name', 'type': 'string'}, 'address': {'description': 'Residential address of the person', 'title': 'Address', 'type': 'string'}}, 'required': ['address', 'name'], 'type': 'object'}}}]}}
2024-10-14 13:56:22,812 - DEBUG - Sending HTTP Request: POST https://api.openai.com/v1/chat/completions
2024-10-14 13:56:22,812 - DEBUG - connect_tcp.started host='api.openai.com' port=443 local_address=None timeout=5.0 socket_options=None
2024-10-14 13:56:22,828 - DEBUG - connect_tcp.complete return_value=<httpcore._backends.sync.SyncStream object at 0x000002059C29E510>
2024-10-14 13:56:22,828 - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x000002059C0F1BD0> server_hostname='api.openai.com' timeout=5.0
2024-10-14 13:56:22,840 - DEBUG - start_tls.complete return_value=<httpcore._backends.sync.SyncStream object at 0x000002059C29E240>
2024-10-14 13:56:22,840 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-10-14 13:56:22,840 - DEBUG - send_request_headers.complete
2024-10-14 13:56:22,840 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-10-14 13:56:22,840 - DEBUG - send_request_body.complete
2024-10-14 13:56:22,840 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-10-14 13:56:25,264 - DEBUG - receive_response_headers.failed exception=KeyboardInterrupt()
2024-10-14 13:56:25,265 - DEBUG - response_closed.started
2024-10-14 13:56:25,265 - DEBUG - response_closed.complete
2024-10-14 13:56:25,478 - ERROR - Task exception was never retrieved
future: <Task finished name='Task-1' coro=<agent_workflow() done, defined at D:\deve\contract_automation\src\main.py:25> exception=KeyboardInterrupt()>
Traceback (most recent call last):
  File "D:\deve\contract_automation\src\main.py", line 107, in <module>
    asyncio.run(agent_workflow())
  File "D:\deve\contract_automation\.venv\Lib\site-packages\nest_asyncio.py", line 30, in run
    return loop.run_until_complete(task)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\deve\contract_automation\.venv\Lib\site-packages\nest_asyncio.py", line 92, in run_until_complete
    self._run_once()
  File "D:\deve\contract_automation\.venv\Lib\site-packages\nest_asyncio.py", line 133, in _run_once
    handle._run()
  File "C:\Users\neuro\.rye\py\cpython@3.12.0\Lib\asyncio\events.py", line 84, in _run
    self._context.run(self._callback, *self._args)
  File "C:\Users\neuro\.rye\py\cpython@3.12.0\Lib\asyncio\tasks.py", line 386, in __wakeup
    self.__step()
  File "C:\Users\neuro\.rye\py\cpython@3.12.0\Lib\asyncio\tasks.py", line 293, in __step
    self.__step_run_and_handle_result(exc)
  File "C:\Users\neuro\.rye\py\cpython@3.12.0\Lib\asyncio\tasks.py", line 304, in __step_run_and_handle_result
    result = coro.send(None)
             ^^^^^^^^^^^^^^^
  File "D:\deve\contract_automation\src\main.py", line 42, in agent_workflow
    pii = extract_pii(text)
          ^^^^^^^^^^^^^^^^^
  File "D:\deve\contract_automation\src\ai_functions.py", line 109, in extract_pii
    return client.chat.completions.create(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\deve\contract_automation\.venv\Lib\site-packages\instructor\patch.py", line 291, in new_create_sync
    response = retry_sync(
               ^^^^^^^^^^^
  File "D:\deve\contract_automation\.venv\Lib\site-packages\instructor\retry.py", line 189, in retry_sync
    for attempt in max_retries:
  File "D:\deve\contract_automation\.venv\Lib\site-packages\tenacity\__init__.py", line 443, in __iter__
    do = self.iter(retry_state=retry_state)
         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\deve\contract_automation\.venv\Lib\site-packages\tenacity\__init__.py", line 376, in iter
    result = action(retry_state)
             ^^^^^^^^^^^^^^^^^^^
  File "D:\deve\contract_automation\.venv\Lib\site-packages\tenacity\__init__.py", line 398, in <lambda>
    self._add_action_func(lambda rs: rs.outcome.result())
                                     ^^^^^^^^^^^^^^^^^^^
  File "C:\Users\neuro\.rye\py\cpython@3.12.0\Lib\concurrent\futures\_base.py", line 449, in result
    return self.__get_result()
           ^^^^^^^^^^^^^^^^^^^
  File "C:\Users\neuro\.rye\py\cpython@3.12.0\Lib\concurrent\futures\_base.py", line 401, in __get_result
    raise self._exception
  File "D:\deve\contract_automation\.venv\Lib\site-packages\instructor\retry.py", line 192, in retry_sync
    response = func(*args, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^
  File "D:\deve\contract_automation\.venv\Lib\site-packages\openai\_utils\_utils.py", line 274, in wrapper
    return func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^
  File "D:\deve\contract_automation\.venv\Lib\site-packages\openai\resources\chat\completions.py", line 742, in create
    return self._post(
           ^^^^^^^^^^^
  File "D:\deve\contract_automation\.venv\Lib\site-packages\openai\_base_client.py", line 1270, in post
    return cast(ResponseT, self.request(cast_to, opts, stream=stream, stream_cls=stream_cls))
                           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\deve\contract_automation\.venv\Lib\site-packages\openai\_base_client.py", line 947, in request
    return self._request(
           ^^^^^^^^^^^^^^
  File "D:\deve\contract_automation\.venv\Lib\site-packages\openai\_base_client.py", line 983, in _request
    response = self._client.send(
               ^^^^^^^^^^^^^^^^^^
  File "D:\deve\contract_automation\.venv\Lib\site-packages\httpx\_client.py", line 926, in send
    response = self._send_handling_auth(
               ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\deve\contract_automation\.venv\Lib\site-packages\httpx\_client.py", line 954, in _send_handling_auth
    response = self._send_handling_redirects(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\deve\contract_automation\.venv\Lib\site-packages\httpx\_client.py", line 991, in _send_handling_redirects
    response = self._send_single_request(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\deve\contract_automation\.venv\Lib\site-packages\httpx\_client.py", line 1027, in _send_single_request
    response = transport.handle_request(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\deve\contract_automation\.venv\Lib\site-packages\httpx\_transports\default.py", line 236, in handle_request
    resp = self._pool.handle_request(req)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\deve\contract_automation\.venv\Lib\site-packages\httpcore\_sync\connection_pool.py", line 216, in handle_request
    raise exc from None
  File "D:\deve\contract_automation\.venv\Lib\site-packages\httpcore\_sync\connection_pool.py", line 196, in handle_request
    response = connection.handle_request(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\deve\contract_automation\.venv\Lib\site-packages\httpcore\_sync\connection.py", line 101, in handle_request
    return self._connection.handle_request(request)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\deve\contract_automation\.venv\Lib\site-packages\httpcore\_sync\http11.py", line 143, in handle_request
    raise exc
  File "D:\deve\contract_automation\.venv\Lib\site-packages\httpcore\_sync\http11.py", line 113, in handle_request
    ) = self._receive_response_headers(**kwargs)
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\deve\contract_automation\.venv\Lib\site-packages\httpcore\_sync\http11.py", line 186, in _receive_response_headers
    event = self._receive_event(timeout=timeout)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\deve\contract_automation\.venv\Lib\site-packages\httpcore\_sync\http11.py", line 224, in _receive_event
    data = self._network_stream.read(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\deve\contract_automation\.venv\Lib\site-packages\httpcore\_backends\sync.py", line 126, in read
    return self._sock.recv(max_bytes)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\neuro\.rye\py\cpython@3.12.0\Lib\ssl.py", line 1234, in recv
    return self.read(buflen)
           ^^^^^^^^^^^^^^^^^
  File "C:\Users\neuro\.rye\py\cpython@3.12.0\Lib\ssl.py", line 1107, in read
    return self._sslobj.read(len)
           ^^^^^^^^^^^^^^^^^^^^^^
KeyboardInterrupt
2024-10-14 13:57:55,787 - WARNING - Neither CUDA nor MPS are available - defaulting to CPU. Note: This module is much faster with a GPU.
2024-10-14 13:57:57,051 - DEBUG - load_ssl_context verify=True cert=None trust_env=True http2=False
2024-10-14 13:57:57,051 - DEBUG - load_verify_locations cafile='D:\\deve\\contract_automation\\.venv\\Lib\\site-packages\\certifi\\cacert.pem'
2024-10-14 13:57:57,370 - DEBUG - Patching `client.chat.completions.create` with mode=<Mode.TOOLS: 'tool_call'>
2024-10-14 13:59:58,776 - WARNING - Neither CUDA nor MPS are available - defaulting to CPU. Note: This module is much faster with a GPU.
2024-10-14 14:00:00,038 - DEBUG - load_ssl_context verify=True cert=None trust_env=True http2=False
2024-10-14 14:00:00,039 - DEBUG - load_verify_locations cafile='D:\\deve\\contract_automation\\.venv\\Lib\\site-packages\\certifi\\cacert.pem'
2024-10-14 14:00:00,362 - DEBUG - Patching `client.chat.completions.create` with mode=<Mode.TOOLS: 'tool_call'>
2024-10-14 14:01:57,404 - WARNING - Neither CUDA nor MPS are available - defaulting to CPU. Note: This module is much faster with a GPU.
2024-10-14 14:01:58,665 - DEBUG - load_ssl_context verify=True cert=None trust_env=True http2=False
2024-10-14 14:01:58,666 - DEBUG - load_verify_locations cafile='D:\\deve\\contract_automation\\.venv\\Lib\\site-packages\\certifi\\cacert.pem'
2024-10-14 14:01:58,984 - DEBUG - Patching `client.chat.completions.create` with mode=<Mode.TOOLS: 'tool_call'>
2024-10-14 14:03:20,198 - WARNING - Neither CUDA nor MPS are available - defaulting to CPU. Note: This module is much faster with a GPU.
2024-10-14 14:03:21,461 - DEBUG - load_ssl_context verify=True cert=None trust_env=True http2=False
2024-10-14 14:03:21,461 - DEBUG - load_verify_locations cafile='D:\\deve\\contract_automation\\.venv\\Lib\\site-packages\\certifi\\cacert.pem'
2024-10-14 14:03:21,777 - DEBUG - Patching `client.chat.completions.create` with mode=<Mode.TOOLS: 'tool_call'>
2024-10-14 14:03:21,777 - DEBUG - Using proactor: IocpProactor
2024-10-14 14:03:21,796 - DEBUG - STREAM b'IHDR' 16 13
2024-10-14 14:03:21,797 - DEBUG - STREAM b'iCCP' 41 3152
2024-10-14 14:03:21,797 - DEBUG - iCCP profile name b'ICC Profile'
2024-10-14 14:03:21,797 - DEBUG - Compression method 0
2024-10-14 14:03:21,797 - DEBUG - STREAM b'eXIf' 3205 138
2024-10-14 14:03:21,797 - DEBUG - STREAM b'pHYs' 3355 9
2024-10-14 14:03:21,797 - DEBUG - STREAM b'iTXt' 3376 470
2024-10-14 14:03:21,797 - DEBUG - STREAM b'iDOT' 3858 28
2024-10-14 14:03:21,797 - DEBUG - b'iDOT' 3858 28 (unknown)
2024-10-14 14:03:21,797 - DEBUG - STREAM b'IDAT' 3898 16384
2024-10-14 14:03:21,797 - DEBUG - STREAM b'IHDR' 16 13
2024-10-14 14:03:21,797 - DEBUG - STREAM b'iCCP' 41 3152
2024-10-14 14:03:21,797 - DEBUG - iCCP profile name b'ICC Profile'
2024-10-14 14:03:21,797 - DEBUG - Compression method 0
2024-10-14 14:03:21,797 - DEBUG - STREAM b'eXIf' 3205 138
2024-10-14 14:03:21,797 - DEBUG - STREAM b'pHYs' 3355 9
2024-10-14 14:03:21,797 - DEBUG - STREAM b'iTXt' 3376 470
2024-10-14 14:03:21,797 - DEBUG - STREAM b'iDOT' 3858 28
2024-10-14 14:03:21,797 - DEBUG - b'iDOT' 3858 28 (unknown)
2024-10-14 14:03:21,797 - DEBUG - STREAM b'IDAT' 3898 16384
2024-10-14 14:03:21,807 - DEBUG - tag: XResolution (282) - type: rational (5) Tag Location: 22 - Data Location: 62 - value: b'\x00\x00\x00\x90\x00\x00\x00\x01'
2024-10-14 14:03:21,807 - DEBUG - tag: YResolution (283) - type: rational (5) Tag Location: 34 - Data Location: 70 - value: b'\x00\x00\x00\x90\x00\x00\x00\x01'
2024-10-14 14:03:21,807 - DEBUG - tag: ResolutionUnit (296) - type: short (3) - value: b'\x00\x02'
2024-10-14 14:03:21,807 - DEBUG - tag: ExifIFD (34665) - type: long (4) - value: b'\x00\x00\x00N'
2024-10-14 14:03:21,808 - DEBUG - Error closing: Operation on closed image
2024-10-14 14:03:23,870 - DEBUG - STREAM b'IHDR' 16 13
2024-10-14 14:03:23,870 - DEBUG - STREAM b'iCCP' 41 3152
2024-10-14 14:03:23,870 - DEBUG - iCCP profile name b'ICC Profile'
2024-10-14 14:03:23,870 - DEBUG - Compression method 0
2024-10-14 14:03:23,870 - DEBUG - STREAM b'eXIf' 3205 138
2024-10-14 14:03:23,870 - DEBUG - STREAM b'pHYs' 3355 9
2024-10-14 14:03:23,870 - DEBUG - STREAM b'iTXt' 3376 471
2024-10-14 14:03:23,870 - DEBUG - STREAM b'iDOT' 3859 28
2024-10-14 14:03:23,870 - DEBUG - b'iDOT' 3859 28 (unknown)
2024-10-14 14:03:23,870 - DEBUG - STREAM b'IDAT' 3899 16384
2024-10-14 14:03:23,870 - DEBUG - STREAM b'IHDR' 16 13
2024-10-14 14:03:23,870 - DEBUG - STREAM b'iCCP' 41 3152
2024-10-14 14:03:23,870 - DEBUG - iCCP profile name b'ICC Profile'
2024-10-14 14:03:23,870 - DEBUG - Compression method 0
2024-10-14 14:03:23,870 - DEBUG - STREAM b'eXIf' 3205 138
2024-10-14 14:03:23,870 - DEBUG - STREAM b'pHYs' 3355 9
2024-10-14 14:03:23,870 - DEBUG - STREAM b'iTXt' 3376 471
2024-10-14 14:03:23,870 - DEBUG - STREAM b'iDOT' 3859 28
2024-10-14 14:03:23,871 - DEBUG - b'iDOT' 3859 28 (unknown)
2024-10-14 14:03:23,871 - DEBUG - STREAM b'IDAT' 3899 16384
2024-10-14 14:03:23,888 - DEBUG - tag: XResolution (282) - type: rational (5) Tag Location: 22 - Data Location: 62 - value: b'\x00\x00\x00\x90\x00\x00\x00\x01'
2024-10-14 14:03:23,888 - DEBUG - tag: YResolution (283) - type: rational (5) Tag Location: 34 - Data Location: 70 - value: b'\x00\x00\x00\x90\x00\x00\x00\x01'
2024-10-14 14:03:23,888 - DEBUG - tag: ResolutionUnit (296) - type: short (3) - value: b'\x00\x02'
2024-10-14 14:03:23,888 - DEBUG - tag: ExifIFD (34665) - type: long (4) - value: b'\x00\x00\x00N'
2024-10-14 14:03:23,889 - DEBUG - Error closing: Operation on closed image
2024-10-14 14:03:26,368 - DEBUG - Document content: ROUMANIE ROMAWI ROMANIA Carte CARTE De |Dentitate IDEnTITY D'iDENTITE seria TR Na 409131 CarD cNP 18...
2024-10-14 14:03:26,371 - DEBUG - Instructor Request: mode.value='tool_call', response_model=<class 'models.PIIData'>, new_kwargs={'model': 'gpt-4', 'messages': [{'role': 'system', 'content': '\nYou are an AI agent specializing in contract creation and personal information extraction. \n\nYour role is:\n 1. Guide the process of extracting information from documents..\n 2. Verifying the extracted information with human input.\n 3. Identifying parties. \n 4. Constructing a contract. \n\n\nFollow the workflow precisely and ask for human input when needed.\n\n'}, {'role': 'user', 'content': "Extract the name and address from the given text:\n\nROUMANIE ROMAWI ROMANIA Carte CARTE De |Dentitate IDEnTITY D'iDENTITE seria TR Na 409131 CarD cNP 1891113341181 Nume/Nom/Last name T525M ISPILANTE Prenume/Prenom/First namo SENTIMENT BRUSLI Cetatenle/Nallonallte/Nallonallly Sox SexeiSox Romn\u0103 ROU M Loc nastere/Liou do naissancelPlace ol birth Or\u0219. Videle Jud.Teleorman Dom IlulAdresse/Addrass Videle Jud: Teleorman Sos. Giurgiului nr.1 695 TR Emisa dolDelivree parlIssuad by ValabilltatelValldlte Valldlty SPCLEP Videle 04.11.11-13.11.2018 IDROUISPILANTE<<SENTIMENT <BRUSLI<<<< TR409131<0R0u8911137M181113513411813 Or\u0219:"}], 'tools': [{'type': 'function', 'function': {'name': 'PIIData', 'description': 'Correctly extracted `PIIData` with all the required parameters with correct types', 'parameters': {'properties': {'name': {'description': 'Full name of the person', 'title': 'Name', 'type': 'string'}, 'address': {'description': 'Residential address of the person', 'title': 'Address', 'type': 'string'}}, 'required': ['address', 'name'], 'type': 'object'}}}], 'tool_choice': {'type': 'function', 'function': {'name': 'PIIData'}}}
2024-10-14 14:03:26,372 - DEBUG - max_retries: 1
2024-10-14 14:03:26,374 - DEBUG - Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'json_data': {'messages': [{'role': 'system', 'content': '\nYou are an AI agent specializing in contract creation and personal information extraction. \n\nYour role is:\n 1. Guide the process of extracting information from documents..\n 2. Verifying the extracted information with human input.\n 3. Identifying parties. \n 4. Constructing a contract. \n\n\nFollow the workflow precisely and ask for human input when needed.\n\n'}, {'role': 'user', 'content': "Extract the name and address from the given text:\n\nROUMANIE ROMAWI ROMANIA Carte CARTE De |Dentitate IDEnTITY D'iDENTITE seria TR Na 409131 CarD cNP 1891113341181 Nume/Nom/Last name T525M ISPILANTE Prenume/Prenom/First namo SENTIMENT BRUSLI Cetatenle/Nallonallte/Nallonallly Sox SexeiSox Romn\u0103 ROU M Loc nastere/Liou do naissancelPlace ol birth Or\u0219. Videle Jud.Teleorman Dom IlulAdresse/Addrass Videle Jud: Teleorman Sos. Giurgiului nr.1 695 TR Emisa dolDelivree parlIssuad by ValabilltatelValldlte Valldlty SPCLEP Videle 04.11.11-13.11.2018 IDROUISPILANTE<<SENTIMENT <BRUSLI<<<< TR409131<0R0u8911137M181113513411813 Or\u0219:"}], 'model': 'gpt-4', 'tool_choice': {'type': 'function', 'function': {'name': 'PIIData'}}, 'tools': [{'type': 'function', 'function': {'name': 'PIIData', 'description': 'Correctly extracted `PIIData` with all the required parameters with correct types', 'parameters': {'properties': {'name': {'description': 'Full name of the person', 'title': 'Name', 'type': 'string'}, 'address': {'description': 'Residential address of the person', 'title': 'Address', 'type': 'string'}}, 'required': ['address', 'name'], 'type': 'object'}}}]}}
2024-10-14 14:03:26,410 - DEBUG - Sending HTTP Request: POST https://api.openai.com/v1/chat/completions
2024-10-14 14:03:26,410 - DEBUG - connect_tcp.started host='api.openai.com' port=443 local_address=None timeout=5.0 socket_options=None
2024-10-14 14:03:26,427 - DEBUG - connect_tcp.complete return_value=<httpcore._backends.sync.SyncStream object at 0x000002390F36E360>
2024-10-14 14:03:26,427 - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x000002390F1C1D50> server_hostname='api.openai.com' timeout=5.0
2024-10-14 14:03:26,434 - DEBUG - start_tls.complete return_value=<httpcore._backends.sync.SyncStream object at 0x000002390F36E0C0>
2024-10-14 14:03:26,435 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-10-14 14:03:26,435 - DEBUG - send_request_headers.complete
2024-10-14 14:03:26,435 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-10-14 14:03:26,435 - DEBUG - send_request_body.complete
2024-10-14 14:03:26,435 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-10-14 14:03:28,775 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Mon, 14 Oct 2024 11:03:28 GMT'), (b'Content-Type', b'application/json'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'user-kzzh9hik9ryjiou4ftvhondh'), (b'openai-processing-ms', b'2184'), (b'openai-version', b'2020-10-01'), (b'x-ratelimit-limit-requests', b'10000'), (b'x-ratelimit-limit-tokens', b'10000'), (b'x-ratelimit-remaining-requests', b'9999'), (b'x-ratelimit-remaining-tokens', b'9736'), (b'x-ratelimit-reset-requests', b'8.64s'), (b'x-ratelimit-reset-tokens', b'1.584s'), (b'x-request-id', b'req_1d948bd2d9d9ea78e60a50f8ca011790'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'CF-Cache-Status', b'DYNAMIC'), (b'Set-Cookie', b'__cf_bm=d3BsNPYy7uG8CDittWj6WyiengmePrvoT6qBEcFlsW0-1728903808-1.0.1.1-Not.R_TP5ScsE5mKKL6lf25c4LE3WhXiryTs._EUrvKcu5Z52OsEV8T8nAWek_Tn3g_7PffVf82S.qFoxBjkXg; path=/; expires=Mon, 14-Oct-24 11:33:28 GMT; domain=.api.openai.com; HttpOnly; Secure; SameSite=None'), (b'X-Content-Type-Options', b'nosniff'), (b'Set-Cookie', b'_cfuvid=rg_QDH9IX3BBj8N2y4XhUMs.YKRErilaj_hoo9N23iE-1728903808942-0.0.1.1-604800000; path=/; domain=.api.openai.com; HttpOnly; Secure; SameSite=None'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8d2715374a1f0531-OTP'), (b'Content-Encoding', b'gzip'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-10-14 14:03:28,777 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2024-10-14 14:03:28,777 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-10-14 14:03:28,778 - DEBUG - receive_response_body.complete
2024-10-14 14:03:28,778 - DEBUG - response_closed.started
2024-10-14 14:03:28,778 - DEBUG - response_closed.complete
2024-10-14 14:03:28,778 - DEBUG - HTTP Response: POST https://api.openai.com/v1/chat/completions "200 OK" Headers([('date', 'Mon, 14 Oct 2024 11:03:28 GMT'), ('content-type', 'application/json'), ('transfer-encoding', 'chunked'), ('connection', 'keep-alive'), ('access-control-expose-headers', 'X-Request-ID'), ('openai-organization', 'user-kzzh9hik9ryjiou4ftvhondh'), ('openai-processing-ms', '2184'), ('openai-version', '2020-10-01'), ('x-ratelimit-limit-requests', '10000'), ('x-ratelimit-limit-tokens', '10000'), ('x-ratelimit-remaining-requests', '9999'), ('x-ratelimit-remaining-tokens', '9736'), ('x-ratelimit-reset-requests', '8.64s'), ('x-ratelimit-reset-tokens', '1.584s'), ('x-request-id', 'req_1d948bd2d9d9ea78e60a50f8ca011790'), ('strict-transport-security', 'max-age=31536000; includeSubDomains; preload'), ('cf-cache-status', 'DYNAMIC'), ('set-cookie', '__cf_bm=d3BsNPYy7uG8CDittWj6WyiengmePrvoT6qBEcFlsW0-1728903808-1.0.1.1-Not.R_TP5ScsE5mKKL6lf25c4LE3WhXiryTs._EUrvKcu5Z52OsEV8T8nAWek_Tn3g_7PffVf82S.qFoxBjkXg; path=/; expires=Mon, 14-Oct-24 11:33:28 GMT; domain=.api.openai.com; HttpOnly; Secure; SameSite=None'), ('x-content-type-options', 'nosniff'), ('set-cookie', '_cfuvid=rg_QDH9IX3BBj8N2y4XhUMs.YKRErilaj_hoo9N23iE-1728903808942-0.0.1.1-604800000; path=/; domain=.api.openai.com; HttpOnly; Secure; SameSite=None'), ('server', 'cloudflare'), ('cf-ray', '8d2715374a1f0531-OTP'), ('content-encoding', 'gzip'), ('alt-svc', 'h3=":443"; ma=86400')])
2024-10-14 14:03:28,778 - DEBUG - request_id: req_1d948bd2d9d9ea78e60a50f8ca011790
2024-10-14 14:03:28,781 - DEBUG - Instructor Raw Response: ChatCompletion(id='chatcmpl-AID9CqL7QV94VziNFlkFTXeYz3Vlz', choices=[Choice(finish_reason='stop', index=0, logprobs=None, message=ChatCompletionMessage(content=None, refusal=None, role='assistant', function_call=None, tool_calls=[ChatCompletionMessageToolCall(id='call_DlITVvtxncOLcJ7QmNFUdBfT', function=Function(arguments='{\n"name": "ISPILANTE SENTIMENT BRUSLI",\n"address": "Videle Jud: Teleorman Sos. Giurgiului nr.1 695 TR"\n}', name='PIIData'), type='function')]))], created=1728903806, model='gpt-4-0613', object='chat.completion', service_tier=None, system_fingerprint=None, usage=CompletionUsage(completion_tokens=39, prompt_tokens=377, total_tokens=416, completion_tokens_details=None, prompt_tokens_details=None))
2024-10-14 14:03:28,782 - DEBUG - Extracted PII: name='ISPILANTE SENTIMENT BRUSLI' address='Videle Jud: Teleorman Sos. Giurgiului nr.1 695 TR'
2024-10-14 14:03:31,751 - DEBUG - Document content: ROUMANIE ROVIAINIA ROMANIA Carte Carte DE iDentitate IdEnTITY Didentite seala SS Nr 099994 Card CNP ...
2024-10-14 14:03:31,753 - DEBUG - Instructor Request: mode.value='tool_call', response_model=<class 'models.PIIData'>, new_kwargs={'model': 'gpt-4', 'messages': [{'role': 'system', 'content': '\nYou are an AI agent specializing in contract creation and personal information extraction. \n\nYour role is:\n 1. Guide the process of extracting information from documents..\n 2. Verifying the extracted information with human input.\n 3. Identifying parties. \n 4. Constructing a contract. \n\n\nFollow the workflow precisely and ask for human input when needed.\n\n'}, {'role': 'user', 'content': "Extract the name and address from the given text:\n\nROUMANIE ROVIAINIA ROMANIA Carte Carte DE iDentitate IdEnTITY Didentite seala SS Nr 099994 Card CNP 2410415400542 93coQ Nume/NomiLast name VASILESCU Pronume/Prenom/Flrst name ELENA < CetatenielNatlonallte/Natlonalily M Sex SexelSer Romn\u0103 ROU Loc nastore/Licu de naissancolF 'ar0 ol birth Mun: Dej Jud. Cluj Domiciliu/Adresse A ess Mun. Bucuresti Sec. 5 Str Nicolae Iorga nr.3 900 B Emisa delDelivree parllssued by Valabilitate/Vahidile Valiouy D.EPAB.D- 06.01.17-15.04.2077 IDROUVASILESCU<<ELENA<<<<<<<<<<<<<<< SS099994<0R0u4104151F770415824003421"}], 'tools': [{'type': 'function', 'function': {'name': 'PIIData', 'description': 'Correctly extracted `PIIData` with all the required parameters with correct types', 'parameters': {'properties': {'name': {'description': 'Full name of the person', 'title': 'Name', 'type': 'string'}, 'address': {'description': 'Residential address of the person', 'title': 'Address', 'type': 'string'}}, 'required': ['address', 'name'], 'type': 'object'}}}], 'tool_choice': {'type': 'function', 'function': {'name': 'PIIData'}}}
2024-10-14 14:03:31,753 - DEBUG - max_retries: 1
2024-10-14 14:03:31,755 - DEBUG - Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'json_data': {'messages': [{'role': 'system', 'content': '\nYou are an AI agent specializing in contract creation and personal information extraction. \n\nYour role is:\n 1. Guide the process of extracting information from documents..\n 2. Verifying the extracted information with human input.\n 3. Identifying parties. \n 4. Constructing a contract. \n\n\nFollow the workflow precisely and ask for human input when needed.\n\n'}, {'role': 'user', 'content': "Extract the name and address from the given text:\n\nROUMANIE ROVIAINIA ROMANIA Carte Carte DE iDentitate IdEnTITY Didentite seala SS Nr 099994 Card CNP 2410415400542 93coQ Nume/NomiLast name VASILESCU Pronume/Prenom/Flrst name ELENA < CetatenielNatlonallte/Natlonalily M Sex SexelSer Romn\u0103 ROU Loc nastore/Licu de naissancolF 'ar0 ol birth Mun: Dej Jud. Cluj Domiciliu/Adresse A ess Mun. Bucuresti Sec. 5 Str Nicolae Iorga nr.3 900 B Emisa delDelivree parllssued by Valabilitate/Vahidile Valiouy D.EPAB.D- 06.01.17-15.04.2077 IDROUVASILESCU<<ELENA<<<<<<<<<<<<<<< SS099994<0R0u4104151F770415824003421"}], 'model': 'gpt-4', 'tool_choice': {'type': 'function', 'function': {'name': 'PIIData'}}, 'tools': [{'type': 'function', 'function': {'name': 'PIIData', 'description': 'Correctly extracted `PIIData` with all the required parameters with correct types', 'parameters': {'properties': {'name': {'description': 'Full name of the person', 'title': 'Name', 'type': 'string'}, 'address': {'description': 'Residential address of the person', 'title': 'Address', 'type': 'string'}}, 'required': ['address', 'name'], 'type': 'object'}}}]}}
2024-10-14 14:03:31,756 - DEBUG - Sending HTTP Request: POST https://api.openai.com/v1/chat/completions
2024-10-14 14:03:31,756 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-10-14 14:03:31,756 - DEBUG - send_request_headers.complete
2024-10-14 14:03:31,756 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-10-14 14:03:31,757 - DEBUG - send_request_body.complete
2024-10-14 14:03:31,757 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-10-14 14:03:34,190 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Mon, 14 Oct 2024 11:03:34 GMT'), (b'Content-Type', b'application/json'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'user-kzzh9hik9ryjiou4ftvhondh'), (b'openai-processing-ms', b'2272'), (b'openai-version', b'2020-10-01'), (b'x-ratelimit-limit-requests', b'10000'), (b'x-ratelimit-limit-tokens', b'10000'), (b'x-ratelimit-remaining-requests', b'9998'), (b'x-ratelimit-remaining-tokens', b'9742'), (b'x-ratelimit-reset-requests', b'11.956s'), (b'x-ratelimit-reset-tokens', b'1.548s'), (b'x-request-id', b'req_c215570a43084e59fbf49ad8cf6b0480'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8d2715588d6f0531-OTP'), (b'Content-Encoding', b'gzip'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-10-14 14:03:34,190 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2024-10-14 14:03:34,190 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-10-14 14:03:34,190 - DEBUG - receive_response_body.complete
2024-10-14 14:03:34,190 - DEBUG - response_closed.started
2024-10-14 14:03:34,190 - DEBUG - response_closed.complete
2024-10-14 14:03:34,190 - DEBUG - HTTP Response: POST https://api.openai.com/v1/chat/completions "200 OK" Headers({'date': 'Mon, 14 Oct 2024 11:03:34 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-expose-headers': 'X-Request-ID', 'openai-organization': 'user-kzzh9hik9ryjiou4ftvhondh', 'openai-processing-ms': '2272', 'openai-version': '2020-10-01', 'x-ratelimit-limit-requests': '10000', 'x-ratelimit-limit-tokens': '10000', 'x-ratelimit-remaining-requests': '9998', 'x-ratelimit-remaining-tokens': '9742', 'x-ratelimit-reset-requests': '11.956s', 'x-ratelimit-reset-tokens': '1.548s', 'x-request-id': 'req_c215570a43084e59fbf49ad8cf6b0480', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8d2715588d6f0531-OTP', 'content-encoding': 'gzip', 'alt-svc': 'h3=":443"; ma=86400'})
2024-10-14 14:03:34,190 - DEBUG - request_id: req_c215570a43084e59fbf49ad8cf6b0480
2024-10-14 14:03:34,191 - DEBUG - Instructor Raw Response: ChatCompletion(id='chatcmpl-AID9IwE6ciw7d8WswDpWnsGhhb2A1', choices=[Choice(finish_reason='stop', index=0, logprobs=None, message=ChatCompletionMessage(content=None, refusal=None, role='assistant', function_call=None, tool_calls=[ChatCompletionMessageToolCall(id='call_bP8UTHJTjWqjF1s4YQUu7bmS', function=Function(arguments='{\n"name": "ELENA VASILESCU",\n"address": "Mun. Bucuresti Sec. 5 Str Nicolae Iorga nr.3 900 B"\n}', name='PIIData'), type='function')]))], created=1728903812, model='gpt-4-0613', object='chat.completion', service_tier=None, system_fingerprint=None, usage=CompletionUsage(completion_tokens=42, prompt_tokens=380, total_tokens=422, completion_tokens_details=None, prompt_tokens_details=None))
2024-10-14 14:03:34,191 - DEBUG - Extracted PII: name='ELENA VASILESCU' address='Mun. Bucuresti Sec. 5 Str Nicolae Iorga nr.3 900 B'
2024-10-14 14:03:35,678 - DEBUG - Instructor Request: mode.value='tool_call', response_model=<class 'models.ContractParties'>, new_kwargs={'model': 'gpt-4', 'messages': [{'role': 'system', 'content': '\nYou are an AI agent specializing in contract creation and personal information extraction. \n\nYour role is:\n 1. Guide the process of extracting information from documents..\n 2. Verifying the extracted information with human input.\n 3. Identifying parties. \n 4. Constructing a contract. \n\n\nFollow the workflow precisely and ask for human input when needed.\n\n'}, {'role': 'user', 'content': 'Identify the buyer and seller from the given information:\n\nName: ISPILANTE SENTIMENT BRUSLI, Address: Videle Jud: Teleorman Sos. Giurgiului nr.1 695 TR\nName: ELENA VASILESCU, Address: Mun. Bucuresti Sec. 5 Str Nicolae Iorga nr.3 900 B'}], 'tools': [{'type': 'function', 'function': {'name': 'ContractParties', 'description': 'Correctly extracted `ContractParties` with all the required parameters with correct types', 'parameters': {'properties': {'buyer': {'description': 'Name of the buyer', 'title': 'Buyer', 'type': 'string'}, 'seller': {'description': 'Name of the seller', 'title': 'Seller', 'type': 'string'}}, 'required': ['buyer', 'seller'], 'type': 'object'}}}], 'tool_choice': {'type': 'function', 'function': {'name': 'ContractParties'}}}
2024-10-14 14:03:35,679 - DEBUG - max_retries: 1
2024-10-14 14:03:35,681 - DEBUG - Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'json_data': {'messages': [{'role': 'system', 'content': '\nYou are an AI agent specializing in contract creation and personal information extraction. \n\nYour role is:\n 1. Guide the process of extracting information from documents..\n 2. Verifying the extracted information with human input.\n 3. Identifying parties. \n 4. Constructing a contract. \n\n\nFollow the workflow precisely and ask for human input when needed.\n\n'}, {'role': 'user', 'content': 'Identify the buyer and seller from the given information:\n\nName: ISPILANTE SENTIMENT BRUSLI, Address: Videle Jud: Teleorman Sos. Giurgiului nr.1 695 TR\nName: ELENA VASILESCU, Address: Mun. Bucuresti Sec. 5 Str Nicolae Iorga nr.3 900 B'}], 'model': 'gpt-4', 'tool_choice': {'type': 'function', 'function': {'name': 'ContractParties'}}, 'tools': [{'type': 'function', 'function': {'name': 'ContractParties', 'description': 'Correctly extracted `ContractParties` with all the required parameters with correct types', 'parameters': {'properties': {'buyer': {'description': 'Name of the buyer', 'title': 'Buyer', 'type': 'string'}, 'seller': {'description': 'Name of the seller', 'title': 'Seller', 'type': 'string'}}, 'required': ['buyer', 'seller'], 'type': 'object'}}}]}}
2024-10-14 14:03:35,681 - DEBUG - Sending HTTP Request: POST https://api.openai.com/v1/chat/completions
2024-10-14 14:03:35,681 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-10-14 14:03:35,682 - DEBUG - send_request_headers.complete
2024-10-14 14:03:35,682 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-10-14 14:03:35,682 - DEBUG - send_request_body.complete
2024-10-14 14:03:35,682 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-10-14 14:03:37,334 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Mon, 14 Oct 2024 11:03:37 GMT'), (b'Content-Type', b'application/json'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'user-kzzh9hik9ryjiou4ftvhondh'), (b'openai-processing-ms', b'1493'), (b'openai-version', b'2020-10-01'), (b'x-ratelimit-limit-requests', b'10000'), (b'x-ratelimit-limit-tokens', b'10000'), (b'x-ratelimit-remaining-requests', b'9998'), (b'x-ratelimit-remaining-tokens', b'9834'), (b'x-ratelimit-reset-requests', b'16.674s'), (b'x-ratelimit-reset-tokens', b'996ms'), (b'x-request-id', b'req_209478d7aa30fb2b35ddc2dc1704e2a5'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8d2715711e260531-OTP'), (b'Content-Encoding', b'gzip'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-10-14 14:03:37,334 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2024-10-14 14:03:37,334 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-10-14 14:03:37,334 - DEBUG - receive_response_body.complete
2024-10-14 14:03:37,334 - DEBUG - response_closed.started
2024-10-14 14:03:37,334 - DEBUG - response_closed.complete
2024-10-14 14:03:37,334 - DEBUG - HTTP Response: POST https://api.openai.com/v1/chat/completions "200 OK" Headers({'date': 'Mon, 14 Oct 2024 11:03:37 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-expose-headers': 'X-Request-ID', 'openai-organization': 'user-kzzh9hik9ryjiou4ftvhondh', 'openai-processing-ms': '1493', 'openai-version': '2020-10-01', 'x-ratelimit-limit-requests': '10000', 'x-ratelimit-limit-tokens': '10000', 'x-ratelimit-remaining-requests': '9998', 'x-ratelimit-remaining-tokens': '9834', 'x-ratelimit-reset-requests': '16.674s', 'x-ratelimit-reset-tokens': '996ms', 'x-request-id': 'req_209478d7aa30fb2b35ddc2dc1704e2a5', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8d2715711e260531-OTP', 'content-encoding': 'gzip', 'alt-svc': 'h3=":443"; ma=86400'})
2024-10-14 14:03:37,335 - DEBUG - request_id: req_209478d7aa30fb2b35ddc2dc1704e2a5
2024-10-14 14:03:37,335 - DEBUG - Instructor Raw Response: ChatCompletion(id='chatcmpl-AID9MgipJ3j9g9P4lKMCTdSj3rE2N', choices=[Choice(finish_reason='stop', index=0, logprobs=None, message=ChatCompletionMessage(content=None, refusal=None, role='assistant', function_call=None, tool_calls=[ChatCompletionMessageToolCall(id='call_Qhdb6IEiyd11pjbSJ6UthZC5', function=Function(arguments='{\n"buyer": "ISPILANTE SENTIMENT BRUSLI",\n"seller": "ELENA VASILESCU"\n}', name='ContractParties'), type='function')]))], created=1728903816, model='gpt-4-0613', object='chat.completion', service_tier=None, system_fingerprint=None, usage=CompletionUsage(completion_tokens=28, prompt_tokens=232, total_tokens=260, completion_tokens_details=None, prompt_tokens_details=None))
2024-10-14 14:03:50,046 - DEBUG - close.started
2024-10-14 14:03:50,047 - DEBUG - close.complete
2024-10-14 14:28:21,896 - WARNING - Neither CUDA nor MPS are available - defaulting to CPU. Note: This module is much faster with a GPU.
2024-10-14 14:28:23,171 - DEBUG - load_ssl_context verify=True cert=None trust_env=True http2=False
2024-10-14 14:28:23,171 - DEBUG - load_verify_locations cafile='D:\\deve\\contract_automation\\.venv\\Lib\\site-packages\\certifi\\cacert.pem'
2024-10-14 14:28:23,490 - DEBUG - Patching `client.chat.completions.create` with mode=<Mode.TOOLS: 'tool_call'>
2024-10-14 14:28:23,491 - DEBUG - Using proactor: IocpProactor
2024-10-14 14:28:23,510 - DEBUG - STREAM b'IHDR' 16 13
2024-10-14 14:28:23,510 - DEBUG - STREAM b'iCCP' 41 3152
2024-10-14 14:28:23,511 - DEBUG - iCCP profile name b'ICC Profile'
2024-10-14 14:28:23,511 - DEBUG - Compression method 0
2024-10-14 14:28:23,511 - DEBUG - STREAM b'eXIf' 3205 138
2024-10-14 14:28:23,511 - DEBUG - STREAM b'pHYs' 3355 9
2024-10-14 14:28:23,511 - DEBUG - STREAM b'iTXt' 3376 470
2024-10-14 14:28:23,511 - DEBUG - STREAM b'iDOT' 3858 28
2024-10-14 14:28:23,511 - DEBUG - b'iDOT' 3858 28 (unknown)
2024-10-14 14:28:23,511 - DEBUG - STREAM b'IDAT' 3898 16384
2024-10-14 14:28:23,511 - DEBUG - STREAM b'IHDR' 16 13
2024-10-14 14:28:23,511 - DEBUG - STREAM b'iCCP' 41 3152
2024-10-14 14:28:23,511 - DEBUG - iCCP profile name b'ICC Profile'
2024-10-14 14:28:23,511 - DEBUG - Compression method 0
2024-10-14 14:28:23,511 - DEBUG - STREAM b'eXIf' 3205 138
2024-10-14 14:28:23,511 - DEBUG - STREAM b'pHYs' 3355 9
2024-10-14 14:28:23,511 - DEBUG - STREAM b'iTXt' 3376 470
2024-10-14 14:28:23,511 - DEBUG - STREAM b'iDOT' 3858 28
2024-10-14 14:28:23,511 - DEBUG - b'iDOT' 3858 28 (unknown)
2024-10-14 14:28:23,511 - DEBUG - STREAM b'IDAT' 3898 16384
2024-10-14 14:28:23,521 - DEBUG - tag: XResolution (282) - type: rational (5) Tag Location: 22 - Data Location: 62 - value: b'\x00\x00\x00\x90\x00\x00\x00\x01'
2024-10-14 14:28:23,522 - DEBUG - tag: YResolution (283) - type: rational (5) Tag Location: 34 - Data Location: 70 - value: b'\x00\x00\x00\x90\x00\x00\x00\x01'
2024-10-14 14:28:23,522 - DEBUG - tag: ResolutionUnit (296) - type: short (3) - value: b'\x00\x02'
2024-10-14 14:28:23,522 - DEBUG - tag: ExifIFD (34665) - type: long (4) - value: b'\x00\x00\x00N'
2024-10-14 14:28:23,522 - DEBUG - Error closing: Operation on closed image
2024-10-14 14:28:25,542 - DEBUG - STREAM b'IHDR' 16 13
2024-10-14 14:28:25,542 - DEBUG - STREAM b'iCCP' 41 3152
2024-10-14 14:28:25,542 - DEBUG - iCCP profile name b'ICC Profile'
2024-10-14 14:28:25,542 - DEBUG - Compression method 0
2024-10-14 14:28:25,542 - DEBUG - STREAM b'eXIf' 3205 138
2024-10-14 14:28:25,542 - DEBUG - STREAM b'pHYs' 3355 9
2024-10-14 14:28:25,542 - DEBUG - STREAM b'iTXt' 3376 471
2024-10-14 14:28:25,542 - DEBUG - STREAM b'iDOT' 3859 28
2024-10-14 14:28:25,542 - DEBUG - b'iDOT' 3859 28 (unknown)
2024-10-14 14:28:25,542 - DEBUG - STREAM b'IDAT' 3899 16384
2024-10-14 14:28:25,542 - DEBUG - STREAM b'IHDR' 16 13
2024-10-14 14:28:25,542 - DEBUG - STREAM b'iCCP' 41 3152
2024-10-14 14:28:25,542 - DEBUG - iCCP profile name b'ICC Profile'
2024-10-14 14:28:25,542 - DEBUG - Compression method 0
2024-10-14 14:28:25,542 - DEBUG - STREAM b'eXIf' 3205 138
2024-10-14 14:28:25,542 - DEBUG - STREAM b'pHYs' 3355 9
2024-10-14 14:28:25,542 - DEBUG - STREAM b'iTXt' 3376 471
2024-10-14 14:28:25,542 - DEBUG - STREAM b'iDOT' 3859 28
2024-10-14 14:28:25,542 - DEBUG - b'iDOT' 3859 28 (unknown)
2024-10-14 14:28:25,542 - DEBUG - STREAM b'IDAT' 3899 16384
2024-10-14 14:28:25,559 - DEBUG - tag: XResolution (282) - type: rational (5) Tag Location: 22 - Data Location: 62 - value: b'\x00\x00\x00\x90\x00\x00\x00\x01'
2024-10-14 14:28:25,560 - DEBUG - tag: YResolution (283) - type: rational (5) Tag Location: 34 - Data Location: 70 - value: b'\x00\x00\x00\x90\x00\x00\x00\x01'
2024-10-14 14:28:25,560 - DEBUG - tag: ResolutionUnit (296) - type: short (3) - value: b'\x00\x02'
2024-10-14 14:28:25,560 - DEBUG - tag: ExifIFD (34665) - type: long (4) - value: b'\x00\x00\x00N'
2024-10-14 14:28:25,560 - DEBUG - Error closing: Operation on closed image
2024-10-14 14:28:28,028 - DEBUG - Document content: ROUMANIE ROMAWI ROMANIA Carte CARTE De |Dentitate IDEnTITY D'iDENTITE seria TR Na 409131 CarD cNP 18...
2024-10-14 14:28:28,030 - DEBUG - Instructor Request: mode.value='tool_call', response_model=<class 'models.PIIData'>, new_kwargs={'model': 'gpt-4', 'messages': [{'role': 'system', 'content': '\nYou are an AI agent specializing in contract creation and personal information extraction. \n\nYour role is:\n 1. Guide the process of extracting information from documents..\n 2. Verifying the extracted information with human input.\n 3. Identifying parties. \n 4. Constructing a contract. \n\n\nFollow the workflow precisely and ask for human input when needed.\n\n'}, {'role': 'user', 'content': "Extract the name and address from the given text:\n\nROUMANIE ROMAWI ROMANIA Carte CARTE De |Dentitate IDEnTITY D'iDENTITE seria TR Na 409131 CarD cNP 1891113341181 Nume/Nom/Last name T525M ISPILANTE Prenume/Prenom/First namo SENTIMENT BRUSLI Cetatenle/Nallonallte/Nallonallly Sox SexeiSox Romn\u0103 ROU M Loc nastere/Liou do naissancelPlace ol birth Or\u0219. Videle Jud.Teleorman Dom IlulAdresse/Addrass Videle Jud: Teleorman Sos. Giurgiului nr.1 695 TR Emisa dolDelivree parlIssuad by ValabilltatelValldlte Valldlty SPCLEP Videle 04.11.11-13.11.2018 IDROUISPILANTE<<SENTIMENT <BRUSLI<<<< TR409131<0R0u8911137M181113513411813 Or\u0219:"}], 'tools': [{'type': 'function', 'function': {'name': 'PIIData', 'description': 'Correctly extracted `PIIData` with all the required parameters with correct types', 'parameters': {'properties': {'name': {'description': 'Full name of the person', 'title': 'Name', 'type': 'string'}, 'address': {'description': 'Residential address of the person', 'title': 'Address', 'type': 'string'}}, 'required': ['address', 'name'], 'type': 'object'}}}], 'tool_choice': {'type': 'function', 'function': {'name': 'PIIData'}}}
2024-10-14 14:28:28,031 - DEBUG - max_retries: 1
2024-10-14 14:28:28,033 - DEBUG - Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'json_data': {'messages': [{'role': 'system', 'content': '\nYou are an AI agent specializing in contract creation and personal information extraction. \n\nYour role is:\n 1. Guide the process of extracting information from documents..\n 2. Verifying the extracted information with human input.\n 3. Identifying parties. \n 4. Constructing a contract. \n\n\nFollow the workflow precisely and ask for human input when needed.\n\n'}, {'role': 'user', 'content': "Extract the name and address from the given text:\n\nROUMANIE ROMAWI ROMANIA Carte CARTE De |Dentitate IDEnTITY D'iDENTITE seria TR Na 409131 CarD cNP 1891113341181 Nume/Nom/Last name T525M ISPILANTE Prenume/Prenom/First namo SENTIMENT BRUSLI Cetatenle/Nallonallte/Nallonallly Sox SexeiSox Romn\u0103 ROU M Loc nastere/Liou do naissancelPlace ol birth Or\u0219. Videle Jud.Teleorman Dom IlulAdresse/Addrass Videle Jud: Teleorman Sos. Giurgiului nr.1 695 TR Emisa dolDelivree parlIssuad by ValabilltatelValldlte Valldlty SPCLEP Videle 04.11.11-13.11.2018 IDROUISPILANTE<<SENTIMENT <BRUSLI<<<< TR409131<0R0u8911137M181113513411813 Or\u0219:"}], 'model': 'gpt-4', 'tool_choice': {'type': 'function', 'function': {'name': 'PIIData'}}, 'tools': [{'type': 'function', 'function': {'name': 'PIIData', 'description': 'Correctly extracted `PIIData` with all the required parameters with correct types', 'parameters': {'properties': {'name': {'description': 'Full name of the person', 'title': 'Name', 'type': 'string'}, 'address': {'description': 'Residential address of the person', 'title': 'Address', 'type': 'string'}}, 'required': ['address', 'name'], 'type': 'object'}}}]}}
2024-10-14 14:28:28,070 - DEBUG - Sending HTTP Request: POST https://api.openai.com/v1/chat/completions
2024-10-14 14:28:28,070 - DEBUG - connect_tcp.started host='api.openai.com' port=443 local_address=None timeout=5.0 socket_options=None
2024-10-14 14:28:28,082 - DEBUG - connect_tcp.complete return_value=<httpcore._backends.sync.SyncStream object at 0x0000015967F7E450>
2024-10-14 14:28:28,082 - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x0000015967DD1CD0> server_hostname='api.openai.com' timeout=5.0
2024-10-14 14:28:28,089 - DEBUG - start_tls.complete return_value=<httpcore._backends.sync.SyncStream object at 0x0000015967F7E390>
2024-10-14 14:28:28,090 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-10-14 14:28:28,090 - DEBUG - send_request_headers.complete
2024-10-14 14:28:28,090 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-10-14 14:28:28,090 - DEBUG - send_request_body.complete
2024-10-14 14:28:28,090 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-10-14 14:28:30,218 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Mon, 14 Oct 2024 11:28:30 GMT'), (b'Content-Type', b'application/json'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'user-kzzh9hik9ryjiou4ftvhondh'), (b'openai-processing-ms', b'1972'), (b'openai-version', b'2020-10-01'), (b'x-ratelimit-limit-requests', b'10000'), (b'x-ratelimit-limit-tokens', b'10000'), (b'x-ratelimit-remaining-requests', b'9999'), (b'x-ratelimit-remaining-tokens', b'9736'), (b'x-ratelimit-reset-requests', b'8.64s'), (b'x-ratelimit-reset-tokens', b'1.584s'), (b'x-request-id', b'req_a2a0d2446ae4b72e8cd8d2d3c0449f00'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'CF-Cache-Status', b'DYNAMIC'), (b'Set-Cookie', b'__cf_bm=HFLwQwNLiSRFlNbMTV2n9otohFsfmLtoh5BZCLX9fFs-1728905310-1.0.1.1-h5iBirqEjnpMe8U_do678ZFyKIVDz9OfG_FRmFrdRQWhUjzMawnADR2HPjYF.9T4Dap.AFXg019gnwbCgm5CYw; path=/; expires=Mon, 14-Oct-24 11:58:30 GMT; domain=.api.openai.com; HttpOnly; Secure; SameSite=None'), (b'X-Content-Type-Options', b'nosniff'), (b'Set-Cookie', b'_cfuvid=Kcjo4yNqyrmsPbjeNvAUAuYSeXI51aYyJ63XZuYrVbM-1728905310447-0.0.1.1-604800000; path=/; domain=.api.openai.com; HttpOnly; Secure; SameSite=None'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8d2739e10a9fca1c-OTP'), (b'Content-Encoding', b'gzip'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-10-14 14:28:30,220 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2024-10-14 14:28:30,220 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-10-14 14:28:30,220 - DEBUG - receive_response_body.complete
2024-10-14 14:28:30,221 - DEBUG - response_closed.started
2024-10-14 14:28:30,221 - DEBUG - response_closed.complete
2024-10-14 14:28:30,221 - DEBUG - HTTP Response: POST https://api.openai.com/v1/chat/completions "200 OK" Headers([('date', 'Mon, 14 Oct 2024 11:28:30 GMT'), ('content-type', 'application/json'), ('transfer-encoding', 'chunked'), ('connection', 'keep-alive'), ('access-control-expose-headers', 'X-Request-ID'), ('openai-organization', 'user-kzzh9hik9ryjiou4ftvhondh'), ('openai-processing-ms', '1972'), ('openai-version', '2020-10-01'), ('x-ratelimit-limit-requests', '10000'), ('x-ratelimit-limit-tokens', '10000'), ('x-ratelimit-remaining-requests', '9999'), ('x-ratelimit-remaining-tokens', '9736'), ('x-ratelimit-reset-requests', '8.64s'), ('x-ratelimit-reset-tokens', '1.584s'), ('x-request-id', 'req_a2a0d2446ae4b72e8cd8d2d3c0449f00'), ('strict-transport-security', 'max-age=31536000; includeSubDomains; preload'), ('cf-cache-status', 'DYNAMIC'), ('set-cookie', '__cf_bm=HFLwQwNLiSRFlNbMTV2n9otohFsfmLtoh5BZCLX9fFs-1728905310-1.0.1.1-h5iBirqEjnpMe8U_do678ZFyKIVDz9OfG_FRmFrdRQWhUjzMawnADR2HPjYF.9T4Dap.AFXg019gnwbCgm5CYw; path=/; expires=Mon, 14-Oct-24 11:58:30 GMT; domain=.api.openai.com; HttpOnly; Secure; SameSite=None'), ('x-content-type-options', 'nosniff'), ('set-cookie', '_cfuvid=Kcjo4yNqyrmsPbjeNvAUAuYSeXI51aYyJ63XZuYrVbM-1728905310447-0.0.1.1-604800000; path=/; domain=.api.openai.com; HttpOnly; Secure; SameSite=None'), ('server', 'cloudflare'), ('cf-ray', '8d2739e10a9fca1c-OTP'), ('content-encoding', 'gzip'), ('alt-svc', 'h3=":443"; ma=86400')])
2024-10-14 14:28:30,221 - DEBUG - request_id: req_a2a0d2446ae4b72e8cd8d2d3c0449f00
2024-10-14 14:28:30,224 - DEBUG - Instructor Raw Response: ChatCompletion(id='chatcmpl-AIDXQxKhyg0oCHeQrqBcSxIxEYl04', choices=[Choice(finish_reason='stop', index=0, logprobs=None, message=ChatCompletionMessage(content=None, refusal=None, role='assistant', function_call=None, tool_calls=[ChatCompletionMessageToolCall(id='call_UNU6lwYOCGcL2CVbK7VbuSyi', function=Function(arguments='{\n"name": "ISPILANTE SENTIMENT BRUSLI",\n"address": "Videle Jud: Teleorman Sos. Giurgiului nr.1 695 TR"\n}', name='PIIData'), type='function')]))], created=1728905308, model='gpt-4-0613', object='chat.completion', service_tier=None, system_fingerprint=None, usage=CompletionUsage(completion_tokens=39, prompt_tokens=377, total_tokens=416, completion_tokens_details=None, prompt_tokens_details=None))
2024-10-14 14:28:30,225 - DEBUG - Extracted PII: name='ISPILANTE SENTIMENT BRUSLI' address='Videle Jud: Teleorman Sos. Giurgiului nr.1 695 TR'
2024-10-14 14:28:33,603 - DEBUG - Document content: ROUMANIE ROVIAINIA ROMANIA Carte Carte DE iDentitate IdEnTITY Didentite seala SS Nr 099994 Card CNP ...
2024-10-14 14:28:33,605 - DEBUG - Instructor Request: mode.value='tool_call', response_model=<class 'models.PIIData'>, new_kwargs={'model': 'gpt-4', 'messages': [{'role': 'system', 'content': '\nYou are an AI agent specializing in contract creation and personal information extraction. \n\nYour role is:\n 1. Guide the process of extracting information from documents..\n 2. Verifying the extracted information with human input.\n 3. Identifying parties. \n 4. Constructing a contract. \n\n\nFollow the workflow precisely and ask for human input when needed.\n\n'}, {'role': 'user', 'content': "Extract the name and address from the given text:\n\nROUMANIE ROVIAINIA ROMANIA Carte Carte DE iDentitate IdEnTITY Didentite seala SS Nr 099994 Card CNP 2410415400542 93coQ Nume/NomiLast name VASILESCU Pronume/Prenom/Flrst name ELENA < CetatenielNatlonallte/Natlonalily M Sex SexelSer Romn\u0103 ROU Loc nastore/Licu de naissancolF 'ar0 ol birth Mun: Dej Jud. Cluj Domiciliu/Adresse A ess Mun. Bucuresti Sec. 5 Str Nicolae Iorga nr.3 900 B Emisa delDelivree parllssued by Valabilitate/Vahidile Valiouy D.EPAB.D- 06.01.17-15.04.2077 IDROUVASILESCU<<ELENA<<<<<<<<<<<<<<< SS099994<0R0u4104151F770415824003421"}], 'tools': [{'type': 'function', 'function': {'name': 'PIIData', 'description': 'Correctly extracted `PIIData` with all the required parameters with correct types', 'parameters': {'properties': {'name': {'description': 'Full name of the person', 'title': 'Name', 'type': 'string'}, 'address': {'description': 'Residential address of the person', 'title': 'Address', 'type': 'string'}}, 'required': ['address', 'name'], 'type': 'object'}}}], 'tool_choice': {'type': 'function', 'function': {'name': 'PIIData'}}}
2024-10-14 14:28:33,605 - DEBUG - max_retries: 1
2024-10-14 14:28:33,607 - DEBUG - Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'json_data': {'messages': [{'role': 'system', 'content': '\nYou are an AI agent specializing in contract creation and personal information extraction. \n\nYour role is:\n 1. Guide the process of extracting information from documents..\n 2. Verifying the extracted information with human input.\n 3. Identifying parties. \n 4. Constructing a contract. \n\n\nFollow the workflow precisely and ask for human input when needed.\n\n'}, {'role': 'user', 'content': "Extract the name and address from the given text:\n\nROUMANIE ROVIAINIA ROMANIA Carte Carte DE iDentitate IdEnTITY Didentite seala SS Nr 099994 Card CNP 2410415400542 93coQ Nume/NomiLast name VASILESCU Pronume/Prenom/Flrst name ELENA < CetatenielNatlonallte/Natlonalily M Sex SexelSer Romn\u0103 ROU Loc nastore/Licu de naissancolF 'ar0 ol birth Mun: Dej Jud. Cluj Domiciliu/Adresse A ess Mun. Bucuresti Sec. 5 Str Nicolae Iorga nr.3 900 B Emisa delDelivree parllssued by Valabilitate/Vahidile Valiouy D.EPAB.D- 06.01.17-15.04.2077 IDROUVASILESCU<<ELENA<<<<<<<<<<<<<<< SS099994<0R0u4104151F770415824003421"}], 'model': 'gpt-4', 'tool_choice': {'type': 'function', 'function': {'name': 'PIIData'}}, 'tools': [{'type': 'function', 'function': {'name': 'PIIData', 'description': 'Correctly extracted `PIIData` with all the required parameters with correct types', 'parameters': {'properties': {'name': {'description': 'Full name of the person', 'title': 'Name', 'type': 'string'}, 'address': {'description': 'Residential address of the person', 'title': 'Address', 'type': 'string'}}, 'required': ['address', 'name'], 'type': 'object'}}}]}}
2024-10-14 14:28:33,608 - DEBUG - Sending HTTP Request: POST https://api.openai.com/v1/chat/completions
2024-10-14 14:28:33,608 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-10-14 14:28:33,608 - DEBUG - send_request_headers.complete
2024-10-14 14:28:33,608 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-10-14 14:28:33,608 - DEBUG - send_request_body.complete
2024-10-14 14:28:33,608 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-10-14 14:28:36,106 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Mon, 14 Oct 2024 11:28:36 GMT'), (b'Content-Type', b'application/json'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'user-kzzh9hik9ryjiou4ftvhondh'), (b'openai-processing-ms', b'2329'), (b'openai-version', b'2020-10-01'), (b'x-ratelimit-limit-requests', b'10000'), (b'x-ratelimit-limit-tokens', b'10000'), (b'x-ratelimit-remaining-requests', b'9998'), (b'x-ratelimit-remaining-tokens', b'9742'), (b'x-ratelimit-reset-requests', b'11.753s'), (b'x-ratelimit-reset-tokens', b'1.548s'), (b'x-request-id', b'req_81092538ef30a5d6eed26a8cf88ab104'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8d273a038df5ca1c-OTP'), (b'Content-Encoding', b'gzip'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-10-14 14:28:36,107 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2024-10-14 14:28:36,107 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-10-14 14:28:36,107 - DEBUG - receive_response_body.complete
2024-10-14 14:28:36,108 - DEBUG - response_closed.started
2024-10-14 14:28:36,108 - DEBUG - response_closed.complete
2024-10-14 14:28:36,108 - DEBUG - HTTP Response: POST https://api.openai.com/v1/chat/completions "200 OK" Headers({'date': 'Mon, 14 Oct 2024 11:28:36 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-expose-headers': 'X-Request-ID', 'openai-organization': 'user-kzzh9hik9ryjiou4ftvhondh', 'openai-processing-ms': '2329', 'openai-version': '2020-10-01', 'x-ratelimit-limit-requests': '10000', 'x-ratelimit-limit-tokens': '10000', 'x-ratelimit-remaining-requests': '9998', 'x-ratelimit-remaining-tokens': '9742', 'x-ratelimit-reset-requests': '11.753s', 'x-ratelimit-reset-tokens': '1.548s', 'x-request-id': 'req_81092538ef30a5d6eed26a8cf88ab104', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8d273a038df5ca1c-OTP', 'content-encoding': 'gzip', 'alt-svc': 'h3=":443"; ma=86400'})
2024-10-14 14:28:36,108 - DEBUG - request_id: req_81092538ef30a5d6eed26a8cf88ab104
2024-10-14 14:28:36,109 - DEBUG - Instructor Raw Response: ChatCompletion(id='chatcmpl-AIDXWkcQOz3Q62D8kCJyrUr1mXIRn', choices=[Choice(finish_reason='stop', index=0, logprobs=None, message=ChatCompletionMessage(content=None, refusal=None, role='assistant', function_call=None, tool_calls=[ChatCompletionMessageToolCall(id='call_eMu5UoUcluX6KVnCI7dKfafI', function=Function(arguments='{\n"name": "ELENA VASILESCU",\n"address": "Mun. Bucuresti Sec. 5 Str Nicolae Iorga nr.3 900 B"\n}', name='PIIData'), type='function')]))], created=1728905314, model='gpt-4-0613', object='chat.completion', service_tier=None, system_fingerprint=None, usage=CompletionUsage(completion_tokens=42, prompt_tokens=380, total_tokens=422, completion_tokens_details=None, prompt_tokens_details=None))
2024-10-14 14:28:36,110 - DEBUG - Extracted PII: name='ELENA VASILESCU' address='Mun. Bucuresti Sec. 5 Str Nicolae Iorga nr.3 900 B'
2024-10-14 14:28:37,301 - DEBUG - Instructor Request: mode.value='tool_call', response_model=<class 'models.ContractParties'>, new_kwargs={'model': 'gpt-4', 'messages': [{'role': 'system', 'content': '\nYou are an AI agent specializing in contract creation and personal information extraction. \n\nYour role is:\n 1. Guide the process of extracting information from documents..\n 2. Verifying the extracted information with human input.\n 3. Identifying parties. \n 4. Constructing a contract. \n\n\nFollow the workflow precisely and ask for human input when needed.\n\n'}, {'role': 'user', 'content': 'Identify the buyer and seller from the given information:\n\nName: ISPILANTE SENTIMENT BRUSLI, Address: Videle Jud: Teleorman Sos. Giurgiului nr.1 695 TR\nName: ELENA VASILESCU, Address: Mun. Bucuresti Sec. 5 Str Nicolae Iorga nr.3 900 B'}], 'tools': [{'type': 'function', 'function': {'name': 'ContractParties', 'description': 'Correctly extracted `ContractParties` with all the required parameters with correct types', 'parameters': {'properties': {'buyer': {'description': 'Name of the buyer', 'title': 'Buyer', 'type': 'string'}, 'seller': {'description': 'Name of the seller', 'title': 'Seller', 'type': 'string'}}, 'required': ['buyer', 'seller'], 'type': 'object'}}}], 'tool_choice': {'type': 'function', 'function': {'name': 'ContractParties'}}}
2024-10-14 14:28:37,301 - DEBUG - max_retries: 1
2024-10-14 14:28:37,303 - DEBUG - Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'json_data': {'messages': [{'role': 'system', 'content': '\nYou are an AI agent specializing in contract creation and personal information extraction. \n\nYour role is:\n 1. Guide the process of extracting information from documents..\n 2. Verifying the extracted information with human input.\n 3. Identifying parties. \n 4. Constructing a contract. \n\n\nFollow the workflow precisely and ask for human input when needed.\n\n'}, {'role': 'user', 'content': 'Identify the buyer and seller from the given information:\n\nName: ISPILANTE SENTIMENT BRUSLI, Address: Videle Jud: Teleorman Sos. Giurgiului nr.1 695 TR\nName: ELENA VASILESCU, Address: Mun. Bucuresti Sec. 5 Str Nicolae Iorga nr.3 900 B'}], 'model': 'gpt-4', 'tool_choice': {'type': 'function', 'function': {'name': 'ContractParties'}}, 'tools': [{'type': 'function', 'function': {'name': 'ContractParties', 'description': 'Correctly extracted `ContractParties` with all the required parameters with correct types', 'parameters': {'properties': {'buyer': {'description': 'Name of the buyer', 'title': 'Buyer', 'type': 'string'}, 'seller': {'description': 'Name of the seller', 'title': 'Seller', 'type': 'string'}}, 'required': ['buyer', 'seller'], 'type': 'object'}}}]}}
2024-10-14 14:28:37,303 - DEBUG - Sending HTTP Request: POST https://api.openai.com/v1/chat/completions
2024-10-14 14:28:37,304 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-10-14 14:28:37,304 - DEBUG - send_request_headers.complete
2024-10-14 14:28:37,304 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-10-14 14:28:37,304 - DEBUG - send_request_body.complete
2024-10-14 14:28:37,304 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-10-14 14:28:39,423 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Mon, 14 Oct 2024 11:28:39 GMT'), (b'Content-Type', b'application/json'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'user-kzzh9hik9ryjiou4ftvhondh'), (b'openai-processing-ms', b'1927'), (b'openai-version', b'2020-10-01'), (b'x-ratelimit-limit-requests', b'10000'), (b'x-ratelimit-limit-tokens', b'10000'), (b'x-ratelimit-remaining-requests', b'9998'), (b'x-ratelimit-remaining-tokens', b'9834'), (b'x-ratelimit-reset-requests', b'16.709s'), (b'x-ratelimit-reset-tokens', b'996ms'), (b'x-request-id', b'req_59aa0a0b19f37bd29118360ada6ddf16'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8d273a1a9c49ca1c-OTP'), (b'Content-Encoding', b'gzip'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-10-14 14:28:39,423 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2024-10-14 14:28:39,424 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-10-14 14:28:39,424 - DEBUG - receive_response_body.complete
2024-10-14 14:28:39,424 - DEBUG - response_closed.started
2024-10-14 14:28:39,424 - DEBUG - response_closed.complete
2024-10-14 14:28:39,424 - DEBUG - HTTP Response: POST https://api.openai.com/v1/chat/completions "200 OK" Headers({'date': 'Mon, 14 Oct 2024 11:28:39 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-expose-headers': 'X-Request-ID', 'openai-organization': 'user-kzzh9hik9ryjiou4ftvhondh', 'openai-processing-ms': '1927', 'openai-version': '2020-10-01', 'x-ratelimit-limit-requests': '10000', 'x-ratelimit-limit-tokens': '10000', 'x-ratelimit-remaining-requests': '9998', 'x-ratelimit-remaining-tokens': '9834', 'x-ratelimit-reset-requests': '16.709s', 'x-ratelimit-reset-tokens': '996ms', 'x-request-id': 'req_59aa0a0b19f37bd29118360ada6ddf16', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8d273a1a9c49ca1c-OTP', 'content-encoding': 'gzip', 'alt-svc': 'h3=":443"; ma=86400'})
2024-10-14 14:28:39,424 - DEBUG - request_id: req_59aa0a0b19f37bd29118360ada6ddf16
2024-10-14 14:28:39,425 - DEBUG - Instructor Raw Response: ChatCompletion(id='chatcmpl-AIDXZ0nF5Nc5oQE0hDVzNCRXsnl91', choices=[Choice(finish_reason='stop', index=0, logprobs=None, message=ChatCompletionMessage(content=None, refusal=None, role='assistant', function_call=None, tool_calls=[ChatCompletionMessageToolCall(id='call_VKrl6Wq93glcGxuBmYf3gC06', function=Function(arguments='{\n"buyer": "ISPILANTE SENTIMENT BRUSLI",\n"seller": "ELENA VASILESCU"\n}', name='ContractParties'), type='function')]))], created=1728905317, model='gpt-4-0613', object='chat.completion', service_tier=None, system_fingerprint=None, usage=CompletionUsage(completion_tokens=28, prompt_tokens=232, total_tokens=260, completion_tokens_details=None, prompt_tokens_details=None))
2024-10-14 14:28:44,237 - DEBUG - close.started
2024-10-14 14:28:44,237 - DEBUG - close.complete
2024-10-14 14:40:09,752 - WARNING - Neither CUDA nor MPS are available - defaulting to CPU. Note: This module is much faster with a GPU.
2024-10-14 14:40:11,035 - DEBUG - load_ssl_context verify=True cert=None trust_env=True http2=False
2024-10-14 14:40:11,036 - DEBUG - load_verify_locations cafile='D:\\deve\\contract_automation\\.venv\\Lib\\site-packages\\certifi\\cacert.pem'
2024-10-14 14:40:11,357 - DEBUG - Patching `client.chat.completions.create` with mode=<Mode.TOOLS: 'tool_call'>
2024-10-14 14:42:36,063 - WARNING - Neither CUDA nor MPS are available - defaulting to CPU. Note: This module is much faster with a GPU.
2024-10-14 14:42:37,334 - DEBUG - load_ssl_context verify=True cert=None trust_env=True http2=False
2024-10-14 14:42:37,335 - DEBUG - load_verify_locations cafile='D:\\deve\\contract_automation\\.venv\\Lib\\site-packages\\certifi\\cacert.pem'
2024-10-14 14:42:37,657 - DEBUG - Patching `client.chat.completions.create` with mode=<Mode.TOOLS: 'tool_call'>
2024-10-14 14:43:17,583 - WARNING - Neither CUDA nor MPS are available - defaulting to CPU. Note: This module is much faster with a GPU.
2024-10-14 14:43:18,840 - DEBUG - load_ssl_context verify=True cert=None trust_env=True http2=False
2024-10-14 14:43:18,840 - DEBUG - load_verify_locations cafile='D:\\deve\\contract_automation\\.venv\\Lib\\site-packages\\certifi\\cacert.pem'
2024-10-14 14:43:19,164 - DEBUG - Patching `client.chat.completions.create` with mode=<Mode.TOOLS: 'tool_call'>
2024-10-14 14:43:40,026 - WARNING - Neither CUDA nor MPS are available - defaulting to CPU. Note: This module is much faster with a GPU.
2024-10-14 14:43:41,292 - DEBUG - load_ssl_context verify=True cert=None trust_env=True http2=False
2024-10-14 14:43:41,293 - DEBUG - load_verify_locations cafile='D:\\deve\\contract_automation\\.venv\\Lib\\site-packages\\certifi\\cacert.pem'
2024-10-14 14:43:41,619 - DEBUG - Patching `client.chat.completions.create` with mode=<Mode.TOOLS: 'tool_call'>
2024-10-14 14:43:41,623 - DEBUG - Using proactor: IocpProactor
2024-10-14 14:43:41,641 - DEBUG - STREAM b'IHDR' 16 13
2024-10-14 14:43:41,641 - DEBUG - STREAM b'iCCP' 41 3152
2024-10-14 14:43:41,641 - DEBUG - iCCP profile name b'ICC Profile'
2024-10-14 14:43:41,641 - DEBUG - Compression method 0
2024-10-14 14:43:41,641 - DEBUG - STREAM b'eXIf' 3205 138
2024-10-14 14:43:41,641 - DEBUG - STREAM b'pHYs' 3355 9
2024-10-14 14:43:41,642 - DEBUG - STREAM b'iTXt' 3376 470
2024-10-14 14:43:41,642 - DEBUG - STREAM b'iDOT' 3858 28
2024-10-14 14:43:41,642 - DEBUG - b'iDOT' 3858 28 (unknown)
2024-10-14 14:43:41,642 - DEBUG - STREAM b'IDAT' 3898 16384
2024-10-14 14:43:41,642 - DEBUG - STREAM b'IHDR' 16 13
2024-10-14 14:43:41,642 - DEBUG - STREAM b'iCCP' 41 3152
2024-10-14 14:43:41,642 - DEBUG - iCCP profile name b'ICC Profile'
2024-10-14 14:43:41,642 - DEBUG - Compression method 0
2024-10-14 14:43:41,642 - DEBUG - STREAM b'eXIf' 3205 138
2024-10-14 14:43:41,642 - DEBUG - STREAM b'pHYs' 3355 9
2024-10-14 14:43:41,642 - DEBUG - STREAM b'iTXt' 3376 470
2024-10-14 14:43:41,642 - DEBUG - STREAM b'iDOT' 3858 28
2024-10-14 14:43:41,642 - DEBUG - b'iDOT' 3858 28 (unknown)
2024-10-14 14:43:41,642 - DEBUG - STREAM b'IDAT' 3898 16384
2024-10-14 14:43:41,652 - DEBUG - tag: XResolution (282) - type: rational (5) Tag Location: 22 - Data Location: 62 - value: b'\x00\x00\x00\x90\x00\x00\x00\x01'
2024-10-14 14:43:41,652 - DEBUG - tag: YResolution (283) - type: rational (5) Tag Location: 34 - Data Location: 70 - value: b'\x00\x00\x00\x90\x00\x00\x00\x01'
2024-10-14 14:43:41,652 - DEBUG - tag: ResolutionUnit (296) - type: short (3) - value: b'\x00\x02'
2024-10-14 14:43:41,652 - DEBUG - tag: ExifIFD (34665) - type: long (4) - value: b'\x00\x00\x00N'
2024-10-14 14:43:41,652 - DEBUG - Error closing: Operation on closed image
2024-10-14 14:43:43,714 - DEBUG - STREAM b'IHDR' 16 13
2024-10-14 14:43:43,714 - DEBUG - STREAM b'iCCP' 41 3152
2024-10-14 14:43:43,714 - DEBUG - iCCP profile name b'ICC Profile'
2024-10-14 14:43:43,714 - DEBUG - Compression method 0
2024-10-14 14:43:43,714 - DEBUG - STREAM b'eXIf' 3205 138
2024-10-14 14:43:43,714 - DEBUG - STREAM b'pHYs' 3355 9
2024-10-14 14:43:43,714 - DEBUG - STREAM b'iTXt' 3376 471
2024-10-14 14:43:43,714 - DEBUG - STREAM b'iDOT' 3859 28
2024-10-14 14:43:43,714 - DEBUG - b'iDOT' 3859 28 (unknown)
2024-10-14 14:43:43,714 - DEBUG - STREAM b'IDAT' 3899 16384
2024-10-14 14:43:43,714 - DEBUG - STREAM b'IHDR' 16 13
2024-10-14 14:43:43,714 - DEBUG - STREAM b'iCCP' 41 3152
2024-10-14 14:43:43,714 - DEBUG - iCCP profile name b'ICC Profile'
2024-10-14 14:43:43,714 - DEBUG - Compression method 0
2024-10-14 14:43:43,714 - DEBUG - STREAM b'eXIf' 3205 138
2024-10-14 14:43:43,714 - DEBUG - STREAM b'pHYs' 3355 9
2024-10-14 14:43:43,714 - DEBUG - STREAM b'iTXt' 3376 471
2024-10-14 14:43:43,714 - DEBUG - STREAM b'iDOT' 3859 28
2024-10-14 14:43:43,714 - DEBUG - b'iDOT' 3859 28 (unknown)
2024-10-14 14:43:43,714 - DEBUG - STREAM b'IDAT' 3899 16384
2024-10-14 14:43:43,731 - DEBUG - tag: XResolution (282) - type: rational (5) Tag Location: 22 - Data Location: 62 - value: b'\x00\x00\x00\x90\x00\x00\x00\x01'
2024-10-14 14:43:43,731 - DEBUG - tag: YResolution (283) - type: rational (5) Tag Location: 34 - Data Location: 70 - value: b'\x00\x00\x00\x90\x00\x00\x00\x01'
2024-10-14 14:43:43,731 - DEBUG - tag: ResolutionUnit (296) - type: short (3) - value: b'\x00\x02'
2024-10-14 14:43:43,731 - DEBUG - tag: ExifIFD (34665) - type: long (4) - value: b'\x00\x00\x00N'
2024-10-14 14:43:43,732 - DEBUG - Error closing: Operation on closed image
2024-10-14 14:43:46,244 - DEBUG - Instructor Request: mode.value='tool_call', response_model=<class 'models.AgentAction'>, new_kwargs={'model': 'gpt-4', 'messages': [{'role': 'system', 'content': '\nYou are an AI agent specializing in contract creation and personal information extraction. \n\nYour role is:\n 1. Guide the process of extracting information from documents..\n 2. Verifying the extracted information with human input.\n 3. Identifying parties. \n 4. Constructing a contract. \n\n\nFollow the workflow precisely and ask for human input when needed.\n\n'}, {'role': 'user', 'content': "Current state: {'verified_pii_data': [], 'parties': None, 'contract_details': None, 'contract': None, 'current_action': None}\nWhat action should be taken next?"}], 'tools': [{'type': 'function', 'function': {'name': 'AgentAction', 'description': 'Correctly extracted `AgentAction` with all the required parameters with correct types', 'parameters': {'properties': {'action': {'description': 'Action to be performed by the agent', 'title': 'Action', 'type': 'string'}, 'parameters': {'additionalProperties': {'type': 'string'}, 'description': 'Parameters for the action', 'title': 'Parameters', 'type': 'object'}}, 'required': ['action', 'parameters'], 'type': 'object'}}}], 'tool_choice': {'type': 'function', 'function': {'name': 'AgentAction'}}}
2024-10-14 14:43:46,245 - DEBUG - max_retries: 1
2024-10-14 14:43:46,247 - DEBUG - Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'json_data': {'messages': [{'role': 'system', 'content': '\nYou are an AI agent specializing in contract creation and personal information extraction. \n\nYour role is:\n 1. Guide the process of extracting information from documents..\n 2. Verifying the extracted information with human input.\n 3. Identifying parties. \n 4. Constructing a contract. \n\n\nFollow the workflow precisely and ask for human input when needed.\n\n'}, {'role': 'user', 'content': "Current state: {'verified_pii_data': [], 'parties': None, 'contract_details': None, 'contract': None, 'current_action': None}\nWhat action should be taken next?"}], 'model': 'gpt-4', 'tool_choice': {'type': 'function', 'function': {'name': 'AgentAction'}}, 'tools': [{'type': 'function', 'function': {'name': 'AgentAction', 'description': 'Correctly extracted `AgentAction` with all the required parameters with correct types', 'parameters': {'properties': {'action': {'description': 'Action to be performed by the agent', 'title': 'Action', 'type': 'string'}, 'parameters': {'additionalProperties': {'type': 'string'}, 'description': 'Parameters for the action', 'title': 'Parameters', 'type': 'object'}}, 'required': ['action', 'parameters'], 'type': 'object'}}}]}}
2024-10-14 14:43:46,284 - DEBUG - Sending HTTP Request: POST https://api.openai.com/v1/chat/completions
2024-10-14 14:43:46,285 - DEBUG - connect_tcp.started host='api.openai.com' port=443 local_address=None timeout=5.0 socket_options=None
2024-10-14 14:43:46,357 - DEBUG - connect_tcp.complete return_value=<httpcore._backends.sync.SyncStream object at 0x00000179F6C0E8A0>
2024-10-14 14:43:46,357 - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x00000179F6A55AD0> server_hostname='api.openai.com' timeout=5.0
2024-10-14 14:43:46,365 - DEBUG - start_tls.complete return_value=<httpcore._backends.sync.SyncStream object at 0x00000179F6C0E7E0>
2024-10-14 14:43:46,365 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-10-14 14:43:46,366 - DEBUG - send_request_headers.complete
2024-10-14 14:43:46,366 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-10-14 14:43:46,366 - DEBUG - send_request_body.complete
2024-10-14 14:43:46,366 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-10-14 14:43:47,450 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Mon, 14 Oct 2024 11:43:47 GMT'), (b'Content-Type', b'application/json'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'user-kzzh9hik9ryjiou4ftvhondh'), (b'openai-processing-ms', b'920'), (b'openai-version', b'2020-10-01'), (b'x-ratelimit-limit-requests', b'10000'), (b'x-ratelimit-limit-tokens', b'10000'), (b'x-ratelimit-remaining-requests', b'9999'), (b'x-ratelimit-remaining-tokens', b'9853'), (b'x-ratelimit-reset-requests', b'8.64s'), (b'x-ratelimit-reset-tokens', b'882ms'), (b'x-request-id', b'req_08cc0f66c425559d8883528b8233f852'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'CF-Cache-Status', b'DYNAMIC'), (b'Set-Cookie', b'__cf_bm=XRMOKo5.EtsiOalsH7ZgPtwGq0rXl2n1.pKPnnWBrBU-1728906227-1.0.1.1-o8IE5bkoD6XTvCfXYgDGXoRPnuY9dWD8eeaGcnafaGNs.HOvTwOnSWc.f3lFTm9CNzMPotxhH.wL8SsjzC2VFw; path=/; expires=Mon, 14-Oct-24 12:13:47 GMT; domain=.api.openai.com; HttpOnly; Secure; SameSite=None'), (b'X-Content-Type-Options', b'nosniff'), (b'Set-Cookie', b'_cfuvid=n1Xv2J8tnMx5fiQiXqXWRT605w5WaUKTS0bggaiIgiM-1728906227719-0.0.1.1-604800000; path=/; domain=.api.openai.com; HttpOnly; Secure; SameSite=None'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8d27504c79d070d0-OTP'), (b'Content-Encoding', b'gzip'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-10-14 14:43:47,451 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2024-10-14 14:43:47,451 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-10-14 14:43:47,451 - DEBUG - receive_response_body.complete
2024-10-14 14:43:47,451 - DEBUG - response_closed.started
2024-10-14 14:43:47,451 - DEBUG - response_closed.complete
2024-10-14 14:43:47,451 - DEBUG - HTTP Response: POST https://api.openai.com/v1/chat/completions "200 OK" Headers([('date', 'Mon, 14 Oct 2024 11:43:47 GMT'), ('content-type', 'application/json'), ('transfer-encoding', 'chunked'), ('connection', 'keep-alive'), ('access-control-expose-headers', 'X-Request-ID'), ('openai-organization', 'user-kzzh9hik9ryjiou4ftvhondh'), ('openai-processing-ms', '920'), ('openai-version', '2020-10-01'), ('x-ratelimit-limit-requests', '10000'), ('x-ratelimit-limit-tokens', '10000'), ('x-ratelimit-remaining-requests', '9999'), ('x-ratelimit-remaining-tokens', '9853'), ('x-ratelimit-reset-requests', '8.64s'), ('x-ratelimit-reset-tokens', '882ms'), ('x-request-id', 'req_08cc0f66c425559d8883528b8233f852'), ('strict-transport-security', 'max-age=31536000; includeSubDomains; preload'), ('cf-cache-status', 'DYNAMIC'), ('set-cookie', '__cf_bm=XRMOKo5.EtsiOalsH7ZgPtwGq0rXl2n1.pKPnnWBrBU-1728906227-1.0.1.1-o8IE5bkoD6XTvCfXYgDGXoRPnuY9dWD8eeaGcnafaGNs.HOvTwOnSWc.f3lFTm9CNzMPotxhH.wL8SsjzC2VFw; path=/; expires=Mon, 14-Oct-24 12:13:47 GMT; domain=.api.openai.com; HttpOnly; Secure; SameSite=None'), ('x-content-type-options', 'nosniff'), ('set-cookie', '_cfuvid=n1Xv2J8tnMx5fiQiXqXWRT605w5WaUKTS0bggaiIgiM-1728906227719-0.0.1.1-604800000; path=/; domain=.api.openai.com; HttpOnly; Secure; SameSite=None'), ('server', 'cloudflare'), ('cf-ray', '8d27504c79d070d0-OTP'), ('content-encoding', 'gzip'), ('alt-svc', 'h3=":443"; ma=86400')])
2024-10-14 14:43:47,451 - DEBUG - request_id: req_08cc0f66c425559d8883528b8233f852
2024-10-14 14:43:47,453 - DEBUG - Instructor Raw Response: ChatCompletion(id='chatcmpl-AIDmEKbKYNw2frrLgAfYoL7kx31sJ', choices=[Choice(finish_reason='stop', index=0, logprobs=None, message=ChatCompletionMessage(content=None, refusal=None, role='assistant', function_call=None, tool_calls=[ChatCompletionMessageToolCall(id='call_MPRDU4RaUbRsclQAklB9u9OH', function=Function(arguments='{\n"action": "extract_information_from_documents"\n}', name='AgentAction'), type='function')]))], created=1728906226, model='gpt-4-0613', object='chat.completion', service_tier=None, system_fingerprint=None, usage=CompletionUsage(completion_tokens=11, prompt_tokens=183, total_tokens=194, completion_tokens_details=None, prompt_tokens_details=None))
2024-10-14 14:43:47,454 - DEBUG - Instructor Request: mode.value='tool_call', response_model=<class 'models.AgentAction'>, new_kwargs={'model': 'gpt-4', 'messages': [{'role': 'system', 'content': '\nYou are an AI agent specializing in contract creation and personal information extraction. \n\nYour role is:\n 1. Guide the process of extracting information from documents..\n 2. Verifying the extracted information with human input.\n 3. Identifying parties. \n 4. Constructing a contract. \n\n\nFollow the workflow precisely and ask for human input when needed.\n\n'}, {'role': 'user', 'content': "Current state: {'verified_pii_data': [], 'parties': None, 'contract_details': None, 'contract': None, 'current_action': None}\nWhat action should be taken next?"}], 'tools': [{'type': 'function', 'function': {'name': 'AgentAction', 'description': 'Correctly extracted `AgentAction` with all the required parameters with correct types', 'parameters': {'properties': {'action': {'description': 'Action to be performed by the agent', 'title': 'Action', 'type': 'string'}, 'parameters': {'additionalProperties': {'type': 'string'}, 'description': 'Parameters for the action', 'title': 'Parameters', 'type': 'object'}}, 'required': ['action', 'parameters'], 'type': 'object'}}}], 'tool_choice': {'type': 'function', 'function': {'name': 'AgentAction'}}}
2024-10-14 14:43:47,454 - DEBUG - max_retries: 1
2024-10-14 14:43:47,456 - DEBUG - Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'json_data': {'messages': [{'role': 'system', 'content': '\nYou are an AI agent specializing in contract creation and personal information extraction. \n\nYour role is:\n 1. Guide the process of extracting information from documents..\n 2. Verifying the extracted information with human input.\n 3. Identifying parties. \n 4. Constructing a contract. \n\n\nFollow the workflow precisely and ask for human input when needed.\n\n'}, {'role': 'user', 'content': "Current state: {'verified_pii_data': [], 'parties': None, 'contract_details': None, 'contract': None, 'current_action': None}\nWhat action should be taken next?"}], 'model': 'gpt-4', 'tool_choice': {'type': 'function', 'function': {'name': 'AgentAction'}}, 'tools': [{'type': 'function', 'function': {'name': 'AgentAction', 'description': 'Correctly extracted `AgentAction` with all the required parameters with correct types', 'parameters': {'properties': {'action': {'description': 'Action to be performed by the agent', 'title': 'Action', 'type': 'string'}, 'parameters': {'additionalProperties': {'type': 'string'}, 'description': 'Parameters for the action', 'title': 'Parameters', 'type': 'object'}}, 'required': ['action', 'parameters'], 'type': 'object'}}}]}}
2024-10-14 14:43:47,456 - DEBUG - Sending HTTP Request: POST https://api.openai.com/v1/chat/completions
2024-10-14 14:43:47,456 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-10-14 14:43:47,456 - DEBUG - send_request_headers.complete
2024-10-14 14:43:47,456 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-10-14 14:43:47,457 - DEBUG - send_request_body.complete
2024-10-14 14:43:47,457 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-10-14 14:43:48,327 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Mon, 14 Oct 2024 11:43:48 GMT'), (b'Content-Type', b'application/json'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'user-kzzh9hik9ryjiou4ftvhondh'), (b'openai-processing-ms', b'718'), (b'openai-version', b'2020-10-01'), (b'x-ratelimit-limit-requests', b'10000'), (b'x-ratelimit-limit-tokens', b'10000'), (b'x-ratelimit-remaining-requests', b'9998'), (b'x-ratelimit-remaining-tokens', b'9829'), (b'x-ratelimit-reset-requests', b'16.205s'), (b'x-ratelimit-reset-tokens', b'1.02s'), (b'x-request-id', b'req_e62d153f53ed56ee2a51d67d8b898651'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8d27505348dd70d0-OTP'), (b'Content-Encoding', b'gzip'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-10-14 14:43:48,327 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2024-10-14 14:43:48,328 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-10-14 14:43:48,328 - DEBUG - receive_response_body.complete
2024-10-14 14:43:48,328 - DEBUG - response_closed.started
2024-10-14 14:43:48,328 - DEBUG - response_closed.complete
2024-10-14 14:43:48,328 - DEBUG - HTTP Response: POST https://api.openai.com/v1/chat/completions "200 OK" Headers({'date': 'Mon, 14 Oct 2024 11:43:48 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-expose-headers': 'X-Request-ID', 'openai-organization': 'user-kzzh9hik9ryjiou4ftvhondh', 'openai-processing-ms': '718', 'openai-version': '2020-10-01', 'x-ratelimit-limit-requests': '10000', 'x-ratelimit-limit-tokens': '10000', 'x-ratelimit-remaining-requests': '9998', 'x-ratelimit-remaining-tokens': '9829', 'x-ratelimit-reset-requests': '16.205s', 'x-ratelimit-reset-tokens': '1.02s', 'x-request-id': 'req_e62d153f53ed56ee2a51d67d8b898651', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8d27505348dd70d0-OTP', 'content-encoding': 'gzip', 'alt-svc': 'h3=":443"; ma=86400'})
2024-10-14 14:43:48,328 - DEBUG - request_id: req_e62d153f53ed56ee2a51d67d8b898651
2024-10-14 14:43:48,329 - DEBUG - Instructor Raw Response: ChatCompletion(id='chatcmpl-AIDmFbQMN3cQHNyAmTakK5TC9Ap9K', choices=[Choice(finish_reason='stop', index=0, logprobs=None, message=ChatCompletionMessage(content=None, refusal=None, role='assistant', function_call=None, tool_calls=[ChatCompletionMessageToolCall(id='call_aZ0AFQouthYw9gNILVThhP4w', function=Function(arguments='{\n"action": "extract_information"\n}', name='AgentAction'), type='function')]))], created=1728906227, model='gpt-4-0613', object='chat.completion', service_tier=None, system_fingerprint=None, usage=CompletionUsage(completion_tokens=9, prompt_tokens=183, total_tokens=192, completion_tokens_details=None, prompt_tokens_details=None))
2024-10-14 14:43:48,331 - DEBUG - Instructor Request: mode.value='tool_call', response_model=<class 'models.AgentAction'>, new_kwargs={'model': 'gpt-4', 'messages': [{'role': 'system', 'content': '\nYou are an AI agent specializing in contract creation and personal information extraction. \n\nYour role is:\n 1. Guide the process of extracting information from documents..\n 2. Verifying the extracted information with human input.\n 3. Identifying parties. \n 4. Constructing a contract. \n\n\nFollow the workflow precisely and ask for human input when needed.\n\n'}, {'role': 'user', 'content': "Current state: {'verified_pii_data': [], 'parties': None, 'contract_details': None, 'contract': None, 'current_action': None}\nWhat action should be taken next?"}], 'tools': [{'type': 'function', 'function': {'name': 'AgentAction', 'description': 'Correctly extracted `AgentAction` with all the required parameters with correct types', 'parameters': {'properties': {'action': {'description': 'Action to be performed by the agent', 'title': 'Action', 'type': 'string'}, 'parameters': {'additionalProperties': {'type': 'string'}, 'description': 'Parameters for the action', 'title': 'Parameters', 'type': 'object'}}, 'required': ['action', 'parameters'], 'type': 'object'}}}], 'tool_choice': {'type': 'function', 'function': {'name': 'AgentAction'}}}
2024-10-14 14:43:48,331 - DEBUG - max_retries: 1
2024-10-14 14:43:48,335 - DEBUG - Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'json_data': {'messages': [{'role': 'system', 'content': '\nYou are an AI agent specializing in contract creation and personal information extraction. \n\nYour role is:\n 1. Guide the process of extracting information from documents..\n 2. Verifying the extracted information with human input.\n 3. Identifying parties. \n 4. Constructing a contract. \n\n\nFollow the workflow precisely and ask for human input when needed.\n\n'}, {'role': 'user', 'content': "Current state: {'verified_pii_data': [], 'parties': None, 'contract_details': None, 'contract': None, 'current_action': None}\nWhat action should be taken next?"}], 'model': 'gpt-4', 'tool_choice': {'type': 'function', 'function': {'name': 'AgentAction'}}, 'tools': [{'type': 'function', 'function': {'name': 'AgentAction', 'description': 'Correctly extracted `AgentAction` with all the required parameters with correct types', 'parameters': {'properties': {'action': {'description': 'Action to be performed by the agent', 'title': 'Action', 'type': 'string'}, 'parameters': {'additionalProperties': {'type': 'string'}, 'description': 'Parameters for the action', 'title': 'Parameters', 'type': 'object'}}, 'required': ['action', 'parameters'], 'type': 'object'}}}]}}
2024-10-14 14:43:48,336 - DEBUG - Sending HTTP Request: POST https://api.openai.com/v1/chat/completions
2024-10-14 14:43:48,336 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-10-14 14:43:48,336 - DEBUG - send_request_headers.complete
2024-10-14 14:43:48,337 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-10-14 14:43:48,337 - DEBUG - send_request_body.complete
2024-10-14 14:43:48,337 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-10-14 14:43:49,342 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Mon, 14 Oct 2024 11:43:49 GMT'), (b'Content-Type', b'application/json'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'user-kzzh9hik9ryjiou4ftvhondh'), (b'openai-processing-ms', b'846'), (b'openai-version', b'2020-10-01'), (b'x-ratelimit-limit-requests', b'10000'), (b'x-ratelimit-limit-tokens', b'10000'), (b'x-ratelimit-remaining-requests', b'9997'), (b'x-ratelimit-remaining-tokens', b'9786'), (b'x-ratelimit-reset-requests', b'23.954s'), (b'x-ratelimit-reset-tokens', b'1.281s'), (b'x-request-id', b'req_0517191513286132336df77cba315d41'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8d275058ce8c70d0-OTP'), (b'Content-Encoding', b'gzip'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-10-14 14:43:49,343 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2024-10-14 14:43:49,343 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-10-14 14:43:49,343 - DEBUG - receive_response_body.complete
2024-10-14 14:43:49,344 - DEBUG - response_closed.started
2024-10-14 14:43:49,344 - DEBUG - response_closed.complete
2024-10-14 14:43:49,344 - DEBUG - HTTP Response: POST https://api.openai.com/v1/chat/completions "200 OK" Headers({'date': 'Mon, 14 Oct 2024 11:43:49 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-expose-headers': 'X-Request-ID', 'openai-organization': 'user-kzzh9hik9ryjiou4ftvhondh', 'openai-processing-ms': '846', 'openai-version': '2020-10-01', 'x-ratelimit-limit-requests': '10000', 'x-ratelimit-limit-tokens': '10000', 'x-ratelimit-remaining-requests': '9997', 'x-ratelimit-remaining-tokens': '9786', 'x-ratelimit-reset-requests': '23.954s', 'x-ratelimit-reset-tokens': '1.281s', 'x-request-id': 'req_0517191513286132336df77cba315d41', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8d275058ce8c70d0-OTP', 'content-encoding': 'gzip', 'alt-svc': 'h3=":443"; ma=86400'})
2024-10-14 14:43:49,344 - DEBUG - request_id: req_0517191513286132336df77cba315d41
2024-10-14 14:43:49,344 - DEBUG - Instructor Raw Response: ChatCompletion(id='chatcmpl-AIDmGXsZVzZZT9aB26dVQChHDXHm8', choices=[Choice(finish_reason='stop', index=0, logprobs=None, message=ChatCompletionMessage(content=None, refusal=None, role='assistant', function_call=None, tool_calls=[ChatCompletionMessageToolCall(id='call_kyLFogkrUvVtjRl5mhLtaWvu', function=Function(arguments='{\n"action": "extract_parts_from_documents"\n}', name='AgentAction'), type='function')]))], created=1728906228, model='gpt-4-0613', object='chat.completion', service_tier=None, system_fingerprint=None, usage=CompletionUsage(completion_tokens=11, prompt_tokens=183, total_tokens=194, completion_tokens_details=None, prompt_tokens_details=None))
2024-10-14 14:43:49,346 - DEBUG - Instructor Request: mode.value='tool_call', response_model=<class 'models.AgentAction'>, new_kwargs={'model': 'gpt-4', 'messages': [{'role': 'system', 'content': '\nYou are an AI agent specializing in contract creation and personal information extraction. \n\nYour role is:\n 1. Guide the process of extracting information from documents..\n 2. Verifying the extracted information with human input.\n 3. Identifying parties. \n 4. Constructing a contract. \n\n\nFollow the workflow precisely and ask for human input when needed.\n\n'}, {'role': 'user', 'content': "Current state: {'verified_pii_data': [], 'parties': None, 'contract_details': None, 'contract': None, 'current_action': None}\nWhat action should be taken next?"}], 'tools': [{'type': 'function', 'function': {'name': 'AgentAction', 'description': 'Correctly extracted `AgentAction` with all the required parameters with correct types', 'parameters': {'properties': {'action': {'description': 'Action to be performed by the agent', 'title': 'Action', 'type': 'string'}, 'parameters': {'additionalProperties': {'type': 'string'}, 'description': 'Parameters for the action', 'title': 'Parameters', 'type': 'object'}}, 'required': ['action', 'parameters'], 'type': 'object'}}}], 'tool_choice': {'type': 'function', 'function': {'name': 'AgentAction'}}}
2024-10-14 14:43:49,346 - DEBUG - max_retries: 1
2024-10-14 14:43:49,348 - DEBUG - Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'json_data': {'messages': [{'role': 'system', 'content': '\nYou are an AI agent specializing in contract creation and personal information extraction. \n\nYour role is:\n 1. Guide the process of extracting information from documents..\n 2. Verifying the extracted information with human input.\n 3. Identifying parties. \n 4. Constructing a contract. \n\n\nFollow the workflow precisely and ask for human input when needed.\n\n'}, {'role': 'user', 'content': "Current state: {'verified_pii_data': [], 'parties': None, 'contract_details': None, 'contract': None, 'current_action': None}\nWhat action should be taken next?"}], 'model': 'gpt-4', 'tool_choice': {'type': 'function', 'function': {'name': 'AgentAction'}}, 'tools': [{'type': 'function', 'function': {'name': 'AgentAction', 'description': 'Correctly extracted `AgentAction` with all the required parameters with correct types', 'parameters': {'properties': {'action': {'description': 'Action to be performed by the agent', 'title': 'Action', 'type': 'string'}, 'parameters': {'additionalProperties': {'type': 'string'}, 'description': 'Parameters for the action', 'title': 'Parameters', 'type': 'object'}}, 'required': ['action', 'parameters'], 'type': 'object'}}}]}}
2024-10-14 14:43:49,349 - DEBUG - Sending HTTP Request: POST https://api.openai.com/v1/chat/completions
2024-10-14 14:43:49,349 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-10-14 14:43:49,349 - DEBUG - send_request_headers.complete
2024-10-14 14:43:49,349 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-10-14 14:43:49,349 - DEBUG - send_request_body.complete
2024-10-14 14:43:49,349 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-10-14 14:43:50,007 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Mon, 14 Oct 2024 11:43:50 GMT'), (b'Content-Type', b'application/json'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'user-kzzh9hik9ryjiou4ftvhondh'), (b'openai-processing-ms', b'503'), (b'openai-version', b'2020-10-01'), (b'x-ratelimit-limit-requests', b'10000'), (b'x-ratelimit-limit-tokens', b'10000'), (b'x-ratelimit-remaining-requests', b'9996'), (b'x-ratelimit-remaining-tokens', b'9757'), (b'x-ratelimit-reset-requests', b'31.606s'), (b'x-ratelimit-reset-tokens', b'1.456s'), (b'x-request-id', b'req_417952a65ed87c3cb237ed68369f9133'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8d27505f2cb370d0-OTP'), (b'Content-Encoding', b'gzip'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-10-14 14:43:50,008 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2024-10-14 14:43:50,009 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-10-14 14:43:50,009 - DEBUG - receive_response_body.complete
2024-10-14 14:43:50,009 - DEBUG - response_closed.started
2024-10-14 14:43:50,009 - DEBUG - response_closed.complete
2024-10-14 14:43:50,010 - DEBUG - HTTP Response: POST https://api.openai.com/v1/chat/completions "200 OK" Headers({'date': 'Mon, 14 Oct 2024 11:43:50 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-expose-headers': 'X-Request-ID', 'openai-organization': 'user-kzzh9hik9ryjiou4ftvhondh', 'openai-processing-ms': '503', 'openai-version': '2020-10-01', 'x-ratelimit-limit-requests': '10000', 'x-ratelimit-limit-tokens': '10000', 'x-ratelimit-remaining-requests': '9996', 'x-ratelimit-remaining-tokens': '9757', 'x-ratelimit-reset-requests': '31.606s', 'x-ratelimit-reset-tokens': '1.456s', 'x-request-id': 'req_417952a65ed87c3cb237ed68369f9133', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8d27505f2cb370d0-OTP', 'content-encoding': 'gzip', 'alt-svc': 'h3=":443"; ma=86400'})
2024-10-14 14:43:50,010 - DEBUG - request_id: req_417952a65ed87c3cb237ed68369f9133
2024-10-14 14:43:50,010 - DEBUG - Instructor Raw Response: ChatCompletion(id='chatcmpl-AIDmHJDOw4um1dAOjrt21Eg788F1Q', choices=[Choice(finish_reason='stop', index=0, logprobs=None, message=ChatCompletionMessage(content=None, refusal=None, role='assistant', function_call=None, tool_calls=[ChatCompletionMessageToolCall(id='call_y0OCLqDnbOGlGkllwAFfx2kp', function=Function(arguments='{\n"action": "extract_information"\n}', name='AgentAction'), type='function')]))], created=1728906229, model='gpt-4-0613', object='chat.completion', service_tier=None, system_fingerprint=None, usage=CompletionUsage(completion_tokens=9, prompt_tokens=183, total_tokens=192, completion_tokens_details=None, prompt_tokens_details=None))
2024-10-14 14:43:50,012 - DEBUG - Instructor Request: mode.value='tool_call', response_model=<class 'models.AgentAction'>, new_kwargs={'model': 'gpt-4', 'messages': [{'role': 'system', 'content': '\nYou are an AI agent specializing in contract creation and personal information extraction. \n\nYour role is:\n 1. Guide the process of extracting information from documents..\n 2. Verifying the extracted information with human input.\n 3. Identifying parties. \n 4. Constructing a contract. \n\n\nFollow the workflow precisely and ask for human input when needed.\n\n'}, {'role': 'user', 'content': "Current state: {'verified_pii_data': [], 'parties': None, 'contract_details': None, 'contract': None, 'current_action': None}\nWhat action should be taken next?"}], 'tools': [{'type': 'function', 'function': {'name': 'AgentAction', 'description': 'Correctly extracted `AgentAction` with all the required parameters with correct types', 'parameters': {'properties': {'action': {'description': 'Action to be performed by the agent', 'title': 'Action', 'type': 'string'}, 'parameters': {'additionalProperties': {'type': 'string'}, 'description': 'Parameters for the action', 'title': 'Parameters', 'type': 'object'}}, 'required': ['action', 'parameters'], 'type': 'object'}}}], 'tool_choice': {'type': 'function', 'function': {'name': 'AgentAction'}}}
2024-10-14 14:43:50,012 - DEBUG - max_retries: 1
2024-10-14 14:43:50,015 - DEBUG - Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'json_data': {'messages': [{'role': 'system', 'content': '\nYou are an AI agent specializing in contract creation and personal information extraction. \n\nYour role is:\n 1. Guide the process of extracting information from documents..\n 2. Verifying the extracted information with human input.\n 3. Identifying parties. \n 4. Constructing a contract. \n\n\nFollow the workflow precisely and ask for human input when needed.\n\n'}, {'role': 'user', 'content': "Current state: {'verified_pii_data': [], 'parties': None, 'contract_details': None, 'contract': None, 'current_action': None}\nWhat action should be taken next?"}], 'model': 'gpt-4', 'tool_choice': {'type': 'function', 'function': {'name': 'AgentAction'}}, 'tools': [{'type': 'function', 'function': {'name': 'AgentAction', 'description': 'Correctly extracted `AgentAction` with all the required parameters with correct types', 'parameters': {'properties': {'action': {'description': 'Action to be performed by the agent', 'title': 'Action', 'type': 'string'}, 'parameters': {'additionalProperties': {'type': 'string'}, 'description': 'Parameters for the action', 'title': 'Parameters', 'type': 'object'}}, 'required': ['action', 'parameters'], 'type': 'object'}}}]}}
2024-10-14 14:43:50,015 - DEBUG - Sending HTTP Request: POST https://api.openai.com/v1/chat/completions
2024-10-14 14:43:50,015 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-10-14 14:43:50,016 - DEBUG - send_request_headers.complete
2024-10-14 14:43:50,016 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-10-14 14:43:50,016 - DEBUG - send_request_body.complete
2024-10-14 14:43:50,016 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-10-14 14:43:51,094 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Mon, 14 Oct 2024 11:43:51 GMT'), (b'Content-Type', b'application/json'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'user-kzzh9hik9ryjiou4ftvhondh'), (b'openai-processing-ms', b'900'), (b'openai-version', b'2020-10-01'), (b'x-ratelimit-limit-requests', b'10000'), (b'x-ratelimit-limit-tokens', b'10000'), (b'x-ratelimit-remaining-requests', b'9995'), (b'x-ratelimit-remaining-tokens', b'9679'), (b'x-ratelimit-reset-requests', b'39.558s'), (b'x-ratelimit-reset-tokens', b'1.92s'), (b'x-request-id', b'req_8de554ee4bff4598fea40341b4226e26'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8d27506348d570d0-OTP'), (b'Content-Encoding', b'gzip'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-10-14 14:43:51,094 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2024-10-14 14:43:51,095 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-10-14 14:43:51,095 - DEBUG - receive_response_body.complete
2024-10-14 14:43:51,095 - DEBUG - response_closed.started
2024-10-14 14:43:51,095 - DEBUG - response_closed.complete
2024-10-14 14:43:51,095 - DEBUG - HTTP Response: POST https://api.openai.com/v1/chat/completions "200 OK" Headers({'date': 'Mon, 14 Oct 2024 11:43:51 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-expose-headers': 'X-Request-ID', 'openai-organization': 'user-kzzh9hik9ryjiou4ftvhondh', 'openai-processing-ms': '900', 'openai-version': '2020-10-01', 'x-ratelimit-limit-requests': '10000', 'x-ratelimit-limit-tokens': '10000', 'x-ratelimit-remaining-requests': '9995', 'x-ratelimit-remaining-tokens': '9679', 'x-ratelimit-reset-requests': '39.558s', 'x-ratelimit-reset-tokens': '1.92s', 'x-request-id': 'req_8de554ee4bff4598fea40341b4226e26', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8d27506348d570d0-OTP', 'content-encoding': 'gzip', 'alt-svc': 'h3=":443"; ma=86400'})
2024-10-14 14:43:51,095 - DEBUG - request_id: req_8de554ee4bff4598fea40341b4226e26
2024-10-14 14:43:51,096 - DEBUG - Instructor Raw Response: ChatCompletion(id='chatcmpl-AIDmI3mNLRjODJ8MeFZGkBkNwrrFq', choices=[Choice(finish_reason='stop', index=0, logprobs=None, message=ChatCompletionMessage(content=None, refusal=None, role='assistant', function_call=None, tool_calls=[ChatCompletionMessageToolCall(id='call_jcXG7ljnPv5kraoaim6G8PFx', function=Function(arguments='{\n"action": "extract_personal_information"\n}', name='AgentAction'), type='function')]))], created=1728906230, model='gpt-4-0613', object='chat.completion', service_tier=None, system_fingerprint=None, usage=CompletionUsage(completion_tokens=10, prompt_tokens=183, total_tokens=193, completion_tokens_details=None, prompt_tokens_details=None))
2024-10-14 14:43:51,098 - DEBUG - Instructor Request: mode.value='tool_call', response_model=<class 'models.AgentAction'>, new_kwargs={'model': 'gpt-4', 'messages': [{'role': 'system', 'content': '\nYou are an AI agent specializing in contract creation and personal information extraction. \n\nYour role is:\n 1. Guide the process of extracting information from documents..\n 2. Verifying the extracted information with human input.\n 3. Identifying parties. \n 4. Constructing a contract. \n\n\nFollow the workflow precisely and ask for human input when needed.\n\n'}, {'role': 'user', 'content': "Current state: {'verified_pii_data': [], 'parties': None, 'contract_details': None, 'contract': None, 'current_action': None}\nWhat action should be taken next?"}], 'tools': [{'type': 'function', 'function': {'name': 'AgentAction', 'description': 'Correctly extracted `AgentAction` with all the required parameters with correct types', 'parameters': {'properties': {'action': {'description': 'Action to be performed by the agent', 'title': 'Action', 'type': 'string'}, 'parameters': {'additionalProperties': {'type': 'string'}, 'description': 'Parameters for the action', 'title': 'Parameters', 'type': 'object'}}, 'required': ['action', 'parameters'], 'type': 'object'}}}], 'tool_choice': {'type': 'function', 'function': {'name': 'AgentAction'}}}
2024-10-14 14:43:51,099 - DEBUG - max_retries: 1
2024-10-14 14:43:51,103 - DEBUG - Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'json_data': {'messages': [{'role': 'system', 'content': '\nYou are an AI agent specializing in contract creation and personal information extraction. \n\nYour role is:\n 1. Guide the process of extracting information from documents..\n 2. Verifying the extracted information with human input.\n 3. Identifying parties. \n 4. Constructing a contract. \n\n\nFollow the workflow precisely and ask for human input when needed.\n\n'}, {'role': 'user', 'content': "Current state: {'verified_pii_data': [], 'parties': None, 'contract_details': None, 'contract': None, 'current_action': None}\nWhat action should be taken next?"}], 'model': 'gpt-4', 'tool_choice': {'type': 'function', 'function': {'name': 'AgentAction'}}, 'tools': [{'type': 'function', 'function': {'name': 'AgentAction', 'description': 'Correctly extracted `AgentAction` with all the required parameters with correct types', 'parameters': {'properties': {'action': {'description': 'Action to be performed by the agent', 'title': 'Action', 'type': 'string'}, 'parameters': {'additionalProperties': {'type': 'string'}, 'description': 'Parameters for the action', 'title': 'Parameters', 'type': 'object'}}, 'required': ['action', 'parameters'], 'type': 'object'}}}]}}
2024-10-14 14:43:51,104 - DEBUG - Sending HTTP Request: POST https://api.openai.com/v1/chat/completions
2024-10-14 14:43:51,104 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-10-14 14:43:51,104 - DEBUG - send_request_headers.complete
2024-10-14 14:43:51,105 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-10-14 14:43:51,105 - DEBUG - send_request_body.complete
2024-10-14 14:43:51,105 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-10-14 14:43:52,106 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Mon, 14 Oct 2024 11:43:52 GMT'), (b'Content-Type', b'application/json'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'user-kzzh9hik9ryjiou4ftvhondh'), (b'openai-processing-ms', b'836'), (b'openai-version', b'2020-10-01'), (b'x-ratelimit-limit-requests', b'10000'), (b'x-ratelimit-limit-tokens', b'10000'), (b'x-ratelimit-remaining-requests', b'9994'), (b'x-ratelimit-remaining-tokens', b'9667'), (b'x-ratelimit-reset-requests', b'47.113s'), (b'x-ratelimit-reset-tokens', b'1.994s'), (b'x-request-id', b'req_3ccdd4d88459d4ffd945e5a271e3df36'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8d27506a186570d0-OTP'), (b'Content-Encoding', b'gzip'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-10-14 14:43:52,107 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2024-10-14 14:43:52,107 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-10-14 14:43:52,107 - DEBUG - receive_response_body.complete
2024-10-14 14:43:52,107 - DEBUG - response_closed.started
2024-10-14 14:43:52,107 - DEBUG - response_closed.complete
2024-10-14 14:43:52,107 - DEBUG - HTTP Response: POST https://api.openai.com/v1/chat/completions "200 OK" Headers({'date': 'Mon, 14 Oct 2024 11:43:52 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-expose-headers': 'X-Request-ID', 'openai-organization': 'user-kzzh9hik9ryjiou4ftvhondh', 'openai-processing-ms': '836', 'openai-version': '2020-10-01', 'x-ratelimit-limit-requests': '10000', 'x-ratelimit-limit-tokens': '10000', 'x-ratelimit-remaining-requests': '9994', 'x-ratelimit-remaining-tokens': '9667', 'x-ratelimit-reset-requests': '47.113s', 'x-ratelimit-reset-tokens': '1.994s', 'x-request-id': 'req_3ccdd4d88459d4ffd945e5a271e3df36', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8d27506a186570d0-OTP', 'content-encoding': 'gzip', 'alt-svc': 'h3=":443"; ma=86400'})
2024-10-14 14:43:52,108 - DEBUG - request_id: req_3ccdd4d88459d4ffd945e5a271e3df36
2024-10-14 14:43:52,108 - DEBUG - Instructor Raw Response: ChatCompletion(id='chatcmpl-AIDmJRy6dK7SMSbb56Fpxhvzt8ygG', choices=[Choice(finish_reason='stop', index=0, logprobs=None, message=ChatCompletionMessage(content=None, refusal=None, role='assistant', function_call=None, tool_calls=[ChatCompletionMessageToolCall(id='call_bP8UTHJTjWqjF1s4YQUu7bmS', function=Function(arguments='{\n  "action": "extract_information"\n}', name='AgentAction'), type='function')]))], created=1728906231, model='gpt-4-0613', object='chat.completion', service_tier=None, system_fingerprint=None, usage=CompletionUsage(completion_tokens=10, prompt_tokens=183, total_tokens=193, completion_tokens_details=None, prompt_tokens_details=None))
2024-10-14 14:43:52,110 - DEBUG - Instructor Request: mode.value='tool_call', response_model=<class 'models.AgentAction'>, new_kwargs={'model': 'gpt-4', 'messages': [{'role': 'system', 'content': '\nYou are an AI agent specializing in contract creation and personal information extraction. \n\nYour role is:\n 1. Guide the process of extracting information from documents..\n 2. Verifying the extracted information with human input.\n 3. Identifying parties. \n 4. Constructing a contract. \n\n\nFollow the workflow precisely and ask for human input when needed.\n\n'}, {'role': 'user', 'content': "Current state: {'verified_pii_data': [], 'parties': None, 'contract_details': None, 'contract': None, 'current_action': None}\nWhat action should be taken next?"}], 'tools': [{'type': 'function', 'function': {'name': 'AgentAction', 'description': 'Correctly extracted `AgentAction` with all the required parameters with correct types', 'parameters': {'properties': {'action': {'description': 'Action to be performed by the agent', 'title': 'Action', 'type': 'string'}, 'parameters': {'additionalProperties': {'type': 'string'}, 'description': 'Parameters for the action', 'title': 'Parameters', 'type': 'object'}}, 'required': ['action', 'parameters'], 'type': 'object'}}}], 'tool_choice': {'type': 'function', 'function': {'name': 'AgentAction'}}}
2024-10-14 14:43:52,110 - DEBUG - max_retries: 1
2024-10-14 14:43:52,112 - DEBUG - Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'json_data': {'messages': [{'role': 'system', 'content': '\nYou are an AI agent specializing in contract creation and personal information extraction. \n\nYour role is:\n 1. Guide the process of extracting information from documents..\n 2. Verifying the extracted information with human input.\n 3. Identifying parties. \n 4. Constructing a contract. \n\n\nFollow the workflow precisely and ask for human input when needed.\n\n'}, {'role': 'user', 'content': "Current state: {'verified_pii_data': [], 'parties': None, 'contract_details': None, 'contract': None, 'current_action': None}\nWhat action should be taken next?"}], 'model': 'gpt-4', 'tool_choice': {'type': 'function', 'function': {'name': 'AgentAction'}}, 'tools': [{'type': 'function', 'function': {'name': 'AgentAction', 'description': 'Correctly extracted `AgentAction` with all the required parameters with correct types', 'parameters': {'properties': {'action': {'description': 'Action to be performed by the agent', 'title': 'Action', 'type': 'string'}, 'parameters': {'additionalProperties': {'type': 'string'}, 'description': 'Parameters for the action', 'title': 'Parameters', 'type': 'object'}}, 'required': ['action', 'parameters'], 'type': 'object'}}}]}}
2024-10-14 14:43:52,113 - DEBUG - Sending HTTP Request: POST https://api.openai.com/v1/chat/completions
2024-10-14 14:43:52,113 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-10-14 14:43:52,113 - DEBUG - send_request_headers.complete
2024-10-14 14:43:52,113 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-10-14 14:43:52,113 - DEBUG - send_request_body.complete
2024-10-14 14:43:52,113 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-10-14 14:43:53,382 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Mon, 14 Oct 2024 11:43:53 GMT'), (b'Content-Type', b'application/json'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'user-kzzh9hik9ryjiou4ftvhondh'), (b'openai-processing-ms', b'894'), (b'openai-version', b'2020-10-01'), (b'x-ratelimit-limit-requests', b'10000'), (b'x-ratelimit-limit-tokens', b'10000'), (b'x-ratelimit-remaining-requests', b'9993'), (b'x-ratelimit-remaining-tokens', b'9644'), (b'x-ratelimit-reset-requests', b'54.733s'), (b'x-ratelimit-reset-tokens', b'2.132s'), (b'x-request-id', b'req_4943357b5558974f1c94260e0a1fb4c4'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8d275070681f70d0-OTP'), (b'Content-Encoding', b'gzip'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-10-14 14:43:53,383 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2024-10-14 14:43:53,383 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-10-14 14:43:53,384 - DEBUG - receive_response_body.complete
2024-10-14 14:43:53,384 - DEBUG - response_closed.started
2024-10-14 14:43:53,384 - DEBUG - response_closed.complete
2024-10-14 14:43:53,384 - DEBUG - HTTP Response: POST https://api.openai.com/v1/chat/completions "200 OK" Headers({'date': 'Mon, 14 Oct 2024 11:43:53 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-expose-headers': 'X-Request-ID', 'openai-organization': 'user-kzzh9hik9ryjiou4ftvhondh', 'openai-processing-ms': '894', 'openai-version': '2020-10-01', 'x-ratelimit-limit-requests': '10000', 'x-ratelimit-limit-tokens': '10000', 'x-ratelimit-remaining-requests': '9993', 'x-ratelimit-remaining-tokens': '9644', 'x-ratelimit-reset-requests': '54.733s', 'x-ratelimit-reset-tokens': '2.132s', 'x-request-id': 'req_4943357b5558974f1c94260e0a1fb4c4', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8d275070681f70d0-OTP', 'content-encoding': 'gzip', 'alt-svc': 'h3=":443"; ma=86400'})
2024-10-14 14:43:53,385 - DEBUG - request_id: req_4943357b5558974f1c94260e0a1fb4c4
2024-10-14 14:43:53,385 - DEBUG - Instructor Raw Response: ChatCompletion(id='chatcmpl-AIDmKHape0DdOigE1yC8KmdJMNnF0', choices=[Choice(finish_reason='stop', index=0, logprobs=None, message=ChatCompletionMessage(content=None, refusal=None, role='assistant', function_call=None, tool_calls=[ChatCompletionMessageToolCall(id='call_esdOeYcUtJwYN3JSmEHmmrgV', function=Function(arguments='{\n"action": "extract_personal_information"\n}', name='AgentAction'), type='function')]))], created=1728906232, model='gpt-4-0613', object='chat.completion', service_tier=None, system_fingerprint=None, usage=CompletionUsage(completion_tokens=10, prompt_tokens=183, total_tokens=193, completion_tokens_details=None, prompt_tokens_details=None))
2024-10-14 14:43:53,388 - DEBUG - Instructor Request: mode.value='tool_call', response_model=<class 'models.AgentAction'>, new_kwargs={'model': 'gpt-4', 'messages': [{'role': 'system', 'content': '\nYou are an AI agent specializing in contract creation and personal information extraction. \n\nYour role is:\n 1. Guide the process of extracting information from documents..\n 2. Verifying the extracted information with human input.\n 3. Identifying parties. \n 4. Constructing a contract. \n\n\nFollow the workflow precisely and ask for human input when needed.\n\n'}, {'role': 'user', 'content': "Current state: {'verified_pii_data': [], 'parties': None, 'contract_details': None, 'contract': None, 'current_action': None}\nWhat action should be taken next?"}], 'tools': [{'type': 'function', 'function': {'name': 'AgentAction', 'description': 'Correctly extracted `AgentAction` with all the required parameters with correct types', 'parameters': {'properties': {'action': {'description': 'Action to be performed by the agent', 'title': 'Action', 'type': 'string'}, 'parameters': {'additionalProperties': {'type': 'string'}, 'description': 'Parameters for the action', 'title': 'Parameters', 'type': 'object'}}, 'required': ['action', 'parameters'], 'type': 'object'}}}], 'tool_choice': {'type': 'function', 'function': {'name': 'AgentAction'}}}
2024-10-14 14:43:53,388 - DEBUG - max_retries: 1
2024-10-14 14:43:53,391 - DEBUG - Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'json_data': {'messages': [{'role': 'system', 'content': '\nYou are an AI agent specializing in contract creation and personal information extraction. \n\nYour role is:\n 1. Guide the process of extracting information from documents..\n 2. Verifying the extracted information with human input.\n 3. Identifying parties. \n 4. Constructing a contract. \n\n\nFollow the workflow precisely and ask for human input when needed.\n\n'}, {'role': 'user', 'content': "Current state: {'verified_pii_data': [], 'parties': None, 'contract_details': None, 'contract': None, 'current_action': None}\nWhat action should be taken next?"}], 'model': 'gpt-4', 'tool_choice': {'type': 'function', 'function': {'name': 'AgentAction'}}, 'tools': [{'type': 'function', 'function': {'name': 'AgentAction', 'description': 'Correctly extracted `AgentAction` with all the required parameters with correct types', 'parameters': {'properties': {'action': {'description': 'Action to be performed by the agent', 'title': 'Action', 'type': 'string'}, 'parameters': {'additionalProperties': {'type': 'string'}, 'description': 'Parameters for the action', 'title': 'Parameters', 'type': 'object'}}, 'required': ['action', 'parameters'], 'type': 'object'}}}]}}
2024-10-14 14:43:53,391 - DEBUG - Sending HTTP Request: POST https://api.openai.com/v1/chat/completions
2024-10-14 14:43:53,392 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-10-14 14:43:53,392 - DEBUG - send_request_headers.complete
2024-10-14 14:43:53,392 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-10-14 14:43:53,392 - DEBUG - send_request_body.complete
2024-10-14 14:43:53,392 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-10-14 14:43:54,328 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Mon, 14 Oct 2024 11:43:54 GMT'), (b'Content-Type', b'application/json'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'user-kzzh9hik9ryjiou4ftvhondh'), (b'openai-processing-ms', b'786'), (b'openai-version', b'2020-10-01'), (b'x-ratelimit-limit-requests', b'10000'), (b'x-ratelimit-limit-tokens', b'10000'), (b'x-ratelimit-remaining-requests', b'9992'), (b'x-ratelimit-remaining-tokens', b'9662'), (b'x-ratelimit-reset-requests', b'1m2.108s'), (b'x-ratelimit-reset-tokens', b'2.024s'), (b'x-request-id', b'req_d2509aab2716d03dba5b6f18610b9018'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8d2750786a5270d0-OTP'), (b'Content-Encoding', b'gzip'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-10-14 14:43:54,329 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2024-10-14 14:43:54,329 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-10-14 14:43:54,330 - DEBUG - receive_response_body.complete
2024-10-14 14:43:54,330 - DEBUG - response_closed.started
2024-10-14 14:43:54,330 - DEBUG - response_closed.complete
2024-10-14 14:43:54,330 - DEBUG - HTTP Response: POST https://api.openai.com/v1/chat/completions "200 OK" Headers({'date': 'Mon, 14 Oct 2024 11:43:54 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-expose-headers': 'X-Request-ID', 'openai-organization': 'user-kzzh9hik9ryjiou4ftvhondh', 'openai-processing-ms': '786', 'openai-version': '2020-10-01', 'x-ratelimit-limit-requests': '10000', 'x-ratelimit-limit-tokens': '10000', 'x-ratelimit-remaining-requests': '9992', 'x-ratelimit-remaining-tokens': '9662', 'x-ratelimit-reset-requests': '1m2.108s', 'x-ratelimit-reset-tokens': '2.024s', 'x-request-id': 'req_d2509aab2716d03dba5b6f18610b9018', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8d2750786a5270d0-OTP', 'content-encoding': 'gzip', 'alt-svc': 'h3=":443"; ma=86400'})
2024-10-14 14:43:54,330 - DEBUG - request_id: req_d2509aab2716d03dba5b6f18610b9018
2024-10-14 14:43:54,331 - DEBUG - Instructor Raw Response: ChatCompletion(id='chatcmpl-AIDmLajyi1YECVWq1SEOzXpAf3Dan', choices=[Choice(finish_reason='stop', index=0, logprobs=None, message=ChatCompletionMessage(content=None, refusal=None, role='assistant', function_call=None, tool_calls=[ChatCompletionMessageToolCall(id='call_BjiFhST8R7TlMcMeaXTzUvg3', function=Function(arguments='{\n"action": "extract_pii"\n}', name='AgentAction'), type='function')]))], created=1728906233, model='gpt-4-0613', object='chat.completion', service_tier=None, system_fingerprint=None, usage=CompletionUsage(completion_tokens=10, prompt_tokens=183, total_tokens=193, completion_tokens_details=None, prompt_tokens_details=None))
2024-10-14 14:43:54,333 - DEBUG - Instructor Request: mode.value='tool_call', response_model=<class 'models.PIIData'>, new_kwargs={'model': 'gpt-4', 'messages': [{'role': 'system', 'content': '\nYou are an AI agent specializing in contract creation and personal information extraction. \n\nYour role is:\n 1. Guide the process of extracting information from documents..\n 2. Verifying the extracted information with human input.\n 3. Identifying parties. \n 4. Constructing a contract. \n\n\nFollow the workflow precisely and ask for human input when needed.\n\n'}, {'role': 'user', 'content': "Extract the name and address from the given text:\n\nROUMANIE ROMAWI ROMANIA Carte CARTE De |Dentitate IDEnTITY D'iDENTITE seria TR Na 409131 CarD cNP 1891113341181 Nume/Nom/Last name T525M ISPILANTE Prenume/Prenom/First namo SENTIMENT BRUSLI Cetatenle/Nallonallte/Nallonallly Sox SexeiSox Romn\u0103 ROU M Loc nastere/Liou do naissancelPlace ol birth Or\u0219. Videle Jud.Teleorman Dom IlulAdresse/Addrass Videle Jud: Teleorman Sos. Giurgiului nr.1 695 TR Emisa dolDelivree parlIssuad by ValabilltatelValldlte Valldlty SPCLEP Videle 04.11.11-13.11.2018 IDROUISPILANTE<<SENTIMENT <BRUSLI<<<< TR409131<0R0u8911137M181113513411813 Or\u0219:"}], 'tools': [{'type': 'function', 'function': {'name': 'PIIData', 'description': 'Correctly extracted `PIIData` with all the required parameters with correct types', 'parameters': {'properties': {'name': {'description': 'Full name of the person', 'title': 'Name', 'type': 'string'}, 'address': {'description': 'Residential address of the person', 'title': 'Address', 'type': 'string'}}, 'required': ['address', 'name'], 'type': 'object'}}}], 'tool_choice': {'type': 'function', 'function': {'name': 'PIIData'}}}
2024-10-14 14:43:54,334 - DEBUG - max_retries: 1
2024-10-14 14:43:54,337 - DEBUG - Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'json_data': {'messages': [{'role': 'system', 'content': '\nYou are an AI agent specializing in contract creation and personal information extraction. \n\nYour role is:\n 1. Guide the process of extracting information from documents..\n 2. Verifying the extracted information with human input.\n 3. Identifying parties. \n 4. Constructing a contract. \n\n\nFollow the workflow precisely and ask for human input when needed.\n\n'}, {'role': 'user', 'content': "Extract the name and address from the given text:\n\nROUMANIE ROMAWI ROMANIA Carte CARTE De |Dentitate IDEnTITY D'iDENTITE seria TR Na 409131 CarD cNP 1891113341181 Nume/Nom/Last name T525M ISPILANTE Prenume/Prenom/First namo SENTIMENT BRUSLI Cetatenle/Nallonallte/Nallonallly Sox SexeiSox Romn\u0103 ROU M Loc nastere/Liou do naissancelPlace ol birth Or\u0219. Videle Jud.Teleorman Dom IlulAdresse/Addrass Videle Jud: Teleorman Sos. Giurgiului nr.1 695 TR Emisa dolDelivree parlIssuad by ValabilltatelValldlte Valldlty SPCLEP Videle 04.11.11-13.11.2018 IDROUISPILANTE<<SENTIMENT <BRUSLI<<<< TR409131<0R0u8911137M181113513411813 Or\u0219:"}], 'model': 'gpt-4', 'tool_choice': {'type': 'function', 'function': {'name': 'PIIData'}}, 'tools': [{'type': 'function', 'function': {'name': 'PIIData', 'description': 'Correctly extracted `PIIData` with all the required parameters with correct types', 'parameters': {'properties': {'name': {'description': 'Full name of the person', 'title': 'Name', 'type': 'string'}, 'address': {'description': 'Residential address of the person', 'title': 'Address', 'type': 'string'}}, 'required': ['address', 'name'], 'type': 'object'}}}]}}
2024-10-14 14:43:54,338 - DEBUG - Sending HTTP Request: POST https://api.openai.com/v1/chat/completions
2024-10-14 14:43:54,338 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-10-14 14:43:54,338 - DEBUG - send_request_headers.complete
2024-10-14 14:43:54,338 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-10-14 14:43:54,338 - DEBUG - send_request_body.complete
2024-10-14 14:43:54,338 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-10-14 14:43:56,114 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Mon, 14 Oct 2024 11:43:56 GMT'), (b'Content-Type', b'application/json'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'user-kzzh9hik9ryjiou4ftvhondh'), (b'openai-processing-ms', b'1602'), (b'openai-version', b'2020-10-01'), (b'x-ratelimit-limit-requests', b'10000'), (b'x-ratelimit-limit-tokens', b'10000'), (b'x-ratelimit-remaining-requests', b'9991'), (b'x-ratelimit-remaining-tokens', b'9512'), (b'x-ratelimit-reset-requests', b'1m9.791s'), (b'x-ratelimit-reset-tokens', b'2.927s'), (b'x-request-id', b'req_09b4069fdc5d6bd8f3aa7321a1d566a9'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8d27507e59d970d0-OTP'), (b'Content-Encoding', b'gzip'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-10-14 14:43:56,115 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2024-10-14 14:43:56,115 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-10-14 14:43:56,116 - DEBUG - receive_response_body.complete
2024-10-14 14:43:56,116 - DEBUG - response_closed.started
2024-10-14 14:43:56,116 - DEBUG - response_closed.complete
2024-10-14 14:43:56,116 - DEBUG - HTTP Response: POST https://api.openai.com/v1/chat/completions "200 OK" Headers({'date': 'Mon, 14 Oct 2024 11:43:56 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-expose-headers': 'X-Request-ID', 'openai-organization': 'user-kzzh9hik9ryjiou4ftvhondh', 'openai-processing-ms': '1602', 'openai-version': '2020-10-01', 'x-ratelimit-limit-requests': '10000', 'x-ratelimit-limit-tokens': '10000', 'x-ratelimit-remaining-requests': '9991', 'x-ratelimit-remaining-tokens': '9512', 'x-ratelimit-reset-requests': '1m9.791s', 'x-ratelimit-reset-tokens': '2.927s', 'x-request-id': 'req_09b4069fdc5d6bd8f3aa7321a1d566a9', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8d27507e59d970d0-OTP', 'content-encoding': 'gzip', 'alt-svc': 'h3=":443"; ma=86400'})
2024-10-14 14:43:56,117 - DEBUG - request_id: req_09b4069fdc5d6bd8f3aa7321a1d566a9
2024-10-14 14:43:56,118 - DEBUG - Instructor Raw Response: ChatCompletion(id='chatcmpl-AIDmMuaGgZU5EvRAnvZkJ9hwLZ5KN', choices=[Choice(finish_reason='stop', index=0, logprobs=None, message=ChatCompletionMessage(content=None, refusal=None, role='assistant', function_call=None, tool_calls=[ChatCompletionMessageToolCall(id='call_CFjNSkmUHSwr1TJ4b5h7wSSV', function=Function(arguments='{\n"name": "ISPILANTE SENTIMENT BRUSLI",\n"address": "Videle Jud: Teleorman Sos. Giurgiului nr.1 695 TR"\n}', name='PIIData'), type='function')]))], created=1728906234, model='gpt-4-0613', object='chat.completion', service_tier=None, system_fingerprint=None, usage=CompletionUsage(completion_tokens=39, prompt_tokens=377, total_tokens=416, completion_tokens_details=None, prompt_tokens_details=None))
2024-10-14 14:44:03,463 - DEBUG - Instructor Request: mode.value='tool_call', response_model=<class 'models.PIIData'>, new_kwargs={'model': 'gpt-4', 'messages': [{'role': 'system', 'content': '\nYou are an AI agent specializing in contract creation and personal information extraction. \n\nYour role is:\n 1. Guide the process of extracting information from documents..\n 2. Verifying the extracted information with human input.\n 3. Identifying parties. \n 4. Constructing a contract. \n\n\nFollow the workflow precisely and ask for human input when needed.\n\n'}, {'role': 'user', 'content': "Extract the name and address from the given text:\n\nROUMANIE ROVIAINIA ROMANIA Carte Carte DE iDentitate IdEnTITY Didentite seala SS Nr 099994 Card CNP 2410415400542 93coQ Nume/NomiLast name VASILESCU Pronume/Prenom/Flrst name ELENA < CetatenielNatlonallte/Natlonalily M Sex SexelSer Romn\u0103 ROU Loc nastore/Licu de naissancolF 'ar0 ol birth Mun: Dej Jud. Cluj Domiciliu/Adresse A ess Mun. Bucuresti Sec. 5 Str Nicolae Iorga nr.3 900 B Emisa delDelivree parllssued by Valabilitate/Vahidile Valiouy D.EPAB.D- 06.01.17-15.04.2077 IDROUVASILESCU<<ELENA<<<<<<<<<<<<<<< SS099994<0R0u4104151F770415824003421"}], 'tools': [{'type': 'function', 'function': {'name': 'PIIData', 'description': 'Correctly extracted `PIIData` with all the required parameters with correct types', 'parameters': {'properties': {'name': {'description': 'Full name of the person', 'title': 'Name', 'type': 'string'}, 'address': {'description': 'Residential address of the person', 'title': 'Address', 'type': 'string'}}, 'required': ['address', 'name'], 'type': 'object'}}}], 'tool_choice': {'type': 'function', 'function': {'name': 'PIIData'}}}
2024-10-14 14:44:03,463 - DEBUG - max_retries: 1
2024-10-14 14:44:03,465 - DEBUG - Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'json_data': {'messages': [{'role': 'system', 'content': '\nYou are an AI agent specializing in contract creation and personal information extraction. \n\nYour role is:\n 1. Guide the process of extracting information from documents..\n 2. Verifying the extracted information with human input.\n 3. Identifying parties. \n 4. Constructing a contract. \n\n\nFollow the workflow precisely and ask for human input when needed.\n\n'}, {'role': 'user', 'content': "Extract the name and address from the given text:\n\nROUMANIE ROVIAINIA ROMANIA Carte Carte DE iDentitate IdEnTITY Didentite seala SS Nr 099994 Card CNP 2410415400542 93coQ Nume/NomiLast name VASILESCU Pronume/Prenom/Flrst name ELENA < CetatenielNatlonallte/Natlonalily M Sex SexelSer Romn\u0103 ROU Loc nastore/Licu de naissancolF 'ar0 ol birth Mun: Dej Jud. Cluj Domiciliu/Adresse A ess Mun. Bucuresti Sec. 5 Str Nicolae Iorga nr.3 900 B Emisa delDelivree parllssued by Valabilitate/Vahidile Valiouy D.EPAB.D- 06.01.17-15.04.2077 IDROUVASILESCU<<ELENA<<<<<<<<<<<<<<< SS099994<0R0u4104151F770415824003421"}], 'model': 'gpt-4', 'tool_choice': {'type': 'function', 'function': {'name': 'PIIData'}}, 'tools': [{'type': 'function', 'function': {'name': 'PIIData', 'description': 'Correctly extracted `PIIData` with all the required parameters with correct types', 'parameters': {'properties': {'name': {'description': 'Full name of the person', 'title': 'Name', 'type': 'string'}, 'address': {'description': 'Residential address of the person', 'title': 'Address', 'type': 'string'}}, 'required': ['address', 'name'], 'type': 'object'}}}]}}
2024-10-14 14:44:03,465 - DEBUG - Sending HTTP Request: POST https://api.openai.com/v1/chat/completions
2024-10-14 14:44:03,466 - DEBUG - close.started
2024-10-14 14:44:03,466 - DEBUG - close.complete
2024-10-14 14:44:03,466 - DEBUG - connect_tcp.started host='api.openai.com' port=443 local_address=None timeout=5.0 socket_options=None
2024-10-14 14:44:03,471 - DEBUG - connect_tcp.complete return_value=<httpcore._backends.sync.SyncStream object at 0x00000179F6C4A8D0>
2024-10-14 14:44:03,471 - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x00000179F6A55AD0> server_hostname='api.openai.com' timeout=5.0
2024-10-14 14:44:03,478 - DEBUG - start_tls.complete return_value=<httpcore._backends.sync.SyncStream object at 0x00000179F6C3D160>
2024-10-14 14:44:03,478 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-10-14 14:44:03,478 - DEBUG - send_request_headers.complete
2024-10-14 14:44:03,478 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-10-14 14:44:03,478 - DEBUG - send_request_body.complete
2024-10-14 14:44:03,478 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-10-14 14:44:05,878 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Mon, 14 Oct 2024 11:44:06 GMT'), (b'Content-Type', b'application/json'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'user-kzzh9hik9ryjiou4ftvhondh'), (b'openai-processing-ms', b'2252'), (b'openai-version', b'2020-10-01'), (b'x-ratelimit-limit-requests', b'10000'), (b'x-ratelimit-limit-tokens', b'10000'), (b'x-ratelimit-remaining-requests', b'9991'), (b'x-ratelimit-remaining-tokens', b'9742'), (b'x-ratelimit-reset-requests', b'1m9.303s'), (b'x-ratelimit-reset-tokens', b'1.548s'), (b'x-request-id', b'req_198c15ef061ca52fe113ca042f2db01f'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8d2750b77c6dca1d-OTP'), (b'Content-Encoding', b'gzip'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-10-14 14:44:05,878 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2024-10-14 14:44:05,878 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-10-14 14:44:05,878 - DEBUG - receive_response_body.complete
2024-10-14 14:44:05,878 - DEBUG - response_closed.started
2024-10-14 14:44:05,878 - DEBUG - response_closed.complete
2024-10-14 14:44:05,878 - DEBUG - HTTP Response: POST https://api.openai.com/v1/chat/completions "200 OK" Headers({'date': 'Mon, 14 Oct 2024 11:44:06 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-expose-headers': 'X-Request-ID', 'openai-organization': 'user-kzzh9hik9ryjiou4ftvhondh', 'openai-processing-ms': '2252', 'openai-version': '2020-10-01', 'x-ratelimit-limit-requests': '10000', 'x-ratelimit-limit-tokens': '10000', 'x-ratelimit-remaining-requests': '9991', 'x-ratelimit-remaining-tokens': '9742', 'x-ratelimit-reset-requests': '1m9.303s', 'x-ratelimit-reset-tokens': '1.548s', 'x-request-id': 'req_198c15ef061ca52fe113ca042f2db01f', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8d2750b77c6dca1d-OTP', 'content-encoding': 'gzip', 'alt-svc': 'h3=":443"; ma=86400'})
2024-10-14 14:44:05,878 - DEBUG - request_id: req_198c15ef061ca52fe113ca042f2db01f
2024-10-14 14:44:05,879 - DEBUG - Instructor Raw Response: ChatCompletion(id='chatcmpl-AIDmVRPTjl3G3fRcOpGtGSjb832Fa', choices=[Choice(finish_reason='stop', index=0, logprobs=None, message=ChatCompletionMessage(content=None, refusal=None, role='assistant', function_call=None, tool_calls=[ChatCompletionMessageToolCall(id='call_N3uZ3291VnyiyXxQBprRpCSQ', function=Function(arguments='{\n"name": "ELENA VASILESCU",\n"address": "Mun. Bucuresti Sec. 5 Str Nicolae Iorga nr.3 900 B"\n}', name='PIIData'), type='function')]))], created=1728906243, model='gpt-4-0613', object='chat.completion', service_tier=None, system_fingerprint=None, usage=CompletionUsage(completion_tokens=42, prompt_tokens=380, total_tokens=422, completion_tokens_details=None, prompt_tokens_details=None))
2024-10-14 14:44:08,055 - DEBUG - Instructor Request: mode.value='tool_call', response_model=<class 'models.AgentAction'>, new_kwargs={'model': 'gpt-4', 'messages': [{'role': 'system', 'content': '\nYou are an AI agent specializing in contract creation and personal information extraction. \n\nYour role is:\n 1. Guide the process of extracting information from documents..\n 2. Verifying the extracted information with human input.\n 3. Identifying parties. \n 4. Constructing a contract. \n\n\nFollow the workflow precisely and ask for human input when needed.\n\n'}, {'role': 'user', 'content': "Current state: {'verified_pii_data': [{'name': 'ELENA VASILESCU', 'address': 'Mun. Bucuresti Sec. 5 Str Nicolae Iorga nr.3 900 B'}], 'parties': None, 'contract_details': None, 'contract': None, 'current_action': None}\nWhat action should be taken next?"}], 'tools': [{'type': 'function', 'function': {'name': 'AgentAction', 'description': 'Correctly extracted `AgentAction` with all the required parameters with correct types', 'parameters': {'properties': {'action': {'description': 'Action to be performed by the agent', 'title': 'Action', 'type': 'string'}, 'parameters': {'additionalProperties': {'type': 'string'}, 'description': 'Parameters for the action', 'title': 'Parameters', 'type': 'object'}}, 'required': ['action', 'parameters'], 'type': 'object'}}}], 'tool_choice': {'type': 'function', 'function': {'name': 'AgentAction'}}}
2024-10-14 14:44:08,056 - DEBUG - max_retries: 1
2024-10-14 14:44:08,058 - DEBUG - Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'json_data': {'messages': [{'role': 'system', 'content': '\nYou are an AI agent specializing in contract creation and personal information extraction. \n\nYour role is:\n 1. Guide the process of extracting information from documents..\n 2. Verifying the extracted information with human input.\n 3. Identifying parties. \n 4. Constructing a contract. \n\n\nFollow the workflow precisely and ask for human input when needed.\n\n'}, {'role': 'user', 'content': "Current state: {'verified_pii_data': [{'name': 'ELENA VASILESCU', 'address': 'Mun. Bucuresti Sec. 5 Str Nicolae Iorga nr.3 900 B'}], 'parties': None, 'contract_details': None, 'contract': None, 'current_action': None}\nWhat action should be taken next?"}], 'model': 'gpt-4', 'tool_choice': {'type': 'function', 'function': {'name': 'AgentAction'}}, 'tools': [{'type': 'function', 'function': {'name': 'AgentAction', 'description': 'Correctly extracted `AgentAction` with all the required parameters with correct types', 'parameters': {'properties': {'action': {'description': 'Action to be performed by the agent', 'title': 'Action', 'type': 'string'}, 'parameters': {'additionalProperties': {'type': 'string'}, 'description': 'Parameters for the action', 'title': 'Parameters', 'type': 'object'}}, 'required': ['action', 'parameters'], 'type': 'object'}}}]}}
2024-10-14 14:44:08,058 - DEBUG - Sending HTTP Request: POST https://api.openai.com/v1/chat/completions
2024-10-14 14:44:08,058 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-10-14 14:44:08,059 - DEBUG - send_request_headers.complete
2024-10-14 14:44:08,059 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-10-14 14:44:08,059 - DEBUG - send_request_body.complete
2024-10-14 14:44:08,059 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-10-14 14:44:08,878 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Mon, 14 Oct 2024 11:44:09 GMT'), (b'Content-Type', b'application/json'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'user-kzzh9hik9ryjiou4ftvhondh'), (b'openai-processing-ms', b'662'), (b'openai-version', b'2020-10-01'), (b'x-ratelimit-limit-requests', b'10000'), (b'x-ratelimit-limit-tokens', b'10000'), (b'x-ratelimit-remaining-requests', b'9991'), (b'x-ratelimit-remaining-tokens', b'9830'), (b'x-ratelimit-reset-requests', b'1m13.361s'), (b'x-ratelimit-reset-tokens', b'1.02s'), (b'x-request-id', b'req_26c1777521e723f33051bd5784b133a7'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8d2750d41a02ca1d-OTP'), (b'Content-Encoding', b'gzip'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-10-14 14:44:08,878 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2024-10-14 14:44:08,878 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-10-14 14:44:08,879 - DEBUG - receive_response_body.complete
2024-10-14 14:44:08,879 - DEBUG - response_closed.started
2024-10-14 14:44:08,879 - DEBUG - response_closed.complete
2024-10-14 14:44:08,879 - DEBUG - HTTP Response: POST https://api.openai.com/v1/chat/completions "200 OK" Headers({'date': 'Mon, 14 Oct 2024 11:44:09 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-expose-headers': 'X-Request-ID', 'openai-organization': 'user-kzzh9hik9ryjiou4ftvhondh', 'openai-processing-ms': '662', 'openai-version': '2020-10-01', 'x-ratelimit-limit-requests': '10000', 'x-ratelimit-limit-tokens': '10000', 'x-ratelimit-remaining-requests': '9991', 'x-ratelimit-remaining-tokens': '9830', 'x-ratelimit-reset-requests': '1m13.361s', 'x-ratelimit-reset-tokens': '1.02s', 'x-request-id': 'req_26c1777521e723f33051bd5784b133a7', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8d2750d41a02ca1d-OTP', 'content-encoding': 'gzip', 'alt-svc': 'h3=":443"; ma=86400'})
2024-10-14 14:44:08,879 - DEBUG - request_id: req_26c1777521e723f33051bd5784b133a7
2024-10-14 14:44:08,879 - DEBUG - Instructor Raw Response: ChatCompletion(id='chatcmpl-AIDma5y7TShp4yLhr8XcWw4DHzqg3', choices=[Choice(finish_reason='stop', index=0, logprobs=None, message=ChatCompletionMessage(content=None, refusal=None, role='assistant', function_call=None, tool_calls=[ChatCompletionMessageToolCall(id='call_dPiDdxf38JgOyKK33UowQojc', function=Function(arguments='{\n"action": "identify_parties"\n}', name='AgentAction'), type='function')]))], created=1728906248, model='gpt-4-0613', object='chat.completion', service_tier=None, system_fingerprint=None, usage=CompletionUsage(completion_tokens=10, prompt_tokens=224, total_tokens=234, completion_tokens_details=None, prompt_tokens_details=None))
2024-10-14 14:44:08,880 - DEBUG - Instructor Request: mode.value='tool_call', response_model=<class 'models.ContractParties'>, new_kwargs={'model': 'gpt-4', 'messages': [{'role': 'system', 'content': '\nYou are an AI agent specializing in contract creation and personal information extraction. \n\nYour role is:\n 1. Guide the process of extracting information from documents..\n 2. Verifying the extracted information with human input.\n 3. Identifying parties. \n 4. Constructing a contract. \n\n\nFollow the workflow precisely and ask for human input when needed.\n\n'}, {'role': 'user', 'content': 'Identify the buyer and seller from the given information:\n\nName: ELENA VASILESCU, Address: Mun. Bucuresti Sec. 5 Str Nicolae Iorga nr.3 900 B'}], 'tools': [{'type': 'function', 'function': {'name': 'ContractParties', 'description': 'Correctly extracted `ContractParties` with all the required parameters with correct types', 'parameters': {'properties': {'buyer': {'description': 'Name of the buyer', 'title': 'Buyer', 'type': 'string'}, 'seller': {'description': 'Name of the seller', 'title': 'Seller', 'type': 'string'}}, 'required': ['buyer', 'seller'], 'type': 'object'}}}], 'tool_choice': {'type': 'function', 'function': {'name': 'ContractParties'}}}
2024-10-14 14:44:08,880 - DEBUG - max_retries: 1
2024-10-14 14:44:08,882 - DEBUG - Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'json_data': {'messages': [{'role': 'system', 'content': '\nYou are an AI agent specializing in contract creation and personal information extraction. \n\nYour role is:\n 1. Guide the process of extracting information from documents..\n 2. Verifying the extracted information with human input.\n 3. Identifying parties. \n 4. Constructing a contract. \n\n\nFollow the workflow precisely and ask for human input when needed.\n\n'}, {'role': 'user', 'content': 'Identify the buyer and seller from the given information:\n\nName: ELENA VASILESCU, Address: Mun. Bucuresti Sec. 5 Str Nicolae Iorga nr.3 900 B'}], 'model': 'gpt-4', 'tool_choice': {'type': 'function', 'function': {'name': 'ContractParties'}}, 'tools': [{'type': 'function', 'function': {'name': 'ContractParties', 'description': 'Correctly extracted `ContractParties` with all the required parameters with correct types', 'parameters': {'properties': {'buyer': {'description': 'Name of the buyer', 'title': 'Buyer', 'type': 'string'}, 'seller': {'description': 'Name of the seller', 'title': 'Seller', 'type': 'string'}}, 'required': ['buyer', 'seller'], 'type': 'object'}}}]}}
2024-10-14 14:44:08,882 - DEBUG - Sending HTTP Request: POST https://api.openai.com/v1/chat/completions
2024-10-14 14:44:08,882 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-10-14 14:44:08,882 - DEBUG - send_request_headers.complete
2024-10-14 14:44:08,882 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-10-14 14:44:08,882 - DEBUG - send_request_body.complete
2024-10-14 14:44:08,882 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-10-14 14:44:10,134 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Mon, 14 Oct 2024 11:44:10 GMT'), (b'Content-Type', b'application/json'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'user-kzzh9hik9ryjiou4ftvhondh'), (b'openai-processing-ms', b'1103'), (b'openai-version', b'2020-10-01'), (b'x-ratelimit-limit-requests', b'10000'), (b'x-ratelimit-limit-tokens', b'10000'), (b'x-ratelimit-remaining-requests', b'9990'), (b'x-ratelimit-remaining-tokens', b'9759'), (b'x-ratelimit-reset-requests', b'1m21.181s'), (b'x-ratelimit-reset-tokens', b'1.442s'), (b'x-request-id', b'req_a8a4b8d54e9b5728567669ed8dcba3c8'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8d2750d93ffdca1d-OTP'), (b'Content-Encoding', b'gzip'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-10-14 14:44:10,134 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2024-10-14 14:44:10,134 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-10-14 14:44:10,135 - DEBUG - receive_response_body.complete
2024-10-14 14:44:10,135 - DEBUG - response_closed.started
2024-10-14 14:44:10,135 - DEBUG - response_closed.complete
2024-10-14 14:44:10,135 - DEBUG - HTTP Response: POST https://api.openai.com/v1/chat/completions "200 OK" Headers({'date': 'Mon, 14 Oct 2024 11:44:10 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-expose-headers': 'X-Request-ID', 'openai-organization': 'user-kzzh9hik9ryjiou4ftvhondh', 'openai-processing-ms': '1103', 'openai-version': '2020-10-01', 'x-ratelimit-limit-requests': '10000', 'x-ratelimit-limit-tokens': '10000', 'x-ratelimit-remaining-requests': '9990', 'x-ratelimit-remaining-tokens': '9759', 'x-ratelimit-reset-requests': '1m21.181s', 'x-ratelimit-reset-tokens': '1.442s', 'x-request-id': 'req_a8a4b8d54e9b5728567669ed8dcba3c8', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8d2750d93ffdca1d-OTP', 'content-encoding': 'gzip', 'alt-svc': 'h3=":443"; ma=86400'})
2024-10-14 14:44:10,135 - DEBUG - request_id: req_a8a4b8d54e9b5728567669ed8dcba3c8
2024-10-14 14:44:10,136 - DEBUG - Instructor Raw Response: ChatCompletion(id='chatcmpl-AIDmbPCK0SvgTtZH5Hj5qx6NWexc0', choices=[Choice(finish_reason='stop', index=0, logprobs=None, message=ChatCompletionMessage(content=None, refusal=None, role='assistant', function_call=None, tool_calls=[ChatCompletionMessageToolCall(id='call_QEmKdxGPkD5GQ39XqwxYKRhe', function=Function(arguments='{\n  "buyer": "ELENA VASILESCU",\n  "seller": ""\n}', name='ContractParties'), type='function')]))], created=1728906249, model='gpt-4-0613', object='chat.completion', service_tier=None, system_fingerprint=None, usage=CompletionUsage(completion_tokens=21, prompt_tokens=199, total_tokens=220, completion_tokens_details=None, prompt_tokens_details=None))
2024-10-14 14:44:10,137 - DEBUG - Instructor Request: mode.value='tool_call', response_model=<class 'models.AgentAction'>, new_kwargs={'model': 'gpt-4', 'messages': [{'role': 'system', 'content': '\nYou are an AI agent specializing in contract creation and personal information extraction. \n\nYour role is:\n 1. Guide the process of extracting information from documents..\n 2. Verifying the extracted information with human input.\n 3. Identifying parties. \n 4. Constructing a contract. \n\n\nFollow the workflow precisely and ask for human input when needed.\n\n'}, {'role': 'user', 'content': "Current state: {'verified_pii_data': [{'name': 'ELENA VASILESCU', 'address': 'Mun. Bucuresti Sec. 5 Str Nicolae Iorga nr.3 900 B'}], 'parties': {'buyer': 'ELENA VASILESCU', 'seller': ''}, 'contract_details': None, 'contract': None, 'current_action': None}\nWhat action should be taken next?"}], 'tools': [{'type': 'function', 'function': {'name': 'AgentAction', 'description': 'Correctly extracted `AgentAction` with all the required parameters with correct types', 'parameters': {'properties': {'action': {'description': 'Action to be performed by the agent', 'title': 'Action', 'type': 'string'}, 'parameters': {'additionalProperties': {'type': 'string'}, 'description': 'Parameters for the action', 'title': 'Parameters', 'type': 'object'}}, 'required': ['action', 'parameters'], 'type': 'object'}}}], 'tool_choice': {'type': 'function', 'function': {'name': 'AgentAction'}}}
2024-10-14 14:44:10,137 - DEBUG - max_retries: 1
2024-10-14 14:44:10,140 - DEBUG - Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'json_data': {'messages': [{'role': 'system', 'content': '\nYou are an AI agent specializing in contract creation and personal information extraction. \n\nYour role is:\n 1. Guide the process of extracting information from documents..\n 2. Verifying the extracted information with human input.\n 3. Identifying parties. \n 4. Constructing a contract. \n\n\nFollow the workflow precisely and ask for human input when needed.\n\n'}, {'role': 'user', 'content': "Current state: {'verified_pii_data': [{'name': 'ELENA VASILESCU', 'address': 'Mun. Bucuresti Sec. 5 Str Nicolae Iorga nr.3 900 B'}], 'parties': {'buyer': 'ELENA VASILESCU', 'seller': ''}, 'contract_details': None, 'contract': None, 'current_action': None}\nWhat action should be taken next?"}], 'model': 'gpt-4', 'tool_choice': {'type': 'function', 'function': {'name': 'AgentAction'}}, 'tools': [{'type': 'function', 'function': {'name': 'AgentAction', 'description': 'Correctly extracted `AgentAction` with all the required parameters with correct types', 'parameters': {'properties': {'action': {'description': 'Action to be performed by the agent', 'title': 'Action', 'type': 'string'}, 'parameters': {'additionalProperties': {'type': 'string'}, 'description': 'Parameters for the action', 'title': 'Parameters', 'type': 'object'}}, 'required': ['action', 'parameters'], 'type': 'object'}}}]}}
2024-10-14 14:44:10,141 - DEBUG - Sending HTTP Request: POST https://api.openai.com/v1/chat/completions
2024-10-14 14:44:10,141 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-10-14 14:44:10,141 - DEBUG - send_request_headers.complete
2024-10-14 14:44:10,141 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-10-14 14:44:10,141 - DEBUG - send_request_body.complete
2024-10-14 14:44:10,141 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-10-14 14:44:10,939 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Mon, 14 Oct 2024 11:44:11 GMT'), (b'Content-Type', b'application/json'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'user-kzzh9hik9ryjiou4ftvhondh'), (b'openai-processing-ms', b'648'), (b'openai-version', b'2020-10-01'), (b'x-ratelimit-limit-requests', b'10000'), (b'x-ratelimit-limit-tokens', b'10000'), (b'x-ratelimit-remaining-requests', b'9989'), (b'x-ratelimit-remaining-tokens', b'9712'), (b'x-ratelimit-reset-requests', b'1m28.56s'), (b'x-ratelimit-reset-tokens', b'1.722s'), (b'x-request-id', b'req_8c35d04cefe8d7ed367f534d4d19a737'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8d2750e11d8bca1d-OTP'), (b'Content-Encoding', b'gzip'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-10-14 14:44:10,940 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2024-10-14 14:44:10,940 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-10-14 14:44:10,940 - DEBUG - receive_response_body.complete
2024-10-14 14:44:10,940 - DEBUG - response_closed.started
2024-10-14 14:44:10,940 - DEBUG - response_closed.complete
2024-10-14 14:44:10,941 - DEBUG - HTTP Response: POST https://api.openai.com/v1/chat/completions "200 OK" Headers({'date': 'Mon, 14 Oct 2024 11:44:11 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-expose-headers': 'X-Request-ID', 'openai-organization': 'user-kzzh9hik9ryjiou4ftvhondh', 'openai-processing-ms': '648', 'openai-version': '2020-10-01', 'x-ratelimit-limit-requests': '10000', 'x-ratelimit-limit-tokens': '10000', 'x-ratelimit-remaining-requests': '9989', 'x-ratelimit-remaining-tokens': '9712', 'x-ratelimit-reset-requests': '1m28.56s', 'x-ratelimit-reset-tokens': '1.722s', 'x-request-id': 'req_8c35d04cefe8d7ed367f534d4d19a737', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8d2750e11d8bca1d-OTP', 'content-encoding': 'gzip', 'alt-svc': 'h3=":443"; ma=86400'})
2024-10-14 14:44:10,941 - DEBUG - request_id: req_8c35d04cefe8d7ed367f534d4d19a737
2024-10-14 14:44:10,941 - DEBUG - Instructor Raw Response: ChatCompletion(id='chatcmpl-AIDmcEZo7o7uayau5ul1Gel46ix0W', choices=[Choice(finish_reason='stop', index=0, logprobs=None, message=ChatCompletionMessage(content=None, refusal=None, role='assistant', function_call=None, tool_calls=[ChatCompletionMessageToolCall(id='call_sLew7sfo4AJVCbX6Td958zXr', function=Function(arguments='{\n"action": "extract_pii_data"\n}', name='AgentAction'), type='function')]))], created=1728906250, model='gpt-4-0613', object='chat.completion', service_tier=None, system_fingerprint=None, usage=CompletionUsage(completion_tokens=11, prompt_tokens=240, total_tokens=251, completion_tokens_details=None, prompt_tokens_details=None))
2024-10-14 14:44:10,944 - DEBUG - Instructor Request: mode.value='tool_call', response_model=<class 'models.AgentAction'>, new_kwargs={'model': 'gpt-4', 'messages': [{'role': 'system', 'content': '\nYou are an AI agent specializing in contract creation and personal information extraction. \n\nYour role is:\n 1. Guide the process of extracting information from documents..\n 2. Verifying the extracted information with human input.\n 3. Identifying parties. \n 4. Constructing a contract. \n\n\nFollow the workflow precisely and ask for human input when needed.\n\n'}, {'role': 'user', 'content': "Current state: {'verified_pii_data': [{'name': 'ELENA VASILESCU', 'address': 'Mun. Bucuresti Sec. 5 Str Nicolae Iorga nr.3 900 B'}], 'parties': {'buyer': 'ELENA VASILESCU', 'seller': ''}, 'contract_details': None, 'contract': None, 'current_action': None}\nWhat action should be taken next?"}], 'tools': [{'type': 'function', 'function': {'name': 'AgentAction', 'description': 'Correctly extracted `AgentAction` with all the required parameters with correct types', 'parameters': {'properties': {'action': {'description': 'Action to be performed by the agent', 'title': 'Action', 'type': 'string'}, 'parameters': {'additionalProperties': {'type': 'string'}, 'description': 'Parameters for the action', 'title': 'Parameters', 'type': 'object'}}, 'required': ['action', 'parameters'], 'type': 'object'}}}], 'tool_choice': {'type': 'function', 'function': {'name': 'AgentAction'}}}
2024-10-14 14:44:10,944 - DEBUG - max_retries: 1
2024-10-14 14:44:10,946 - DEBUG - Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'json_data': {'messages': [{'role': 'system', 'content': '\nYou are an AI agent specializing in contract creation and personal information extraction. \n\nYour role is:\n 1. Guide the process of extracting information from documents..\n 2. Verifying the extracted information with human input.\n 3. Identifying parties. \n 4. Constructing a contract. \n\n\nFollow the workflow precisely and ask for human input when needed.\n\n'}, {'role': 'user', 'content': "Current state: {'verified_pii_data': [{'name': 'ELENA VASILESCU', 'address': 'Mun. Bucuresti Sec. 5 Str Nicolae Iorga nr.3 900 B'}], 'parties': {'buyer': 'ELENA VASILESCU', 'seller': ''}, 'contract_details': None, 'contract': None, 'current_action': None}\nWhat action should be taken next?"}], 'model': 'gpt-4', 'tool_choice': {'type': 'function', 'function': {'name': 'AgentAction'}}, 'tools': [{'type': 'function', 'function': {'name': 'AgentAction', 'description': 'Correctly extracted `AgentAction` with all the required parameters with correct types', 'parameters': {'properties': {'action': {'description': 'Action to be performed by the agent', 'title': 'Action', 'type': 'string'}, 'parameters': {'additionalProperties': {'type': 'string'}, 'description': 'Parameters for the action', 'title': 'Parameters', 'type': 'object'}}, 'required': ['action', 'parameters'], 'type': 'object'}}}]}}
2024-10-14 14:44:10,946 - DEBUG - Sending HTTP Request: POST https://api.openai.com/v1/chat/completions
2024-10-14 14:44:10,946 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-10-14 14:44:10,946 - DEBUG - send_request_headers.complete
2024-10-14 14:44:10,947 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-10-14 14:44:10,947 - DEBUG - send_request_body.complete
2024-10-14 14:44:10,947 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-10-14 14:44:11,711 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Mon, 14 Oct 2024 11:44:11 GMT'), (b'Content-Type', b'application/json'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'user-kzzh9hik9ryjiou4ftvhondh'), (b'openai-processing-ms', b'618'), (b'openai-version', b'2020-10-01'), (b'x-ratelimit-limit-requests', b'10000'), (b'x-ratelimit-limit-tokens', b'10000'), (b'x-ratelimit-remaining-requests', b'9988'), (b'x-ratelimit-remaining-tokens', b'9595'), (b'x-ratelimit-reset-requests', b'1m36.396s'), (b'x-ratelimit-reset-tokens', b'2.424s'), (b'x-request-id', b'req_7b6ca878ff9c4329ac3166047977c6d1'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8d2750e61bd0ca1d-OTP'), (b'Content-Encoding', b'gzip'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-10-14 14:44:11,711 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2024-10-14 14:44:11,711 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-10-14 14:44:11,711 - DEBUG - receive_response_body.complete
2024-10-14 14:44:11,711 - DEBUG - response_closed.started
2024-10-14 14:44:11,711 - DEBUG - response_closed.complete
2024-10-14 14:44:11,711 - DEBUG - HTTP Response: POST https://api.openai.com/v1/chat/completions "200 OK" Headers({'date': 'Mon, 14 Oct 2024 11:44:11 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-expose-headers': 'X-Request-ID', 'openai-organization': 'user-kzzh9hik9ryjiou4ftvhondh', 'openai-processing-ms': '618', 'openai-version': '2020-10-01', 'x-ratelimit-limit-requests': '10000', 'x-ratelimit-limit-tokens': '10000', 'x-ratelimit-remaining-requests': '9988', 'x-ratelimit-remaining-tokens': '9595', 'x-ratelimit-reset-requests': '1m36.396s', 'x-ratelimit-reset-tokens': '2.424s', 'x-request-id': 'req_7b6ca878ff9c4329ac3166047977c6d1', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8d2750e61bd0ca1d-OTP', 'content-encoding': 'gzip', 'alt-svc': 'h3=":443"; ma=86400'})
2024-10-14 14:44:11,711 - DEBUG - request_id: req_7b6ca878ff9c4329ac3166047977c6d1
2024-10-14 14:44:11,712 - DEBUG - Instructor Raw Response: ChatCompletion(id='chatcmpl-AIDmds87OYiMke4hJQELJvRgRqMhA', choices=[Choice(finish_reason='stop', index=0, logprobs=None, message=ChatCompletionMessage(content=None, refusal=None, role='assistant', function_call=None, tool_calls=[ChatCompletionMessageToolCall(id='call_X0T05VUOFEmaZgJy7o0HAxTg', function=Function(arguments='{\n"action": "verify_pii_data"\n}', name='AgentAction'), type='function')]))], created=1728906251, model='gpt-4-0613', object='chat.completion', service_tier=None, system_fingerprint=None, usage=CompletionUsage(completion_tokens=11, prompt_tokens=240, total_tokens=251, completion_tokens_details=None, prompt_tokens_details=None))
2024-10-14 14:44:11,713 - DEBUG - Instructor Request: mode.value='tool_call', response_model=<class 'models.AgentAction'>, new_kwargs={'model': 'gpt-4', 'messages': [{'role': 'system', 'content': '\nYou are an AI agent specializing in contract creation and personal information extraction. \n\nYour role is:\n 1. Guide the process of extracting information from documents..\n 2. Verifying the extracted information with human input.\n 3. Identifying parties. \n 4. Constructing a contract. \n\n\nFollow the workflow precisely and ask for human input when needed.\n\n'}, {'role': 'user', 'content': "Current state: {'verified_pii_data': [{'name': 'ELENA VASILESCU', 'address': 'Mun. Bucuresti Sec. 5 Str Nicolae Iorga nr.3 900 B'}], 'parties': {'buyer': 'ELENA VASILESCU', 'seller': ''}, 'contract_details': None, 'contract': None, 'current_action': None}\nWhat action should be taken next?"}], 'tools': [{'type': 'function', 'function': {'name': 'AgentAction', 'description': 'Correctly extracted `AgentAction` with all the required parameters with correct types', 'parameters': {'properties': {'action': {'description': 'Action to be performed by the agent', 'title': 'Action', 'type': 'string'}, 'parameters': {'additionalProperties': {'type': 'string'}, 'description': 'Parameters for the action', 'title': 'Parameters', 'type': 'object'}}, 'required': ['action', 'parameters'], 'type': 'object'}}}], 'tool_choice': {'type': 'function', 'function': {'name': 'AgentAction'}}}
2024-10-14 14:44:11,713 - DEBUG - max_retries: 1
2024-10-14 14:44:11,714 - DEBUG - Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'json_data': {'messages': [{'role': 'system', 'content': '\nYou are an AI agent specializing in contract creation and personal information extraction. \n\nYour role is:\n 1. Guide the process of extracting information from documents..\n 2. Verifying the extracted information with human input.\n 3. Identifying parties. \n 4. Constructing a contract. \n\n\nFollow the workflow precisely and ask for human input when needed.\n\n'}, {'role': 'user', 'content': "Current state: {'verified_pii_data': [{'name': 'ELENA VASILESCU', 'address': 'Mun. Bucuresti Sec. 5 Str Nicolae Iorga nr.3 900 B'}], 'parties': {'buyer': 'ELENA VASILESCU', 'seller': ''}, 'contract_details': None, 'contract': None, 'current_action': None}\nWhat action should be taken next?"}], 'model': 'gpt-4', 'tool_choice': {'type': 'function', 'function': {'name': 'AgentAction'}}, 'tools': [{'type': 'function', 'function': {'name': 'AgentAction', 'description': 'Correctly extracted `AgentAction` with all the required parameters with correct types', 'parameters': {'properties': {'action': {'description': 'Action to be performed by the agent', 'title': 'Action', 'type': 'string'}, 'parameters': {'additionalProperties': {'type': 'string'}, 'description': 'Parameters for the action', 'title': 'Parameters', 'type': 'object'}}, 'required': ['action', 'parameters'], 'type': 'object'}}}]}}
2024-10-14 14:44:11,715 - DEBUG - Sending HTTP Request: POST https://api.openai.com/v1/chat/completions
2024-10-14 14:44:11,715 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-10-14 14:44:11,715 - DEBUG - send_request_headers.complete
2024-10-14 14:44:11,715 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-10-14 14:44:11,715 - DEBUG - send_request_body.complete
2024-10-14 14:44:11,715 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-10-14 14:44:12,523 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Mon, 14 Oct 2024 11:44:12 GMT'), (b'Content-Type', b'application/json'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'user-kzzh9hik9ryjiou4ftvhondh'), (b'openai-processing-ms', b'664'), (b'openai-version', b'2020-10-01'), (b'x-ratelimit-limit-requests', b'10000'), (b'x-ratelimit-limit-tokens', b'10000'), (b'x-ratelimit-remaining-requests', b'9987'), (b'x-ratelimit-remaining-tokens', b'9472'), (b'x-ratelimit-reset-requests', b'1m44.267s'), (b'x-ratelimit-reset-tokens', b'3.162s'), (b'x-request-id', b'req_c3d5949969b19696487d975da96ccf19'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8d2750eae8a4ca1d-OTP'), (b'Content-Encoding', b'gzip'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-10-14 14:44:12,524 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2024-10-14 14:44:12,524 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-10-14 14:44:12,525 - DEBUG - receive_response_body.complete
2024-10-14 14:44:12,525 - DEBUG - response_closed.started
2024-10-14 14:44:12,525 - DEBUG - response_closed.complete
2024-10-14 14:44:12,525 - DEBUG - HTTP Response: POST https://api.openai.com/v1/chat/completions "200 OK" Headers({'date': 'Mon, 14 Oct 2024 11:44:12 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-expose-headers': 'X-Request-ID', 'openai-organization': 'user-kzzh9hik9ryjiou4ftvhondh', 'openai-processing-ms': '664', 'openai-version': '2020-10-01', 'x-ratelimit-limit-requests': '10000', 'x-ratelimit-limit-tokens': '10000', 'x-ratelimit-remaining-requests': '9987', 'x-ratelimit-remaining-tokens': '9472', 'x-ratelimit-reset-requests': '1m44.267s', 'x-ratelimit-reset-tokens': '3.162s', 'x-request-id': 'req_c3d5949969b19696487d975da96ccf19', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8d2750eae8a4ca1d-OTP', 'content-encoding': 'gzip', 'alt-svc': 'h3=":443"; ma=86400'})
2024-10-14 14:44:12,526 - DEBUG - request_id: req_c3d5949969b19696487d975da96ccf19
2024-10-14 14:44:12,527 - DEBUG - Instructor Raw Response: ChatCompletion(id='chatcmpl-AIDmem1XEWBTQQtsjc80Lxl5pPexD', choices=[Choice(finish_reason='stop', index=0, logprobs=None, message=ChatCompletionMessage(content=None, refusal=None, role='assistant', function_call=None, tool_calls=[ChatCompletionMessageToolCall(id='call_F35y70aV6S4hPuXhXaibo9Im', function=Function(arguments='{\n"action": "verify_seller_details"\n}', name='AgentAction'), type='function')]))], created=1728906252, model='gpt-4-0613', object='chat.completion', service_tier=None, system_fingerprint=None, usage=CompletionUsage(completion_tokens=11, prompt_tokens=240, total_tokens=251, completion_tokens_details=None, prompt_tokens_details=None))
2024-10-14 14:44:12,529 - DEBUG - Instructor Request: mode.value='tool_call', response_model=<class 'models.AgentAction'>, new_kwargs={'model': 'gpt-4', 'messages': [{'role': 'system', 'content': '\nYou are an AI agent specializing in contract creation and personal information extraction. \n\nYour role is:\n 1. Guide the process of extracting information from documents..\n 2. Verifying the extracted information with human input.\n 3. Identifying parties. \n 4. Constructing a contract. \n\n\nFollow the workflow precisely and ask for human input when needed.\n\n'}, {'role': 'user', 'content': "Current state: {'verified_pii_data': [{'name': 'ELENA VASILESCU', 'address': 'Mun. Bucuresti Sec. 5 Str Nicolae Iorga nr.3 900 B'}], 'parties': {'buyer': 'ELENA VASILESCU', 'seller': ''}, 'contract_details': None, 'contract': None, 'current_action': None}\nWhat action should be taken next?"}], 'tools': [{'type': 'function', 'function': {'name': 'AgentAction', 'description': 'Correctly extracted `AgentAction` with all the required parameters with correct types', 'parameters': {'properties': {'action': {'description': 'Action to be performed by the agent', 'title': 'Action', 'type': 'string'}, 'parameters': {'additionalProperties': {'type': 'string'}, 'description': 'Parameters for the action', 'title': 'Parameters', 'type': 'object'}}, 'required': ['action', 'parameters'], 'type': 'object'}}}], 'tool_choice': {'type': 'function', 'function': {'name': 'AgentAction'}}}
2024-10-14 14:44:12,529 - DEBUG - max_retries: 1
2024-10-14 14:44:12,531 - DEBUG - Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'json_data': {'messages': [{'role': 'system', 'content': '\nYou are an AI agent specializing in contract creation and personal information extraction. \n\nYour role is:\n 1. Guide the process of extracting information from documents..\n 2. Verifying the extracted information with human input.\n 3. Identifying parties. \n 4. Constructing a contract. \n\n\nFollow the workflow precisely and ask for human input when needed.\n\n'}, {'role': 'user', 'content': "Current state: {'verified_pii_data': [{'name': 'ELENA VASILESCU', 'address': 'Mun. Bucuresti Sec. 5 Str Nicolae Iorga nr.3 900 B'}], 'parties': {'buyer': 'ELENA VASILESCU', 'seller': ''}, 'contract_details': None, 'contract': None, 'current_action': None}\nWhat action should be taken next?"}], 'model': 'gpt-4', 'tool_choice': {'type': 'function', 'function': {'name': 'AgentAction'}}, 'tools': [{'type': 'function', 'function': {'name': 'AgentAction', 'description': 'Correctly extracted `AgentAction` with all the required parameters with correct types', 'parameters': {'properties': {'action': {'description': 'Action to be performed by the agent', 'title': 'Action', 'type': 'string'}, 'parameters': {'additionalProperties': {'type': 'string'}, 'description': 'Parameters for the action', 'title': 'Parameters', 'type': 'object'}}, 'required': ['action', 'parameters'], 'type': 'object'}}}]}}
2024-10-14 14:44:12,532 - DEBUG - Sending HTTP Request: POST https://api.openai.com/v1/chat/completions
2024-10-14 14:44:12,532 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-10-14 14:44:12,532 - DEBUG - send_request_headers.complete
2024-10-14 14:44:12,533 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-10-14 14:44:12,533 - DEBUG - send_request_body.complete
2024-10-14 14:44:12,533 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-10-14 14:44:13,454 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Mon, 14 Oct 2024 11:44:13 GMT'), (b'Content-Type', b'application/json'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'user-kzzh9hik9ryjiou4ftvhondh'), (b'openai-processing-ms', b'751'), (b'openai-version', b'2020-10-01'), (b'x-ratelimit-limit-requests', b'10000'), (b'x-ratelimit-limit-tokens', b'10000'), (b'x-ratelimit-remaining-requests', b'9987'), (b'x-ratelimit-remaining-tokens', b'9358'), (b'x-ratelimit-reset-requests', b'1m52.088s'), (b'x-ratelimit-reset-tokens', b'3.848s'), (b'x-request-id', b'req_02850d67f1a2ce7574cbf6c3a336588e'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8d2750f00e66ca1d-OTP'), (b'Content-Encoding', b'gzip'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-10-14 14:44:13,454 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2024-10-14 14:44:13,455 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-10-14 14:44:13,455 - DEBUG - receive_response_body.complete
2024-10-14 14:44:13,455 - DEBUG - response_closed.started
2024-10-14 14:44:13,456 - DEBUG - response_closed.complete
2024-10-14 14:44:13,456 - DEBUG - HTTP Response: POST https://api.openai.com/v1/chat/completions "200 OK" Headers({'date': 'Mon, 14 Oct 2024 11:44:13 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-expose-headers': 'X-Request-ID', 'openai-organization': 'user-kzzh9hik9ryjiou4ftvhondh', 'openai-processing-ms': '751', 'openai-version': '2020-10-01', 'x-ratelimit-limit-requests': '10000', 'x-ratelimit-limit-tokens': '10000', 'x-ratelimit-remaining-requests': '9987', 'x-ratelimit-remaining-tokens': '9358', 'x-ratelimit-reset-requests': '1m52.088s', 'x-ratelimit-reset-tokens': '3.848s', 'x-request-id': 'req_02850d67f1a2ce7574cbf6c3a336588e', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8d2750f00e66ca1d-OTP', 'content-encoding': 'gzip', 'alt-svc': 'h3=":443"; ma=86400'})
2024-10-14 14:44:13,456 - DEBUG - request_id: req_02850d67f1a2ce7574cbf6c3a336588e
2024-10-14 14:44:13,457 - DEBUG - Instructor Raw Response: ChatCompletion(id='chatcmpl-AIDmfzaEdoZ9NGIUNXAe8Ytt5t9fp', choices=[Choice(finish_reason='stop', index=0, logprobs=None, message=ChatCompletionMessage(content=None, refusal=None, role='assistant', function_call=None, tool_calls=[ChatCompletionMessageToolCall(id='call_z7uSrSh9m33dT8m8CcMOvYVd', function=Function(arguments='{\n"action": "verify_seller_information"\n}', name='AgentAction'), type='function')]))], created=1728906253, model='gpt-4-0613', object='chat.completion', service_tier=None, system_fingerprint=None, usage=CompletionUsage(completion_tokens=11, prompt_tokens=240, total_tokens=251, completion_tokens_details=None, prompt_tokens_details=None))
2024-10-14 14:44:13,460 - DEBUG - Instructor Request: mode.value='tool_call', response_model=<class 'models.AgentAction'>, new_kwargs={'model': 'gpt-4', 'messages': [{'role': 'system', 'content': '\nYou are an AI agent specializing in contract creation and personal information extraction. \n\nYour role is:\n 1. Guide the process of extracting information from documents..\n 2. Verifying the extracted information with human input.\n 3. Identifying parties. \n 4. Constructing a contract. \n\n\nFollow the workflow precisely and ask for human input when needed.\n\n'}, {'role': 'user', 'content': "Current state: {'verified_pii_data': [{'name': 'ELENA VASILESCU', 'address': 'Mun. Bucuresti Sec. 5 Str Nicolae Iorga nr.3 900 B'}], 'parties': {'buyer': 'ELENA VASILESCU', 'seller': ''}, 'contract_details': None, 'contract': None, 'current_action': None}\nWhat action should be taken next?"}], 'tools': [{'type': 'function', 'function': {'name': 'AgentAction', 'description': 'Correctly extracted `AgentAction` with all the required parameters with correct types', 'parameters': {'properties': {'action': {'description': 'Action to be performed by the agent', 'title': 'Action', 'type': 'string'}, 'parameters': {'additionalProperties': {'type': 'string'}, 'description': 'Parameters for the action', 'title': 'Parameters', 'type': 'object'}}, 'required': ['action', 'parameters'], 'type': 'object'}}}], 'tool_choice': {'type': 'function', 'function': {'name': 'AgentAction'}}}
2024-10-14 14:44:13,461 - DEBUG - max_retries: 1
2024-10-14 14:44:13,464 - DEBUG - Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'json_data': {'messages': [{'role': 'system', 'content': '\nYou are an AI agent specializing in contract creation and personal information extraction. \n\nYour role is:\n 1. Guide the process of extracting information from documents..\n 2. Verifying the extracted information with human input.\n 3. Identifying parties. \n 4. Constructing a contract. \n\n\nFollow the workflow precisely and ask for human input when needed.\n\n'}, {'role': 'user', 'content': "Current state: {'verified_pii_data': [{'name': 'ELENA VASILESCU', 'address': 'Mun. Bucuresti Sec. 5 Str Nicolae Iorga nr.3 900 B'}], 'parties': {'buyer': 'ELENA VASILESCU', 'seller': ''}, 'contract_details': None, 'contract': None, 'current_action': None}\nWhat action should be taken next?"}], 'model': 'gpt-4', 'tool_choice': {'type': 'function', 'function': {'name': 'AgentAction'}}, 'tools': [{'type': 'function', 'function': {'name': 'AgentAction', 'description': 'Correctly extracted `AgentAction` with all the required parameters with correct types', 'parameters': {'properties': {'action': {'description': 'Action to be performed by the agent', 'title': 'Action', 'type': 'string'}, 'parameters': {'additionalProperties': {'type': 'string'}, 'description': 'Parameters for the action', 'title': 'Parameters', 'type': 'object'}}, 'required': ['action', 'parameters'], 'type': 'object'}}}]}}
2024-10-14 14:44:13,465 - DEBUG - Sending HTTP Request: POST https://api.openai.com/v1/chat/completions
2024-10-14 14:44:13,465 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-10-14 14:44:13,465 - DEBUG - send_request_headers.complete
2024-10-14 14:44:13,465 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-10-14 14:44:13,465 - DEBUG - send_request_body.complete
2024-10-14 14:44:13,465 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-10-14 14:44:14,284 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Mon, 14 Oct 2024 11:44:14 GMT'), (b'Content-Type', b'application/json'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'user-kzzh9hik9ryjiou4ftvhondh'), (b'openai-processing-ms', b'667'), (b'openai-version', b'2020-10-01'), (b'x-ratelimit-limit-requests', b'10000'), (b'x-ratelimit-limit-tokens', b'10000'), (b'x-ratelimit-remaining-requests', b'9986'), (b'x-ratelimit-remaining-tokens', b'9263'), (b'x-ratelimit-reset-requests', b'1m59.79s'), (b'x-ratelimit-reset-tokens', b'4.417s'), (b'x-request-id', b'req_78da532f34381ba9c1643bf3590952dd'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8d2750f5dec5ca1d-OTP'), (b'Content-Encoding', b'gzip'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-10-14 14:44:14,284 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2024-10-14 14:44:14,285 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-10-14 14:44:14,285 - DEBUG - receive_response_body.complete
2024-10-14 14:44:14,285 - DEBUG - response_closed.started
2024-10-14 14:44:14,285 - DEBUG - response_closed.complete
2024-10-14 14:44:14,285 - DEBUG - HTTP Response: POST https://api.openai.com/v1/chat/completions "200 OK" Headers({'date': 'Mon, 14 Oct 2024 11:44:14 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-expose-headers': 'X-Request-ID', 'openai-organization': 'user-kzzh9hik9ryjiou4ftvhondh', 'openai-processing-ms': '667', 'openai-version': '2020-10-01', 'x-ratelimit-limit-requests': '10000', 'x-ratelimit-limit-tokens': '10000', 'x-ratelimit-remaining-requests': '9986', 'x-ratelimit-remaining-tokens': '9263', 'x-ratelimit-reset-requests': '1m59.79s', 'x-ratelimit-reset-tokens': '4.417s', 'x-request-id': 'req_78da532f34381ba9c1643bf3590952dd', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8d2750f5dec5ca1d-OTP', 'content-encoding': 'gzip', 'alt-svc': 'h3=":443"; ma=86400'})
2024-10-14 14:44:14,285 - DEBUG - request_id: req_78da532f34381ba9c1643bf3590952dd
2024-10-14 14:44:14,286 - DEBUG - Instructor Raw Response: ChatCompletion(id='chatcmpl-AIDmf2v6DQZwTzJRzeX9g97gpmybI', choices=[Choice(finish_reason='stop', index=0, logprobs=None, message=ChatCompletionMessage(content=None, refusal=None, role='assistant', function_call=None, tool_calls=[ChatCompletionMessageToolCall(id='call_6YFU67wX99SxfRbOe8qCrRMa', function=Function(arguments='{\n  "action": "extract_info"\n}', name='AgentAction'), type='function')]))], created=1728906253, model='gpt-4-0613', object='chat.completion', service_tier=None, system_fingerprint=None, usage=CompletionUsage(completion_tokens=10, prompt_tokens=240, total_tokens=250, completion_tokens_details=None, prompt_tokens_details=None))
2024-10-14 14:44:14,288 - DEBUG - Instructor Request: mode.value='tool_call', response_model=<class 'models.AgentAction'>, new_kwargs={'model': 'gpt-4', 'messages': [{'role': 'system', 'content': '\nYou are an AI agent specializing in contract creation and personal information extraction. \n\nYour role is:\n 1. Guide the process of extracting information from documents..\n 2. Verifying the extracted information with human input.\n 3. Identifying parties. \n 4. Constructing a contract. \n\n\nFollow the workflow precisely and ask for human input when needed.\n\n'}, {'role': 'user', 'content': "Current state: {'verified_pii_data': [{'name': 'ELENA VASILESCU', 'address': 'Mun. Bucuresti Sec. 5 Str Nicolae Iorga nr.3 900 B'}], 'parties': {'buyer': 'ELENA VASILESCU', 'seller': ''}, 'contract_details': None, 'contract': None, 'current_action': None}\nWhat action should be taken next?"}], 'tools': [{'type': 'function', 'function': {'name': 'AgentAction', 'description': 'Correctly extracted `AgentAction` with all the required parameters with correct types', 'parameters': {'properties': {'action': {'description': 'Action to be performed by the agent', 'title': 'Action', 'type': 'string'}, 'parameters': {'additionalProperties': {'type': 'string'}, 'description': 'Parameters for the action', 'title': 'Parameters', 'type': 'object'}}, 'required': ['action', 'parameters'], 'type': 'object'}}}], 'tool_choice': {'type': 'function', 'function': {'name': 'AgentAction'}}}
2024-10-14 14:44:14,288 - DEBUG - max_retries: 1
2024-10-14 14:44:14,290 - DEBUG - Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'json_data': {'messages': [{'role': 'system', 'content': '\nYou are an AI agent specializing in contract creation and personal information extraction. \n\nYour role is:\n 1. Guide the process of extracting information from documents..\n 2. Verifying the extracted information with human input.\n 3. Identifying parties. \n 4. Constructing a contract. \n\n\nFollow the workflow precisely and ask for human input when needed.\n\n'}, {'role': 'user', 'content': "Current state: {'verified_pii_data': [{'name': 'ELENA VASILESCU', 'address': 'Mun. Bucuresti Sec. 5 Str Nicolae Iorga nr.3 900 B'}], 'parties': {'buyer': 'ELENA VASILESCU', 'seller': ''}, 'contract_details': None, 'contract': None, 'current_action': None}\nWhat action should be taken next?"}], 'model': 'gpt-4', 'tool_choice': {'type': 'function', 'function': {'name': 'AgentAction'}}, 'tools': [{'type': 'function', 'function': {'name': 'AgentAction', 'description': 'Correctly extracted `AgentAction` with all the required parameters with correct types', 'parameters': {'properties': {'action': {'description': 'Action to be performed by the agent', 'title': 'Action', 'type': 'string'}, 'parameters': {'additionalProperties': {'type': 'string'}, 'description': 'Parameters for the action', 'title': 'Parameters', 'type': 'object'}}, 'required': ['action', 'parameters'], 'type': 'object'}}}]}}
2024-10-14 14:44:14,290 - DEBUG - Sending HTTP Request: POST https://api.openai.com/v1/chat/completions
2024-10-14 14:44:14,290 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-10-14 14:44:14,290 - DEBUG - send_request_headers.complete
2024-10-14 14:44:14,290 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-10-14 14:44:14,290 - DEBUG - send_request_body.complete
2024-10-14 14:44:14,290 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-10-14 14:44:15,385 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Mon, 14 Oct 2024 11:44:15 GMT'), (b'Content-Type', b'application/json'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'user-kzzh9hik9ryjiou4ftvhondh'), (b'openai-processing-ms', b'950'), (b'openai-version', b'2020-10-01'), (b'x-ratelimit-limit-requests', b'10000'), (b'x-ratelimit-limit-tokens', b'10000'), (b'x-ratelimit-remaining-requests', b'9985'), (b'x-ratelimit-remaining-tokens', b'9150'), (b'x-ratelimit-reset-requests', b'2m7.612s'), (b'x-ratelimit-reset-tokens', b'5.099s'), (b'x-request-id', b'req_3c9d3fbc28f343b24bd2a470672027a1'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8d2750fb0df1ca1d-OTP'), (b'Content-Encoding', b'gzip'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-10-14 14:44:15,386 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2024-10-14 14:44:15,386 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-10-14 14:44:15,387 - DEBUG - receive_response_body.complete
2024-10-14 14:44:15,387 - DEBUG - response_closed.started
2024-10-14 14:44:15,387 - DEBUG - response_closed.complete
2024-10-14 14:44:15,387 - DEBUG - HTTP Response: POST https://api.openai.com/v1/chat/completions "200 OK" Headers({'date': 'Mon, 14 Oct 2024 11:44:15 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-expose-headers': 'X-Request-ID', 'openai-organization': 'user-kzzh9hik9ryjiou4ftvhondh', 'openai-processing-ms': '950', 'openai-version': '2020-10-01', 'x-ratelimit-limit-requests': '10000', 'x-ratelimit-limit-tokens': '10000', 'x-ratelimit-remaining-requests': '9985', 'x-ratelimit-remaining-tokens': '9150', 'x-ratelimit-reset-requests': '2m7.612s', 'x-ratelimit-reset-tokens': '5.099s', 'x-request-id': 'req_3c9d3fbc28f343b24bd2a470672027a1', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8d2750fb0df1ca1d-OTP', 'content-encoding': 'gzip', 'alt-svc': 'h3=":443"; ma=86400'})
2024-10-14 14:44:15,387 - DEBUG - request_id: req_3c9d3fbc28f343b24bd2a470672027a1
2024-10-14 14:44:15,389 - DEBUG - Instructor Raw Response: ChatCompletion(id='chatcmpl-AIDmgzIn1A9YXYVb3nJr400BlVIhK', choices=[Choice(finish_reason='stop', index=0, logprobs=None, message=ChatCompletionMessage(content=None, refusal=None, role='assistant', function_call=None, tool_calls=[ChatCompletionMessageToolCall(id='call_aIHFpkb3b3JqsG8a6OXjdBtX', function=Function(arguments='{\n"action": "extract_seller_information"\n}', name='AgentAction'), type='function')]))], created=1728906254, model='gpt-4-0613', object='chat.completion', service_tier=None, system_fingerprint=None, usage=CompletionUsage(completion_tokens=11, prompt_tokens=240, total_tokens=251, completion_tokens_details=None, prompt_tokens_details=None))
2024-10-14 14:44:15,391 - DEBUG - Instructor Request: mode.value='tool_call', response_model=<class 'models.AgentAction'>, new_kwargs={'model': 'gpt-4', 'messages': [{'role': 'system', 'content': '\nYou are an AI agent specializing in contract creation and personal information extraction. \n\nYour role is:\n 1. Guide the process of extracting information from documents..\n 2. Verifying the extracted information with human input.\n 3. Identifying parties. \n 4. Constructing a contract. \n\n\nFollow the workflow precisely and ask for human input when needed.\n\n'}, {'role': 'user', 'content': "Current state: {'verified_pii_data': [{'name': 'ELENA VASILESCU', 'address': 'Mun. Bucuresti Sec. 5 Str Nicolae Iorga nr.3 900 B'}], 'parties': {'buyer': 'ELENA VASILESCU', 'seller': ''}, 'contract_details': None, 'contract': None, 'current_action': None}\nWhat action should be taken next?"}], 'tools': [{'type': 'function', 'function': {'name': 'AgentAction', 'description': 'Correctly extracted `AgentAction` with all the required parameters with correct types', 'parameters': {'properties': {'action': {'description': 'Action to be performed by the agent', 'title': 'Action', 'type': 'string'}, 'parameters': {'additionalProperties': {'type': 'string'}, 'description': 'Parameters for the action', 'title': 'Parameters', 'type': 'object'}}, 'required': ['action', 'parameters'], 'type': 'object'}}}], 'tool_choice': {'type': 'function', 'function': {'name': 'AgentAction'}}}
2024-10-14 14:44:15,391 - DEBUG - max_retries: 1
2024-10-14 14:44:15,394 - DEBUG - Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'json_data': {'messages': [{'role': 'system', 'content': '\nYou are an AI agent specializing in contract creation and personal information extraction. \n\nYour role is:\n 1. Guide the process of extracting information from documents..\n 2. Verifying the extracted information with human input.\n 3. Identifying parties. \n 4. Constructing a contract. \n\n\nFollow the workflow precisely and ask for human input when needed.\n\n'}, {'role': 'user', 'content': "Current state: {'verified_pii_data': [{'name': 'ELENA VASILESCU', 'address': 'Mun. Bucuresti Sec. 5 Str Nicolae Iorga nr.3 900 B'}], 'parties': {'buyer': 'ELENA VASILESCU', 'seller': ''}, 'contract_details': None, 'contract': None, 'current_action': None}\nWhat action should be taken next?"}], 'model': 'gpt-4', 'tool_choice': {'type': 'function', 'function': {'name': 'AgentAction'}}, 'tools': [{'type': 'function', 'function': {'name': 'AgentAction', 'description': 'Correctly extracted `AgentAction` with all the required parameters with correct types', 'parameters': {'properties': {'action': {'description': 'Action to be performed by the agent', 'title': 'Action', 'type': 'string'}, 'parameters': {'additionalProperties': {'type': 'string'}, 'description': 'Parameters for the action', 'title': 'Parameters', 'type': 'object'}}, 'required': ['action', 'parameters'], 'type': 'object'}}}]}}
2024-10-14 14:44:15,394 - DEBUG - Sending HTTP Request: POST https://api.openai.com/v1/chat/completions
2024-10-14 14:44:15,395 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-10-14 14:44:15,395 - DEBUG - send_request_headers.complete
2024-10-14 14:44:15,395 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-10-14 14:44:15,395 - DEBUG - send_request_body.complete
2024-10-14 14:44:15,395 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-10-14 14:44:16,182 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Mon, 14 Oct 2024 11:44:16 GMT'), (b'Content-Type', b'application/json'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'user-kzzh9hik9ryjiou4ftvhondh'), (b'openai-processing-ms', b'630'), (b'openai-version', b'2020-10-01'), (b'x-ratelimit-limit-requests', b'10000'), (b'x-ratelimit-limit-tokens', b'10000'), (b'x-ratelimit-remaining-requests', b'9984'), (b'x-ratelimit-remaining-tokens', b'9083'), (b'x-ratelimit-reset-requests', b'2m15.145s'), (b'x-ratelimit-reset-tokens', b'5.497s'), (b'x-request-id', b'req_0acb221bd841c30abb452f9db717fbe1'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8d275101e9bcca1d-OTP'), (b'Content-Encoding', b'gzip'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-10-14 14:44:16,183 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2024-10-14 14:44:16,184 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-10-14 14:44:16,184 - DEBUG - receive_response_body.complete
2024-10-14 14:44:16,185 - DEBUG - response_closed.started
2024-10-14 14:44:16,185 - DEBUG - response_closed.complete
2024-10-14 14:44:16,185 - DEBUG - HTTP Response: POST https://api.openai.com/v1/chat/completions "200 OK" Headers({'date': 'Mon, 14 Oct 2024 11:44:16 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-expose-headers': 'X-Request-ID', 'openai-organization': 'user-kzzh9hik9ryjiou4ftvhondh', 'openai-processing-ms': '630', 'openai-version': '2020-10-01', 'x-ratelimit-limit-requests': '10000', 'x-ratelimit-limit-tokens': '10000', 'x-ratelimit-remaining-requests': '9984', 'x-ratelimit-remaining-tokens': '9083', 'x-ratelimit-reset-requests': '2m15.145s', 'x-ratelimit-reset-tokens': '5.497s', 'x-request-id': 'req_0acb221bd841c30abb452f9db717fbe1', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8d275101e9bcca1d-OTP', 'content-encoding': 'gzip', 'alt-svc': 'h3=":443"; ma=86400'})
2024-10-14 14:44:16,185 - DEBUG - request_id: req_0acb221bd841c30abb452f9db717fbe1
2024-10-14 14:44:16,186 - DEBUG - Instructor Raw Response: ChatCompletion(id='chatcmpl-AIDmhTtDG1SzEmt6Xw3iRPdASMLn8', choices=[Choice(finish_reason='stop', index=0, logprobs=None, message=ChatCompletionMessage(content=None, refusal=None, role='assistant', function_call=None, tool_calls=[ChatCompletionMessageToolCall(id='call_yvXYhlC9Cegzu8IIWXeuVu6x', function=Function(arguments='{\n"action": "extract_info"\n}', name='AgentAction'), type='function')]))], created=1728906255, model='gpt-4-0613', object='chat.completion', service_tier=None, system_fingerprint=None, usage=CompletionUsage(completion_tokens=9, prompt_tokens=240, total_tokens=249, completion_tokens_details=None, prompt_tokens_details=None))
2024-10-14 14:44:16,188 - DEBUG - Instructor Request: mode.value='tool_call', response_model=<class 'models.AgentAction'>, new_kwargs={'model': 'gpt-4', 'messages': [{'role': 'system', 'content': '\nYou are an AI agent specializing in contract creation and personal information extraction. \n\nYour role is:\n 1. Guide the process of extracting information from documents..\n 2. Verifying the extracted information with human input.\n 3. Identifying parties. \n 4. Constructing a contract. \n\n\nFollow the workflow precisely and ask for human input when needed.\n\n'}, {'role': 'user', 'content': "Current state: {'verified_pii_data': [{'name': 'ELENA VASILESCU', 'address': 'Mun. Bucuresti Sec. 5 Str Nicolae Iorga nr.3 900 B'}], 'parties': {'buyer': 'ELENA VASILESCU', 'seller': ''}, 'contract_details': None, 'contract': None, 'current_action': None}\nWhat action should be taken next?"}], 'tools': [{'type': 'function', 'function': {'name': 'AgentAction', 'description': 'Correctly extracted `AgentAction` with all the required parameters with correct types', 'parameters': {'properties': {'action': {'description': 'Action to be performed by the agent', 'title': 'Action', 'type': 'string'}, 'parameters': {'additionalProperties': {'type': 'string'}, 'description': 'Parameters for the action', 'title': 'Parameters', 'type': 'object'}}, 'required': ['action', 'parameters'], 'type': 'object'}}}], 'tool_choice': {'type': 'function', 'function': {'name': 'AgentAction'}}}
2024-10-14 14:44:16,188 - DEBUG - max_retries: 1
2024-10-14 14:44:16,191 - DEBUG - Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'json_data': {'messages': [{'role': 'system', 'content': '\nYou are an AI agent specializing in contract creation and personal information extraction. \n\nYour role is:\n 1. Guide the process of extracting information from documents..\n 2. Verifying the extracted information with human input.\n 3. Identifying parties. \n 4. Constructing a contract. \n\n\nFollow the workflow precisely and ask for human input when needed.\n\n'}, {'role': 'user', 'content': "Current state: {'verified_pii_data': [{'name': 'ELENA VASILESCU', 'address': 'Mun. Bucuresti Sec. 5 Str Nicolae Iorga nr.3 900 B'}], 'parties': {'buyer': 'ELENA VASILESCU', 'seller': ''}, 'contract_details': None, 'contract': None, 'current_action': None}\nWhat action should be taken next?"}], 'model': 'gpt-4', 'tool_choice': {'type': 'function', 'function': {'name': 'AgentAction'}}, 'tools': [{'type': 'function', 'function': {'name': 'AgentAction', 'description': 'Correctly extracted `AgentAction` with all the required parameters with correct types', 'parameters': {'properties': {'action': {'description': 'Action to be performed by the agent', 'title': 'Action', 'type': 'string'}, 'parameters': {'additionalProperties': {'type': 'string'}, 'description': 'Parameters for the action', 'title': 'Parameters', 'type': 'object'}}, 'required': ['action', 'parameters'], 'type': 'object'}}}]}}
2024-10-14 14:44:16,191 - DEBUG - Sending HTTP Request: POST https://api.openai.com/v1/chat/completions
2024-10-14 14:44:16,191 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-10-14 14:44:16,192 - DEBUG - send_request_headers.complete
2024-10-14 14:44:16,192 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-10-14 14:44:16,192 - DEBUG - send_request_body.complete
2024-10-14 14:44:16,192 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-10-14 14:44:17,027 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Mon, 14 Oct 2024 11:44:17 GMT'), (b'Content-Type', b'application/json'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'user-kzzh9hik9ryjiou4ftvhondh'), (b'openai-processing-ms', b'684'), (b'openai-version', b'2020-10-01'), (b'x-ratelimit-limit-requests', b'10000'), (b'x-ratelimit-limit-tokens', b'10000'), (b'x-ratelimit-remaining-requests', b'9983'), (b'x-ratelimit-remaining-tokens', b'8968'), (b'x-ratelimit-reset-requests', b'2m22.983s'), (b'x-ratelimit-reset-tokens', b'6.189s'), (b'x-request-id', b'req_fe9f3cbba64e238f6d9e935f1ace1659'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8d275106eef6ca1d-OTP'), (b'Content-Encoding', b'gzip'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-10-14 14:44:17,028 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2024-10-14 14:44:17,028 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-10-14 14:44:17,028 - DEBUG - receive_response_body.complete
2024-10-14 14:44:17,028 - DEBUG - response_closed.started
2024-10-14 14:44:17,028 - DEBUG - response_closed.complete
2024-10-14 14:44:17,028 - DEBUG - HTTP Response: POST https://api.openai.com/v1/chat/completions "200 OK" Headers({'date': 'Mon, 14 Oct 2024 11:44:17 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-expose-headers': 'X-Request-ID', 'openai-organization': 'user-kzzh9hik9ryjiou4ftvhondh', 'openai-processing-ms': '684', 'openai-version': '2020-10-01', 'x-ratelimit-limit-requests': '10000', 'x-ratelimit-limit-tokens': '10000', 'x-ratelimit-remaining-requests': '9983', 'x-ratelimit-remaining-tokens': '8968', 'x-ratelimit-reset-requests': '2m22.983s', 'x-ratelimit-reset-tokens': '6.189s', 'x-request-id': 'req_fe9f3cbba64e238f6d9e935f1ace1659', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8d275106eef6ca1d-OTP', 'content-encoding': 'gzip', 'alt-svc': 'h3=":443"; ma=86400'})
2024-10-14 14:44:17,028 - DEBUG - request_id: req_fe9f3cbba64e238f6d9e935f1ace1659
2024-10-14 14:44:17,029 - DEBUG - Instructor Raw Response: ChatCompletion(id='chatcmpl-AIDmi6tRTt902HWk9hjgItENvdk6i', choices=[Choice(finish_reason='stop', index=0, logprobs=None, message=ChatCompletionMessage(content=None, refusal=None, role='assistant', function_call=None, tool_calls=[ChatCompletionMessageToolCall(id='call_17Tf7lutJYjEb3WbvhBu0Y0c', function=Function(arguments='{\n"action": "extract_seller_information"\n}', name='AgentAction'), type='function')]))], created=1728906256, model='gpt-4-0613', object='chat.completion', service_tier=None, system_fingerprint=None, usage=CompletionUsage(completion_tokens=11, prompt_tokens=240, total_tokens=251, completion_tokens_details=None, prompt_tokens_details=None))
2024-10-14 14:44:17,031 - DEBUG - Instructor Request: mode.value='tool_call', response_model=<class 'models.AgentAction'>, new_kwargs={'model': 'gpt-4', 'messages': [{'role': 'system', 'content': '\nYou are an AI agent specializing in contract creation and personal information extraction. \n\nYour role is:\n 1. Guide the process of extracting information from documents..\n 2. Verifying the extracted information with human input.\n 3. Identifying parties. \n 4. Constructing a contract. \n\n\nFollow the workflow precisely and ask for human input when needed.\n\n'}, {'role': 'user', 'content': "Current state: {'verified_pii_data': [{'name': 'ELENA VASILESCU', 'address': 'Mun. Bucuresti Sec. 5 Str Nicolae Iorga nr.3 900 B'}], 'parties': {'buyer': 'ELENA VASILESCU', 'seller': ''}, 'contract_details': None, 'contract': None, 'current_action': None}\nWhat action should be taken next?"}], 'tools': [{'type': 'function', 'function': {'name': 'AgentAction', 'description': 'Correctly extracted `AgentAction` with all the required parameters with correct types', 'parameters': {'properties': {'action': {'description': 'Action to be performed by the agent', 'title': 'Action', 'type': 'string'}, 'parameters': {'additionalProperties': {'type': 'string'}, 'description': 'Parameters for the action', 'title': 'Parameters', 'type': 'object'}}, 'required': ['action', 'parameters'], 'type': 'object'}}}], 'tool_choice': {'type': 'function', 'function': {'name': 'AgentAction'}}}
2024-10-14 14:44:17,031 - DEBUG - max_retries: 1
2024-10-14 14:44:17,033 - DEBUG - Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'json_data': {'messages': [{'role': 'system', 'content': '\nYou are an AI agent specializing in contract creation and personal information extraction. \n\nYour role is:\n 1. Guide the process of extracting information from documents..\n 2. Verifying the extracted information with human input.\n 3. Identifying parties. \n 4. Constructing a contract. \n\n\nFollow the workflow precisely and ask for human input when needed.\n\n'}, {'role': 'user', 'content': "Current state: {'verified_pii_data': [{'name': 'ELENA VASILESCU', 'address': 'Mun. Bucuresti Sec. 5 Str Nicolae Iorga nr.3 900 B'}], 'parties': {'buyer': 'ELENA VASILESCU', 'seller': ''}, 'contract_details': None, 'contract': None, 'current_action': None}\nWhat action should be taken next?"}], 'model': 'gpt-4', 'tool_choice': {'type': 'function', 'function': {'name': 'AgentAction'}}, 'tools': [{'type': 'function', 'function': {'name': 'AgentAction', 'description': 'Correctly extracted `AgentAction` with all the required parameters with correct types', 'parameters': {'properties': {'action': {'description': 'Action to be performed by the agent', 'title': 'Action', 'type': 'string'}, 'parameters': {'additionalProperties': {'type': 'string'}, 'description': 'Parameters for the action', 'title': 'Parameters', 'type': 'object'}}, 'required': ['action', 'parameters'], 'type': 'object'}}}]}}
2024-10-14 14:44:17,034 - DEBUG - Sending HTTP Request: POST https://api.openai.com/v1/chat/completions
2024-10-14 14:44:17,034 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-10-14 14:44:17,034 - DEBUG - send_request_headers.complete
2024-10-14 14:44:17,034 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-10-14 14:44:17,034 - DEBUG - send_request_body.complete
2024-10-14 14:44:17,034 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-10-14 14:44:18,102 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Mon, 14 Oct 2024 11:44:18 GMT'), (b'Content-Type', b'application/json'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'user-kzzh9hik9ryjiou4ftvhondh'), (b'openai-processing-ms', b'916'), (b'openai-version', b'2020-10-01'), (b'x-ratelimit-limit-requests', b'10000'), (b'x-ratelimit-limit-tokens', b'10000'), (b'x-ratelimit-remaining-requests', b'9982'), (b'x-ratelimit-remaining-tokens', b'8856'), (b'x-ratelimit-reset-requests', b'2m30.786s'), (b'x-ratelimit-reset-tokens', b'6.859s'), (b'x-request-id', b'req_23c9ce5633d448892c0b67395c599064'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8d27510c2bb0ca1d-OTP'), (b'Content-Encoding', b'gzip'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-10-14 14:44:18,102 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2024-10-14 14:44:18,103 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-10-14 14:44:18,103 - DEBUG - receive_response_body.complete
2024-10-14 14:44:18,103 - DEBUG - response_closed.started
2024-10-14 14:44:18,103 - DEBUG - response_closed.complete
2024-10-14 14:44:18,103 - DEBUG - HTTP Response: POST https://api.openai.com/v1/chat/completions "200 OK" Headers({'date': 'Mon, 14 Oct 2024 11:44:18 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-expose-headers': 'X-Request-ID', 'openai-organization': 'user-kzzh9hik9ryjiou4ftvhondh', 'openai-processing-ms': '916', 'openai-version': '2020-10-01', 'x-ratelimit-limit-requests': '10000', 'x-ratelimit-limit-tokens': '10000', 'x-ratelimit-remaining-requests': '9982', 'x-ratelimit-remaining-tokens': '8856', 'x-ratelimit-reset-requests': '2m30.786s', 'x-ratelimit-reset-tokens': '6.859s', 'x-request-id': 'req_23c9ce5633d448892c0b67395c599064', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8d27510c2bb0ca1d-OTP', 'content-encoding': 'gzip', 'alt-svc': 'h3=":443"; ma=86400'})
2024-10-14 14:44:18,103 - DEBUG - request_id: req_23c9ce5633d448892c0b67395c599064
2024-10-14 14:44:18,104 - DEBUG - Instructor Raw Response: ChatCompletion(id='chatcmpl-AIDmj3nNtmehPaNDT0iXksGodwAgB', choices=[Choice(finish_reason='stop', index=0, logprobs=None, message=ChatCompletionMessage(content=None, refusal=None, role='assistant', function_call=None, tool_calls=[ChatCompletionMessageToolCall(id='call_uqTXTPepAqg8vPUd0NaPLL6M', function=Function(arguments='{\n"action": "extract_seller_details"\n}', name='AgentAction'), type='function')]))], created=1728906257, model='gpt-4-0613', object='chat.completion', service_tier=None, system_fingerprint=None, usage=CompletionUsage(completion_tokens=11, prompt_tokens=240, total_tokens=251, completion_tokens_details=None, prompt_tokens_details=None))
2024-10-14 14:44:18,105 - DEBUG - Instructor Request: mode.value='tool_call', response_model=<class 'models.AgentAction'>, new_kwargs={'model': 'gpt-4', 'messages': [{'role': 'system', 'content': '\nYou are an AI agent specializing in contract creation and personal information extraction. \n\nYour role is:\n 1. Guide the process of extracting information from documents..\n 2. Verifying the extracted information with human input.\n 3. Identifying parties. \n 4. Constructing a contract. \n\n\nFollow the workflow precisely and ask for human input when needed.\n\n'}, {'role': 'user', 'content': "Current state: {'verified_pii_data': [{'name': 'ELENA VASILESCU', 'address': 'Mun. Bucuresti Sec. 5 Str Nicolae Iorga nr.3 900 B'}], 'parties': {'buyer': 'ELENA VASILESCU', 'seller': ''}, 'contract_details': None, 'contract': None, 'current_action': None}\nWhat action should be taken next?"}], 'tools': [{'type': 'function', 'function': {'name': 'AgentAction', 'description': 'Correctly extracted `AgentAction` with all the required parameters with correct types', 'parameters': {'properties': {'action': {'description': 'Action to be performed by the agent', 'title': 'Action', 'type': 'string'}, 'parameters': {'additionalProperties': {'type': 'string'}, 'description': 'Parameters for the action', 'title': 'Parameters', 'type': 'object'}}, 'required': ['action', 'parameters'], 'type': 'object'}}}], 'tool_choice': {'type': 'function', 'function': {'name': 'AgentAction'}}}
2024-10-14 14:44:18,105 - DEBUG - max_retries: 1
2024-10-14 14:44:18,108 - DEBUG - Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'json_data': {'messages': [{'role': 'system', 'content': '\nYou are an AI agent specializing in contract creation and personal information extraction. \n\nYour role is:\n 1. Guide the process of extracting information from documents..\n 2. Verifying the extracted information with human input.\n 3. Identifying parties. \n 4. Constructing a contract. \n\n\nFollow the workflow precisely and ask for human input when needed.\n\n'}, {'role': 'user', 'content': "Current state: {'verified_pii_data': [{'name': 'ELENA VASILESCU', 'address': 'Mun. Bucuresti Sec. 5 Str Nicolae Iorga nr.3 900 B'}], 'parties': {'buyer': 'ELENA VASILESCU', 'seller': ''}, 'contract_details': None, 'contract': None, 'current_action': None}\nWhat action should be taken next?"}], 'model': 'gpt-4', 'tool_choice': {'type': 'function', 'function': {'name': 'AgentAction'}}, 'tools': [{'type': 'function', 'function': {'name': 'AgentAction', 'description': 'Correctly extracted `AgentAction` with all the required parameters with correct types', 'parameters': {'properties': {'action': {'description': 'Action to be performed by the agent', 'title': 'Action', 'type': 'string'}, 'parameters': {'additionalProperties': {'type': 'string'}, 'description': 'Parameters for the action', 'title': 'Parameters', 'type': 'object'}}, 'required': ['action', 'parameters'], 'type': 'object'}}}]}}
2024-10-14 14:44:18,108 - DEBUG - Sending HTTP Request: POST https://api.openai.com/v1/chat/completions
2024-10-14 14:44:18,108 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-10-14 14:44:18,109 - DEBUG - send_request_headers.complete
2024-10-14 14:44:18,109 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-10-14 14:44:18,109 - DEBUG - send_request_body.complete
2024-10-14 14:44:18,109 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-10-14 14:44:19,003 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Mon, 14 Oct 2024 11:44:19 GMT'), (b'Content-Type', b'application/json'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'user-kzzh9hik9ryjiou4ftvhondh'), (b'openai-processing-ms', b'750'), (b'openai-version', b'2020-10-01'), (b'x-ratelimit-limit-requests', b'10000'), (b'x-ratelimit-limit-tokens', b'10000'), (b'x-ratelimit-remaining-requests', b'9981'), (b'x-ratelimit-remaining-tokens', b'8784'), (b'x-ratelimit-reset-requests', b'2m38.353s'), (b'x-ratelimit-reset-tokens', b'7.291s'), (b'x-request-id', b'req_e5711e5d7cf4f1fde182c87affef1955'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8d275112ef53ca1d-OTP'), (b'Content-Encoding', b'gzip'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-10-14 14:44:19,003 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2024-10-14 14:44:19,003 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-10-14 14:44:19,004 - DEBUG - receive_response_body.complete
2024-10-14 14:44:19,004 - DEBUG - response_closed.started
2024-10-14 14:44:19,004 - DEBUG - response_closed.complete
2024-10-14 14:44:19,004 - DEBUG - HTTP Response: POST https://api.openai.com/v1/chat/completions "200 OK" Headers({'date': 'Mon, 14 Oct 2024 11:44:19 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-expose-headers': 'X-Request-ID', 'openai-organization': 'user-kzzh9hik9ryjiou4ftvhondh', 'openai-processing-ms': '750', 'openai-version': '2020-10-01', 'x-ratelimit-limit-requests': '10000', 'x-ratelimit-limit-tokens': '10000', 'x-ratelimit-remaining-requests': '9981', 'x-ratelimit-remaining-tokens': '8784', 'x-ratelimit-reset-requests': '2m38.353s', 'x-ratelimit-reset-tokens': '7.291s', 'x-request-id': 'req_e5711e5d7cf4f1fde182c87affef1955', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8d275112ef53ca1d-OTP', 'content-encoding': 'gzip', 'alt-svc': 'h3=":443"; ma=86400'})
2024-10-14 14:44:19,004 - DEBUG - request_id: req_e5711e5d7cf4f1fde182c87affef1955
2024-10-14 14:44:19,004 - DEBUG - Instructor Raw Response: ChatCompletion(id='chatcmpl-AIDmkr3dyUubHOrDwPyk5JcmH8vXb', choices=[Choice(finish_reason='stop', index=0, logprobs=None, message=ChatCompletionMessage(content=None, refusal=None, role='assistant', function_call=None, tool_calls=[ChatCompletionMessageToolCall(id='call_0pQDxBTJAGK3IEOuqfnchUZX', function=Function(arguments='{\n"action": "extract_pii_data"\n}', name='AgentAction'), type='function')]))], created=1728906258, model='gpt-4-0613', object='chat.completion', service_tier=None, system_fingerprint=None, usage=CompletionUsage(completion_tokens=11, prompt_tokens=240, total_tokens=251, completion_tokens_details=None, prompt_tokens_details=None))
2024-10-14 14:44:19,005 - DEBUG - Instructor Request: mode.value='tool_call', response_model=<class 'models.AgentAction'>, new_kwargs={'model': 'gpt-4', 'messages': [{'role': 'system', 'content': '\nYou are an AI agent specializing in contract creation and personal information extraction. \n\nYour role is:\n 1. Guide the process of extracting information from documents..\n 2. Verifying the extracted information with human input.\n 3. Identifying parties. \n 4. Constructing a contract. \n\n\nFollow the workflow precisely and ask for human input when needed.\n\n'}, {'role': 'user', 'content': "Current state: {'verified_pii_data': [{'name': 'ELENA VASILESCU', 'address': 'Mun. Bucuresti Sec. 5 Str Nicolae Iorga nr.3 900 B'}], 'parties': {'buyer': 'ELENA VASILESCU', 'seller': ''}, 'contract_details': None, 'contract': None, 'current_action': None}\nWhat action should be taken next?"}], 'tools': [{'type': 'function', 'function': {'name': 'AgentAction', 'description': 'Correctly extracted `AgentAction` with all the required parameters with correct types', 'parameters': {'properties': {'action': {'description': 'Action to be performed by the agent', 'title': 'Action', 'type': 'string'}, 'parameters': {'additionalProperties': {'type': 'string'}, 'description': 'Parameters for the action', 'title': 'Parameters', 'type': 'object'}}, 'required': ['action', 'parameters'], 'type': 'object'}}}], 'tool_choice': {'type': 'function', 'function': {'name': 'AgentAction'}}}
2024-10-14 14:44:19,005 - DEBUG - max_retries: 1
2024-10-14 14:44:19,006 - DEBUG - Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'json_data': {'messages': [{'role': 'system', 'content': '\nYou are an AI agent specializing in contract creation and personal information extraction. \n\nYour role is:\n 1. Guide the process of extracting information from documents..\n 2. Verifying the extracted information with human input.\n 3. Identifying parties. \n 4. Constructing a contract. \n\n\nFollow the workflow precisely and ask for human input when needed.\n\n'}, {'role': 'user', 'content': "Current state: {'verified_pii_data': [{'name': 'ELENA VASILESCU', 'address': 'Mun. Bucuresti Sec. 5 Str Nicolae Iorga nr.3 900 B'}], 'parties': {'buyer': 'ELENA VASILESCU', 'seller': ''}, 'contract_details': None, 'contract': None, 'current_action': None}\nWhat action should be taken next?"}], 'model': 'gpt-4', 'tool_choice': {'type': 'function', 'function': {'name': 'AgentAction'}}, 'tools': [{'type': 'function', 'function': {'name': 'AgentAction', 'description': 'Correctly extracted `AgentAction` with all the required parameters with correct types', 'parameters': {'properties': {'action': {'description': 'Action to be performed by the agent', 'title': 'Action', 'type': 'string'}, 'parameters': {'additionalProperties': {'type': 'string'}, 'description': 'Parameters for the action', 'title': 'Parameters', 'type': 'object'}}, 'required': ['action', 'parameters'], 'type': 'object'}}}]}}
2024-10-14 14:44:19,007 - DEBUG - Sending HTTP Request: POST https://api.openai.com/v1/chat/completions
2024-10-14 14:44:19,007 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-10-14 14:44:19,007 - DEBUG - send_request_headers.complete
2024-10-14 14:44:19,007 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-10-14 14:44:19,007 - DEBUG - send_request_body.complete
2024-10-14 14:44:19,007 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-10-14 14:44:20,085 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Mon, 14 Oct 2024 11:44:20 GMT'), (b'Content-Type', b'application/json'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'user-kzzh9hik9ryjiou4ftvhondh'), (b'openai-processing-ms', b'921'), (b'openai-version', b'2020-10-01'), (b'x-ratelimit-limit-requests', b'10000'), (b'x-ratelimit-limit-tokens', b'10000'), (b'x-ratelimit-remaining-requests', b'9980'), (b'x-ratelimit-remaining-tokens', b'8683'), (b'x-ratelimit-reset-requests', b'2m46.094s'), (b'x-ratelimit-reset-tokens', b'7.899s'), (b'x-request-id', b'req_1eb554bf2500942cec1b3fe8102f7d66'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8d2751188f8eca1d-OTP'), (b'Content-Encoding', b'gzip'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-10-14 14:44:20,085 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2024-10-14 14:44:20,086 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-10-14 14:44:20,086 - DEBUG - receive_response_body.complete
2024-10-14 14:44:20,086 - DEBUG - response_closed.started
2024-10-14 14:44:20,086 - DEBUG - response_closed.complete
2024-10-14 14:44:20,086 - DEBUG - HTTP Response: POST https://api.openai.com/v1/chat/completions "200 OK" Headers({'date': 'Mon, 14 Oct 2024 11:44:20 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-expose-headers': 'X-Request-ID', 'openai-organization': 'user-kzzh9hik9ryjiou4ftvhondh', 'openai-processing-ms': '921', 'openai-version': '2020-10-01', 'x-ratelimit-limit-requests': '10000', 'x-ratelimit-limit-tokens': '10000', 'x-ratelimit-remaining-requests': '9980', 'x-ratelimit-remaining-tokens': '8683', 'x-ratelimit-reset-requests': '2m46.094s', 'x-ratelimit-reset-tokens': '7.899s', 'x-request-id': 'req_1eb554bf2500942cec1b3fe8102f7d66', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8d2751188f8eca1d-OTP', 'content-encoding': 'gzip', 'alt-svc': 'h3=":443"; ma=86400'})
2024-10-14 14:44:20,086 - DEBUG - request_id: req_1eb554bf2500942cec1b3fe8102f7d66
2024-10-14 14:44:20,086 - DEBUG - Instructor Raw Response: ChatCompletion(id='chatcmpl-AIDmlVxf8vx0ckCIlGULufRfhDjqq', choices=[Choice(finish_reason='stop', index=0, logprobs=None, message=ChatCompletionMessage(content=None, refusal=None, role='assistant', function_call=None, tool_calls=[ChatCompletionMessageToolCall(id='call_94AdoKxrhiMlRCslJEfoXmys', function=Function(arguments='{\n"action": "verify_seller_pii_data"\n}', name='AgentAction'), type='function')]))], created=1728906259, model='gpt-4-0613', object='chat.completion', service_tier=None, system_fingerprint=None, usage=CompletionUsage(completion_tokens=13, prompt_tokens=240, total_tokens=253, completion_tokens_details=None, prompt_tokens_details=None))
2024-10-14 14:44:20,087 - DEBUG - Instructor Request: mode.value='tool_call', response_model=<class 'models.AgentAction'>, new_kwargs={'model': 'gpt-4', 'messages': [{'role': 'system', 'content': '\nYou are an AI agent specializing in contract creation and personal information extraction. \n\nYour role is:\n 1. Guide the process of extracting information from documents..\n 2. Verifying the extracted information with human input.\n 3. Identifying parties. \n 4. Constructing a contract. \n\n\nFollow the workflow precisely and ask for human input when needed.\n\n'}, {'role': 'user', 'content': "Current state: {'verified_pii_data': [{'name': 'ELENA VASILESCU', 'address': 'Mun. Bucuresti Sec. 5 Str Nicolae Iorga nr.3 900 B'}], 'parties': {'buyer': 'ELENA VASILESCU', 'seller': ''}, 'contract_details': None, 'contract': None, 'current_action': None}\nWhat action should be taken next?"}], 'tools': [{'type': 'function', 'function': {'name': 'AgentAction', 'description': 'Correctly extracted `AgentAction` with all the required parameters with correct types', 'parameters': {'properties': {'action': {'description': 'Action to be performed by the agent', 'title': 'Action', 'type': 'string'}, 'parameters': {'additionalProperties': {'type': 'string'}, 'description': 'Parameters for the action', 'title': 'Parameters', 'type': 'object'}}, 'required': ['action', 'parameters'], 'type': 'object'}}}], 'tool_choice': {'type': 'function', 'function': {'name': 'AgentAction'}}}
2024-10-14 14:44:20,087 - DEBUG - max_retries: 1
2024-10-14 14:44:20,089 - DEBUG - Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'json_data': {'messages': [{'role': 'system', 'content': '\nYou are an AI agent specializing in contract creation and personal information extraction. \n\nYour role is:\n 1. Guide the process of extracting information from documents..\n 2. Verifying the extracted information with human input.\n 3. Identifying parties. \n 4. Constructing a contract. \n\n\nFollow the workflow precisely and ask for human input when needed.\n\n'}, {'role': 'user', 'content': "Current state: {'verified_pii_data': [{'name': 'ELENA VASILESCU', 'address': 'Mun. Bucuresti Sec. 5 Str Nicolae Iorga nr.3 900 B'}], 'parties': {'buyer': 'ELENA VASILESCU', 'seller': ''}, 'contract_details': None, 'contract': None, 'current_action': None}\nWhat action should be taken next?"}], 'model': 'gpt-4', 'tool_choice': {'type': 'function', 'function': {'name': 'AgentAction'}}, 'tools': [{'type': 'function', 'function': {'name': 'AgentAction', 'description': 'Correctly extracted `AgentAction` with all the required parameters with correct types', 'parameters': {'properties': {'action': {'description': 'Action to be performed by the agent', 'title': 'Action', 'type': 'string'}, 'parameters': {'additionalProperties': {'type': 'string'}, 'description': 'Parameters for the action', 'title': 'Parameters', 'type': 'object'}}, 'required': ['action', 'parameters'], 'type': 'object'}}}]}}
2024-10-14 14:44:20,089 - DEBUG - Sending HTTP Request: POST https://api.openai.com/v1/chat/completions
2024-10-14 14:44:20,089 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-10-14 14:44:20,089 - DEBUG - send_request_headers.complete
2024-10-14 14:44:20,089 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-10-14 14:44:20,089 - DEBUG - send_request_body.complete
2024-10-14 14:44:20,089 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-10-14 14:44:20,973 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Mon, 14 Oct 2024 11:44:21 GMT'), (b'Content-Type', b'application/json'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'user-kzzh9hik9ryjiou4ftvhondh'), (b'openai-processing-ms', b'688'), (b'openai-version', b'2020-10-01'), (b'x-ratelimit-limit-requests', b'10000'), (b'x-ratelimit-limit-tokens', b'10000'), (b'x-ratelimit-remaining-requests', b'9979'), (b'x-ratelimit-remaining-tokens', b'8611'), (b'x-ratelimit-reset-requests', b'2m53.651s'), (b'x-ratelimit-reset-tokens', b'8.333s'), (b'x-request-id', b'req_600235e1216deca45dbdff63fc00df95'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8d27511f4b1aca1d-OTP'), (b'Content-Encoding', b'gzip'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-10-14 14:44:20,974 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2024-10-14 14:44:20,974 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-10-14 14:44:20,974 - DEBUG - receive_response_body.complete
2024-10-14 14:44:20,974 - DEBUG - response_closed.started
2024-10-14 14:44:20,974 - DEBUG - response_closed.complete
2024-10-14 14:44:20,974 - DEBUG - HTTP Response: POST https://api.openai.com/v1/chat/completions "200 OK" Headers({'date': 'Mon, 14 Oct 2024 11:44:21 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-expose-headers': 'X-Request-ID', 'openai-organization': 'user-kzzh9hik9ryjiou4ftvhondh', 'openai-processing-ms': '688', 'openai-version': '2020-10-01', 'x-ratelimit-limit-requests': '10000', 'x-ratelimit-limit-tokens': '10000', 'x-ratelimit-remaining-requests': '9979', 'x-ratelimit-remaining-tokens': '8611', 'x-ratelimit-reset-requests': '2m53.651s', 'x-ratelimit-reset-tokens': '8.333s', 'x-request-id': 'req_600235e1216deca45dbdff63fc00df95', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8d27511f4b1aca1d-OTP', 'content-encoding': 'gzip', 'alt-svc': 'h3=":443"; ma=86400'})
2024-10-14 14:44:20,974 - DEBUG - request_id: req_600235e1216deca45dbdff63fc00df95
2024-10-14 14:44:20,974 - DEBUG - Instructor Raw Response: ChatCompletion(id='chatcmpl-AIDmmXgByhJhbaNNjYtAWrfVV5rj7', choices=[Choice(finish_reason='stop', index=0, logprobs=None, message=ChatCompletionMessage(content=None, refusal=None, role='assistant', function_call=None, tool_calls=[ChatCompletionMessageToolCall(id='call_t9fPOnhzcK9BsUXtlLDXG9bk', function=Function(arguments='{\n"action": "extract_seller_details"\n}', name='AgentAction'), type='function')]))], created=1728906260, model='gpt-4-0613', object='chat.completion', service_tier=None, system_fingerprint=None, usage=CompletionUsage(completion_tokens=11, prompt_tokens=240, total_tokens=251, completion_tokens_details=None, prompt_tokens_details=None))
2024-10-14 14:44:20,975 - DEBUG - Instructor Request: mode.value='tool_call', response_model=<class 'models.AgentAction'>, new_kwargs={'model': 'gpt-4', 'messages': [{'role': 'system', 'content': '\nYou are an AI agent specializing in contract creation and personal information extraction. \n\nYour role is:\n 1. Guide the process of extracting information from documents..\n 2. Verifying the extracted information with human input.\n 3. Identifying parties. \n 4. Constructing a contract. \n\n\nFollow the workflow precisely and ask for human input when needed.\n\n'}, {'role': 'user', 'content': "Current state: {'verified_pii_data': [{'name': 'ELENA VASILESCU', 'address': 'Mun. Bucuresti Sec. 5 Str Nicolae Iorga nr.3 900 B'}], 'parties': {'buyer': 'ELENA VASILESCU', 'seller': ''}, 'contract_details': None, 'contract': None, 'current_action': None}\nWhat action should be taken next?"}], 'tools': [{'type': 'function', 'function': {'name': 'AgentAction', 'description': 'Correctly extracted `AgentAction` with all the required parameters with correct types', 'parameters': {'properties': {'action': {'description': 'Action to be performed by the agent', 'title': 'Action', 'type': 'string'}, 'parameters': {'additionalProperties': {'type': 'string'}, 'description': 'Parameters for the action', 'title': 'Parameters', 'type': 'object'}}, 'required': ['action', 'parameters'], 'type': 'object'}}}], 'tool_choice': {'type': 'function', 'function': {'name': 'AgentAction'}}}
2024-10-14 14:44:20,976 - DEBUG - max_retries: 1
2024-10-14 14:44:20,977 - DEBUG - Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'json_data': {'messages': [{'role': 'system', 'content': '\nYou are an AI agent specializing in contract creation and personal information extraction. \n\nYour role is:\n 1. Guide the process of extracting information from documents..\n 2. Verifying the extracted information with human input.\n 3. Identifying parties. \n 4. Constructing a contract. \n\n\nFollow the workflow precisely and ask for human input when needed.\n\n'}, {'role': 'user', 'content': "Current state: {'verified_pii_data': [{'name': 'ELENA VASILESCU', 'address': 'Mun. Bucuresti Sec. 5 Str Nicolae Iorga nr.3 900 B'}], 'parties': {'buyer': 'ELENA VASILESCU', 'seller': ''}, 'contract_details': None, 'contract': None, 'current_action': None}\nWhat action should be taken next?"}], 'model': 'gpt-4', 'tool_choice': {'type': 'function', 'function': {'name': 'AgentAction'}}, 'tools': [{'type': 'function', 'function': {'name': 'AgentAction', 'description': 'Correctly extracted `AgentAction` with all the required parameters with correct types', 'parameters': {'properties': {'action': {'description': 'Action to be performed by the agent', 'title': 'Action', 'type': 'string'}, 'parameters': {'additionalProperties': {'type': 'string'}, 'description': 'Parameters for the action', 'title': 'Parameters', 'type': 'object'}}, 'required': ['action', 'parameters'], 'type': 'object'}}}]}}
2024-10-14 14:44:20,977 - DEBUG - Sending HTTP Request: POST https://api.openai.com/v1/chat/completions
2024-10-14 14:44:20,978 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-10-14 14:44:20,978 - DEBUG - send_request_headers.complete
2024-10-14 14:44:20,978 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-10-14 14:44:20,978 - DEBUG - send_request_body.complete
2024-10-14 14:44:20,978 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-10-14 14:44:21,969 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Mon, 14 Oct 2024 11:44:22 GMT'), (b'Content-Type', b'application/json'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'user-kzzh9hik9ryjiou4ftvhondh'), (b'openai-processing-ms', b'823'), (b'openai-version', b'2020-10-01'), (b'x-ratelimit-limit-requests', b'10000'), (b'x-ratelimit-limit-tokens', b'10000'), (b'x-ratelimit-remaining-requests', b'9979'), (b'x-ratelimit-remaining-tokens', b'8509'), (b'x-ratelimit-reset-requests', b'3m1.392s'), (b'x-ratelimit-reset-tokens', b'8.941s'), (b'x-request-id', b'req_5104394867465210441322799298860e'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8d275124dc4eca1d-OTP'), (b'Content-Encoding', b'gzip'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-10-14 14:44:21,969 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2024-10-14 14:44:21,969 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-10-14 14:44:21,970 - DEBUG - receive_response_body.complete
2024-10-14 14:44:21,970 - DEBUG - response_closed.started
2024-10-14 14:44:21,970 - DEBUG - response_closed.complete
2024-10-14 14:44:21,970 - DEBUG - HTTP Response: POST https://api.openai.com/v1/chat/completions "200 OK" Headers({'date': 'Mon, 14 Oct 2024 11:44:22 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-expose-headers': 'X-Request-ID', 'openai-organization': 'user-kzzh9hik9ryjiou4ftvhondh', 'openai-processing-ms': '823', 'openai-version': '2020-10-01', 'x-ratelimit-limit-requests': '10000', 'x-ratelimit-limit-tokens': '10000', 'x-ratelimit-remaining-requests': '9979', 'x-ratelimit-remaining-tokens': '8509', 'x-ratelimit-reset-requests': '3m1.392s', 'x-ratelimit-reset-tokens': '8.941s', 'x-request-id': 'req_5104394867465210441322799298860e', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8d275124dc4eca1d-OTP', 'content-encoding': 'gzip', 'alt-svc': 'h3=":443"; ma=86400'})
2024-10-14 14:44:21,970 - DEBUG - request_id: req_5104394867465210441322799298860e
2024-10-14 14:44:21,972 - DEBUG - Instructor Raw Response: ChatCompletion(id='chatcmpl-AIDmn8W4XcixswbnxWr4iPD3iGDQY', choices=[Choice(finish_reason='stop', index=0, logprobs=None, message=ChatCompletionMessage(content=None, refusal=None, role='assistant', function_call=None, tool_calls=[ChatCompletionMessageToolCall(id='call_P68bZ2W9L7QTGZIOBYZ0spgZ', function=Function(arguments='{\n"action": "extract_party_details"\n}', name='AgentAction'), type='function')]))], created=1728906261, model='gpt-4-0613', object='chat.completion', service_tier=None, system_fingerprint=None, usage=CompletionUsage(completion_tokens=10, prompt_tokens=240, total_tokens=250, completion_tokens_details=None, prompt_tokens_details=None))
2024-10-14 14:44:21,974 - DEBUG - Instructor Request: mode.value='tool_call', response_model=<class 'models.AgentAction'>, new_kwargs={'model': 'gpt-4', 'messages': [{'role': 'system', 'content': '\nYou are an AI agent specializing in contract creation and personal information extraction. \n\nYour role is:\n 1. Guide the process of extracting information from documents..\n 2. Verifying the extracted information with human input.\n 3. Identifying parties. \n 4. Constructing a contract. \n\n\nFollow the workflow precisely and ask for human input when needed.\n\n'}, {'role': 'user', 'content': "Current state: {'verified_pii_data': [{'name': 'ELENA VASILESCU', 'address': 'Mun. Bucuresti Sec. 5 Str Nicolae Iorga nr.3 900 B'}], 'parties': {'buyer': 'ELENA VASILESCU', 'seller': ''}, 'contract_details': None, 'contract': None, 'current_action': None}\nWhat action should be taken next?"}], 'tools': [{'type': 'function', 'function': {'name': 'AgentAction', 'description': 'Correctly extracted `AgentAction` with all the required parameters with correct types', 'parameters': {'properties': {'action': {'description': 'Action to be performed by the agent', 'title': 'Action', 'type': 'string'}, 'parameters': {'additionalProperties': {'type': 'string'}, 'description': 'Parameters for the action', 'title': 'Parameters', 'type': 'object'}}, 'required': ['action', 'parameters'], 'type': 'object'}}}], 'tool_choice': {'type': 'function', 'function': {'name': 'AgentAction'}}}
2024-10-14 14:44:21,974 - DEBUG - max_retries: 1
2024-10-14 14:44:21,977 - DEBUG - Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'json_data': {'messages': [{'role': 'system', 'content': '\nYou are an AI agent specializing in contract creation and personal information extraction. \n\nYour role is:\n 1. Guide the process of extracting information from documents..\n 2. Verifying the extracted information with human input.\n 3. Identifying parties. \n 4. Constructing a contract. \n\n\nFollow the workflow precisely and ask for human input when needed.\n\n'}, {'role': 'user', 'content': "Current state: {'verified_pii_data': [{'name': 'ELENA VASILESCU', 'address': 'Mun. Bucuresti Sec. 5 Str Nicolae Iorga nr.3 900 B'}], 'parties': {'buyer': 'ELENA VASILESCU', 'seller': ''}, 'contract_details': None, 'contract': None, 'current_action': None}\nWhat action should be taken next?"}], 'model': 'gpt-4', 'tool_choice': {'type': 'function', 'function': {'name': 'AgentAction'}}, 'tools': [{'type': 'function', 'function': {'name': 'AgentAction', 'description': 'Correctly extracted `AgentAction` with all the required parameters with correct types', 'parameters': {'properties': {'action': {'description': 'Action to be performed by the agent', 'title': 'Action', 'type': 'string'}, 'parameters': {'additionalProperties': {'type': 'string'}, 'description': 'Parameters for the action', 'title': 'Parameters', 'type': 'object'}}, 'required': ['action', 'parameters'], 'type': 'object'}}}]}}
2024-10-14 14:44:21,977 - DEBUG - Sending HTTP Request: POST https://api.openai.com/v1/chat/completions
2024-10-14 14:44:21,977 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-10-14 14:44:21,978 - DEBUG - send_request_headers.complete
2024-10-14 14:44:21,978 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-10-14 14:44:21,978 - DEBUG - send_request_body.complete
2024-10-14 14:44:21,978 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-10-14 14:44:23,073 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Mon, 14 Oct 2024 11:44:23 GMT'), (b'Content-Type', b'application/json'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'user-kzzh9hik9ryjiou4ftvhondh'), (b'openai-processing-ms', b'928'), (b'openai-version', b'2020-10-01'), (b'x-ratelimit-limit-requests', b'10000'), (b'x-ratelimit-limit-tokens', b'10000'), (b'x-ratelimit-remaining-requests', b'9978'), (b'x-ratelimit-remaining-tokens', b'8425'), (b'x-ratelimit-reset-requests', b'3m9.039s'), (b'x-ratelimit-reset-tokens', b'9.448s'), (b'x-request-id', b'req_d6be773401fc7ad313b47f1d531687f6'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8d27512b1e96ca1d-OTP'), (b'Content-Encoding', b'gzip'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-10-14 14:44:23,073 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2024-10-14 14:44:23,073 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-10-14 14:44:23,074 - DEBUG - receive_response_body.complete
2024-10-14 14:44:23,074 - DEBUG - response_closed.started
2024-10-14 14:44:23,074 - DEBUG - response_closed.complete
2024-10-14 14:44:23,074 - DEBUG - HTTP Response: POST https://api.openai.com/v1/chat/completions "200 OK" Headers({'date': 'Mon, 14 Oct 2024 11:44:23 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-expose-headers': 'X-Request-ID', 'openai-organization': 'user-kzzh9hik9ryjiou4ftvhondh', 'openai-processing-ms': '928', 'openai-version': '2020-10-01', 'x-ratelimit-limit-requests': '10000', 'x-ratelimit-limit-tokens': '10000', 'x-ratelimit-remaining-requests': '9978', 'x-ratelimit-remaining-tokens': '8425', 'x-ratelimit-reset-requests': '3m9.039s', 'x-ratelimit-reset-tokens': '9.448s', 'x-request-id': 'req_d6be773401fc7ad313b47f1d531687f6', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8d27512b1e96ca1d-OTP', 'content-encoding': 'gzip', 'alt-svc': 'h3=":443"; ma=86400'})
2024-10-14 14:44:23,074 - DEBUG - request_id: req_d6be773401fc7ad313b47f1d531687f6
2024-10-14 14:44:23,074 - DEBUG - Instructor Raw Response: ChatCompletion(id='chatcmpl-AIDmo1KSdb1TOEfPRYxpLUtQY3twU', choices=[Choice(finish_reason='stop', index=0, logprobs=None, message=ChatCompletionMessage(content=None, refusal=None, role='assistant', function_call=None, tool_calls=[ChatCompletionMessageToolCall(id='call_FzdttkZ9CIGymZPqhQ4A2iLj', function=Function(arguments='{\n"action": "verify_seller_details"\n}', name='AgentAction'), type='function')]))], created=1728906262, model='gpt-4-0613', object='chat.completion', service_tier=None, system_fingerprint=None, usage=CompletionUsage(completion_tokens=11, prompt_tokens=240, total_tokens=251, completion_tokens_details=None, prompt_tokens_details=None))
2024-10-14 14:44:23,076 - DEBUG - Instructor Request: mode.value='tool_call', response_model=<class 'models.AgentAction'>, new_kwargs={'model': 'gpt-4', 'messages': [{'role': 'system', 'content': '\nYou are an AI agent specializing in contract creation and personal information extraction. \n\nYour role is:\n 1. Guide the process of extracting information from documents..\n 2. Verifying the extracted information with human input.\n 3. Identifying parties. \n 4. Constructing a contract. \n\n\nFollow the workflow precisely and ask for human input when needed.\n\n'}, {'role': 'user', 'content': "Current state: {'verified_pii_data': [{'name': 'ELENA VASILESCU', 'address': 'Mun. Bucuresti Sec. 5 Str Nicolae Iorga nr.3 900 B'}], 'parties': {'buyer': 'ELENA VASILESCU', 'seller': ''}, 'contract_details': None, 'contract': None, 'current_action': None}\nWhat action should be taken next?"}], 'tools': [{'type': 'function', 'function': {'name': 'AgentAction', 'description': 'Correctly extracted `AgentAction` with all the required parameters with correct types', 'parameters': {'properties': {'action': {'description': 'Action to be performed by the agent', 'title': 'Action', 'type': 'string'}, 'parameters': {'additionalProperties': {'type': 'string'}, 'description': 'Parameters for the action', 'title': 'Parameters', 'type': 'object'}}, 'required': ['action', 'parameters'], 'type': 'object'}}}], 'tool_choice': {'type': 'function', 'function': {'name': 'AgentAction'}}}
2024-10-14 14:44:23,076 - DEBUG - max_retries: 1
2024-10-14 14:44:23,078 - DEBUG - Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'json_data': {'messages': [{'role': 'system', 'content': '\nYou are an AI agent specializing in contract creation and personal information extraction. \n\nYour role is:\n 1. Guide the process of extracting information from documents..\n 2. Verifying the extracted information with human input.\n 3. Identifying parties. \n 4. Constructing a contract. \n\n\nFollow the workflow precisely and ask for human input when needed.\n\n'}, {'role': 'user', 'content': "Current state: {'verified_pii_data': [{'name': 'ELENA VASILESCU', 'address': 'Mun. Bucuresti Sec. 5 Str Nicolae Iorga nr.3 900 B'}], 'parties': {'buyer': 'ELENA VASILESCU', 'seller': ''}, 'contract_details': None, 'contract': None, 'current_action': None}\nWhat action should be taken next?"}], 'model': 'gpt-4', 'tool_choice': {'type': 'function', 'function': {'name': 'AgentAction'}}, 'tools': [{'type': 'function', 'function': {'name': 'AgentAction', 'description': 'Correctly extracted `AgentAction` with all the required parameters with correct types', 'parameters': {'properties': {'action': {'description': 'Action to be performed by the agent', 'title': 'Action', 'type': 'string'}, 'parameters': {'additionalProperties': {'type': 'string'}, 'description': 'Parameters for the action', 'title': 'Parameters', 'type': 'object'}}, 'required': ['action', 'parameters'], 'type': 'object'}}}]}}
2024-10-14 14:44:23,078 - DEBUG - Sending HTTP Request: POST https://api.openai.com/v1/chat/completions
2024-10-14 14:44:23,078 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-10-14 14:44:23,079 - DEBUG - send_request_headers.complete
2024-10-14 14:44:23,079 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-10-14 14:44:23,079 - DEBUG - send_request_body.complete
2024-10-14 14:44:23,079 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-10-14 14:44:24,273 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Mon, 14 Oct 2024 11:44:24 GMT'), (b'Content-Type', b'application/json'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'user-kzzh9hik9ryjiou4ftvhondh'), (b'openai-processing-ms', b'1033'), (b'openai-version', b'2020-10-01'), (b'x-ratelimit-limit-requests', b'10000'), (b'x-ratelimit-limit-tokens', b'10000'), (b'x-ratelimit-remaining-requests', b'9977'), (b'x-ratelimit-remaining-tokens', b'8357'), (b'x-ratelimit-reset-requests', b'3m16.578s'), (b'x-ratelimit-reset-tokens', b'9.853s'), (b'x-request-id', b'req_00f1acbe9fb38ed1726638c6e1d29470'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8d275131fa55ca1d-OTP'), (b'Content-Encoding', b'gzip'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-10-14 14:44:24,273 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2024-10-14 14:44:24,273 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-10-14 14:44:24,273 - DEBUG - receive_response_body.complete
2024-10-14 14:44:24,274 - DEBUG - response_closed.started
2024-10-14 14:44:24,274 - DEBUG - response_closed.complete
2024-10-14 14:44:24,274 - DEBUG - HTTP Response: POST https://api.openai.com/v1/chat/completions "200 OK" Headers({'date': 'Mon, 14 Oct 2024 11:44:24 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-expose-headers': 'X-Request-ID', 'openai-organization': 'user-kzzh9hik9ryjiou4ftvhondh', 'openai-processing-ms': '1033', 'openai-version': '2020-10-01', 'x-ratelimit-limit-requests': '10000', 'x-ratelimit-limit-tokens': '10000', 'x-ratelimit-remaining-requests': '9977', 'x-ratelimit-remaining-tokens': '8357', 'x-ratelimit-reset-requests': '3m16.578s', 'x-ratelimit-reset-tokens': '9.853s', 'x-request-id': 'req_00f1acbe9fb38ed1726638c6e1d29470', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8d275131fa55ca1d-OTP', 'content-encoding': 'gzip', 'alt-svc': 'h3=":443"; ma=86400'})
2024-10-14 14:44:24,274 - DEBUG - request_id: req_00f1acbe9fb38ed1726638c6e1d29470
2024-10-14 14:44:24,274 - DEBUG - Instructor Raw Response: ChatCompletion(id='chatcmpl-AIDmpIhtIoT5mUlDNxhoeq8jXbnjK', choices=[Choice(finish_reason='stop', index=0, logprobs=None, message=ChatCompletionMessage(content=None, refusal=None, role='assistant', function_call=None, tool_calls=[ChatCompletionMessageToolCall(id='call_SRS5CGTL6yjO5gwexYmPpsbi', function=Function(arguments='{\n"action": "extract_seller_information"\n}', name='AgentAction'), type='function')]))], created=1728906263, model='gpt-4-0613', object='chat.completion', service_tier=None, system_fingerprint=None, usage=CompletionUsage(completion_tokens=11, prompt_tokens=240, total_tokens=251, completion_tokens_details=None, prompt_tokens_details=None))
2024-10-14 14:44:24,275 - DEBUG - Instructor Request: mode.value='tool_call', response_model=<class 'models.AgentAction'>, new_kwargs={'model': 'gpt-4', 'messages': [{'role': 'system', 'content': '\nYou are an AI agent specializing in contract creation and personal information extraction. \n\nYour role is:\n 1. Guide the process of extracting information from documents..\n 2. Verifying the extracted information with human input.\n 3. Identifying parties. \n 4. Constructing a contract. \n\n\nFollow the workflow precisely and ask for human input when needed.\n\n'}, {'role': 'user', 'content': "Current state: {'verified_pii_data': [{'name': 'ELENA VASILESCU', 'address': 'Mun. Bucuresti Sec. 5 Str Nicolae Iorga nr.3 900 B'}], 'parties': {'buyer': 'ELENA VASILESCU', 'seller': ''}, 'contract_details': None, 'contract': None, 'current_action': None}\nWhat action should be taken next?"}], 'tools': [{'type': 'function', 'function': {'name': 'AgentAction', 'description': 'Correctly extracted `AgentAction` with all the required parameters with correct types', 'parameters': {'properties': {'action': {'description': 'Action to be performed by the agent', 'title': 'Action', 'type': 'string'}, 'parameters': {'additionalProperties': {'type': 'string'}, 'description': 'Parameters for the action', 'title': 'Parameters', 'type': 'object'}}, 'required': ['action', 'parameters'], 'type': 'object'}}}], 'tool_choice': {'type': 'function', 'function': {'name': 'AgentAction'}}}
2024-10-14 14:44:24,275 - DEBUG - max_retries: 1
2024-10-14 14:44:24,276 - DEBUG - Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'json_data': {'messages': [{'role': 'system', 'content': '\nYou are an AI agent specializing in contract creation and personal information extraction. \n\nYour role is:\n 1. Guide the process of extracting information from documents..\n 2. Verifying the extracted information with human input.\n 3. Identifying parties. \n 4. Constructing a contract. \n\n\nFollow the workflow precisely and ask for human input when needed.\n\n'}, {'role': 'user', 'content': "Current state: {'verified_pii_data': [{'name': 'ELENA VASILESCU', 'address': 'Mun. Bucuresti Sec. 5 Str Nicolae Iorga nr.3 900 B'}], 'parties': {'buyer': 'ELENA VASILESCU', 'seller': ''}, 'contract_details': None, 'contract': None, 'current_action': None}\nWhat action should be taken next?"}], 'model': 'gpt-4', 'tool_choice': {'type': 'function', 'function': {'name': 'AgentAction'}}, 'tools': [{'type': 'function', 'function': {'name': 'AgentAction', 'description': 'Correctly extracted `AgentAction` with all the required parameters with correct types', 'parameters': {'properties': {'action': {'description': 'Action to be performed by the agent', 'title': 'Action', 'type': 'string'}, 'parameters': {'additionalProperties': {'type': 'string'}, 'description': 'Parameters for the action', 'title': 'Parameters', 'type': 'object'}}, 'required': ['action', 'parameters'], 'type': 'object'}}}]}}
2024-10-14 14:44:24,276 - DEBUG - Sending HTTP Request: POST https://api.openai.com/v1/chat/completions
2024-10-14 14:44:24,277 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-10-14 14:44:24,277 - DEBUG - send_request_headers.complete
2024-10-14 14:44:24,277 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-10-14 14:44:24,277 - DEBUG - send_request_body.complete
2024-10-14 14:44:24,277 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-10-14 14:44:25,294 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Mon, 14 Oct 2024 11:44:25 GMT'), (b'Content-Type', b'application/json'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'user-kzzh9hik9ryjiou4ftvhondh'), (b'openai-processing-ms', b'869'), (b'openai-version', b'2020-10-01'), (b'x-ratelimit-limit-requests', b'10000'), (b'x-ratelimit-limit-tokens', b'10000'), (b'x-ratelimit-remaining-requests', b'9976'), (b'x-ratelimit-remaining-tokens', b'8302'), (b'x-ratelimit-reset-requests', b'3m24.044s'), (b'x-ratelimit-reset-tokens', b'10.185s'), (b'x-request-id', b'req_04ed9d9d397d3c50ac0ab895bb42f6a8'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8d2751397c38ca1d-OTP'), (b'Content-Encoding', b'gzip'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-10-14 14:44:25,294 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2024-10-14 14:44:25,295 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-10-14 14:44:25,295 - DEBUG - receive_response_body.complete
2024-10-14 14:44:25,295 - DEBUG - response_closed.started
2024-10-14 14:44:25,295 - DEBUG - response_closed.complete
2024-10-14 14:44:25,295 - DEBUG - HTTP Response: POST https://api.openai.com/v1/chat/completions "200 OK" Headers({'date': 'Mon, 14 Oct 2024 11:44:25 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-expose-headers': 'X-Request-ID', 'openai-organization': 'user-kzzh9hik9ryjiou4ftvhondh', 'openai-processing-ms': '869', 'openai-version': '2020-10-01', 'x-ratelimit-limit-requests': '10000', 'x-ratelimit-limit-tokens': '10000', 'x-ratelimit-remaining-requests': '9976', 'x-ratelimit-remaining-tokens': '8302', 'x-ratelimit-reset-requests': '3m24.044s', 'x-ratelimit-reset-tokens': '10.185s', 'x-request-id': 'req_04ed9d9d397d3c50ac0ab895bb42f6a8', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8d2751397c38ca1d-OTP', 'content-encoding': 'gzip', 'alt-svc': 'h3=":443"; ma=86400'})
2024-10-14 14:44:25,295 - DEBUG - request_id: req_04ed9d9d397d3c50ac0ab895bb42f6a8
2024-10-14 14:44:25,296 - DEBUG - Instructor Raw Response: ChatCompletion(id='chatcmpl-AIDmqMATAObNVnNNbfnHxm0KepQl4', choices=[Choice(finish_reason='stop', index=0, logprobs=None, message=ChatCompletionMessage(content=None, refusal=None, role='assistant', function_call=None, tool_calls=[ChatCompletionMessageToolCall(id='call_SRS5CGTL6yjO5gwexYmPpsbi', function=Function(arguments='{\n"action": "extract_pii"\n}', name='AgentAction'), type='function')]))], created=1728906264, model='gpt-4-0613', object='chat.completion', service_tier=None, system_fingerprint=None, usage=CompletionUsage(completion_tokens=10, prompt_tokens=240, total_tokens=250, completion_tokens_details=None, prompt_tokens_details=None))
2024-10-14 14:44:25,297 - DEBUG - Instructor Request: mode.value='tool_call', response_model=<class 'models.PIIData'>, new_kwargs={'model': 'gpt-4', 'messages': [{'role': 'system', 'content': '\nYou are an AI agent specializing in contract creation and personal information extraction. \n\nYour role is:\n 1. Guide the process of extracting information from documents..\n 2. Verifying the extracted information with human input.\n 3. Identifying parties. \n 4. Constructing a contract. \n\n\nFollow the workflow precisely and ask for human input when needed.\n\n'}, {'role': 'user', 'content': "Extract the name and address from the given text:\n\nROUMANIE ROMAWI ROMANIA Carte CARTE De |Dentitate IDEnTITY D'iDENTITE seria TR Na 409131 CarD cNP 1891113341181 Nume/Nom/Last name T525M ISPILANTE Prenume/Prenom/First namo SENTIMENT BRUSLI Cetatenle/Nallonallte/Nallonallly Sox SexeiSox Romn\u0103 ROU M Loc nastere/Liou do naissancelPlace ol birth Or\u0219. Videle Jud.Teleorman Dom IlulAdresse/Addrass Videle Jud: Teleorman Sos. Giurgiului nr.1 695 TR Emisa dolDelivree parlIssuad by ValabilltatelValldlte Valldlty SPCLEP Videle 04.11.11-13.11.2018 IDROUISPILANTE<<SENTIMENT <BRUSLI<<<< TR409131<0R0u8911137M181113513411813 Or\u0219:"}], 'tools': [{'type': 'function', 'function': {'name': 'PIIData', 'description': 'Correctly extracted `PIIData` with all the required parameters with correct types', 'parameters': {'properties': {'name': {'description': 'Full name of the person', 'title': 'Name', 'type': 'string'}, 'address': {'description': 'Residential address of the person', 'title': 'Address', 'type': 'string'}}, 'required': ['address', 'name'], 'type': 'object'}}}], 'tool_choice': {'type': 'function', 'function': {'name': 'PIIData'}}}
2024-10-14 14:44:25,297 - DEBUG - max_retries: 1
2024-10-14 14:44:25,298 - DEBUG - Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'json_data': {'messages': [{'role': 'system', 'content': '\nYou are an AI agent specializing in contract creation and personal information extraction. \n\nYour role is:\n 1. Guide the process of extracting information from documents..\n 2. Verifying the extracted information with human input.\n 3. Identifying parties. \n 4. Constructing a contract. \n\n\nFollow the workflow precisely and ask for human input when needed.\n\n'}, {'role': 'user', 'content': "Extract the name and address from the given text:\n\nROUMANIE ROMAWI ROMANIA Carte CARTE De |Dentitate IDEnTITY D'iDENTITE seria TR Na 409131 CarD cNP 1891113341181 Nume/Nom/Last name T525M ISPILANTE Prenume/Prenom/First namo SENTIMENT BRUSLI Cetatenle/Nallonallte/Nallonallly Sox SexeiSox Romn\u0103 ROU M Loc nastere/Liou do naissancelPlace ol birth Or\u0219. Videle Jud.Teleorman Dom IlulAdresse/Addrass Videle Jud: Teleorman Sos. Giurgiului nr.1 695 TR Emisa dolDelivree parlIssuad by ValabilltatelValldlte Valldlty SPCLEP Videle 04.11.11-13.11.2018 IDROUISPILANTE<<SENTIMENT <BRUSLI<<<< TR409131<0R0u8911137M181113513411813 Or\u0219:"}], 'model': 'gpt-4', 'tool_choice': {'type': 'function', 'function': {'name': 'PIIData'}}, 'tools': [{'type': 'function', 'function': {'name': 'PIIData', 'description': 'Correctly extracted `PIIData` with all the required parameters with correct types', 'parameters': {'properties': {'name': {'description': 'Full name of the person', 'title': 'Name', 'type': 'string'}, 'address': {'description': 'Residential address of the person', 'title': 'Address', 'type': 'string'}}, 'required': ['address', 'name'], 'type': 'object'}}}]}}
2024-10-14 14:44:25,299 - DEBUG - Sending HTTP Request: POST https://api.openai.com/v1/chat/completions
2024-10-14 14:44:25,299 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-10-14 14:44:25,299 - DEBUG - send_request_headers.complete
2024-10-14 14:44:25,299 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-10-14 14:44:25,299 - DEBUG - send_request_body.complete
2024-10-14 14:44:25,299 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-10-14 14:44:27,090 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Mon, 14 Oct 2024 11:44:27 GMT'), (b'Content-Type', b'application/json'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'user-kzzh9hik9ryjiou4ftvhondh'), (b'openai-processing-ms', b'1638'), (b'openai-version', b'2020-10-01'), (b'x-ratelimit-limit-requests', b'10000'), (b'x-ratelimit-limit-tokens', b'10000'), (b'x-ratelimit-remaining-requests', b'9975'), (b'x-ratelimit-remaining-tokens', b'8142'), (b'x-ratelimit-reset-requests', b'3m31.642s'), (b'x-ratelimit-reset-tokens', b'11.146s'), (b'x-request-id', b'req_85600838515a0a41791f553e229f0019'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8d27513fdba1ca1d-OTP'), (b'Content-Encoding', b'gzip'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-10-14 14:44:27,090 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2024-10-14 14:44:27,091 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-10-14 14:44:27,091 - DEBUG - receive_response_body.complete
2024-10-14 14:44:27,091 - DEBUG - response_closed.started
2024-10-14 14:44:27,092 - DEBUG - response_closed.complete
2024-10-14 14:44:27,092 - DEBUG - HTTP Response: POST https://api.openai.com/v1/chat/completions "200 OK" Headers({'date': 'Mon, 14 Oct 2024 11:44:27 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-expose-headers': 'X-Request-ID', 'openai-organization': 'user-kzzh9hik9ryjiou4ftvhondh', 'openai-processing-ms': '1638', 'openai-version': '2020-10-01', 'x-ratelimit-limit-requests': '10000', 'x-ratelimit-limit-tokens': '10000', 'x-ratelimit-remaining-requests': '9975', 'x-ratelimit-remaining-tokens': '8142', 'x-ratelimit-reset-requests': '3m31.642s', 'x-ratelimit-reset-tokens': '11.146s', 'x-request-id': 'req_85600838515a0a41791f553e229f0019', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8d27513fdba1ca1d-OTP', 'content-encoding': 'gzip', 'alt-svc': 'h3=":443"; ma=86400'})
2024-10-14 14:44:27,093 - DEBUG - request_id: req_85600838515a0a41791f553e229f0019
2024-10-14 14:44:27,094 - DEBUG - Instructor Raw Response: ChatCompletion(id='chatcmpl-AIDmrNWjyDKKu0TkGaYj7Za41DHuC', choices=[Choice(finish_reason='stop', index=0, logprobs=None, message=ChatCompletionMessage(content=None, refusal=None, role='assistant', function_call=None, tool_calls=[ChatCompletionMessageToolCall(id='call_g9g3zkDPLuAZloO18HWBdWVo', function=Function(arguments='{\n"name": "ISPILANTE SENTIMENT BRUSLI",\n"address": "Videle Jud: Teleorman Sos. Giurgiului nr.1 695 TR"\n}', name='PIIData'), type='function')]))], created=1728906265, model='gpt-4-0613', object='chat.completion', service_tier=None, system_fingerprint=None, usage=CompletionUsage(completion_tokens=39, prompt_tokens=377, total_tokens=416, completion_tokens_details=None, prompt_tokens_details=None))
2024-10-14 14:44:32,219 - DEBUG - close.started
2024-10-14 14:44:32,219 - DEBUG - close.complete
2024-10-14 14:44:32,220 - ERROR - Task exception was never retrieved
future: <Task finished name='Task-1' coro=<agent_workflow() done, defined at D:\deve\contract_automation\src\main.py:25> exception=KeyboardInterrupt()>
Traceback (most recent call last):
  File "D:\deve\contract_automation\src\main.py", line 73, in <module>
    asyncio.run(agent_workflow())
  File "D:\deve\contract_automation\.venv\Lib\site-packages\nest_asyncio.py", line 30, in run
    return loop.run_until_complete(task)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\deve\contract_automation\.venv\Lib\site-packages\nest_asyncio.py", line 92, in run_until_complete
    self._run_once()
  File "D:\deve\contract_automation\.venv\Lib\site-packages\nest_asyncio.py", line 133, in _run_once
    handle._run()
  File "C:\Users\neuro\.rye\py\cpython@3.12.0\Lib\asyncio\events.py", line 84, in _run
    self._context.run(self._callback, *self._args)
  File "C:\Users\neuro\.rye\py\cpython@3.12.0\Lib\asyncio\tasks.py", line 386, in __wakeup
    self.__step()
  File "C:\Users\neuro\.rye\py\cpython@3.12.0\Lib\asyncio\tasks.py", line 293, in __step
    self.__step_run_and_handle_result(exc)
  File "C:\Users\neuro\.rye\py\cpython@3.12.0\Lib\asyncio\tasks.py", line 304, in __step_run_and_handle_result
    result = coro.send(None)
             ^^^^^^^^^^^^^^^
  File "D:\deve\contract_automation\src\main.py", line 38, in agent_workflow
    if verify_information(pii):
       ^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\deve\contract_automation\src\utils.py", line 7, in verify_information
    verification = input("Is this information correct? (yes/no): ").lower()
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
KeyboardInterrupt
2024-10-14 14:45:52,928 - WARNING - Neither CUDA nor MPS are available - defaulting to CPU. Note: This module is much faster with a GPU.
2024-10-14 14:45:54,211 - DEBUG - load_ssl_context verify=True cert=None trust_env=True http2=False
2024-10-14 14:45:54,211 - DEBUG - load_verify_locations cafile='D:\\deve\\contract_automation\\.venv\\Lib\\site-packages\\certifi\\cacert.pem'
2024-10-14 14:45:54,535 - DEBUG - Patching `client.chat.completions.create` with mode=<Mode.TOOLS: 'tool_call'>
2024-10-14 14:45:54,536 - DEBUG - Using proactor: IocpProactor
2024-10-14 14:45:54,557 - DEBUG - STREAM b'IHDR' 16 13
2024-10-14 14:45:54,557 - DEBUG - STREAM b'iCCP' 41 3152
2024-10-14 14:45:54,557 - DEBUG - iCCP profile name b'ICC Profile'
2024-10-14 14:45:54,557 - DEBUG - Compression method 0
2024-10-14 14:45:54,557 - DEBUG - STREAM b'eXIf' 3205 138
2024-10-14 14:45:54,557 - DEBUG - STREAM b'pHYs' 3355 9
2024-10-14 14:45:54,557 - DEBUG - STREAM b'iTXt' 3376 470
2024-10-14 14:45:54,557 - DEBUG - STREAM b'iDOT' 3858 28
2024-10-14 14:45:54,557 - DEBUG - b'iDOT' 3858 28 (unknown)
2024-10-14 14:45:54,557 - DEBUG - STREAM b'IDAT' 3898 16384
2024-10-14 14:45:54,557 - DEBUG - STREAM b'IHDR' 16 13
2024-10-14 14:45:54,557 - DEBUG - STREAM b'iCCP' 41 3152
2024-10-14 14:45:54,557 - DEBUG - iCCP profile name b'ICC Profile'
2024-10-14 14:45:54,557 - DEBUG - Compression method 0
2024-10-14 14:45:54,557 - DEBUG - STREAM b'eXIf' 3205 138
2024-10-14 14:45:54,557 - DEBUG - STREAM b'pHYs' 3355 9
2024-10-14 14:45:54,557 - DEBUG - STREAM b'iTXt' 3376 470
2024-10-14 14:45:54,558 - DEBUG - STREAM b'iDOT' 3858 28
2024-10-14 14:45:54,558 - DEBUG - b'iDOT' 3858 28 (unknown)
2024-10-14 14:45:54,558 - DEBUG - STREAM b'IDAT' 3898 16384
2024-10-14 14:45:54,568 - DEBUG - tag: XResolution (282) - type: rational (5) Tag Location: 22 - Data Location: 62 - value: b'\x00\x00\x00\x90\x00\x00\x00\x01'
2024-10-14 14:45:54,568 - DEBUG - tag: YResolution (283) - type: rational (5) Tag Location: 34 - Data Location: 70 - value: b'\x00\x00\x00\x90\x00\x00\x00\x01'
2024-10-14 14:45:54,568 - DEBUG - tag: ResolutionUnit (296) - type: short (3) - value: b'\x00\x02'
2024-10-14 14:45:54,568 - DEBUG - tag: ExifIFD (34665) - type: long (4) - value: b'\x00\x00\x00N'
2024-10-14 14:45:54,568 - DEBUG - Error closing: Operation on closed image
2024-10-14 14:45:56,588 - DEBUG - STREAM b'IHDR' 16 13
2024-10-14 14:45:56,588 - DEBUG - STREAM b'iCCP' 41 3152
2024-10-14 14:45:56,588 - DEBUG - iCCP profile name b'ICC Profile'
2024-10-14 14:45:56,588 - DEBUG - Compression method 0
2024-10-14 14:45:56,588 - DEBUG - STREAM b'eXIf' 3205 138
2024-10-14 14:45:56,588 - DEBUG - STREAM b'pHYs' 3355 9
2024-10-14 14:45:56,588 - DEBUG - STREAM b'iTXt' 3376 471
2024-10-14 14:45:56,588 - DEBUG - STREAM b'iDOT' 3859 28
2024-10-14 14:45:56,588 - DEBUG - b'iDOT' 3859 28 (unknown)
2024-10-14 14:45:56,588 - DEBUG - STREAM b'IDAT' 3899 16384
2024-10-14 14:45:56,589 - DEBUG - STREAM b'IHDR' 16 13
2024-10-14 14:45:56,589 - DEBUG - STREAM b'iCCP' 41 3152
2024-10-14 14:45:56,589 - DEBUG - iCCP profile name b'ICC Profile'
2024-10-14 14:45:56,589 - DEBUG - Compression method 0
2024-10-14 14:45:56,589 - DEBUG - STREAM b'eXIf' 3205 138
2024-10-14 14:45:56,589 - DEBUG - STREAM b'pHYs' 3355 9
2024-10-14 14:45:56,589 - DEBUG - STREAM b'iTXt' 3376 471
2024-10-14 14:45:56,589 - DEBUG - STREAM b'iDOT' 3859 28
2024-10-14 14:45:56,589 - DEBUG - b'iDOT' 3859 28 (unknown)
2024-10-14 14:45:56,589 - DEBUG - STREAM b'IDAT' 3899 16384
2024-10-14 14:45:56,606 - DEBUG - tag: XResolution (282) - type: rational (5) Tag Location: 22 - Data Location: 62 - value: b'\x00\x00\x00\x90\x00\x00\x00\x01'
2024-10-14 14:45:56,606 - DEBUG - tag: YResolution (283) - type: rational (5) Tag Location: 34 - Data Location: 70 - value: b'\x00\x00\x00\x90\x00\x00\x00\x01'
2024-10-14 14:45:56,606 - DEBUG - tag: ResolutionUnit (296) - type: short (3) - value: b'\x00\x02'
2024-10-14 14:45:56,606 - DEBUG - tag: ExifIFD (34665) - type: long (4) - value: b'\x00\x00\x00N'
2024-10-14 14:45:56,607 - DEBUG - Error closing: Operation on closed image
2024-10-14 14:45:59,165 - DEBUG - Instructor Request: mode.value='tool_call', response_model=<class 'models.AgentAction'>, new_kwargs={'model': 'gpt-4', 'messages': [{'role': 'system', 'content': '\nYou are an AI agent specializing in contract creation and personal information extraction. \n\nYour role is:\n 1. Guide the process of extracting information from documents..\n 2. Verifying the extracted information with human input.\n 3. Identifying parties. \n 4. Constructing a contract. \n\n\nFollow the workflow precisely and ask for human input when needed.\n\n'}, {'role': 'user', 'content': "Current state: {'verified_pii_data': [], 'parties': None, 'contract_details': None, 'contract': None, 'current_action': None}\nWhat action should be taken next? Choose from: extract_pii, identify_parties, determine_contract_type, construct_contract, finish"}], 'tools': [{'type': 'function', 'function': {'name': 'AgentAction', 'description': 'Correctly extracted `AgentAction` with all the required parameters with correct types', 'parameters': {'properties': {'action': {'description': 'Action to be performed by the agent', 'title': 'Action', 'type': 'string'}, 'parameters': {'additionalProperties': {'type': 'string'}, 'description': 'Parameters for the action', 'title': 'Parameters', 'type': 'object'}}, 'required': ['action', 'parameters'], 'type': 'object'}}}], 'tool_choice': {'type': 'function', 'function': {'name': 'AgentAction'}}}
2024-10-14 14:45:59,166 - DEBUG - max_retries: 1
2024-10-14 14:45:59,168 - DEBUG - Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'json_data': {'messages': [{'role': 'system', 'content': '\nYou are an AI agent specializing in contract creation and personal information extraction. \n\nYour role is:\n 1. Guide the process of extracting information from documents..\n 2. Verifying the extracted information with human input.\n 3. Identifying parties. \n 4. Constructing a contract. \n\n\nFollow the workflow precisely and ask for human input when needed.\n\n'}, {'role': 'user', 'content': "Current state: {'verified_pii_data': [], 'parties': None, 'contract_details': None, 'contract': None, 'current_action': None}\nWhat action should be taken next? Choose from: extract_pii, identify_parties, determine_contract_type, construct_contract, finish"}], 'model': 'gpt-4', 'tool_choice': {'type': 'function', 'function': {'name': 'AgentAction'}}, 'tools': [{'type': 'function', 'function': {'name': 'AgentAction', 'description': 'Correctly extracted `AgentAction` with all the required parameters with correct types', 'parameters': {'properties': {'action': {'description': 'Action to be performed by the agent', 'title': 'Action', 'type': 'string'}, 'parameters': {'additionalProperties': {'type': 'string'}, 'description': 'Parameters for the action', 'title': 'Parameters', 'type': 'object'}}, 'required': ['action', 'parameters'], 'type': 'object'}}}]}}
2024-10-14 14:45:59,206 - DEBUG - Sending HTTP Request: POST https://api.openai.com/v1/chat/completions
2024-10-14 14:45:59,206 - DEBUG - connect_tcp.started host='api.openai.com' port=443 local_address=None timeout=5.0 socket_options=None
2024-10-14 14:45:59,218 - DEBUG - connect_tcp.complete return_value=<httpcore._backends.sync.SyncStream object at 0x0000014CF907E840>
2024-10-14 14:45:59,218 - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x0000014CF8EC5B50> server_hostname='api.openai.com' timeout=5.0
2024-10-14 14:45:59,225 - DEBUG - start_tls.complete return_value=<httpcore._backends.sync.SyncStream object at 0x0000014CF907E570>
2024-10-14 14:45:59,225 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-10-14 14:45:59,226 - DEBUG - send_request_headers.complete
2024-10-14 14:45:59,226 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-10-14 14:45:59,226 - DEBUG - send_request_body.complete
2024-10-14 14:45:59,226 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-10-14 14:46:00,232 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Mon, 14 Oct 2024 11:46:00 GMT'), (b'Content-Type', b'application/json'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'user-kzzh9hik9ryjiou4ftvhondh'), (b'openai-processing-ms', b'842'), (b'openai-version', b'2020-10-01'), (b'x-ratelimit-limit-requests', b'10000'), (b'x-ratelimit-limit-tokens', b'10000'), (b'x-ratelimit-remaining-requests', b'9985'), (b'x-ratelimit-remaining-tokens', b'9829'), (b'x-ratelimit-reset-requests', b'2m6.343s'), (b'x-ratelimit-reset-tokens', b'1.026s'), (b'x-request-id', b'req_6685429035916041bbafce881378c8e4'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'CF-Cache-Status', b'DYNAMIC'), (b'Set-Cookie', b'__cf_bm=nAsmpYt3ZNA5q2szTXCcDHG60DNT7IGuy9WKVAtQIhE-1728906360-1.0.1.1-z7Fgq2FnI9jqQM4vjhqUoUqTB7iY.l6Dx6BI_qN8VahmBjGpF7w.QxUSxwo9Cji4Bp9Lcnx5xY7vIWKqk7jChg; path=/; expires=Mon, 14-Oct-24 12:16:00 GMT; domain=.api.openai.com; HttpOnly; Secure; SameSite=None'), (b'X-Content-Type-Options', b'nosniff'), (b'Set-Cookie', b'_cfuvid=f8Cedg8vxpToGJIRcD8Q.49VhZQZe19yaQLUxjVy2c0-1728906360505-0.0.1.1-604800000; path=/; domain=.api.openai.com; HttpOnly; Secure; SameSite=None'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8d27538aec4e26f6-OTP'), (b'Content-Encoding', b'gzip'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-10-14 14:46:00,234 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2024-10-14 14:46:00,234 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-10-14 14:46:00,235 - DEBUG - receive_response_body.complete
2024-10-14 14:46:00,235 - DEBUG - response_closed.started
2024-10-14 14:46:00,235 - DEBUG - response_closed.complete
2024-10-14 14:46:00,235 - DEBUG - HTTP Response: POST https://api.openai.com/v1/chat/completions "200 OK" Headers([('date', 'Mon, 14 Oct 2024 11:46:00 GMT'), ('content-type', 'application/json'), ('transfer-encoding', 'chunked'), ('connection', 'keep-alive'), ('access-control-expose-headers', 'X-Request-ID'), ('openai-organization', 'user-kzzh9hik9ryjiou4ftvhondh'), ('openai-processing-ms', '842'), ('openai-version', '2020-10-01'), ('x-ratelimit-limit-requests', '10000'), ('x-ratelimit-limit-tokens', '10000'), ('x-ratelimit-remaining-requests', '9985'), ('x-ratelimit-remaining-tokens', '9829'), ('x-ratelimit-reset-requests', '2m6.343s'), ('x-ratelimit-reset-tokens', '1.026s'), ('x-request-id', 'req_6685429035916041bbafce881378c8e4'), ('strict-transport-security', 'max-age=31536000; includeSubDomains; preload'), ('cf-cache-status', 'DYNAMIC'), ('set-cookie', '__cf_bm=nAsmpYt3ZNA5q2szTXCcDHG60DNT7IGuy9WKVAtQIhE-1728906360-1.0.1.1-z7Fgq2FnI9jqQM4vjhqUoUqTB7iY.l6Dx6BI_qN8VahmBjGpF7w.QxUSxwo9Cji4Bp9Lcnx5xY7vIWKqk7jChg; path=/; expires=Mon, 14-Oct-24 12:16:00 GMT; domain=.api.openai.com; HttpOnly; Secure; SameSite=None'), ('x-content-type-options', 'nosniff'), ('set-cookie', '_cfuvid=f8Cedg8vxpToGJIRcD8Q.49VhZQZe19yaQLUxjVy2c0-1728906360505-0.0.1.1-604800000; path=/; domain=.api.openai.com; HttpOnly; Secure; SameSite=None'), ('server', 'cloudflare'), ('cf-ray', '8d27538aec4e26f6-OTP'), ('content-encoding', 'gzip'), ('alt-svc', 'h3=":443"; ma=86400')])
2024-10-14 14:46:00,236 - DEBUG - request_id: req_6685429035916041bbafce881378c8e4
2024-10-14 14:46:00,239 - DEBUG - Instructor Raw Response: ChatCompletion(id='chatcmpl-AIDoNTarIb1QVrQu1U44BtJ7TroAu', choices=[Choice(finish_reason='stop', index=0, logprobs=None, message=ChatCompletionMessage(content=None, refusal=None, role='assistant', function_call=None, tool_calls=[ChatCompletionMessageToolCall(id='call_oG9XGxO6fVdg9gBkeyCOYesR', function=Function(arguments='{\n"action": "extract_pii"\n}', name='AgentAction'), type='function')]))], created=1728906359, model='gpt-4-0613', object='chat.completion', service_tier=None, system_fingerprint=None, usage=CompletionUsage(completion_tokens=10, prompt_tokens=202, total_tokens=212, completion_tokens_details=None, prompt_tokens_details=None))
2024-10-14 14:46:00,240 - DEBUG - Instructor Request: mode.value='tool_call', response_model=<class 'models.PIIData'>, new_kwargs={'model': 'gpt-4', 'messages': [{'role': 'system', 'content': '\nYou are an AI agent specializing in contract creation and personal information extraction. \n\nYour role is:\n 1. Guide the process of extracting information from documents..\n 2. Verifying the extracted information with human input.\n 3. Identifying parties. \n 4. Constructing a contract. \n\n\nFollow the workflow precisely and ask for human input when needed.\n\n'}, {'role': 'user', 'content': "Extract the name and address from the given text:\n\nROUMANIE ROMAWI ROMANIA Carte CARTE De |Dentitate IDEnTITY D'iDENTITE seria TR Na 409131 CarD cNP 1891113341181 Nume/Nom/Last name T525M ISPILANTE Prenume/Prenom/First namo SENTIMENT BRUSLI Cetatenle/Nallonallte/Nallonallly Sox SexeiSox Romn\u0103 ROU M Loc nastere/Liou do naissancelPlace ol birth Or\u0219. Videle Jud.Teleorman Dom IlulAdresse/Addrass Videle Jud: Teleorman Sos. Giurgiului nr.1 695 TR Emisa dolDelivree parlIssuad by ValabilltatelValldlte Valldlty SPCLEP Videle 04.11.11-13.11.2018 IDROUISPILANTE<<SENTIMENT <BRUSLI<<<< TR409131<0R0u8911137M181113513411813 Or\u0219:"}], 'tools': [{'type': 'function', 'function': {'name': 'PIIData', 'description': 'Correctly extracted `PIIData` with all the required parameters with correct types', 'parameters': {'properties': {'name': {'description': 'Full name of the person', 'title': 'Name', 'type': 'string'}, 'address': {'description': 'Residential address of the person', 'title': 'Address', 'type': 'string'}}, 'required': ['address', 'name'], 'type': 'object'}}}], 'tool_choice': {'type': 'function', 'function': {'name': 'PIIData'}}}
2024-10-14 14:46:00,240 - DEBUG - max_retries: 1
2024-10-14 14:46:00,241 - DEBUG - Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'json_data': {'messages': [{'role': 'system', 'content': '\nYou are an AI agent specializing in contract creation and personal information extraction. \n\nYour role is:\n 1. Guide the process of extracting information from documents..\n 2. Verifying the extracted information with human input.\n 3. Identifying parties. \n 4. Constructing a contract. \n\n\nFollow the workflow precisely and ask for human input when needed.\n\n'}, {'role': 'user', 'content': "Extract the name and address from the given text:\n\nROUMANIE ROMAWI ROMANIA Carte CARTE De |Dentitate IDEnTITY D'iDENTITE seria TR Na 409131 CarD cNP 1891113341181 Nume/Nom/Last name T525M ISPILANTE Prenume/Prenom/First namo SENTIMENT BRUSLI Cetatenle/Nallonallte/Nallonallly Sox SexeiSox Romn\u0103 ROU M Loc nastere/Liou do naissancelPlace ol birth Or\u0219. Videle Jud.Teleorman Dom IlulAdresse/Addrass Videle Jud: Teleorman Sos. Giurgiului nr.1 695 TR Emisa dolDelivree parlIssuad by ValabilltatelValldlte Valldlty SPCLEP Videle 04.11.11-13.11.2018 IDROUISPILANTE<<SENTIMENT <BRUSLI<<<< TR409131<0R0u8911137M181113513411813 Or\u0219:"}], 'model': 'gpt-4', 'tool_choice': {'type': 'function', 'function': {'name': 'PIIData'}}, 'tools': [{'type': 'function', 'function': {'name': 'PIIData', 'description': 'Correctly extracted `PIIData` with all the required parameters with correct types', 'parameters': {'properties': {'name': {'description': 'Full name of the person', 'title': 'Name', 'type': 'string'}, 'address': {'description': 'Residential address of the person', 'title': 'Address', 'type': 'string'}}, 'required': ['address', 'name'], 'type': 'object'}}}]}}
2024-10-14 14:46:00,242 - DEBUG - Sending HTTP Request: POST https://api.openai.com/v1/chat/completions
2024-10-14 14:46:00,242 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-10-14 14:46:00,242 - DEBUG - send_request_headers.complete
2024-10-14 14:46:00,242 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-10-14 14:46:00,242 - DEBUG - send_request_body.complete
2024-10-14 14:46:00,242 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-10-14 14:46:02,295 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Mon, 14 Oct 2024 11:46:02 GMT'), (b'Content-Type', b'application/json'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'user-kzzh9hik9ryjiou4ftvhondh'), (b'openai-processing-ms', b'1897'), (b'openai-version', b'2020-10-01'), (b'x-ratelimit-limit-requests', b'10000'), (b'x-ratelimit-limit-tokens', b'10000'), (b'x-ratelimit-remaining-requests', b'9984'), (b'x-ratelimit-remaining-tokens', b'9692'), (b'x-ratelimit-reset-requests', b'2m13.97s'), (b'x-ratelimit-reset-tokens', b'1.843s'), (b'x-request-id', b'req_b5be01c698cbc7a7d3300b2a7dbf7245'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8d2753914a6a26f6-OTP'), (b'Content-Encoding', b'gzip'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-10-14 14:46:02,295 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2024-10-14 14:46:02,295 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-10-14 14:46:02,295 - DEBUG - receive_response_body.complete
2024-10-14 14:46:02,295 - DEBUG - response_closed.started
2024-10-14 14:46:02,295 - DEBUG - response_closed.complete
2024-10-14 14:46:02,296 - DEBUG - HTTP Response: POST https://api.openai.com/v1/chat/completions "200 OK" Headers({'date': 'Mon, 14 Oct 2024 11:46:02 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-expose-headers': 'X-Request-ID', 'openai-organization': 'user-kzzh9hik9ryjiou4ftvhondh', 'openai-processing-ms': '1897', 'openai-version': '2020-10-01', 'x-ratelimit-limit-requests': '10000', 'x-ratelimit-limit-tokens': '10000', 'x-ratelimit-remaining-requests': '9984', 'x-ratelimit-remaining-tokens': '9692', 'x-ratelimit-reset-requests': '2m13.97s', 'x-ratelimit-reset-tokens': '1.843s', 'x-request-id': 'req_b5be01c698cbc7a7d3300b2a7dbf7245', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8d2753914a6a26f6-OTP', 'content-encoding': 'gzip', 'alt-svc': 'h3=":443"; ma=86400'})
2024-10-14 14:46:02,296 - DEBUG - request_id: req_b5be01c698cbc7a7d3300b2a7dbf7245
2024-10-14 14:46:02,296 - DEBUG - Instructor Raw Response: ChatCompletion(id='chatcmpl-AIDoOaMu96VmeLmPeSqFT6AeEZz9q', choices=[Choice(finish_reason='stop', index=0, logprobs=None, message=ChatCompletionMessage(content=None, refusal=None, role='assistant', function_call=None, tool_calls=[ChatCompletionMessageToolCall(id='call_t0A9jsxCVsNCFNhdcyrwmJUe', function=Function(arguments='{\n"name": "ISPILANTE SENTIMENT BRUSLI",\n"address": "Videle Jud: Teleorman Sos. Giurgiului nr.1 695 TR"\n}', name='PIIData'), type='function')]))], created=1728906360, model='gpt-4-0613', object='chat.completion', service_tier=None, system_fingerprint=None, usage=CompletionUsage(completion_tokens=39, prompt_tokens=377, total_tokens=416, completion_tokens_details=None, prompt_tokens_details=None))
2024-10-14 14:46:19,639 - DEBUG - Instructor Request: mode.value='tool_call', response_model=<class 'models.PIIData'>, new_kwargs={'model': 'gpt-4', 'messages': [{'role': 'system', 'content': '\nYou are an AI agent specializing in contract creation and personal information extraction. \n\nYour role is:\n 1. Guide the process of extracting information from documents..\n 2. Verifying the extracted information with human input.\n 3. Identifying parties. \n 4. Constructing a contract. \n\n\nFollow the workflow precisely and ask for human input when needed.\n\n'}, {'role': 'user', 'content': "Extract the name and address from the given text:\n\nROUMANIE ROVIAINIA ROMANIA Carte Carte DE iDentitate IdEnTITY Didentite seala SS Nr 099994 Card CNP 2410415400542 93coQ Nume/NomiLast name VASILESCU Pronume/Prenom/Flrst name ELENA < CetatenielNatlonallte/Natlonalily M Sex SexelSer Romn\u0103 ROU Loc nastore/Licu de naissancolF 'ar0 ol birth Mun: Dej Jud. Cluj Domiciliu/Adresse A ess Mun. Bucuresti Sec. 5 Str Nicolae Iorga nr.3 900 B Emisa delDelivree parllssued by Valabilitate/Vahidile Valiouy D.EPAB.D- 06.01.17-15.04.2077 IDROUVASILESCU<<ELENA<<<<<<<<<<<<<<< SS099994<0R0u4104151F770415824003421"}], 'tools': [{'type': 'function', 'function': {'name': 'PIIData', 'description': 'Correctly extracted `PIIData` with all the required parameters with correct types', 'parameters': {'properties': {'name': {'description': 'Full name of the person', 'title': 'Name', 'type': 'string'}, 'address': {'description': 'Residential address of the person', 'title': 'Address', 'type': 'string'}}, 'required': ['address', 'name'], 'type': 'object'}}}], 'tool_choice': {'type': 'function', 'function': {'name': 'PIIData'}}}
2024-10-14 14:46:19,640 - DEBUG - max_retries: 1
2024-10-14 14:46:19,643 - DEBUG - Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'json_data': {'messages': [{'role': 'system', 'content': '\nYou are an AI agent specializing in contract creation and personal information extraction. \n\nYour role is:\n 1. Guide the process of extracting information from documents..\n 2. Verifying the extracted information with human input.\n 3. Identifying parties. \n 4. Constructing a contract. \n\n\nFollow the workflow precisely and ask for human input when needed.\n\n'}, {'role': 'user', 'content': "Extract the name and address from the given text:\n\nROUMANIE ROVIAINIA ROMANIA Carte Carte DE iDentitate IdEnTITY Didentite seala SS Nr 099994 Card CNP 2410415400542 93coQ Nume/NomiLast name VASILESCU Pronume/Prenom/Flrst name ELENA < CetatenielNatlonallte/Natlonalily M Sex SexelSer Romn\u0103 ROU Loc nastore/Licu de naissancolF 'ar0 ol birth Mun: Dej Jud. Cluj Domiciliu/Adresse A ess Mun. Bucuresti Sec. 5 Str Nicolae Iorga nr.3 900 B Emisa delDelivree parllssued by Valabilitate/Vahidile Valiouy D.EPAB.D- 06.01.17-15.04.2077 IDROUVASILESCU<<ELENA<<<<<<<<<<<<<<< SS099994<0R0u4104151F770415824003421"}], 'model': 'gpt-4', 'tool_choice': {'type': 'function', 'function': {'name': 'PIIData'}}, 'tools': [{'type': 'function', 'function': {'name': 'PIIData', 'description': 'Correctly extracted `PIIData` with all the required parameters with correct types', 'parameters': {'properties': {'name': {'description': 'Full name of the person', 'title': 'Name', 'type': 'string'}, 'address': {'description': 'Residential address of the person', 'title': 'Address', 'type': 'string'}}, 'required': ['address', 'name'], 'type': 'object'}}}]}}
2024-10-14 14:46:19,643 - DEBUG - Sending HTTP Request: POST https://api.openai.com/v1/chat/completions
2024-10-14 14:46:19,643 - DEBUG - close.started
2024-10-14 14:46:19,644 - DEBUG - close.complete
2024-10-14 14:46:19,644 - DEBUG - connect_tcp.started host='api.openai.com' port=443 local_address=None timeout=5.0 socket_options=None
2024-10-14 14:46:19,648 - DEBUG - connect_tcp.complete return_value=<httpcore._backends.sync.SyncStream object at 0x0000014CF90A29F0>
2024-10-14 14:46:19,648 - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x0000014CF8EC5B50> server_hostname='api.openai.com' timeout=5.0
2024-10-14 14:46:19,656 - DEBUG - start_tls.complete return_value=<httpcore._backends.sync.SyncStream object at 0x0000014CF90A0C50>
2024-10-14 14:46:19,657 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-10-14 14:46:19,657 - DEBUG - send_request_headers.complete
2024-10-14 14:46:19,657 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-10-14 14:46:19,657 - DEBUG - send_request_body.complete
2024-10-14 14:46:19,657 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-10-14 14:46:22,302 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Mon, 14 Oct 2024 11:46:22 GMT'), (b'Content-Type', b'application/json'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'user-kzzh9hik9ryjiou4ftvhondh'), (b'openai-processing-ms', b'2479'), (b'openai-version', b'2020-10-01'), (b'x-ratelimit-limit-requests', b'10000'), (b'x-ratelimit-limit-tokens', b'10000'), (b'x-ratelimit-remaining-requests', b'9985'), (b'x-ratelimit-remaining-tokens', b'9742'), (b'x-ratelimit-reset-requests', b'2m3.185s'), (b'x-ratelimit-reset-tokens', b'1.548s'), (b'x-request-id', b'req_541388d7fe0f8091ab7ef0e068fa1d72'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8d27540a9ea8b6a7-OTP'), (b'Content-Encoding', b'gzip'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-10-14 14:46:22,303 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2024-10-14 14:46:22,303 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-10-14 14:46:22,303 - DEBUG - receive_response_body.complete
2024-10-14 14:46:22,304 - DEBUG - response_closed.started
2024-10-14 14:46:22,304 - DEBUG - response_closed.complete
2024-10-14 14:46:22,304 - DEBUG - HTTP Response: POST https://api.openai.com/v1/chat/completions "200 OK" Headers({'date': 'Mon, 14 Oct 2024 11:46:22 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-expose-headers': 'X-Request-ID', 'openai-organization': 'user-kzzh9hik9ryjiou4ftvhondh', 'openai-processing-ms': '2479', 'openai-version': '2020-10-01', 'x-ratelimit-limit-requests': '10000', 'x-ratelimit-limit-tokens': '10000', 'x-ratelimit-remaining-requests': '9985', 'x-ratelimit-remaining-tokens': '9742', 'x-ratelimit-reset-requests': '2m3.185s', 'x-ratelimit-reset-tokens': '1.548s', 'x-request-id': 'req_541388d7fe0f8091ab7ef0e068fa1d72', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8d27540a9ea8b6a7-OTP', 'content-encoding': 'gzip', 'alt-svc': 'h3=":443"; ma=86400'})
2024-10-14 14:46:22,304 - DEBUG - request_id: req_541388d7fe0f8091ab7ef0e068fa1d72
2024-10-14 14:46:22,305 - DEBUG - Instructor Raw Response: ChatCompletion(id='chatcmpl-AIDoi0qMUnDoyTL4ZRMdTd3rmoUiv', choices=[Choice(finish_reason='stop', index=0, logprobs=None, message=ChatCompletionMessage(content=None, refusal=None, role='assistant', function_call=None, tool_calls=[ChatCompletionMessageToolCall(id='call_ye3r6Q8OFdu8omqVrJ1Bb9vQ', function=Function(arguments='{\n"name": "VASILESCU ELENA",\n"address": "Mun. Bucuresti Sec. 5 Str Nicolae Iorga nr.3 900 B"\n}', name='PIIData'), type='function')]))], created=1728906380, model='gpt-4-0613', object='chat.completion', service_tier=None, system_fingerprint=None, usage=CompletionUsage(completion_tokens=41, prompt_tokens=380, total_tokens=421, completion_tokens_details=None, prompt_tokens_details=None))
2024-10-14 14:46:23,712 - DEBUG - Instructor Request: mode.value='tool_call', response_model=<class 'models.AgentAction'>, new_kwargs={'model': 'gpt-4', 'messages': [{'role': 'system', 'content': '\nYou are an AI agent specializing in contract creation and personal information extraction. \n\nYour role is:\n 1. Guide the process of extracting information from documents..\n 2. Verifying the extracted information with human input.\n 3. Identifying parties. \n 4. Constructing a contract. \n\n\nFollow the workflow precisely and ask for human input when needed.\n\n'}, {'role': 'user', 'content': "Current state: {'verified_pii_data': [{'name': 'ISPILANTE SENTIMENT BRUSLI', 'address': 'Videle Jud: Teleorman Sos. Giurgiului nr.1 695 TR'}, {'name': 'VASILESCU ELENA', 'address': 'Mun. Bucuresti Sec. 5 Str Nicolae Iorga nr.3 900 B'}], 'parties': None, 'contract_details': None, 'contract': None, 'current_action': None}\nWhat action should be taken next? Choose from: extract_pii, identify_parties, determine_contract_type, construct_contract, finish"}], 'tools': [{'type': 'function', 'function': {'name': 'AgentAction', 'description': 'Correctly extracted `AgentAction` with all the required parameters with correct types', 'parameters': {'properties': {'action': {'description': 'Action to be performed by the agent', 'title': 'Action', 'type': 'string'}, 'parameters': {'additionalProperties': {'type': 'string'}, 'description': 'Parameters for the action', 'title': 'Parameters', 'type': 'object'}}, 'required': ['action', 'parameters'], 'type': 'object'}}}], 'tool_choice': {'type': 'function', 'function': {'name': 'AgentAction'}}}
2024-10-14 14:46:23,712 - DEBUG - max_retries: 1
2024-10-14 14:46:23,714 - DEBUG - Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'json_data': {'messages': [{'role': 'system', 'content': '\nYou are an AI agent specializing in contract creation and personal information extraction. \n\nYour role is:\n 1. Guide the process of extracting information from documents..\n 2. Verifying the extracted information with human input.\n 3. Identifying parties. \n 4. Constructing a contract. \n\n\nFollow the workflow precisely and ask for human input when needed.\n\n'}, {'role': 'user', 'content': "Current state: {'verified_pii_data': [{'name': 'ISPILANTE SENTIMENT BRUSLI', 'address': 'Videle Jud: Teleorman Sos. Giurgiului nr.1 695 TR'}, {'name': 'VASILESCU ELENA', 'address': 'Mun. Bucuresti Sec. 5 Str Nicolae Iorga nr.3 900 B'}], 'parties': None, 'contract_details': None, 'contract': None, 'current_action': None}\nWhat action should be taken next? Choose from: extract_pii, identify_parties, determine_contract_type, construct_contract, finish"}], 'model': 'gpt-4', 'tool_choice': {'type': 'function', 'function': {'name': 'AgentAction'}}, 'tools': [{'type': 'function', 'function': {'name': 'AgentAction', 'description': 'Correctly extracted `AgentAction` with all the required parameters with correct types', 'parameters': {'properties': {'action': {'description': 'Action to be performed by the agent', 'title': 'Action', 'type': 'string'}, 'parameters': {'additionalProperties': {'type': 'string'}, 'description': 'Parameters for the action', 'title': 'Parameters', 'type': 'object'}}, 'required': ['action', 'parameters'], 'type': 'object'}}}]}}
2024-10-14 14:46:23,715 - DEBUG - Sending HTTP Request: POST https://api.openai.com/v1/chat/completions
2024-10-14 14:46:23,715 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-10-14 14:46:23,715 - DEBUG - send_request_headers.complete
2024-10-14 14:46:23,716 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-10-14 14:46:23,716 - DEBUG - send_request_body.complete
2024-10-14 14:46:23,716 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-10-14 14:46:24,869 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Mon, 14 Oct 2024 11:46:25 GMT'), (b'Content-Type', b'application/json'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'user-kzzh9hik9ryjiou4ftvhondh'), (b'openai-processing-ms', b'988'), (b'openai-version', b'2020-10-01'), (b'x-ratelimit-limit-requests', b'10000'), (b'x-ratelimit-limit-tokens', b'10000'), (b'x-ratelimit-remaining-requests', b'9985'), (b'x-ratelimit-remaining-tokens', b'9780'), (b'x-ratelimit-reset-requests', b'2m7.766s'), (b'x-ratelimit-reset-tokens', b'1.32s'), (b'x-request-id', b'req_077d18e980cfdaad803608437641098d'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8d275423fc78b6a7-OTP'), (b'Content-Encoding', b'gzip'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-10-14 14:46:24,869 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2024-10-14 14:46:24,869 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-10-14 14:46:24,869 - DEBUG - receive_response_body.complete
2024-10-14 14:46:24,869 - DEBUG - response_closed.started
2024-10-14 14:46:24,869 - DEBUG - response_closed.complete
2024-10-14 14:46:24,869 - DEBUG - HTTP Response: POST https://api.openai.com/v1/chat/completions "200 OK" Headers({'date': 'Mon, 14 Oct 2024 11:46:25 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-expose-headers': 'X-Request-ID', 'openai-organization': 'user-kzzh9hik9ryjiou4ftvhondh', 'openai-processing-ms': '988', 'openai-version': '2020-10-01', 'x-ratelimit-limit-requests': '10000', 'x-ratelimit-limit-tokens': '10000', 'x-ratelimit-remaining-requests': '9985', 'x-ratelimit-remaining-tokens': '9780', 'x-ratelimit-reset-requests': '2m7.766s', 'x-ratelimit-reset-tokens': '1.32s', 'x-request-id': 'req_077d18e980cfdaad803608437641098d', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8d275423fc78b6a7-OTP', 'content-encoding': 'gzip', 'alt-svc': 'h3=":443"; ma=86400'})
2024-10-14 14:46:24,869 - DEBUG - request_id: req_077d18e980cfdaad803608437641098d
2024-10-14 14:46:24,870 - DEBUG - Instructor Raw Response: ChatCompletion(id='chatcmpl-AIDom2bAp1t1n3gA74uU6jj2qhLNU', choices=[Choice(finish_reason='stop', index=0, logprobs=None, message=ChatCompletionMessage(content=None, refusal=None, role='assistant', function_call=None, tool_calls=[ChatCompletionMessageToolCall(id='call_Wz31eUdTFanX8NqqYZsbLCJt', function=Function(arguments='{\n"action": "identify_parties"\n}', name='AgentAction'), type='function')]))], created=1728906384, model='gpt-4-0613', object='chat.completion', service_tier=None, system_fingerprint=None, usage=CompletionUsage(completion_tokens=10, prompt_tokens=280, total_tokens=290, completion_tokens_details=None, prompt_tokens_details=None))
2024-10-14 14:46:24,871 - DEBUG - Instructor Request: mode.value='tool_call', response_model=<class 'models.ContractParties'>, new_kwargs={'model': 'gpt-4', 'messages': [{'role': 'system', 'content': '\nYou are an AI agent specializing in contract creation and personal information extraction. \n\nYour role is:\n 1. Guide the process of extracting information from documents..\n 2. Verifying the extracted information with human input.\n 3. Identifying parties. \n 4. Constructing a contract. \n\n\nFollow the workflow precisely and ask for human input when needed.\n\n'}, {'role': 'user', 'content': 'Identify the buyer and seller from the given information:\n\nName: ISPILANTE SENTIMENT BRUSLI, Address: Videle Jud: Teleorman Sos. Giurgiului nr.1 695 TR\nName: VASILESCU ELENA, Address: Mun. Bucuresti Sec. 5 Str Nicolae Iorga nr.3 900 B'}], 'tools': [{'type': 'function', 'function': {'name': 'ContractParties', 'description': 'Correctly extracted `ContractParties` with all the required parameters with correct types', 'parameters': {'properties': {'buyer': {'description': 'Name of the buyer', 'title': 'Buyer', 'type': 'string'}, 'seller': {'description': 'Name of the seller', 'title': 'Seller', 'type': 'string'}}, 'required': ['buyer', 'seller'], 'type': 'object'}}}], 'tool_choice': {'type': 'function', 'function': {'name': 'ContractParties'}}}
2024-10-14 14:46:24,871 - DEBUG - max_retries: 1
2024-10-14 14:46:24,873 - DEBUG - Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'json_data': {'messages': [{'role': 'system', 'content': '\nYou are an AI agent specializing in contract creation and personal information extraction. \n\nYour role is:\n 1. Guide the process of extracting information from documents..\n 2. Verifying the extracted information with human input.\n 3. Identifying parties. \n 4. Constructing a contract. \n\n\nFollow the workflow precisely and ask for human input when needed.\n\n'}, {'role': 'user', 'content': 'Identify the buyer and seller from the given information:\n\nName: ISPILANTE SENTIMENT BRUSLI, Address: Videle Jud: Teleorman Sos. Giurgiului nr.1 695 TR\nName: VASILESCU ELENA, Address: Mun. Bucuresti Sec. 5 Str Nicolae Iorga nr.3 900 B'}], 'model': 'gpt-4', 'tool_choice': {'type': 'function', 'function': {'name': 'ContractParties'}}, 'tools': [{'type': 'function', 'function': {'name': 'ContractParties', 'description': 'Correctly extracted `ContractParties` with all the required parameters with correct types', 'parameters': {'properties': {'buyer': {'description': 'Name of the buyer', 'title': 'Buyer', 'type': 'string'}, 'seller': {'description': 'Name of the seller', 'title': 'Seller', 'type': 'string'}}, 'required': ['buyer', 'seller'], 'type': 'object'}}}]}}
2024-10-14 14:46:24,874 - DEBUG - Sending HTTP Request: POST https://api.openai.com/v1/chat/completions
2024-10-14 14:46:24,874 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-10-14 14:46:24,874 - DEBUG - send_request_headers.complete
2024-10-14 14:46:24,874 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-10-14 14:46:24,875 - DEBUG - send_request_body.complete
2024-10-14 14:46:24,875 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-10-14 14:46:26,687 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Mon, 14 Oct 2024 11:46:26 GMT'), (b'Content-Type', b'application/json'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'user-kzzh9hik9ryjiou4ftvhondh'), (b'openai-processing-ms', b'1640'), (b'openai-version', b'2020-10-01'), (b'x-ratelimit-limit-requests', b'10000'), (b'x-ratelimit-limit-tokens', b'10000'), (b'x-ratelimit-remaining-requests', b'9984'), (b'x-ratelimit-remaining-tokens', b'9735'), (b'x-ratelimit-reset-requests', b'2m15.257s'), (b'x-ratelimit-reset-tokens', b'1.586s'), (b'x-request-id', b'req_896a78b39babe52f9f7771ab9255d77d'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8d27542b3cc5b6a7-OTP'), (b'Content-Encoding', b'gzip'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-10-14 14:46:26,688 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2024-10-14 14:46:26,688 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-10-14 14:46:26,688 - DEBUG - receive_response_body.complete
2024-10-14 14:46:26,688 - DEBUG - response_closed.started
2024-10-14 14:46:26,688 - DEBUG - response_closed.complete
2024-10-14 14:46:26,688 - DEBUG - HTTP Response: POST https://api.openai.com/v1/chat/completions "200 OK" Headers({'date': 'Mon, 14 Oct 2024 11:46:26 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-expose-headers': 'X-Request-ID', 'openai-organization': 'user-kzzh9hik9ryjiou4ftvhondh', 'openai-processing-ms': '1640', 'openai-version': '2020-10-01', 'x-ratelimit-limit-requests': '10000', 'x-ratelimit-limit-tokens': '10000', 'x-ratelimit-remaining-requests': '9984', 'x-ratelimit-remaining-tokens': '9735', 'x-ratelimit-reset-requests': '2m15.257s', 'x-ratelimit-reset-tokens': '1.586s', 'x-request-id': 'req_896a78b39babe52f9f7771ab9255d77d', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8d27542b3cc5b6a7-OTP', 'content-encoding': 'gzip', 'alt-svc': 'h3=":443"; ma=86400'})
2024-10-14 14:46:26,688 - DEBUG - request_id: req_896a78b39babe52f9f7771ab9255d77d
2024-10-14 14:46:26,688 - DEBUG - Instructor Raw Response: ChatCompletion(id='chatcmpl-AIDonZJ9YVGGnUs4l1oBoULnK3f5u', choices=[Choice(finish_reason='stop', index=0, logprobs=None, message=ChatCompletionMessage(content=None, refusal=None, role='assistant', function_call=None, tool_calls=[ChatCompletionMessageToolCall(id='call_SXcbGdrG27U6btfV8RI0Ttvj', function=Function(arguments='{\n  "buyer": "ISPILANTE SENTIMENT BRUSLI",\n  "seller": "VASILESCU ELENA"\n}', name='ContractParties'), type='function')]))], created=1728906385, model='gpt-4-0613', object='chat.completion', service_tier=None, system_fingerprint=None, usage=CompletionUsage(completion_tokens=29, prompt_tokens=232, total_tokens=261, completion_tokens_details=None, prompt_tokens_details=None))
2024-10-14 14:46:26,689 - DEBUG - Instructor Request: mode.value='tool_call', response_model=<class 'models.AgentAction'>, new_kwargs={'model': 'gpt-4', 'messages': [{'role': 'system', 'content': '\nYou are an AI agent specializing in contract creation and personal information extraction. \n\nYour role is:\n 1. Guide the process of extracting information from documents..\n 2. Verifying the extracted information with human input.\n 3. Identifying parties. \n 4. Constructing a contract. \n\n\nFollow the workflow precisely and ask for human input when needed.\n\n'}, {'role': 'user', 'content': "Current state: {'verified_pii_data': [{'name': 'ISPILANTE SENTIMENT BRUSLI', 'address': 'Videle Jud: Teleorman Sos. Giurgiului nr.1 695 TR'}, {'name': 'VASILESCU ELENA', 'address': 'Mun. Bucuresti Sec. 5 Str Nicolae Iorga nr.3 900 B'}], 'parties': {'buyer': 'ISPILANTE SENTIMENT BRUSLI', 'seller': 'VASILESCU ELENA'}, 'contract_details': None, 'contract': None, 'current_action': None}\nWhat action should be taken next? Choose from: extract_pii, identify_parties, determine_contract_type, construct_contract, finish"}], 'tools': [{'type': 'function', 'function': {'name': 'AgentAction', 'description': 'Correctly extracted `AgentAction` with all the required parameters with correct types', 'parameters': {'properties': {'action': {'description': 'Action to be performed by the agent', 'title': 'Action', 'type': 'string'}, 'parameters': {'additionalProperties': {'type': 'string'}, 'description': 'Parameters for the action', 'title': 'Parameters', 'type': 'object'}}, 'required': ['action', 'parameters'], 'type': 'object'}}}], 'tool_choice': {'type': 'function', 'function': {'name': 'AgentAction'}}}
2024-10-14 14:46:26,689 - DEBUG - max_retries: 1
2024-10-14 14:46:26,691 - DEBUG - Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'json_data': {'messages': [{'role': 'system', 'content': '\nYou are an AI agent specializing in contract creation and personal information extraction. \n\nYour role is:\n 1. Guide the process of extracting information from documents..\n 2. Verifying the extracted information with human input.\n 3. Identifying parties. \n 4. Constructing a contract. \n\n\nFollow the workflow precisely and ask for human input when needed.\n\n'}, {'role': 'user', 'content': "Current state: {'verified_pii_data': [{'name': 'ISPILANTE SENTIMENT BRUSLI', 'address': 'Videle Jud: Teleorman Sos. Giurgiului nr.1 695 TR'}, {'name': 'VASILESCU ELENA', 'address': 'Mun. Bucuresti Sec. 5 Str Nicolae Iorga nr.3 900 B'}], 'parties': {'buyer': 'ISPILANTE SENTIMENT BRUSLI', 'seller': 'VASILESCU ELENA'}, 'contract_details': None, 'contract': None, 'current_action': None}\nWhat action should be taken next? Choose from: extract_pii, identify_parties, determine_contract_type, construct_contract, finish"}], 'model': 'gpt-4', 'tool_choice': {'type': 'function', 'function': {'name': 'AgentAction'}}, 'tools': [{'type': 'function', 'function': {'name': 'AgentAction', 'description': 'Correctly extracted `AgentAction` with all the required parameters with correct types', 'parameters': {'properties': {'action': {'description': 'Action to be performed by the agent', 'title': 'Action', 'type': 'string'}, 'parameters': {'additionalProperties': {'type': 'string'}, 'description': 'Parameters for the action', 'title': 'Parameters', 'type': 'object'}}, 'required': ['action', 'parameters'], 'type': 'object'}}}]}}
2024-10-14 14:46:26,691 - DEBUG - Sending HTTP Request: POST https://api.openai.com/v1/chat/completions
2024-10-14 14:46:26,691 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-10-14 14:46:26,691 - DEBUG - send_request_headers.complete
2024-10-14 14:46:26,691 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-10-14 14:46:26,692 - DEBUG - send_request_body.complete
2024-10-14 14:46:26,692 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-10-14 14:46:27,611 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Mon, 14 Oct 2024 11:46:27 GMT'), (b'Content-Type', b'application/json'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'user-kzzh9hik9ryjiou4ftvhondh'), (b'openai-processing-ms', b'756'), (b'openai-version', b'2020-10-01'), (b'x-ratelimit-limit-requests', b'10000'), (b'x-ratelimit-limit-tokens', b'10000'), (b'x-ratelimit-remaining-requests', b'9983'), (b'x-ratelimit-remaining-tokens', b'9695'), (b'x-ratelimit-reset-requests', b'2m22.075s'), (b'x-ratelimit-reset-tokens', b'1.828s'), (b'x-request-id', b'req_259205e93b90a44a5e896cc644378501'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8d2754369996b6a7-OTP'), (b'Content-Encoding', b'gzip'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-10-14 14:46:27,612 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2024-10-14 14:46:27,612 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-10-14 14:46:27,612 - DEBUG - receive_response_body.complete
2024-10-14 14:46:27,612 - DEBUG - response_closed.started
2024-10-14 14:46:27,612 - DEBUG - response_closed.complete
2024-10-14 14:46:27,613 - DEBUG - HTTP Response: POST https://api.openai.com/v1/chat/completions "200 OK" Headers({'date': 'Mon, 14 Oct 2024 11:46:27 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-expose-headers': 'X-Request-ID', 'openai-organization': 'user-kzzh9hik9ryjiou4ftvhondh', 'openai-processing-ms': '756', 'openai-version': '2020-10-01', 'x-ratelimit-limit-requests': '10000', 'x-ratelimit-limit-tokens': '10000', 'x-ratelimit-remaining-requests': '9983', 'x-ratelimit-remaining-tokens': '9695', 'x-ratelimit-reset-requests': '2m22.075s', 'x-ratelimit-reset-tokens': '1.828s', 'x-request-id': 'req_259205e93b90a44a5e896cc644378501', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8d2754369996b6a7-OTP', 'content-encoding': 'gzip', 'alt-svc': 'h3=":443"; ma=86400'})
2024-10-14 14:46:27,613 - DEBUG - request_id: req_259205e93b90a44a5e896cc644378501
2024-10-14 14:46:27,613 - DEBUG - Instructor Raw Response: ChatCompletion(id='chatcmpl-AIDopzWDFHqaN0YzFXc1q1BOs5u5R', choices=[Choice(finish_reason='stop', index=0, logprobs=None, message=ChatCompletionMessage(content=None, refusal=None, role='assistant', function_call=None, tool_calls=[ChatCompletionMessageToolCall(id='call_7akbmKM3zanMMVPKQ57dua6b', function=Function(arguments='{\n"action": "determine_contract_type"\n}', name='AgentAction'), type='function')]))], created=1728906387, model='gpt-4-0613', object='chat.completion', service_tier=None, system_fingerprint=None, usage=CompletionUsage(completion_tokens=11, prompt_tokens=303, total_tokens=314, completion_tokens_details=None, prompt_tokens_details=None))
2024-10-14 14:46:39,036 - DEBUG - Instructor Request: mode.value='tool_call', response_model=<class 'models.ContractDetails'>, new_kwargs={'model': 'gpt-4', 'messages': [{'role': 'system', 'content': '\nYou are an AI agent specializing in contract creation and personal information extraction. \n\nYour role is:\n 1. Guide the process of extracting information from documents..\n 2. Verifying the extracted information with human input.\n 3. Identifying parties. \n 4. Constructing a contract. \n\n\nFollow the workflow precisely and ask for human input when needed.\n\n'}, {'role': 'user', 'content': 'Determine the contract details for a airbnb contract between ISPILANTE SENTIMENT BRUSLI and VASILESCU ELENA.'}], 'tools': [{'type': 'function', 'function': {'name': 'ContractDetails', 'description': 'Correctly extracted `ContractDetails` with all the required parameters with correct types', 'parameters': {'properties': {'contract_type': {'description': 'Type of contract (e.g., airbnb, buy-sell, it-consulting)', 'title': 'Contract Type', 'type': 'string'}, 'additional_info': {'additionalProperties': {'type': 'string'}, 'description': 'Additional information specific to the contract type', 'title': 'Additional Info', 'type': 'object'}}, 'required': ['additional_info', 'contract_type'], 'type': 'object'}}}], 'tool_choice': {'type': 'function', 'function': {'name': 'ContractDetails'}}}
2024-10-14 14:46:39,036 - DEBUG - max_retries: 1
2024-10-14 14:46:39,038 - DEBUG - Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'json_data': {'messages': [{'role': 'system', 'content': '\nYou are an AI agent specializing in contract creation and personal information extraction. \n\nYour role is:\n 1. Guide the process of extracting information from documents..\n 2. Verifying the extracted information with human input.\n 3. Identifying parties. \n 4. Constructing a contract. \n\n\nFollow the workflow precisely and ask for human input when needed.\n\n'}, {'role': 'user', 'content': 'Determine the contract details for a airbnb contract between ISPILANTE SENTIMENT BRUSLI and VASILESCU ELENA.'}], 'model': 'gpt-4', 'tool_choice': {'type': 'function', 'function': {'name': 'ContractDetails'}}, 'tools': [{'type': 'function', 'function': {'name': 'ContractDetails', 'description': 'Correctly extracted `ContractDetails` with all the required parameters with correct types', 'parameters': {'properties': {'contract_type': {'description': 'Type of contract (e.g., airbnb, buy-sell, it-consulting)', 'title': 'Contract Type', 'type': 'string'}, 'additional_info': {'additionalProperties': {'type': 'string'}, 'description': 'Additional information specific to the contract type', 'title': 'Additional Info', 'type': 'object'}}, 'required': ['additional_info', 'contract_type'], 'type': 'object'}}}]}}
2024-10-14 14:46:39,039 - DEBUG - Sending HTTP Request: POST https://api.openai.com/v1/chat/completions
2024-10-14 14:46:39,039 - DEBUG - close.started
2024-10-14 14:46:39,039 - DEBUG - close.complete
2024-10-14 14:46:39,039 - DEBUG - connect_tcp.started host='api.openai.com' port=443 local_address=None timeout=5.0 socket_options=None
2024-10-14 14:46:39,046 - DEBUG - connect_tcp.complete return_value=<httpcore._backends.sync.SyncStream object at 0x0000014CF90AD4C0>
2024-10-14 14:46:39,046 - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x0000014CF8EC5B50> server_hostname='api.openai.com' timeout=5.0
2024-10-14 14:46:39,053 - DEBUG - start_tls.complete return_value=<httpcore._backends.sync.SyncStream object at 0x0000014CF90AE9F0>
2024-10-14 14:46:39,053 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-10-14 14:46:39,053 - DEBUG - send_request_headers.complete
2024-10-14 14:46:39,053 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-10-14 14:46:39,053 - DEBUG - send_request_body.complete
2024-10-14 14:46:39,053 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-10-14 14:46:39,976 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Mon, 14 Oct 2024 11:46:40 GMT'), (b'Content-Type', b'application/json'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'user-kzzh9hik9ryjiou4ftvhondh'), (b'openai-processing-ms', b'754'), (b'openai-version', b'2020-10-01'), (b'x-ratelimit-limit-requests', b'10000'), (b'x-ratelimit-limit-tokens', b'10000'), (b'x-ratelimit-remaining-requests', b'9983'), (b'x-ratelimit-remaining-tokens', b'9865'), (b'x-ratelimit-reset-requests', b'2m18.362s'), (b'x-ratelimit-reset-tokens', b'810ms'), (b'x-request-id', b'req_eab72a4e50b2e6a625be3dae9f571541'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8d275483df05c9d8-OTP'), (b'Content-Encoding', b'gzip'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-10-14 14:46:39,976 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2024-10-14 14:46:39,976 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-10-14 14:46:39,977 - DEBUG - receive_response_body.complete
2024-10-14 14:46:39,977 - DEBUG - response_closed.started
2024-10-14 14:46:39,977 - DEBUG - response_closed.complete
2024-10-14 14:46:39,977 - DEBUG - HTTP Response: POST https://api.openai.com/v1/chat/completions "200 OK" Headers({'date': 'Mon, 14 Oct 2024 11:46:40 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-expose-headers': 'X-Request-ID', 'openai-organization': 'user-kzzh9hik9ryjiou4ftvhondh', 'openai-processing-ms': '754', 'openai-version': '2020-10-01', 'x-ratelimit-limit-requests': '10000', 'x-ratelimit-limit-tokens': '10000', 'x-ratelimit-remaining-requests': '9983', 'x-ratelimit-remaining-tokens': '9865', 'x-ratelimit-reset-requests': '2m18.362s', 'x-ratelimit-reset-tokens': '810ms', 'x-request-id': 'req_eab72a4e50b2e6a625be3dae9f571541', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8d275483df05c9d8-OTP', 'content-encoding': 'gzip', 'alt-svc': 'h3=":443"; ma=86400'})
2024-10-14 14:46:39,977 - DEBUG - request_id: req_eab72a4e50b2e6a625be3dae9f571541
2024-10-14 14:46:39,978 - DEBUG - Instructor Raw Response: ChatCompletion(id='chatcmpl-AIDp1hbfI0KS2cq31yuPc8ZAnatc0', choices=[Choice(finish_reason='stop', index=0, logprobs=None, message=ChatCompletionMessage(content=None, refusal=None, role='assistant', function_call=None, tool_calls=[ChatCompletionMessageToolCall(id='call_4vzuJSnUudEHTeOY5gOacCYB', function=Function(arguments='{\n  "contract_type": "airbnb"\n}', name='ContractDetails'), type='function')]))], created=1728906399, model='gpt-4-0613', object='chat.completion', service_tier=None, system_fingerprint=None, usage=CompletionUsage(completion_tokens=11, prompt_tokens=184, total_tokens=195, completion_tokens_details=None, prompt_tokens_details=None))
2024-10-14 14:46:39,980 - DEBUG - Instructor Request: mode.value='tool_call', response_model=<class 'models.AgentAction'>, new_kwargs={'model': 'gpt-4', 'messages': [{'role': 'system', 'content': '\nYou are an AI agent specializing in contract creation and personal information extraction. \n\nYour role is:\n 1. Guide the process of extracting information from documents..\n 2. Verifying the extracted information with human input.\n 3. Identifying parties. \n 4. Constructing a contract. \n\n\nFollow the workflow precisely and ask for human input when needed.\n\n'}, {'role': 'user', 'content': "Current state: {'verified_pii_data': [{'name': 'ISPILANTE SENTIMENT BRUSLI', 'address': 'Videle Jud: Teleorman Sos. Giurgiului nr.1 695 TR'}, {'name': 'VASILESCU ELENA', 'address': 'Mun. Bucuresti Sec. 5 Str Nicolae Iorga nr.3 900 B'}], 'parties': {'buyer': 'ISPILANTE SENTIMENT BRUSLI', 'seller': 'VASILESCU ELENA'}, 'contract_details': {'contract_type': 'airbnb', 'additional_info': {}}, 'contract': None, 'current_action': None}\nWhat action should be taken next? Choose from: extract_pii, identify_parties, determine_contract_type, construct_contract, finish"}], 'tools': [{'type': 'function', 'function': {'name': 'AgentAction', 'description': 'Correctly extracted `AgentAction` with all the required parameters with correct types', 'parameters': {'properties': {'action': {'description': 'Action to be performed by the agent', 'title': 'Action', 'type': 'string'}, 'parameters': {'additionalProperties': {'type': 'string'}, 'description': 'Parameters for the action', 'title': 'Parameters', 'type': 'object'}}, 'required': ['action', 'parameters'], 'type': 'object'}}}], 'tool_choice': {'type': 'function', 'function': {'name': 'AgentAction'}}}
2024-10-14 14:46:39,980 - DEBUG - max_retries: 1
2024-10-14 14:46:39,982 - DEBUG - Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'json_data': {'messages': [{'role': 'system', 'content': '\nYou are an AI agent specializing in contract creation and personal information extraction. \n\nYour role is:\n 1. Guide the process of extracting information from documents..\n 2. Verifying the extracted information with human input.\n 3. Identifying parties. \n 4. Constructing a contract. \n\n\nFollow the workflow precisely and ask for human input when needed.\n\n'}, {'role': 'user', 'content': "Current state: {'verified_pii_data': [{'name': 'ISPILANTE SENTIMENT BRUSLI', 'address': 'Videle Jud: Teleorman Sos. Giurgiului nr.1 695 TR'}, {'name': 'VASILESCU ELENA', 'address': 'Mun. Bucuresti Sec. 5 Str Nicolae Iorga nr.3 900 B'}], 'parties': {'buyer': 'ISPILANTE SENTIMENT BRUSLI', 'seller': 'VASILESCU ELENA'}, 'contract_details': {'contract_type': 'airbnb', 'additional_info': {}}, 'contract': None, 'current_action': None}\nWhat action should be taken next? Choose from: extract_pii, identify_parties, determine_contract_type, construct_contract, finish"}], 'model': 'gpt-4', 'tool_choice': {'type': 'function', 'function': {'name': 'AgentAction'}}, 'tools': [{'type': 'function', 'function': {'name': 'AgentAction', 'description': 'Correctly extracted `AgentAction` with all the required parameters with correct types', 'parameters': {'properties': {'action': {'description': 'Action to be performed by the agent', 'title': 'Action', 'type': 'string'}, 'parameters': {'additionalProperties': {'type': 'string'}, 'description': 'Parameters for the action', 'title': 'Parameters', 'type': 'object'}}, 'required': ['action', 'parameters'], 'type': 'object'}}}]}}
2024-10-14 14:46:39,983 - DEBUG - Sending HTTP Request: POST https://api.openai.com/v1/chat/completions
2024-10-14 14:46:39,983 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-10-14 14:46:39,983 - DEBUG - send_request_headers.complete
2024-10-14 14:46:39,983 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-10-14 14:46:39,984 - DEBUG - send_request_body.complete
2024-10-14 14:46:39,984 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-10-14 14:46:40,799 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Mon, 14 Oct 2024 11:46:41 GMT'), (b'Content-Type', b'application/json'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'user-kzzh9hik9ryjiou4ftvhondh'), (b'openai-processing-ms', b'667'), (b'openai-version', b'2020-10-01'), (b'x-ratelimit-limit-requests', b'10000'), (b'x-ratelimit-limit-tokens', b'10000'), (b'x-ratelimit-remaining-requests', b'9983'), (b'x-ratelimit-remaining-tokens', b'9712'), (b'x-ratelimit-reset-requests', b'2m26.069s'), (b'x-ratelimit-reset-tokens', b'1.725s'), (b'x-request-id', b'req_0dfaddada4890846e9861c1e8879b07c'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8d275489af81c9d8-OTP'), (b'Content-Encoding', b'gzip'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-10-14 14:46:40,799 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2024-10-14 14:46:40,799 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-10-14 14:46:40,799 - DEBUG - receive_response_body.complete
2024-10-14 14:46:40,799 - DEBUG - response_closed.started
2024-10-14 14:46:40,799 - DEBUG - response_closed.complete
2024-10-14 14:46:40,799 - DEBUG - HTTP Response: POST https://api.openai.com/v1/chat/completions "200 OK" Headers({'date': 'Mon, 14 Oct 2024 11:46:41 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-expose-headers': 'X-Request-ID', 'openai-organization': 'user-kzzh9hik9ryjiou4ftvhondh', 'openai-processing-ms': '667', 'openai-version': '2020-10-01', 'x-ratelimit-limit-requests': '10000', 'x-ratelimit-limit-tokens': '10000', 'x-ratelimit-remaining-requests': '9983', 'x-ratelimit-remaining-tokens': '9712', 'x-ratelimit-reset-requests': '2m26.069s', 'x-ratelimit-reset-tokens': '1.725s', 'x-request-id': 'req_0dfaddada4890846e9861c1e8879b07c', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8d275489af81c9d8-OTP', 'content-encoding': 'gzip', 'alt-svc': 'h3=":443"; ma=86400'})
2024-10-14 14:46:40,799 - DEBUG - request_id: req_0dfaddada4890846e9861c1e8879b07c
2024-10-14 14:46:40,800 - DEBUG - Instructor Raw Response: ChatCompletion(id='chatcmpl-AIDp2AstgizCC6cfjUjJWWKgtaSbh', choices=[Choice(finish_reason='stop', index=0, logprobs=None, message=ChatCompletionMessage(content=None, refusal=None, role='assistant', function_call=None, tool_calls=[ChatCompletionMessageToolCall(id='call_aBN3ELdyfohgkHoGZ9RgyhzQ', function=Function(arguments='{\n"action": "construct_contract"\n}', name='AgentAction'), type='function')]))], created=1728906400, model='gpt-4-0613', object='chat.completion', service_tier=None, system_fingerprint=None, usage=CompletionUsage(completion_tokens=9, prompt_tokens=315, total_tokens=324, completion_tokens_details=None, prompt_tokens_details=None))
2024-10-14 14:46:40,957 - DEBUG - close.started
2024-10-14 14:46:40,957 - DEBUG - close.complete
2024-10-14 14:48:02,575 - WARNING - Neither CUDA nor MPS are available - defaulting to CPU. Note: This module is much faster with a GPU.
2024-10-14 14:48:03,844 - DEBUG - load_ssl_context verify=True cert=None trust_env=True http2=False
2024-10-14 14:48:03,844 - DEBUG - load_verify_locations cafile='D:\\deve\\contract_automation\\.venv\\Lib\\site-packages\\certifi\\cacert.pem'
2024-10-14 14:48:04,176 - DEBUG - Patching `client.chat.completions.create` with mode=<Mode.TOOLS: 'tool_call'>
2024-10-14 14:48:04,177 - DEBUG - Using proactor: IocpProactor
2024-10-14 14:48:04,196 - DEBUG - STREAM b'IHDR' 16 13
2024-10-14 14:48:04,196 - DEBUG - STREAM b'iCCP' 41 3152
2024-10-14 14:48:04,196 - DEBUG - iCCP profile name b'ICC Profile'
2024-10-14 14:48:04,197 - DEBUG - Compression method 0
2024-10-14 14:48:04,197 - DEBUG - STREAM b'eXIf' 3205 138
2024-10-14 14:48:04,197 - DEBUG - STREAM b'pHYs' 3355 9
2024-10-14 14:48:04,197 - DEBUG - STREAM b'iTXt' 3376 470
2024-10-14 14:48:04,197 - DEBUG - STREAM b'iDOT' 3858 28
2024-10-14 14:48:04,197 - DEBUG - b'iDOT' 3858 28 (unknown)
2024-10-14 14:48:04,197 - DEBUG - STREAM b'IDAT' 3898 16384
2024-10-14 14:48:04,197 - DEBUG - STREAM b'IHDR' 16 13
2024-10-14 14:48:04,197 - DEBUG - STREAM b'iCCP' 41 3152
2024-10-14 14:48:04,197 - DEBUG - iCCP profile name b'ICC Profile'
2024-10-14 14:48:04,197 - DEBUG - Compression method 0
2024-10-14 14:48:04,197 - DEBUG - STREAM b'eXIf' 3205 138
2024-10-14 14:48:04,197 - DEBUG - STREAM b'pHYs' 3355 9
2024-10-14 14:48:04,197 - DEBUG - STREAM b'iTXt' 3376 470
2024-10-14 14:48:04,197 - DEBUG - STREAM b'iDOT' 3858 28
2024-10-14 14:48:04,197 - DEBUG - b'iDOT' 3858 28 (unknown)
2024-10-14 14:48:04,197 - DEBUG - STREAM b'IDAT' 3898 16384
2024-10-14 14:48:04,208 - DEBUG - tag: XResolution (282) - type: rational (5) Tag Location: 22 - Data Location: 62 - value: b'\x00\x00\x00\x90\x00\x00\x00\x01'
2024-10-14 14:48:04,208 - DEBUG - tag: YResolution (283) - type: rational (5) Tag Location: 34 - Data Location: 70 - value: b'\x00\x00\x00\x90\x00\x00\x00\x01'
2024-10-14 14:48:04,208 - DEBUG - tag: ResolutionUnit (296) - type: short (3) - value: b'\x00\x02'
2024-10-14 14:48:04,208 - DEBUG - tag: ExifIFD (34665) - type: long (4) - value: b'\x00\x00\x00N'
2024-10-14 14:48:04,209 - DEBUG - Error closing: Operation on closed image
2024-10-14 14:48:06,303 - DEBUG - STREAM b'IHDR' 16 13
2024-10-14 14:48:06,303 - DEBUG - STREAM b'iCCP' 41 3152
2024-10-14 14:48:06,303 - DEBUG - iCCP profile name b'ICC Profile'
2024-10-14 14:48:06,303 - DEBUG - Compression method 0
2024-10-14 14:48:06,303 - DEBUG - STREAM b'eXIf' 3205 138
2024-10-14 14:48:06,303 - DEBUG - STREAM b'pHYs' 3355 9
2024-10-14 14:48:06,303 - DEBUG - STREAM b'iTXt' 3376 471
2024-10-14 14:48:06,303 - DEBUG - STREAM b'iDOT' 3859 28
2024-10-14 14:48:06,303 - DEBUG - b'iDOT' 3859 28 (unknown)
2024-10-14 14:48:06,303 - DEBUG - STREAM b'IDAT' 3899 16384
2024-10-14 14:48:06,303 - DEBUG - STREAM b'IHDR' 16 13
2024-10-14 14:48:06,303 - DEBUG - STREAM b'iCCP' 41 3152
2024-10-14 14:48:06,304 - DEBUG - iCCP profile name b'ICC Profile'
2024-10-14 14:48:06,304 - DEBUG - Compression method 0
2024-10-14 14:48:06,304 - DEBUG - STREAM b'eXIf' 3205 138
2024-10-14 14:48:06,304 - DEBUG - STREAM b'pHYs' 3355 9
2024-10-14 14:48:06,304 - DEBUG - STREAM b'iTXt' 3376 471
2024-10-14 14:48:06,304 - DEBUG - STREAM b'iDOT' 3859 28
2024-10-14 14:48:06,304 - DEBUG - b'iDOT' 3859 28 (unknown)
2024-10-14 14:48:06,304 - DEBUG - STREAM b'IDAT' 3899 16384
2024-10-14 14:48:06,323 - DEBUG - tag: XResolution (282) - type: rational (5) Tag Location: 22 - Data Location: 62 - value: b'\x00\x00\x00\x90\x00\x00\x00\x01'
2024-10-14 14:48:06,323 - DEBUG - tag: YResolution (283) - type: rational (5) Tag Location: 34 - Data Location: 70 - value: b'\x00\x00\x00\x90\x00\x00\x00\x01'
2024-10-14 14:48:06,323 - DEBUG - tag: ResolutionUnit (296) - type: short (3) - value: b'\x00\x02'
2024-10-14 14:48:06,323 - DEBUG - tag: ExifIFD (34665) - type: long (4) - value: b'\x00\x00\x00N'
2024-10-14 14:48:06,324 - DEBUG - Error closing: Operation on closed image
2024-10-14 14:48:09,573 - DEBUG - Instructor Request: mode.value='tool_call', response_model=<class 'models.AgentAction'>, new_kwargs={'model': 'gpt-4', 'messages': [{'role': 'system', 'content': '\nYou are an AI agent specializing in contract creation and personal information extraction. \n\nYour role is:\n 1. Guide the process of extracting information from documents..\n 2. Verifying the extracted information with human input.\n 3. Identifying parties. \n 4. Constructing a contract. \n\n\nFollow the workflow precisely and ask for human input when needed.\n\n'}, {'role': 'user', 'content': "Current state: {'verified_pii_data': [], 'parties': None, 'contract_details': None, 'contract': None, 'current_action': None}\nWhat action should be taken next? Choose from: extract_pii, identify_parties, determine_contract_type, construct_contract, finish"}], 'tools': [{'type': 'function', 'function': {'name': 'AgentAction', 'description': 'Correctly extracted `AgentAction` with all the required parameters with correct types', 'parameters': {'properties': {'action': {'description': 'Action to be performed by the agent', 'title': 'Action', 'type': 'string'}, 'parameters': {'additionalProperties': {'type': 'string'}, 'description': 'Parameters for the action', 'title': 'Parameters', 'type': 'object'}}, 'required': ['action', 'parameters'], 'type': 'object'}}}], 'tool_choice': {'type': 'function', 'function': {'name': 'AgentAction'}}}
2024-10-14 14:48:09,574 - DEBUG - max_retries: 1
2024-10-14 14:48:09,578 - DEBUG - Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'json_data': {'messages': [{'role': 'system', 'content': '\nYou are an AI agent specializing in contract creation and personal information extraction. \n\nYour role is:\n 1. Guide the process of extracting information from documents..\n 2. Verifying the extracted information with human input.\n 3. Identifying parties. \n 4. Constructing a contract. \n\n\nFollow the workflow precisely and ask for human input when needed.\n\n'}, {'role': 'user', 'content': "Current state: {'verified_pii_data': [], 'parties': None, 'contract_details': None, 'contract': None, 'current_action': None}\nWhat action should be taken next? Choose from: extract_pii, identify_parties, determine_contract_type, construct_contract, finish"}], 'model': 'gpt-4', 'tool_choice': {'type': 'function', 'function': {'name': 'AgentAction'}}, 'tools': [{'type': 'function', 'function': {'name': 'AgentAction', 'description': 'Correctly extracted `AgentAction` with all the required parameters with correct types', 'parameters': {'properties': {'action': {'description': 'Action to be performed by the agent', 'title': 'Action', 'type': 'string'}, 'parameters': {'additionalProperties': {'type': 'string'}, 'description': 'Parameters for the action', 'title': 'Parameters', 'type': 'object'}}, 'required': ['action', 'parameters'], 'type': 'object'}}}]}}
2024-10-14 14:48:09,618 - DEBUG - Sending HTTP Request: POST https://api.openai.com/v1/chat/completions
2024-10-14 14:48:09,618 - DEBUG - connect_tcp.started host='api.openai.com' port=443 local_address=None timeout=5.0 socket_options=None
2024-10-14 14:48:09,631 - DEBUG - connect_tcp.complete return_value=<httpcore._backends.sync.SyncStream object at 0x0000015C7F8968D0>
2024-10-14 14:48:09,631 - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x0000015C7F6E5B50> server_hostname='api.openai.com' timeout=5.0
2024-10-14 14:48:09,639 - DEBUG - start_tls.complete return_value=<httpcore._backends.sync.SyncStream object at 0x0000015C7F8967E0>
2024-10-14 14:48:09,640 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-10-14 14:48:09,640 - DEBUG - send_request_headers.complete
2024-10-14 14:48:09,640 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-10-14 14:48:09,640 - DEBUG - send_request_body.complete
2024-10-14 14:48:09,640 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-10-14 14:48:10,457 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Mon, 14 Oct 2024 11:48:10 GMT'), (b'Content-Type', b'application/json'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'user-kzzh9hik9ryjiou4ftvhondh'), (b'openai-processing-ms', b'669'), (b'openai-version', b'2020-10-01'), (b'x-ratelimit-limit-requests', b'10000'), (b'x-ratelimit-limit-tokens', b'10000'), (b'x-ratelimit-remaining-requests', b'9992'), (b'x-ratelimit-remaining-tokens', b'9829'), (b'x-ratelimit-reset-requests', b'1m5.05s'), (b'x-ratelimit-reset-tokens', b'1.026s'), (b'x-request-id', b'req_3bf53e8741f2565fc16ca731b4583275'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'CF-Cache-Status', b'DYNAMIC'), (b'Set-Cookie', b'__cf_bm=7RhrJv0jG7ZKTIr7CsKhJAoIvqZ78q2ZaIcy.b_kqo8-1728906490-1.0.1.1-G3hR1vnJXYJVSe.ChhEai.hsxZejLxnA6ejKQTnSQm3bzr1NBLYyN0yBfVhx2y59UJT3arHmwnI6yTreJyhD6g; path=/; expires=Mon, 14-Oct-24 12:18:10 GMT; domain=.api.openai.com; HttpOnly; Secure; SameSite=None'), (b'X-Content-Type-Options', b'nosniff'), (b'Set-Cookie', b'_cfuvid=HQ547sAU2_5AxJJpz0__5PSxZ8ypEgYgaMfscmFqYMU-1728906490736-0.0.1.1-604800000; path=/; domain=.api.openai.com; HttpOnly; Secure; SameSite=None'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8d2756ba0991c9de-OTP'), (b'Content-Encoding', b'gzip'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-10-14 14:48:10,459 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2024-10-14 14:48:10,459 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-10-14 14:48:10,460 - DEBUG - receive_response_body.complete
2024-10-14 14:48:10,460 - DEBUG - response_closed.started
2024-10-14 14:48:10,460 - DEBUG - response_closed.complete
2024-10-14 14:48:10,460 - DEBUG - HTTP Response: POST https://api.openai.com/v1/chat/completions "200 OK" Headers([('date', 'Mon, 14 Oct 2024 11:48:10 GMT'), ('content-type', 'application/json'), ('transfer-encoding', 'chunked'), ('connection', 'keep-alive'), ('access-control-expose-headers', 'X-Request-ID'), ('openai-organization', 'user-kzzh9hik9ryjiou4ftvhondh'), ('openai-processing-ms', '669'), ('openai-version', '2020-10-01'), ('x-ratelimit-limit-requests', '10000'), ('x-ratelimit-limit-tokens', '10000'), ('x-ratelimit-remaining-requests', '9992'), ('x-ratelimit-remaining-tokens', '9829'), ('x-ratelimit-reset-requests', '1m5.05s'), ('x-ratelimit-reset-tokens', '1.026s'), ('x-request-id', 'req_3bf53e8741f2565fc16ca731b4583275'), ('strict-transport-security', 'max-age=31536000; includeSubDomains; preload'), ('cf-cache-status', 'DYNAMIC'), ('set-cookie', '__cf_bm=7RhrJv0jG7ZKTIr7CsKhJAoIvqZ78q2ZaIcy.b_kqo8-1728906490-1.0.1.1-G3hR1vnJXYJVSe.ChhEai.hsxZejLxnA6ejKQTnSQm3bzr1NBLYyN0yBfVhx2y59UJT3arHmwnI6yTreJyhD6g; path=/; expires=Mon, 14-Oct-24 12:18:10 GMT; domain=.api.openai.com; HttpOnly; Secure; SameSite=None'), ('x-content-type-options', 'nosniff'), ('set-cookie', '_cfuvid=HQ547sAU2_5AxJJpz0__5PSxZ8ypEgYgaMfscmFqYMU-1728906490736-0.0.1.1-604800000; path=/; domain=.api.openai.com; HttpOnly; Secure; SameSite=None'), ('server', 'cloudflare'), ('cf-ray', '8d2756ba0991c9de-OTP'), ('content-encoding', 'gzip'), ('alt-svc', 'h3=":443"; ma=86400')])
2024-10-14 14:48:10,461 - DEBUG - request_id: req_3bf53e8741f2565fc16ca731b4583275
2024-10-14 14:48:10,465 - DEBUG - Instructor Raw Response: ChatCompletion(id='chatcmpl-AIDqUg2iaQWtG9U5sLZr5ZYzQ0Ei9', choices=[Choice(finish_reason='stop', index=0, logprobs=None, message=ChatCompletionMessage(content=None, refusal=None, role='assistant', function_call=None, tool_calls=[ChatCompletionMessageToolCall(id='call_PNI8GQMNSZyka94UQiyT3lGw', function=Function(arguments='{\n"action": "extract_pii"\n}', name='AgentAction'), type='function')]))], created=1728906490, model='gpt-4-0613', object='chat.completion', service_tier=None, system_fingerprint=None, usage=CompletionUsage(completion_tokens=10, prompt_tokens=202, total_tokens=212, completion_tokens_details=None, prompt_tokens_details=None))
2024-10-14 14:48:10,466 - DEBUG - Instructor Request: mode.value='tool_call', response_model=<class 'models.PIIData'>, new_kwargs={'model': 'gpt-4', 'messages': [{'role': 'system', 'content': '\nYou are an AI agent specializing in contract creation and personal information extraction. \n\nYour role is:\n 1. Guide the process of extracting information from documents..\n 2. Verifying the extracted information with human input.\n 3. Identifying parties. \n 4. Constructing a contract. \n\n\nFollow the workflow precisely and ask for human input when needed.\n\n'}, {'role': 'user', 'content': "Extract the name and address from the given text:\n\nROUMANIE ROMAWI ROMANIA Carte CARTE De |Dentitate IDEnTITY D'iDENTITE seria TR Na 409131 CarD cNP 1891113341181 Nume/Nom/Last name T525M ISPILANTE Prenume/Prenom/First namo SENTIMENT BRUSLI Cetatenle/Nallonallte/Nallonallly Sox SexeiSox Romn\u0103 ROU M Loc nastere/Liou do naissancelPlace ol birth Or\u0219. Videle Jud.Teleorman Dom IlulAdresse/Addrass Videle Jud: Teleorman Sos. Giurgiului nr.1 695 TR Emisa dolDelivree parlIssuad by ValabilltatelValldlte Valldlty SPCLEP Videle 04.11.11-13.11.2018 IDROUISPILANTE<<SENTIMENT <BRUSLI<<<< TR409131<0R0u8911137M181113513411813 Or\u0219:"}], 'tools': [{'type': 'function', 'function': {'name': 'PIIData', 'description': 'Correctly extracted `PIIData` with all the required parameters with correct types', 'parameters': {'properties': {'name': {'description': 'Full name of the person', 'title': 'Name', 'type': 'string'}, 'address': {'description': 'Residential address of the person', 'title': 'Address', 'type': 'string'}}, 'required': ['address', 'name'], 'type': 'object'}}}], 'tool_choice': {'type': 'function', 'function': {'name': 'PIIData'}}}
2024-10-14 14:48:10,466 - DEBUG - max_retries: 1
2024-10-14 14:48:10,468 - DEBUG - Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'json_data': {'messages': [{'role': 'system', 'content': '\nYou are an AI agent specializing in contract creation and personal information extraction. \n\nYour role is:\n 1. Guide the process of extracting information from documents..\n 2. Verifying the extracted information with human input.\n 3. Identifying parties. \n 4. Constructing a contract. \n\n\nFollow the workflow precisely and ask for human input when needed.\n\n'}, {'role': 'user', 'content': "Extract the name and address from the given text:\n\nROUMANIE ROMAWI ROMANIA Carte CARTE De |Dentitate IDEnTITY D'iDENTITE seria TR Na 409131 CarD cNP 1891113341181 Nume/Nom/Last name T525M ISPILANTE Prenume/Prenom/First namo SENTIMENT BRUSLI Cetatenle/Nallonallte/Nallonallly Sox SexeiSox Romn\u0103 ROU M Loc nastere/Liou do naissancelPlace ol birth Or\u0219. Videle Jud.Teleorman Dom IlulAdresse/Addrass Videle Jud: Teleorman Sos. Giurgiului nr.1 695 TR Emisa dolDelivree parlIssuad by ValabilltatelValldlte Valldlty SPCLEP Videle 04.11.11-13.11.2018 IDROUISPILANTE<<SENTIMENT <BRUSLI<<<< TR409131<0R0u8911137M181113513411813 Or\u0219:"}], 'model': 'gpt-4', 'tool_choice': {'type': 'function', 'function': {'name': 'PIIData'}}, 'tools': [{'type': 'function', 'function': {'name': 'PIIData', 'description': 'Correctly extracted `PIIData` with all the required parameters with correct types', 'parameters': {'properties': {'name': {'description': 'Full name of the person', 'title': 'Name', 'type': 'string'}, 'address': {'description': 'Residential address of the person', 'title': 'Address', 'type': 'string'}}, 'required': ['address', 'name'], 'type': 'object'}}}]}}
2024-10-14 14:48:10,468 - DEBUG - Sending HTTP Request: POST https://api.openai.com/v1/chat/completions
2024-10-14 14:48:10,468 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-10-14 14:48:10,468 - DEBUG - send_request_headers.complete
2024-10-14 14:48:10,468 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-10-14 14:48:10,468 - DEBUG - send_request_body.complete
2024-10-14 14:48:10,468 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-10-14 14:48:12,469 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Mon, 14 Oct 2024 11:48:12 GMT'), (b'Content-Type', b'application/json'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'user-kzzh9hik9ryjiou4ftvhondh'), (b'openai-processing-ms', b'1854'), (b'openai-version', b'2020-10-01'), (b'x-ratelimit-limit-requests', b'10000'), (b'x-ratelimit-limit-tokens', b'10000'), (b'x-ratelimit-remaining-requests', b'9991'), (b'x-ratelimit-remaining-tokens', b'9661'), (b'x-ratelimit-reset-requests', b'1m12.862s'), (b'x-ratelimit-reset-tokens', b'2.028s'), (b'x-request-id', b'req_b5311bf885f893c7c59867b59d0f46b7'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8d2756bf3fcec9de-OTP'), (b'Content-Encoding', b'gzip'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-10-14 14:48:12,470 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2024-10-14 14:48:12,470 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-10-14 14:48:12,470 - DEBUG - receive_response_body.complete
2024-10-14 14:48:12,470 - DEBUG - response_closed.started
2024-10-14 14:48:12,471 - DEBUG - response_closed.complete
2024-10-14 14:48:12,471 - DEBUG - HTTP Response: POST https://api.openai.com/v1/chat/completions "200 OK" Headers({'date': 'Mon, 14 Oct 2024 11:48:12 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-expose-headers': 'X-Request-ID', 'openai-organization': 'user-kzzh9hik9ryjiou4ftvhondh', 'openai-processing-ms': '1854', 'openai-version': '2020-10-01', 'x-ratelimit-limit-requests': '10000', 'x-ratelimit-limit-tokens': '10000', 'x-ratelimit-remaining-requests': '9991', 'x-ratelimit-remaining-tokens': '9661', 'x-ratelimit-reset-requests': '1m12.862s', 'x-ratelimit-reset-tokens': '2.028s', 'x-request-id': 'req_b5311bf885f893c7c59867b59d0f46b7', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8d2756bf3fcec9de-OTP', 'content-encoding': 'gzip', 'alt-svc': 'h3=":443"; ma=86400'})
2024-10-14 14:48:12,471 - DEBUG - request_id: req_b5311bf885f893c7c59867b59d0f46b7
2024-10-14 14:48:12,472 - DEBUG - Instructor Raw Response: ChatCompletion(id='chatcmpl-AIDqUhFmTO6kiK7hB6zITtP8JKG9t', choices=[Choice(finish_reason='stop', index=0, logprobs=None, message=ChatCompletionMessage(content=None, refusal=None, role='assistant', function_call=None, tool_calls=[ChatCompletionMessageToolCall(id='call_J8PuNwQBq5HwxbSXMlXBSQ5V', function=Function(arguments='{\n"name": "ISPILANTE SENTIMENT BRUSLI",\n"address": "Videle Jud: Teleorman Sos. Giurgiului nr.1 695 TR"\n}', name='PIIData'), type='function')]))], created=1728906490, model='gpt-4-0613', object='chat.completion', service_tier=None, system_fingerprint=None, usage=CompletionUsage(completion_tokens=39, prompt_tokens=377, total_tokens=416, completion_tokens_details=None, prompt_tokens_details=None))
2024-10-14 14:48:14,360 - DEBUG - Instructor Request: mode.value='tool_call', response_model=<class 'models.PIIData'>, new_kwargs={'model': 'gpt-4', 'messages': [{'role': 'system', 'content': '\nYou are an AI agent specializing in contract creation and personal information extraction. \n\nYour role is:\n 1. Guide the process of extracting information from documents..\n 2. Verifying the extracted information with human input.\n 3. Identifying parties. \n 4. Constructing a contract. \n\n\nFollow the workflow precisely and ask for human input when needed.\n\n'}, {'role': 'user', 'content': "Extract the name and address from the given text:\n\nROUMANIE ROVIAINIA ROMANIA Carte Carte DE iDentitate IdEnTITY Didentite seala SS Nr 099994 Card CNP 2410415400542 93coQ Nume/NomiLast name VASILESCU Pronume/Prenom/Flrst name ELENA < CetatenielNatlonallte/Natlonalily M Sex SexelSer Romn\u0103 ROU Loc nastore/Licu de naissancolF 'ar0 ol birth Mun: Dej Jud. Cluj Domiciliu/Adresse A ess Mun. Bucuresti Sec. 5 Str Nicolae Iorga nr.3 900 B Emisa delDelivree parllssued by Valabilitate/Vahidile Valiouy D.EPAB.D- 06.01.17-15.04.2077 IDROUVASILESCU<<ELENA<<<<<<<<<<<<<<< SS099994<0R0u4104151F770415824003421"}], 'tools': [{'type': 'function', 'function': {'name': 'PIIData', 'description': 'Correctly extracted `PIIData` with all the required parameters with correct types', 'parameters': {'properties': {'name': {'description': 'Full name of the person', 'title': 'Name', 'type': 'string'}, 'address': {'description': 'Residential address of the person', 'title': 'Address', 'type': 'string'}}, 'required': ['address', 'name'], 'type': 'object'}}}], 'tool_choice': {'type': 'function', 'function': {'name': 'PIIData'}}}
2024-10-14 14:48:14,360 - DEBUG - max_retries: 1
2024-10-14 14:48:14,363 - DEBUG - Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'json_data': {'messages': [{'role': 'system', 'content': '\nYou are an AI agent specializing in contract creation and personal information extraction. \n\nYour role is:\n 1. Guide the process of extracting information from documents..\n 2. Verifying the extracted information with human input.\n 3. Identifying parties. \n 4. Constructing a contract. \n\n\nFollow the workflow precisely and ask for human input when needed.\n\n'}, {'role': 'user', 'content': "Extract the name and address from the given text:\n\nROUMANIE ROVIAINIA ROMANIA Carte Carte DE iDentitate IdEnTITY Didentite seala SS Nr 099994 Card CNP 2410415400542 93coQ Nume/NomiLast name VASILESCU Pronume/Prenom/Flrst name ELENA < CetatenielNatlonallte/Natlonalily M Sex SexelSer Romn\u0103 ROU Loc nastore/Licu de naissancolF 'ar0 ol birth Mun: Dej Jud. Cluj Domiciliu/Adresse A ess Mun. Bucuresti Sec. 5 Str Nicolae Iorga nr.3 900 B Emisa delDelivree parllssued by Valabilitate/Vahidile Valiouy D.EPAB.D- 06.01.17-15.04.2077 IDROUVASILESCU<<ELENA<<<<<<<<<<<<<<< SS099994<0R0u4104151F770415824003421"}], 'model': 'gpt-4', 'tool_choice': {'type': 'function', 'function': {'name': 'PIIData'}}, 'tools': [{'type': 'function', 'function': {'name': 'PIIData', 'description': 'Correctly extracted `PIIData` with all the required parameters with correct types', 'parameters': {'properties': {'name': {'description': 'Full name of the person', 'title': 'Name', 'type': 'string'}, 'address': {'description': 'Residential address of the person', 'title': 'Address', 'type': 'string'}}, 'required': ['address', 'name'], 'type': 'object'}}}]}}
2024-10-14 14:48:14,363 - DEBUG - Sending HTTP Request: POST https://api.openai.com/v1/chat/completions
2024-10-14 14:48:14,363 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-10-14 14:48:14,364 - DEBUG - send_request_headers.complete
2024-10-14 14:48:14,364 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-10-14 14:48:14,364 - DEBUG - send_request_body.complete
2024-10-14 14:48:14,364 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-10-14 14:48:16,900 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Mon, 14 Oct 2024 11:48:17 GMT'), (b'Content-Type', b'application/json'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'user-kzzh9hik9ryjiou4ftvhondh'), (b'openai-processing-ms', b'2213'), (b'openai-version', b'2020-10-01'), (b'x-ratelimit-limit-requests', b'10000'), (b'x-ratelimit-limit-tokens', b'10000'), (b'x-ratelimit-remaining-requests', b'9991'), (b'x-ratelimit-remaining-tokens', b'9742'), (b'x-ratelimit-reset-requests', b'1m17.607s'), (b'x-ratelimit-reset-tokens', b'1.548s'), (b'x-request-id', b'req_c9e5f13ba7bdfb4e54e7e34ff272a2f4'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8d2756d78bcbc9de-OTP'), (b'Content-Encoding', b'gzip'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-10-14 14:48:16,901 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2024-10-14 14:48:16,901 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-10-14 14:48:16,901 - DEBUG - receive_response_body.complete
2024-10-14 14:48:16,901 - DEBUG - response_closed.started
2024-10-14 14:48:16,902 - DEBUG - response_closed.complete
2024-10-14 14:48:16,902 - DEBUG - HTTP Response: POST https://api.openai.com/v1/chat/completions "200 OK" Headers({'date': 'Mon, 14 Oct 2024 11:48:17 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-expose-headers': 'X-Request-ID', 'openai-organization': 'user-kzzh9hik9ryjiou4ftvhondh', 'openai-processing-ms': '2213', 'openai-version': '2020-10-01', 'x-ratelimit-limit-requests': '10000', 'x-ratelimit-limit-tokens': '10000', 'x-ratelimit-remaining-requests': '9991', 'x-ratelimit-remaining-tokens': '9742', 'x-ratelimit-reset-requests': '1m17.607s', 'x-ratelimit-reset-tokens': '1.548s', 'x-request-id': 'req_c9e5f13ba7bdfb4e54e7e34ff272a2f4', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8d2756d78bcbc9de-OTP', 'content-encoding': 'gzip', 'alt-svc': 'h3=":443"; ma=86400'})
2024-10-14 14:48:16,902 - DEBUG - request_id: req_c9e5f13ba7bdfb4e54e7e34ff272a2f4
2024-10-14 14:48:16,903 - DEBUG - Instructor Raw Response: ChatCompletion(id='chatcmpl-AIDqYc48myImmXGenLJmY58Vu4Qwy', choices=[Choice(finish_reason='stop', index=0, logprobs=None, message=ChatCompletionMessage(content=None, refusal=None, role='assistant', function_call=None, tool_calls=[ChatCompletionMessageToolCall(id='call_G0NQNr4TLezYTg1DQBFeDuFZ', function=Function(arguments='{\n"name": "VASILESCU ELENA",\n"address": "Mun. Bucuresti Sec. 5 Str Nicolae Iorga nr.3 900 B"\n}', name='PIIData'), type='function')]))], created=1728906494, model='gpt-4-0613', object='chat.completion', service_tier=None, system_fingerprint=None, usage=CompletionUsage(completion_tokens=41, prompt_tokens=380, total_tokens=421, completion_tokens_details=None, prompt_tokens_details=None))
2024-10-14 14:48:18,312 - DEBUG - Instructor Request: mode.value='tool_call', response_model=<class 'models.AgentAction'>, new_kwargs={'model': 'gpt-4', 'messages': [{'role': 'system', 'content': '\nYou are an AI agent specializing in contract creation and personal information extraction. \n\nYour role is:\n 1. Guide the process of extracting information from documents..\n 2. Verifying the extracted information with human input.\n 3. Identifying parties. \n 4. Constructing a contract. \n\n\nFollow the workflow precisely and ask for human input when needed.\n\n'}, {'role': 'user', 'content': "Current state: {'verified_pii_data': [{'name': 'ISPILANTE SENTIMENT BRUSLI', 'address': 'Videle Jud: Teleorman Sos. Giurgiului nr.1 695 TR'}, {'name': 'VASILESCU ELENA', 'address': 'Mun. Bucuresti Sec. 5 Str Nicolae Iorga nr.3 900 B'}], 'parties': None, 'contract_details': None, 'contract': None, 'current_action': None}\nWhat action should be taken next? Choose from: extract_pii, identify_parties, determine_contract_type, construct_contract, finish"}], 'tools': [{'type': 'function', 'function': {'name': 'AgentAction', 'description': 'Correctly extracted `AgentAction` with all the required parameters with correct types', 'parameters': {'properties': {'action': {'description': 'Action to be performed by the agent', 'title': 'Action', 'type': 'string'}, 'parameters': {'additionalProperties': {'type': 'string'}, 'description': 'Parameters for the action', 'title': 'Parameters', 'type': 'object'}}, 'required': ['action', 'parameters'], 'type': 'object'}}}], 'tool_choice': {'type': 'function', 'function': {'name': 'AgentAction'}}}
2024-10-14 14:48:18,312 - DEBUG - max_retries: 1
2024-10-14 14:48:18,315 - DEBUG - Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'json_data': {'messages': [{'role': 'system', 'content': '\nYou are an AI agent specializing in contract creation and personal information extraction. \n\nYour role is:\n 1. Guide the process of extracting information from documents..\n 2. Verifying the extracted information with human input.\n 3. Identifying parties. \n 4. Constructing a contract. \n\n\nFollow the workflow precisely and ask for human input when needed.\n\n'}, {'role': 'user', 'content': "Current state: {'verified_pii_data': [{'name': 'ISPILANTE SENTIMENT BRUSLI', 'address': 'Videle Jud: Teleorman Sos. Giurgiului nr.1 695 TR'}, {'name': 'VASILESCU ELENA', 'address': 'Mun. Bucuresti Sec. 5 Str Nicolae Iorga nr.3 900 B'}], 'parties': None, 'contract_details': None, 'contract': None, 'current_action': None}\nWhat action should be taken next? Choose from: extract_pii, identify_parties, determine_contract_type, construct_contract, finish"}], 'model': 'gpt-4', 'tool_choice': {'type': 'function', 'function': {'name': 'AgentAction'}}, 'tools': [{'type': 'function', 'function': {'name': 'AgentAction', 'description': 'Correctly extracted `AgentAction` with all the required parameters with correct types', 'parameters': {'properties': {'action': {'description': 'Action to be performed by the agent', 'title': 'Action', 'type': 'string'}, 'parameters': {'additionalProperties': {'type': 'string'}, 'description': 'Parameters for the action', 'title': 'Parameters', 'type': 'object'}}, 'required': ['action', 'parameters'], 'type': 'object'}}}]}}
2024-10-14 14:48:18,315 - DEBUG - Sending HTTP Request: POST https://api.openai.com/v1/chat/completions
2024-10-14 14:48:18,316 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-10-14 14:48:18,316 - DEBUG - send_request_headers.complete
2024-10-14 14:48:18,316 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-10-14 14:48:18,316 - DEBUG - send_request_body.complete
2024-10-14 14:48:18,316 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-10-14 14:48:19,194 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Mon, 14 Oct 2024 11:48:19 GMT'), (b'Content-Type', b'application/json'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'user-kzzh9hik9ryjiou4ftvhondh'), (b'openai-processing-ms', b'727'), (b'openai-version', b'2020-10-01'), (b'x-ratelimit-limit-requests', b'10000'), (b'x-ratelimit-limit-tokens', b'10000'), (b'x-ratelimit-remaining-requests', b'9990'), (b'x-ratelimit-remaining-tokens', b'9780'), (b'x-ratelimit-reset-requests', b'1m22.295s'), (b'x-ratelimit-reset-tokens', b'1.32s'), (b'x-request-id', b'req_89a26160764bba22a89565761a506de4'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8d2756f03f74c9de-OTP'), (b'Content-Encoding', b'gzip'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-10-14 14:48:19,194 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2024-10-14 14:48:19,194 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-10-14 14:48:19,194 - DEBUG - receive_response_body.complete
2024-10-14 14:48:19,195 - DEBUG - response_closed.started
2024-10-14 14:48:19,195 - DEBUG - response_closed.complete
2024-10-14 14:48:19,195 - DEBUG - HTTP Response: POST https://api.openai.com/v1/chat/completions "200 OK" Headers({'date': 'Mon, 14 Oct 2024 11:48:19 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-expose-headers': 'X-Request-ID', 'openai-organization': 'user-kzzh9hik9ryjiou4ftvhondh', 'openai-processing-ms': '727', 'openai-version': '2020-10-01', 'x-ratelimit-limit-requests': '10000', 'x-ratelimit-limit-tokens': '10000', 'x-ratelimit-remaining-requests': '9990', 'x-ratelimit-remaining-tokens': '9780', 'x-ratelimit-reset-requests': '1m22.295s', 'x-ratelimit-reset-tokens': '1.32s', 'x-request-id': 'req_89a26160764bba22a89565761a506de4', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8d2756f03f74c9de-OTP', 'content-encoding': 'gzip', 'alt-svc': 'h3=":443"; ma=86400'})
2024-10-14 14:48:19,195 - DEBUG - request_id: req_89a26160764bba22a89565761a506de4
2024-10-14 14:48:19,195 - DEBUG - Instructor Raw Response: ChatCompletion(id='chatcmpl-AIDqcEZZEjLys4pJTpqyJByeboLp4', choices=[Choice(finish_reason='stop', index=0, logprobs=None, message=ChatCompletionMessage(content=None, refusal=None, role='assistant', function_call=None, tool_calls=[ChatCompletionMessageToolCall(id='call_t0A9jsxCVsNCFNhdcyrwmJUe', function=Function(arguments='{\n"action": "identify_parties"\n}', name='AgentAction'), type='function')]))], created=1728906498, model='gpt-4-0613', object='chat.completion', service_tier=None, system_fingerprint=None, usage=CompletionUsage(completion_tokens=10, prompt_tokens=280, total_tokens=290, completion_tokens_details=None, prompt_tokens_details=None))
2024-10-14 14:48:19,196 - DEBUG - Instructor Request: mode.value='tool_call', response_model=<class 'models.ContractParties'>, new_kwargs={'model': 'gpt-4', 'messages': [{'role': 'system', 'content': '\nYou are an AI agent specializing in contract creation and personal information extraction. \n\nYour role is:\n 1. Guide the process of extracting information from documents..\n 2. Verifying the extracted information with human input.\n 3. Identifying parties. \n 4. Constructing a contract. \n\n\nFollow the workflow precisely and ask for human input when needed.\n\n'}, {'role': 'user', 'content': 'Identify the buyer and seller from the given information:\n\nName: ISPILANTE SENTIMENT BRUSLI, Address: Videle Jud: Teleorman Sos. Giurgiului nr.1 695 TR\nName: VASILESCU ELENA, Address: Mun. Bucuresti Sec. 5 Str Nicolae Iorga nr.3 900 B'}], 'tools': [{'type': 'function', 'function': {'name': 'ContractParties', 'description': 'Correctly extracted `ContractParties` with all the required parameters with correct types', 'parameters': {'properties': {'buyer': {'description': 'Name of the buyer', 'title': 'Buyer', 'type': 'string'}, 'seller': {'description': 'Name of the seller', 'title': 'Seller', 'type': 'string'}}, 'required': ['buyer', 'seller'], 'type': 'object'}}}], 'tool_choice': {'type': 'function', 'function': {'name': 'ContractParties'}}}
2024-10-14 14:48:19,196 - DEBUG - max_retries: 1
2024-10-14 14:48:19,197 - DEBUG - Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'json_data': {'messages': [{'role': 'system', 'content': '\nYou are an AI agent specializing in contract creation and personal information extraction. \n\nYour role is:\n 1. Guide the process of extracting information from documents..\n 2. Verifying the extracted information with human input.\n 3. Identifying parties. \n 4. Constructing a contract. \n\n\nFollow the workflow precisely and ask for human input when needed.\n\n'}, {'role': 'user', 'content': 'Identify the buyer and seller from the given information:\n\nName: ISPILANTE SENTIMENT BRUSLI, Address: Videle Jud: Teleorman Sos. Giurgiului nr.1 695 TR\nName: VASILESCU ELENA, Address: Mun. Bucuresti Sec. 5 Str Nicolae Iorga nr.3 900 B'}], 'model': 'gpt-4', 'tool_choice': {'type': 'function', 'function': {'name': 'ContractParties'}}, 'tools': [{'type': 'function', 'function': {'name': 'ContractParties', 'description': 'Correctly extracted `ContractParties` with all the required parameters with correct types', 'parameters': {'properties': {'buyer': {'description': 'Name of the buyer', 'title': 'Buyer', 'type': 'string'}, 'seller': {'description': 'Name of the seller', 'title': 'Seller', 'type': 'string'}}, 'required': ['buyer', 'seller'], 'type': 'object'}}}]}}
2024-10-14 14:48:19,197 - DEBUG - Sending HTTP Request: POST https://api.openai.com/v1/chat/completions
2024-10-14 14:48:19,198 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-10-14 14:48:19,198 - DEBUG - send_request_headers.complete
2024-10-14 14:48:19,198 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-10-14 14:48:19,198 - DEBUG - send_request_body.complete
2024-10-14 14:48:19,198 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-10-14 14:48:21,221 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Mon, 14 Oct 2024 11:48:21 GMT'), (b'Content-Type', b'application/json'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'user-kzzh9hik9ryjiou4ftvhondh'), (b'openai-processing-ms', b'1833'), (b'openai-version', b'2020-10-01'), (b'x-ratelimit-limit-requests', b'10000'), (b'x-ratelimit-limit-tokens', b'10000'), (b'x-ratelimit-remaining-requests', b'9989'), (b'x-ratelimit-remaining-tokens', b'9693'), (b'x-ratelimit-reset-requests', b'1m30.039s'), (b'x-ratelimit-reset-tokens', b'1.839s'), (b'x-request-id', b'req_998d6f49f038add98e1fc578a4039f1e'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8d2756f5ce6fc9de-OTP'), (b'Content-Encoding', b'gzip'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-10-14 14:48:21,221 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2024-10-14 14:48:21,221 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-10-14 14:48:21,221 - DEBUG - receive_response_body.complete
2024-10-14 14:48:21,221 - DEBUG - response_closed.started
2024-10-14 14:48:21,222 - DEBUG - response_closed.complete
2024-10-14 14:48:21,222 - DEBUG - HTTP Response: POST https://api.openai.com/v1/chat/completions "200 OK" Headers({'date': 'Mon, 14 Oct 2024 11:48:21 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-expose-headers': 'X-Request-ID', 'openai-organization': 'user-kzzh9hik9ryjiou4ftvhondh', 'openai-processing-ms': '1833', 'openai-version': '2020-10-01', 'x-ratelimit-limit-requests': '10000', 'x-ratelimit-limit-tokens': '10000', 'x-ratelimit-remaining-requests': '9989', 'x-ratelimit-remaining-tokens': '9693', 'x-ratelimit-reset-requests': '1m30.039s', 'x-ratelimit-reset-tokens': '1.839s', 'x-request-id': 'req_998d6f49f038add98e1fc578a4039f1e', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8d2756f5ce6fc9de-OTP', 'content-encoding': 'gzip', 'alt-svc': 'h3=":443"; ma=86400'})
2024-10-14 14:48:21,222 - DEBUG - request_id: req_998d6f49f038add98e1fc578a4039f1e
2024-10-14 14:48:21,222 - DEBUG - Instructor Raw Response: ChatCompletion(id='chatcmpl-AIDqd5ZrhX7TWJz21V8Xy0nYbN8Vq', choices=[Choice(finish_reason='stop', index=0, logprobs=None, message=ChatCompletionMessage(content=None, refusal=None, role='assistant', function_call=None, tool_calls=[ChatCompletionMessageToolCall(id='call_8vezk4WCDBc7SrSOv4ro2cFV', function=Function(arguments='{\n"buyer": "VASILESCU ELENA",\n"seller": "ISPILANTE SENTIMENT BRUSLI"\n}', name='ContractParties'), type='function')]))], created=1728906499, model='gpt-4-0613', object='chat.completion', service_tier=None, system_fingerprint=None, usage=CompletionUsage(completion_tokens=27, prompt_tokens=232, total_tokens=259, completion_tokens_details=None, prompt_tokens_details=None))
2024-10-14 14:48:21,223 - DEBUG - Instructor Request: mode.value='tool_call', response_model=<class 'models.AgentAction'>, new_kwargs={'model': 'gpt-4', 'messages': [{'role': 'system', 'content': '\nYou are an AI agent specializing in contract creation and personal information extraction. \n\nYour role is:\n 1. Guide the process of extracting information from documents..\n 2. Verifying the extracted information with human input.\n 3. Identifying parties. \n 4. Constructing a contract. \n\n\nFollow the workflow precisely and ask for human input when needed.\n\n'}, {'role': 'user', 'content': "Current state: {'verified_pii_data': [{'name': 'ISPILANTE SENTIMENT BRUSLI', 'address': 'Videle Jud: Teleorman Sos. Giurgiului nr.1 695 TR'}, {'name': 'VASILESCU ELENA', 'address': 'Mun. Bucuresti Sec. 5 Str Nicolae Iorga nr.3 900 B'}], 'parties': {'buyer': 'VASILESCU ELENA', 'seller': 'ISPILANTE SENTIMENT BRUSLI'}, 'contract_details': None, 'contract': None, 'current_action': None}\nWhat action should be taken next? Choose from: extract_pii, identify_parties, determine_contract_type, construct_contract, finish"}], 'tools': [{'type': 'function', 'function': {'name': 'AgentAction', 'description': 'Correctly extracted `AgentAction` with all the required parameters with correct types', 'parameters': {'properties': {'action': {'description': 'Action to be performed by the agent', 'title': 'Action', 'type': 'string'}, 'parameters': {'additionalProperties': {'type': 'string'}, 'description': 'Parameters for the action', 'title': 'Parameters', 'type': 'object'}}, 'required': ['action', 'parameters'], 'type': 'object'}}}], 'tool_choice': {'type': 'function', 'function': {'name': 'AgentAction'}}}
2024-10-14 14:48:21,223 - DEBUG - max_retries: 1
2024-10-14 14:48:21,224 - DEBUG - Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'json_data': {'messages': [{'role': 'system', 'content': '\nYou are an AI agent specializing in contract creation and personal information extraction. \n\nYour role is:\n 1. Guide the process of extracting information from documents..\n 2. Verifying the extracted information with human input.\n 3. Identifying parties. \n 4. Constructing a contract. \n\n\nFollow the workflow precisely and ask for human input when needed.\n\n'}, {'role': 'user', 'content': "Current state: {'verified_pii_data': [{'name': 'ISPILANTE SENTIMENT BRUSLI', 'address': 'Videle Jud: Teleorman Sos. Giurgiului nr.1 695 TR'}, {'name': 'VASILESCU ELENA', 'address': 'Mun. Bucuresti Sec. 5 Str Nicolae Iorga nr.3 900 B'}], 'parties': {'buyer': 'VASILESCU ELENA', 'seller': 'ISPILANTE SENTIMENT BRUSLI'}, 'contract_details': None, 'contract': None, 'current_action': None}\nWhat action should be taken next? Choose from: extract_pii, identify_parties, determine_contract_type, construct_contract, finish"}], 'model': 'gpt-4', 'tool_choice': {'type': 'function', 'function': {'name': 'AgentAction'}}, 'tools': [{'type': 'function', 'function': {'name': 'AgentAction', 'description': 'Correctly extracted `AgentAction` with all the required parameters with correct types', 'parameters': {'properties': {'action': {'description': 'Action to be performed by the agent', 'title': 'Action', 'type': 'string'}, 'parameters': {'additionalProperties': {'type': 'string'}, 'description': 'Parameters for the action', 'title': 'Parameters', 'type': 'object'}}, 'required': ['action', 'parameters'], 'type': 'object'}}}]}}
2024-10-14 14:48:21,225 - DEBUG - Sending HTTP Request: POST https://api.openai.com/v1/chat/completions
2024-10-14 14:48:21,225 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-10-14 14:48:21,225 - DEBUG - send_request_headers.complete
2024-10-14 14:48:21,225 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-10-14 14:48:21,225 - DEBUG - send_request_body.complete
2024-10-14 14:48:21,225 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-10-14 14:48:22,087 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Mon, 14 Oct 2024 11:48:22 GMT'), (b'Content-Type', b'application/json'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'user-kzzh9hik9ryjiou4ftvhondh'), (b'openai-processing-ms', b'712'), (b'openai-version', b'2020-10-01'), (b'x-ratelimit-limit-requests', b'10000'), (b'x-ratelimit-limit-tokens', b'10000'), (b'x-ratelimit-remaining-requests', b'9988'), (b'x-ratelimit-remaining-tokens', b'9696'), (b'x-ratelimit-reset-requests', b'1m36.665s'), (b'x-ratelimit-reset-tokens', b'1.819s'), (b'x-request-id', b'req_dd4ccfd548e024266498a1dd34c05c6d'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8d2757026924c9de-OTP'), (b'Content-Encoding', b'gzip'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-10-14 14:48:22,087 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2024-10-14 14:48:22,087 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-10-14 14:48:22,087 - DEBUG - receive_response_body.complete
2024-10-14 14:48:22,087 - DEBUG - response_closed.started
2024-10-14 14:48:22,087 - DEBUG - response_closed.complete
2024-10-14 14:48:22,088 - DEBUG - HTTP Response: POST https://api.openai.com/v1/chat/completions "200 OK" Headers({'date': 'Mon, 14 Oct 2024 11:48:22 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-expose-headers': 'X-Request-ID', 'openai-organization': 'user-kzzh9hik9ryjiou4ftvhondh', 'openai-processing-ms': '712', 'openai-version': '2020-10-01', 'x-ratelimit-limit-requests': '10000', 'x-ratelimit-limit-tokens': '10000', 'x-ratelimit-remaining-requests': '9988', 'x-ratelimit-remaining-tokens': '9696', 'x-ratelimit-reset-requests': '1m36.665s', 'x-ratelimit-reset-tokens': '1.819s', 'x-request-id': 'req_dd4ccfd548e024266498a1dd34c05c6d', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8d2757026924c9de-OTP', 'content-encoding': 'gzip', 'alt-svc': 'h3=":443"; ma=86400'})
2024-10-14 14:48:22,088 - DEBUG - request_id: req_dd4ccfd548e024266498a1dd34c05c6d
2024-10-14 14:48:22,088 - DEBUG - Instructor Raw Response: ChatCompletion(id='chatcmpl-AIDqf3DkCNLq6vFeLM69uuDf61rWm', choices=[Choice(finish_reason='stop', index=0, logprobs=None, message=ChatCompletionMessage(content=None, refusal=None, role='assistant', function_call=None, tool_calls=[ChatCompletionMessageToolCall(id='call_wrEFQyrvi9B8gnmYPzocoajJ', function=Function(arguments='{\n"action": "determine_contract_type"\n}', name='AgentAction'), type='function')]))], created=1728906501, model='gpt-4-0613', object='chat.completion', service_tier=None, system_fingerprint=None, usage=CompletionUsage(completion_tokens=11, prompt_tokens=303, total_tokens=314, completion_tokens_details=None, prompt_tokens_details=None))
2024-10-14 14:48:26,447 - DEBUG - Instructor Request: mode.value='tool_call', response_model=<class 'models.ContractDetails'>, new_kwargs={'model': 'gpt-4', 'messages': [{'role': 'system', 'content': '\nYou are an AI agent specializing in contract creation and personal information extraction. \n\nYour role is:\n 1. Guide the process of extracting information from documents..\n 2. Verifying the extracted information with human input.\n 3. Identifying parties. \n 4. Constructing a contract. \n\n\nFollow the workflow precisely and ask for human input when needed.\n\n'}, {'role': 'user', 'content': 'Determine the contract details for a airbnb contract between VASILESCU ELENA and ISPILANTE SENTIMENT BRUSLI.'}], 'tools': [{'type': 'function', 'function': {'name': 'ContractDetails', 'description': 'Correctly extracted `ContractDetails` with all the required parameters with correct types', 'parameters': {'properties': {'contract_type': {'description': 'Type of contract (e.g., airbnb, buy-sell, it-consulting)', 'title': 'Contract Type', 'type': 'string'}, 'additional_info': {'additionalProperties': {'type': 'string'}, 'description': 'Additional information specific to the contract type', 'title': 'Additional Info', 'type': 'object'}}, 'required': ['additional_info', 'contract_type'], 'type': 'object'}}}], 'tool_choice': {'type': 'function', 'function': {'name': 'ContractDetails'}}}
2024-10-14 14:48:26,447 - DEBUG - max_retries: 1
2024-10-14 14:48:26,449 - DEBUG - Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'json_data': {'messages': [{'role': 'system', 'content': '\nYou are an AI agent specializing in contract creation and personal information extraction. \n\nYour role is:\n 1. Guide the process of extracting information from documents..\n 2. Verifying the extracted information with human input.\n 3. Identifying parties. \n 4. Constructing a contract. \n\n\nFollow the workflow precisely and ask for human input when needed.\n\n'}, {'role': 'user', 'content': 'Determine the contract details for a airbnb contract between VASILESCU ELENA and ISPILANTE SENTIMENT BRUSLI.'}], 'model': 'gpt-4', 'tool_choice': {'type': 'function', 'function': {'name': 'ContractDetails'}}, 'tools': [{'type': 'function', 'function': {'name': 'ContractDetails', 'description': 'Correctly extracted `ContractDetails` with all the required parameters with correct types', 'parameters': {'properties': {'contract_type': {'description': 'Type of contract (e.g., airbnb, buy-sell, it-consulting)', 'title': 'Contract Type', 'type': 'string'}, 'additional_info': {'additionalProperties': {'type': 'string'}, 'description': 'Additional information specific to the contract type', 'title': 'Additional Info', 'type': 'object'}}, 'required': ['additional_info', 'contract_type'], 'type': 'object'}}}]}}
2024-10-14 14:48:26,450 - DEBUG - Sending HTTP Request: POST https://api.openai.com/v1/chat/completions
2024-10-14 14:48:26,450 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-10-14 14:48:26,451 - DEBUG - send_request_headers.complete
2024-10-14 14:48:26,451 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-10-14 14:48:26,451 - DEBUG - send_request_body.complete
2024-10-14 14:48:26,451 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-10-14 14:48:27,417 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Mon, 14 Oct 2024 11:48:27 GMT'), (b'Content-Type', b'application/json'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'user-kzzh9hik9ryjiou4ftvhondh'), (b'openai-processing-ms', b'800'), (b'openai-version', b'2020-10-01'), (b'x-ratelimit-limit-requests', b'10000'), (b'x-ratelimit-limit-tokens', b'10000'), (b'x-ratelimit-remaining-requests', b'9988'), (b'x-ratelimit-remaining-tokens', b'9865'), (b'x-ratelimit-reset-requests', b'1m40.079s'), (b'x-ratelimit-reset-tokens', b'810ms'), (b'x-request-id', b'req_43dd8bd67726ee81cac4b567c6cce5d3'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8d2757231c1ec9de-OTP'), (b'Content-Encoding', b'gzip'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-10-14 14:48:27,417 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2024-10-14 14:48:27,417 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-10-14 14:48:27,418 - DEBUG - receive_response_body.complete
2024-10-14 14:48:27,418 - DEBUG - response_closed.started
2024-10-14 14:48:27,418 - DEBUG - response_closed.complete
2024-10-14 14:48:27,418 - DEBUG - HTTP Response: POST https://api.openai.com/v1/chat/completions "200 OK" Headers({'date': 'Mon, 14 Oct 2024 11:48:27 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-expose-headers': 'X-Request-ID', 'openai-organization': 'user-kzzh9hik9ryjiou4ftvhondh', 'openai-processing-ms': '800', 'openai-version': '2020-10-01', 'x-ratelimit-limit-requests': '10000', 'x-ratelimit-limit-tokens': '10000', 'x-ratelimit-remaining-requests': '9988', 'x-ratelimit-remaining-tokens': '9865', 'x-ratelimit-reset-requests': '1m40.079s', 'x-ratelimit-reset-tokens': '810ms', 'x-request-id': 'req_43dd8bd67726ee81cac4b567c6cce5d3', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8d2757231c1ec9de-OTP', 'content-encoding': 'gzip', 'alt-svc': 'h3=":443"; ma=86400'})
2024-10-14 14:48:27,418 - DEBUG - request_id: req_43dd8bd67726ee81cac4b567c6cce5d3
2024-10-14 14:48:27,419 - DEBUG - Instructor Raw Response: ChatCompletion(id='chatcmpl-AIDqkT9KqQUiN2mITNTfV5HlLZLkF', choices=[Choice(finish_reason='stop', index=0, logprobs=None, message=ChatCompletionMessage(content=None, refusal=None, role='assistant', function_call=None, tool_calls=[ChatCompletionMessageToolCall(id='call_8zFm4OyzuHRtRLocURoNmy6G', function=Function(arguments='{\n"contract_type": "airbnb"\n}', name='ContractDetails'), type='function')]))], created=1728906506, model='gpt-4-0613', object='chat.completion', service_tier=None, system_fingerprint=None, usage=CompletionUsage(completion_tokens=10, prompt_tokens=184, total_tokens=194, completion_tokens_details=None, prompt_tokens_details=None))
2024-10-14 14:48:27,420 - DEBUG - Instructor Request: mode.value='tool_call', response_model=<class 'models.AgentAction'>, new_kwargs={'model': 'gpt-4', 'messages': [{'role': 'system', 'content': '\nYou are an AI agent specializing in contract creation and personal information extraction. \n\nYour role is:\n 1. Guide the process of extracting information from documents..\n 2. Verifying the extracted information with human input.\n 3. Identifying parties. \n 4. Constructing a contract. \n\n\nFollow the workflow precisely and ask for human input when needed.\n\n'}, {'role': 'user', 'content': "Current state: {'verified_pii_data': [{'name': 'ISPILANTE SENTIMENT BRUSLI', 'address': 'Videle Jud: Teleorman Sos. Giurgiului nr.1 695 TR'}, {'name': 'VASILESCU ELENA', 'address': 'Mun. Bucuresti Sec. 5 Str Nicolae Iorga nr.3 900 B'}], 'parties': {'buyer': 'VASILESCU ELENA', 'seller': 'ISPILANTE SENTIMENT BRUSLI'}, 'contract_details': {'contract_type': 'airbnb', 'additional_info': {}}, 'contract': None, 'current_action': None}\nWhat action should be taken next? Choose from: extract_pii, identify_parties, determine_contract_type, construct_contract, finish"}], 'tools': [{'type': 'function', 'function': {'name': 'AgentAction', 'description': 'Correctly extracted `AgentAction` with all the required parameters with correct types', 'parameters': {'properties': {'action': {'description': 'Action to be performed by the agent', 'title': 'Action', 'type': 'string'}, 'parameters': {'additionalProperties': {'type': 'string'}, 'description': 'Parameters for the action', 'title': 'Parameters', 'type': 'object'}}, 'required': ['action', 'parameters'], 'type': 'object'}}}], 'tool_choice': {'type': 'function', 'function': {'name': 'AgentAction'}}}
2024-10-14 14:48:27,420 - DEBUG - max_retries: 1
2024-10-14 14:48:27,422 - DEBUG - Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'json_data': {'messages': [{'role': 'system', 'content': '\nYou are an AI agent specializing in contract creation and personal information extraction. \n\nYour role is:\n 1. Guide the process of extracting information from documents..\n 2. Verifying the extracted information with human input.\n 3. Identifying parties. \n 4. Constructing a contract. \n\n\nFollow the workflow precisely and ask for human input when needed.\n\n'}, {'role': 'user', 'content': "Current state: {'verified_pii_data': [{'name': 'ISPILANTE SENTIMENT BRUSLI', 'address': 'Videle Jud: Teleorman Sos. Giurgiului nr.1 695 TR'}, {'name': 'VASILESCU ELENA', 'address': 'Mun. Bucuresti Sec. 5 Str Nicolae Iorga nr.3 900 B'}], 'parties': {'buyer': 'VASILESCU ELENA', 'seller': 'ISPILANTE SENTIMENT BRUSLI'}, 'contract_details': {'contract_type': 'airbnb', 'additional_info': {}}, 'contract': None, 'current_action': None}\nWhat action should be taken next? Choose from: extract_pii, identify_parties, determine_contract_type, construct_contract, finish"}], 'model': 'gpt-4', 'tool_choice': {'type': 'function', 'function': {'name': 'AgentAction'}}, 'tools': [{'type': 'function', 'function': {'name': 'AgentAction', 'description': 'Correctly extracted `AgentAction` with all the required parameters with correct types', 'parameters': {'properties': {'action': {'description': 'Action to be performed by the agent', 'title': 'Action', 'type': 'string'}, 'parameters': {'additionalProperties': {'type': 'string'}, 'description': 'Parameters for the action', 'title': 'Parameters', 'type': 'object'}}, 'required': ['action', 'parameters'], 'type': 'object'}}}]}}
2024-10-14 14:48:27,423 - DEBUG - Sending HTTP Request: POST https://api.openai.com/v1/chat/completions
2024-10-14 14:48:27,423 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-10-14 14:48:27,423 - DEBUG - send_request_headers.complete
2024-10-14 14:48:27,423 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-10-14 14:48:27,423 - DEBUG - send_request_body.complete
2024-10-14 14:48:27,423 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-10-14 14:48:28,454 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Mon, 14 Oct 2024 11:48:28 GMT'), (b'Content-Type', b'application/json'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'user-kzzh9hik9ryjiou4ftvhondh'), (b'openai-processing-ms', b'873'), (b'openai-version', b'2020-10-01'), (b'x-ratelimit-limit-requests', b'10000'), (b'x-ratelimit-limit-tokens', b'10000'), (b'x-ratelimit-remaining-requests', b'9987'), (b'x-ratelimit-remaining-tokens', b'9719'), (b'x-ratelimit-reset-requests', b'1m47.749s'), (b'x-ratelimit-reset-tokens', b'1.681s'), (b'x-request-id', b'req_7932905619dd4d0220ac968ddd7434c3'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8d2757292e65c9de-OTP'), (b'Content-Encoding', b'gzip'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-10-14 14:48:28,454 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2024-10-14 14:48:28,454 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-10-14 14:48:28,455 - DEBUG - receive_response_body.complete
2024-10-14 14:48:28,455 - DEBUG - response_closed.started
2024-10-14 14:48:28,455 - DEBUG - response_closed.complete
2024-10-14 14:48:28,455 - DEBUG - HTTP Response: POST https://api.openai.com/v1/chat/completions "200 OK" Headers({'date': 'Mon, 14 Oct 2024 11:48:28 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-expose-headers': 'X-Request-ID', 'openai-organization': 'user-kzzh9hik9ryjiou4ftvhondh', 'openai-processing-ms': '873', 'openai-version': '2020-10-01', 'x-ratelimit-limit-requests': '10000', 'x-ratelimit-limit-tokens': '10000', 'x-ratelimit-remaining-requests': '9987', 'x-ratelimit-remaining-tokens': '9719', 'x-ratelimit-reset-requests': '1m47.749s', 'x-ratelimit-reset-tokens': '1.681s', 'x-request-id': 'req_7932905619dd4d0220ac968ddd7434c3', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8d2757292e65c9de-OTP', 'content-encoding': 'gzip', 'alt-svc': 'h3=":443"; ma=86400'})
2024-10-14 14:48:28,455 - DEBUG - request_id: req_7932905619dd4d0220ac968ddd7434c3
2024-10-14 14:48:28,456 - DEBUG - Instructor Raw Response: ChatCompletion(id='chatcmpl-AIDqlGuxtLO4x8WQqxXsNmbg8wGzX', choices=[Choice(finish_reason='stop', index=0, logprobs=None, message=ChatCompletionMessage(content=None, refusal=None, role='assistant', function_call=None, tool_calls=[ChatCompletionMessageToolCall(id='call_8vezk4WCDBc7SrSOv4ro2cFV', function=Function(arguments='{\n"action": "determine_contract_type"\n}', name='AgentAction'), type='function')]))], created=1728906507, model='gpt-4-0613', object='chat.completion', service_tier=None, system_fingerprint=None, usage=CompletionUsage(completion_tokens=11, prompt_tokens=315, total_tokens=326, completion_tokens_details=None, prompt_tokens_details=None))
2024-10-14 14:48:32,858 - DEBUG - Instructor Request: mode.value='tool_call', response_model=<class 'models.ContractDetails'>, new_kwargs={'model': 'gpt-4', 'messages': [{'role': 'system', 'content': '\nYou are an AI agent specializing in contract creation and personal information extraction. \n\nYour role is:\n 1. Guide the process of extracting information from documents..\n 2. Verifying the extracted information with human input.\n 3. Identifying parties. \n 4. Constructing a contract. \n\n\nFollow the workflow precisely and ask for human input when needed.\n\n'}, {'role': 'user', 'content': 'Determine the contract details for a it-consulting contract between VASILESCU ELENA and ISPILANTE SENTIMENT BRUSLI.'}], 'tools': [{'type': 'function', 'function': {'name': 'ContractDetails', 'description': 'Correctly extracted `ContractDetails` with all the required parameters with correct types', 'parameters': {'properties': {'contract_type': {'description': 'Type of contract (e.g., airbnb, buy-sell, it-consulting)', 'title': 'Contract Type', 'type': 'string'}, 'additional_info': {'additionalProperties': {'type': 'string'}, 'description': 'Additional information specific to the contract type', 'title': 'Additional Info', 'type': 'object'}}, 'required': ['additional_info', 'contract_type'], 'type': 'object'}}}], 'tool_choice': {'type': 'function', 'function': {'name': 'ContractDetails'}}}
2024-10-14 14:48:32,858 - DEBUG - max_retries: 1
2024-10-14 14:48:32,861 - DEBUG - Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'json_data': {'messages': [{'role': 'system', 'content': '\nYou are an AI agent specializing in contract creation and personal information extraction. \n\nYour role is:\n 1. Guide the process of extracting information from documents..\n 2. Verifying the extracted information with human input.\n 3. Identifying parties. \n 4. Constructing a contract. \n\n\nFollow the workflow precisely and ask for human input when needed.\n\n'}, {'role': 'user', 'content': 'Determine the contract details for a it-consulting contract between VASILESCU ELENA and ISPILANTE SENTIMENT BRUSLI.'}], 'model': 'gpt-4', 'tool_choice': {'type': 'function', 'function': {'name': 'ContractDetails'}}, 'tools': [{'type': 'function', 'function': {'name': 'ContractDetails', 'description': 'Correctly extracted `ContractDetails` with all the required parameters with correct types', 'parameters': {'properties': {'contract_type': {'description': 'Type of contract (e.g., airbnb, buy-sell, it-consulting)', 'title': 'Contract Type', 'type': 'string'}, 'additional_info': {'additionalProperties': {'type': 'string'}, 'description': 'Additional information specific to the contract type', 'title': 'Additional Info', 'type': 'object'}}, 'required': ['additional_info', 'contract_type'], 'type': 'object'}}}]}}
2024-10-14 14:48:32,861 - DEBUG - Sending HTTP Request: POST https://api.openai.com/v1/chat/completions
2024-10-14 14:48:32,861 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-10-14 14:48:32,862 - DEBUG - send_request_headers.complete
2024-10-14 14:48:32,862 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-10-14 14:48:32,862 - DEBUG - send_request_body.complete
2024-10-14 14:48:32,862 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-10-14 14:48:34,018 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Mon, 14 Oct 2024 11:48:34 GMT'), (b'Content-Type', b'application/json'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'user-kzzh9hik9ryjiou4ftvhondh'), (b'openai-processing-ms', b'998'), (b'openai-version', b'2020-10-01'), (b'x-ratelimit-limit-requests', b'10000'), (b'x-ratelimit-limit-tokens', b'10000'), (b'x-ratelimit-remaining-requests', b'9987'), (b'x-ratelimit-remaining-tokens', b'9864'), (b'x-ratelimit-reset-requests', b'1m50.946s'), (b'x-ratelimit-reset-tokens', b'816ms'), (b'x-request-id', b'req_c38918228e5facd6758082a1d49bd8d1'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8d27574b2d6bc9de-OTP'), (b'Content-Encoding', b'gzip'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-10-14 14:48:34,018 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2024-10-14 14:48:34,018 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-10-14 14:48:34,018 - DEBUG - receive_response_body.complete
2024-10-14 14:48:34,018 - DEBUG - response_closed.started
2024-10-14 14:48:34,018 - DEBUG - response_closed.complete
2024-10-14 14:48:34,018 - DEBUG - HTTP Response: POST https://api.openai.com/v1/chat/completions "200 OK" Headers({'date': 'Mon, 14 Oct 2024 11:48:34 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-expose-headers': 'X-Request-ID', 'openai-organization': 'user-kzzh9hik9ryjiou4ftvhondh', 'openai-processing-ms': '998', 'openai-version': '2020-10-01', 'x-ratelimit-limit-requests': '10000', 'x-ratelimit-limit-tokens': '10000', 'x-ratelimit-remaining-requests': '9987', 'x-ratelimit-remaining-tokens': '9864', 'x-ratelimit-reset-requests': '1m50.946s', 'x-ratelimit-reset-tokens': '816ms', 'x-request-id': 'req_c38918228e5facd6758082a1d49bd8d1', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8d27574b2d6bc9de-OTP', 'content-encoding': 'gzip', 'alt-svc': 'h3=":443"; ma=86400'})
2024-10-14 14:48:34,018 - DEBUG - request_id: req_c38918228e5facd6758082a1d49bd8d1
2024-10-14 14:48:34,019 - DEBUG - Instructor Raw Response: ChatCompletion(id='chatcmpl-AIDqrjpsX5nk1AOnP0Eo5GRDt3d6o', choices=[Choice(finish_reason='stop', index=0, logprobs=None, message=ChatCompletionMessage(content=None, refusal=None, role='assistant', function_call=None, tool_calls=[ChatCompletionMessageToolCall(id='call_B9A3Mv2BcN2kjmqRpxyuthmt', function=Function(arguments='{\n  "contract_type": "it-consulting"\n}', name='ContractDetails'), type='function')]))], created=1728906513, model='gpt-4-0613', object='chat.completion', service_tier=None, system_fingerprint=None, usage=CompletionUsage(completion_tokens=13, prompt_tokens=186, total_tokens=199, completion_tokens_details=None, prompt_tokens_details=None))
2024-10-14 14:48:34,020 - DEBUG - Instructor Request: mode.value='tool_call', response_model=<class 'models.AgentAction'>, new_kwargs={'model': 'gpt-4', 'messages': [{'role': 'system', 'content': '\nYou are an AI agent specializing in contract creation and personal information extraction. \n\nYour role is:\n 1. Guide the process of extracting information from documents..\n 2. Verifying the extracted information with human input.\n 3. Identifying parties. \n 4. Constructing a contract. \n\n\nFollow the workflow precisely and ask for human input when needed.\n\n'}, {'role': 'user', 'content': "Current state: {'verified_pii_data': [{'name': 'ISPILANTE SENTIMENT BRUSLI', 'address': 'Videle Jud: Teleorman Sos. Giurgiului nr.1 695 TR'}, {'name': 'VASILESCU ELENA', 'address': 'Mun. Bucuresti Sec. 5 Str Nicolae Iorga nr.3 900 B'}], 'parties': {'buyer': 'VASILESCU ELENA', 'seller': 'ISPILANTE SENTIMENT BRUSLI'}, 'contract_details': {'contract_type': 'it-consulting', 'additional_info': {}}, 'contract': None, 'current_action': None}\nWhat action should be taken next? Choose from: extract_pii, identify_parties, determine_contract_type, construct_contract, finish"}], 'tools': [{'type': 'function', 'function': {'name': 'AgentAction', 'description': 'Correctly extracted `AgentAction` with all the required parameters with correct types', 'parameters': {'properties': {'action': {'description': 'Action to be performed by the agent', 'title': 'Action', 'type': 'string'}, 'parameters': {'additionalProperties': {'type': 'string'}, 'description': 'Parameters for the action', 'title': 'Parameters', 'type': 'object'}}, 'required': ['action', 'parameters'], 'type': 'object'}}}], 'tool_choice': {'type': 'function', 'function': {'name': 'AgentAction'}}}
2024-10-14 14:48:34,020 - DEBUG - max_retries: 1
2024-10-14 14:48:34,021 - DEBUG - Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'json_data': {'messages': [{'role': 'system', 'content': '\nYou are an AI agent specializing in contract creation and personal information extraction. \n\nYour role is:\n 1. Guide the process of extracting information from documents..\n 2. Verifying the extracted information with human input.\n 3. Identifying parties. \n 4. Constructing a contract. \n\n\nFollow the workflow precisely and ask for human input when needed.\n\n'}, {'role': 'user', 'content': "Current state: {'verified_pii_data': [{'name': 'ISPILANTE SENTIMENT BRUSLI', 'address': 'Videle Jud: Teleorman Sos. Giurgiului nr.1 695 TR'}, {'name': 'VASILESCU ELENA', 'address': 'Mun. Bucuresti Sec. 5 Str Nicolae Iorga nr.3 900 B'}], 'parties': {'buyer': 'VASILESCU ELENA', 'seller': 'ISPILANTE SENTIMENT BRUSLI'}, 'contract_details': {'contract_type': 'it-consulting', 'additional_info': {}}, 'contract': None, 'current_action': None}\nWhat action should be taken next? Choose from: extract_pii, identify_parties, determine_contract_type, construct_contract, finish"}], 'model': 'gpt-4', 'tool_choice': {'type': 'function', 'function': {'name': 'AgentAction'}}, 'tools': [{'type': 'function', 'function': {'name': 'AgentAction', 'description': 'Correctly extracted `AgentAction` with all the required parameters with correct types', 'parameters': {'properties': {'action': {'description': 'Action to be performed by the agent', 'title': 'Action', 'type': 'string'}, 'parameters': {'additionalProperties': {'type': 'string'}, 'description': 'Parameters for the action', 'title': 'Parameters', 'type': 'object'}}, 'required': ['action', 'parameters'], 'type': 'object'}}}]}}
2024-10-14 14:48:34,025 - DEBUG - Sending HTTP Request: POST https://api.openai.com/v1/chat/completions
2024-10-14 14:48:34,025 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-10-14 14:48:34,026 - DEBUG - send_request_headers.complete
2024-10-14 14:48:34,026 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-10-14 14:48:34,026 - DEBUG - send_request_body.complete
2024-10-14 14:48:34,026 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-10-14 14:48:34,872 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Mon, 14 Oct 2024 11:48:35 GMT'), (b'Content-Type', b'application/json'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'user-kzzh9hik9ryjiou4ftvhondh'), (b'openai-processing-ms', b'694'), (b'openai-version', b'2020-10-01'), (b'x-ratelimit-limit-requests', b'10000'), (b'x-ratelimit-limit-tokens', b'10000'), (b'x-ratelimit-remaining-requests', b'9986'), (b'x-ratelimit-remaining-tokens', b'9711'), (b'x-ratelimit-reset-requests', b'1m58.42s'), (b'x-ratelimit-reset-tokens', b'1.728s'), (b'x-request-id', b'req_df6012b9aa2d9a104c215ac8314c67af'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8d2757527b09c9de-OTP'), (b'Content-Encoding', b'gzip'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-10-14 14:48:34,872 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2024-10-14 14:48:34,872 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-10-14 14:48:34,872 - DEBUG - receive_response_body.complete
2024-10-14 14:48:34,872 - DEBUG - response_closed.started
2024-10-14 14:48:34,872 - DEBUG - response_closed.complete
2024-10-14 14:48:34,872 - DEBUG - HTTP Response: POST https://api.openai.com/v1/chat/completions "200 OK" Headers({'date': 'Mon, 14 Oct 2024 11:48:35 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-expose-headers': 'X-Request-ID', 'openai-organization': 'user-kzzh9hik9ryjiou4ftvhondh', 'openai-processing-ms': '694', 'openai-version': '2020-10-01', 'x-ratelimit-limit-requests': '10000', 'x-ratelimit-limit-tokens': '10000', 'x-ratelimit-remaining-requests': '9986', 'x-ratelimit-remaining-tokens': '9711', 'x-ratelimit-reset-requests': '1m58.42s', 'x-ratelimit-reset-tokens': '1.728s', 'x-request-id': 'req_df6012b9aa2d9a104c215ac8314c67af', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8d2757527b09c9de-OTP', 'content-encoding': 'gzip', 'alt-svc': 'h3=":443"; ma=86400'})
2024-10-14 14:48:34,872 - DEBUG - request_id: req_df6012b9aa2d9a104c215ac8314c67af
2024-10-14 14:48:34,873 - DEBUG - Instructor Raw Response: ChatCompletion(id='chatcmpl-AIDqsZQ09zLyF49mTTlN9sGp3IIp7', choices=[Choice(finish_reason='stop', index=0, logprobs=None, message=ChatCompletionMessage(content=None, refusal=None, role='assistant', function_call=None, tool_calls=[ChatCompletionMessageToolCall(id='call_DdaZ4f1wnYfzABF6vkeZIx5w', function=Function(arguments='{\n"action": "construct_contract"\n}', name='AgentAction'), type='function')]))], created=1728906514, model='gpt-4-0613', object='chat.completion', service_tier=None, system_fingerprint=None, usage=CompletionUsage(completion_tokens=9, prompt_tokens=317, total_tokens=326, completion_tokens_details=None, prompt_tokens_details=None))
2024-10-14 14:48:34,874 - DEBUG - Instructor Request: mode.value='tool_call', response_model=<class 'models.AgentAction'>, new_kwargs={'model': 'gpt-4', 'messages': [{'role': 'system', 'content': '\nYou are an AI agent specializing in contract creation and personal information extraction. \n\nYour role is:\n 1. Guide the process of extracting information from documents..\n 2. Verifying the extracted information with human input.\n 3. Identifying parties. \n 4. Constructing a contract. \n\n\nFollow the workflow precisely and ask for human input when needed.\n\n'}, {'role': 'user', 'content': "Current state: {'verified_pii_data': [{'name': 'ISPILANTE SENTIMENT BRUSLI', 'address': 'Videle Jud: Teleorman Sos. Giurgiului nr.1 695 TR'}, {'name': 'VASILESCU ELENA', 'address': 'Mun. Bucuresti Sec. 5 Str Nicolae Iorga nr.3 900 B'}], 'parties': {'buyer': 'VASILESCU ELENA', 'seller': 'ISPILANTE SENTIMENT BRUSLI'}, 'contract_details': {'contract_type': 'it-consulting', 'additional_info': {}}, 'contract': None, 'current_action': None}\nWhat action should be taken next? Choose from: extract_pii, identify_parties, determine_contract_type, construct_contract, finish"}], 'tools': [{'type': 'function', 'function': {'name': 'AgentAction', 'description': 'Correctly extracted `AgentAction` with all the required parameters with correct types', 'parameters': {'properties': {'action': {'description': 'Action to be performed by the agent', 'title': 'Action', 'type': 'string'}, 'parameters': {'additionalProperties': {'type': 'string'}, 'description': 'Parameters for the action', 'title': 'Parameters', 'type': 'object'}}, 'required': ['action', 'parameters'], 'type': 'object'}}}], 'tool_choice': {'type': 'function', 'function': {'name': 'AgentAction'}}}
2024-10-14 14:48:34,874 - DEBUG - max_retries: 1
2024-10-14 14:48:34,876 - DEBUG - Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'json_data': {'messages': [{'role': 'system', 'content': '\nYou are an AI agent specializing in contract creation and personal information extraction. \n\nYour role is:\n 1. Guide the process of extracting information from documents..\n 2. Verifying the extracted information with human input.\n 3. Identifying parties. \n 4. Constructing a contract. \n\n\nFollow the workflow precisely and ask for human input when needed.\n\n'}, {'role': 'user', 'content': "Current state: {'verified_pii_data': [{'name': 'ISPILANTE SENTIMENT BRUSLI', 'address': 'Videle Jud: Teleorman Sos. Giurgiului nr.1 695 TR'}, {'name': 'VASILESCU ELENA', 'address': 'Mun. Bucuresti Sec. 5 Str Nicolae Iorga nr.3 900 B'}], 'parties': {'buyer': 'VASILESCU ELENA', 'seller': 'ISPILANTE SENTIMENT BRUSLI'}, 'contract_details': {'contract_type': 'it-consulting', 'additional_info': {}}, 'contract': None, 'current_action': None}\nWhat action should be taken next? Choose from: extract_pii, identify_parties, determine_contract_type, construct_contract, finish"}], 'model': 'gpt-4', 'tool_choice': {'type': 'function', 'function': {'name': 'AgentAction'}}, 'tools': [{'type': 'function', 'function': {'name': 'AgentAction', 'description': 'Correctly extracted `AgentAction` with all the required parameters with correct types', 'parameters': {'properties': {'action': {'description': 'Action to be performed by the agent', 'title': 'Action', 'type': 'string'}, 'parameters': {'additionalProperties': {'type': 'string'}, 'description': 'Parameters for the action', 'title': 'Parameters', 'type': 'object'}}, 'required': ['action', 'parameters'], 'type': 'object'}}}]}}
2024-10-14 14:48:34,876 - DEBUG - Sending HTTP Request: POST https://api.openai.com/v1/chat/completions
2024-10-14 14:48:34,876 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-10-14 14:48:34,877 - DEBUG - send_request_headers.complete
2024-10-14 14:48:34,877 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-10-14 14:48:34,877 - DEBUG - send_request_body.complete
2024-10-14 14:48:34,877 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-10-14 14:48:35,898 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Mon, 14 Oct 2024 11:48:36 GMT'), (b'Content-Type', b'application/json'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'user-kzzh9hik9ryjiou4ftvhondh'), (b'openai-processing-ms', b'861'), (b'openai-version', b'2020-10-01'), (b'x-ratelimit-limit-requests', b'10000'), (b'x-ratelimit-limit-tokens', b'10000'), (b'x-ratelimit-remaining-requests', b'9985'), (b'x-ratelimit-remaining-tokens', b'9529'), (b'x-ratelimit-reset-requests', b'2m6.2s'), (b'x-ratelimit-reset-tokens', b'2.824s'), (b'x-request-id', b'req_550ba1d5f784bba06543537cc66727f9'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8d275757cba7c9de-OTP'), (b'Content-Encoding', b'gzip'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-10-14 14:48:35,898 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2024-10-14 14:48:35,898 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-10-14 14:48:35,899 - DEBUG - receive_response_body.complete
2024-10-14 14:48:35,899 - DEBUG - response_closed.started
2024-10-14 14:48:35,899 - DEBUG - response_closed.complete
2024-10-14 14:48:35,899 - DEBUG - HTTP Response: POST https://api.openai.com/v1/chat/completions "200 OK" Headers({'date': 'Mon, 14 Oct 2024 11:48:36 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-expose-headers': 'X-Request-ID', 'openai-organization': 'user-kzzh9hik9ryjiou4ftvhondh', 'openai-processing-ms': '861', 'openai-version': '2020-10-01', 'x-ratelimit-limit-requests': '10000', 'x-ratelimit-limit-tokens': '10000', 'x-ratelimit-remaining-requests': '9985', 'x-ratelimit-remaining-tokens': '9529', 'x-ratelimit-reset-requests': '2m6.2s', 'x-ratelimit-reset-tokens': '2.824s', 'x-request-id': 'req_550ba1d5f784bba06543537cc66727f9', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8d275757cba7c9de-OTP', 'content-encoding': 'gzip', 'alt-svc': 'h3=":443"; ma=86400'})
2024-10-14 14:48:35,899 - DEBUG - request_id: req_550ba1d5f784bba06543537cc66727f9
2024-10-14 14:48:35,900 - DEBUG - Instructor Raw Response: ChatCompletion(id='chatcmpl-AIDqtlSeMcZqHaZyMeQdUD7Hpa2cI', choices=[Choice(finish_reason='stop', index=0, logprobs=None, message=ChatCompletionMessage(content=None, refusal=None, role='assistant', function_call=None, tool_calls=[ChatCompletionMessageToolCall(id='call_rPthjjCbFROTgh02ENhfaCQ0', function=Function(arguments='{\n"action": "determine_contract_type"\n}', name='AgentAction'), type='function')]))], created=1728906515, model='gpt-4-0613', object='chat.completion', service_tier=None, system_fingerprint=None, usage=CompletionUsage(completion_tokens=11, prompt_tokens=317, total_tokens=328, completion_tokens_details=None, prompt_tokens_details=None))
2024-10-14 14:49:28,223 - DEBUG - close.started
2024-10-14 14:49:28,224 - DEBUG - close.complete
2024-10-14 14:49:28,224 - ERROR - Task exception was never retrieved
future: <Task finished name='Task-1' coro=<agent_workflow() done, defined at D:\deve\contract_automation\src\main.py:25> exception=KeyboardInterrupt()>
Traceback (most recent call last):
  File "D:\deve\contract_automation\src\main.py", line 79, in <module>
    asyncio.run(agent_workflow())
  File "D:\deve\contract_automation\.venv\Lib\site-packages\nest_asyncio.py", line 30, in run
    return loop.run_until_complete(task)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\deve\contract_automation\.venv\Lib\site-packages\nest_asyncio.py", line 92, in run_until_complete
    self._run_once()
  File "D:\deve\contract_automation\.venv\Lib\site-packages\nest_asyncio.py", line 133, in _run_once
    handle._run()
  File "C:\Users\neuro\.rye\py\cpython@3.12.0\Lib\asyncio\events.py", line 84, in _run
    self._context.run(self._callback, *self._args)
  File "C:\Users\neuro\.rye\py\cpython@3.12.0\Lib\asyncio\tasks.py", line 386, in __wakeup
    self.__step()
  File "C:\Users\neuro\.rye\py\cpython@3.12.0\Lib\asyncio\tasks.py", line 293, in __step
    self.__step_run_and_handle_result(exc)
  File "C:\Users\neuro\.rye\py\cpython@3.12.0\Lib\asyncio\tasks.py", line 304, in __step_run_and_handle_result
    result = coro.send(None)
             ^^^^^^^^^^^^^^^
  File "D:\deve\contract_automation\src\main.py", line 45, in agent_workflow
    contract_type = input("Enter contract type (airbnb, buy-sell, it-consulting): ").lower().replace(" ", "-")
                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
KeyboardInterrupt
2024-10-14 14:49:44,145 - WARNING - Neither CUDA nor MPS are available - defaulting to CPU. Note: This module is much faster with a GPU.
2024-10-14 14:49:45,461 - DEBUG - load_ssl_context verify=True cert=None trust_env=True http2=False
2024-10-14 14:49:45,462 - DEBUG - load_verify_locations cafile='D:\\deve\\contract_automation\\.venv\\Lib\\site-packages\\certifi\\cacert.pem'
2024-10-14 14:49:45,783 - DEBUG - Patching `client.chat.completions.create` with mode=<Mode.TOOLS: 'tool_call'>
2024-10-14 14:49:45,783 - DEBUG - Using proactor: IocpProactor
2024-10-14 14:49:45,802 - DEBUG - STREAM b'IHDR' 16 13
2024-10-14 14:49:45,802 - DEBUG - STREAM b'iCCP' 41 3152
2024-10-14 14:49:45,802 - DEBUG - iCCP profile name b'ICC Profile'
2024-10-14 14:49:45,802 - DEBUG - Compression method 0
2024-10-14 14:49:45,802 - DEBUG - STREAM b'eXIf' 3205 138
2024-10-14 14:49:45,802 - DEBUG - STREAM b'pHYs' 3355 9
2024-10-14 14:49:45,802 - DEBUG - STREAM b'iTXt' 3376 470
2024-10-14 14:49:45,802 - DEBUG - STREAM b'iDOT' 3858 28
2024-10-14 14:49:45,802 - DEBUG - b'iDOT' 3858 28 (unknown)
2024-10-14 14:49:45,802 - DEBUG - STREAM b'IDAT' 3898 16384
2024-10-14 14:49:45,803 - DEBUG - STREAM b'IHDR' 16 13
2024-10-14 14:49:45,803 - DEBUG - STREAM b'iCCP' 41 3152
2024-10-14 14:49:45,803 - DEBUG - iCCP profile name b'ICC Profile'
2024-10-14 14:49:45,803 - DEBUG - Compression method 0
2024-10-14 14:49:45,803 - DEBUG - STREAM b'eXIf' 3205 138
2024-10-14 14:49:45,803 - DEBUG - STREAM b'pHYs' 3355 9
2024-10-14 14:49:45,803 - DEBUG - STREAM b'iTXt' 3376 470
2024-10-14 14:49:45,803 - DEBUG - STREAM b'iDOT' 3858 28
2024-10-14 14:49:45,803 - DEBUG - b'iDOT' 3858 28 (unknown)
2024-10-14 14:49:45,803 - DEBUG - STREAM b'IDAT' 3898 16384
2024-10-14 14:49:45,813 - DEBUG - tag: XResolution (282) - type: rational (5) Tag Location: 22 - Data Location: 62 - value: b'\x00\x00\x00\x90\x00\x00\x00\x01'
2024-10-14 14:49:45,813 - DEBUG - tag: YResolution (283) - type: rational (5) Tag Location: 34 - Data Location: 70 - value: b'\x00\x00\x00\x90\x00\x00\x00\x01'
2024-10-14 14:49:45,813 - DEBUG - tag: ResolutionUnit (296) - type: short (3) - value: b'\x00\x02'
2024-10-14 14:49:45,813 - DEBUG - tag: ExifIFD (34665) - type: long (4) - value: b'\x00\x00\x00N'
2024-10-14 14:49:45,813 - DEBUG - Error closing: Operation on closed image
2024-10-14 14:49:47,783 - DEBUG - STREAM b'IHDR' 16 13
2024-10-14 14:49:47,783 - DEBUG - STREAM b'iCCP' 41 3152
2024-10-14 14:49:47,783 - DEBUG - iCCP profile name b'ICC Profile'
2024-10-14 14:49:47,783 - DEBUG - Compression method 0
2024-10-14 14:49:47,783 - DEBUG - STREAM b'eXIf' 3205 138
2024-10-14 14:49:47,783 - DEBUG - STREAM b'pHYs' 3355 9
2024-10-14 14:49:47,783 - DEBUG - STREAM b'iTXt' 3376 471
2024-10-14 14:49:47,783 - DEBUG - STREAM b'iDOT' 3859 28
2024-10-14 14:49:47,783 - DEBUG - b'iDOT' 3859 28 (unknown)
2024-10-14 14:49:47,783 - DEBUG - STREAM b'IDAT' 3899 16384
2024-10-14 14:49:47,783 - DEBUG - STREAM b'IHDR' 16 13
2024-10-14 14:49:47,783 - DEBUG - STREAM b'iCCP' 41 3152
2024-10-14 14:49:47,783 - DEBUG - iCCP profile name b'ICC Profile'
2024-10-14 14:49:47,783 - DEBUG - Compression method 0
2024-10-14 14:49:47,784 - DEBUG - STREAM b'eXIf' 3205 138
2024-10-14 14:49:47,784 - DEBUG - STREAM b'pHYs' 3355 9
2024-10-14 14:49:47,784 - DEBUG - STREAM b'iTXt' 3376 471
2024-10-14 14:49:47,784 - DEBUG - STREAM b'iDOT' 3859 28
2024-10-14 14:49:47,784 - DEBUG - b'iDOT' 3859 28 (unknown)
2024-10-14 14:49:47,784 - DEBUG - STREAM b'IDAT' 3899 16384
2024-10-14 14:49:47,801 - DEBUG - tag: XResolution (282) - type: rational (5) Tag Location: 22 - Data Location: 62 - value: b'\x00\x00\x00\x90\x00\x00\x00\x01'
2024-10-14 14:49:47,801 - DEBUG - tag: YResolution (283) - type: rational (5) Tag Location: 34 - Data Location: 70 - value: b'\x00\x00\x00\x90\x00\x00\x00\x01'
2024-10-14 14:49:47,801 - DEBUG - tag: ResolutionUnit (296) - type: short (3) - value: b'\x00\x02'
2024-10-14 14:49:47,801 - DEBUG - tag: ExifIFD (34665) - type: long (4) - value: b'\x00\x00\x00N'
2024-10-14 14:49:47,802 - DEBUG - Error closing: Operation on closed image
2024-10-14 14:49:50,372 - DEBUG - Instructor Request: mode.value='tool_call', response_model=<class 'models.AgentAction'>, new_kwargs={'model': 'gpt-4', 'messages': [{'role': 'system', 'content': '\nYou are an AI agent specializing in contract creation and personal information extraction. \n\nYour role is:\n 1. Guide the process of extracting information from documents..\n 2. Verifying the extracted information with human input.\n 3. Identifying parties. \n 4. Constructing a contract. \n\n\nFollow the workflow precisely and ask for human input when needed.\n\n'}, {'role': 'user', 'content': "Current state: {'verified_pii_data': [], 'parties': None, 'contract_details': None, 'contract': None, 'current_action': None}\nWhat action should be taken next? Choose from: extract_pii, identify_parties, determine_contract_type, construct_contract, finish"}], 'tools': [{'type': 'function', 'function': {'name': 'AgentAction', 'description': 'Correctly extracted `AgentAction` with all the required parameters with correct types', 'parameters': {'properties': {'action': {'description': 'Action to be performed by the agent', 'title': 'Action', 'type': 'string'}, 'parameters': {'additionalProperties': {'type': 'string'}, 'description': 'Parameters for the action', 'title': 'Parameters', 'type': 'object'}}, 'required': ['action', 'parameters'], 'type': 'object'}}}], 'tool_choice': {'type': 'function', 'function': {'name': 'AgentAction'}}}
2024-10-14 14:49:50,373 - DEBUG - max_retries: 1
2024-10-14 14:49:50,375 - DEBUG - Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'json_data': {'messages': [{'role': 'system', 'content': '\nYou are an AI agent specializing in contract creation and personal information extraction. \n\nYour role is:\n 1. Guide the process of extracting information from documents..\n 2. Verifying the extracted information with human input.\n 3. Identifying parties. \n 4. Constructing a contract. \n\n\nFollow the workflow precisely and ask for human input when needed.\n\n'}, {'role': 'user', 'content': "Current state: {'verified_pii_data': [], 'parties': None, 'contract_details': None, 'contract': None, 'current_action': None}\nWhat action should be taken next? Choose from: extract_pii, identify_parties, determine_contract_type, construct_contract, finish"}], 'model': 'gpt-4', 'tool_choice': {'type': 'function', 'function': {'name': 'AgentAction'}}, 'tools': [{'type': 'function', 'function': {'name': 'AgentAction', 'description': 'Correctly extracted `AgentAction` with all the required parameters with correct types', 'parameters': {'properties': {'action': {'description': 'Action to be performed by the agent', 'title': 'Action', 'type': 'string'}, 'parameters': {'additionalProperties': {'type': 'string'}, 'description': 'Parameters for the action', 'title': 'Parameters', 'type': 'object'}}, 'required': ['action', 'parameters'], 'type': 'object'}}}]}}
2024-10-14 14:49:50,416 - DEBUG - Sending HTTP Request: POST https://api.openai.com/v1/chat/completions
2024-10-14 14:49:50,416 - DEBUG - connect_tcp.started host='api.openai.com' port=443 local_address=None timeout=5.0 socket_options=None
2024-10-14 14:49:50,450 - DEBUG - connect_tcp.complete return_value=<httpcore._backends.sync.SyncStream object at 0x0000025BE9FBEAB0>
2024-10-14 14:49:50,450 - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x0000025BE9E15B50> server_hostname='api.openai.com' timeout=5.0
2024-10-14 14:49:50,458 - DEBUG - start_tls.complete return_value=<httpcore._backends.sync.SyncStream object at 0x0000025BE9FBE810>
2024-10-14 14:49:50,459 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-10-14 14:49:50,459 - DEBUG - send_request_headers.complete
2024-10-14 14:49:50,459 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-10-14 14:49:50,459 - DEBUG - send_request_body.complete
2024-10-14 14:49:50,459 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-10-14 14:49:51,220 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Mon, 14 Oct 2024 11:49:51 GMT'), (b'Content-Type', b'application/json'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'user-kzzh9hik9ryjiou4ftvhondh'), (b'openai-processing-ms', b'603'), (b'openai-version', b'2020-10-01'), (b'x-ratelimit-limit-requests', b'10000'), (b'x-ratelimit-limit-tokens', b'10000'), (b'x-ratelimit-remaining-requests', b'9993'), (b'x-ratelimit-remaining-tokens', b'9829'), (b'x-ratelimit-reset-requests', b'59.263s'), (b'x-ratelimit-reset-tokens', b'1.026s'), (b'x-request-id', b'req_dd2498b1ebe5c0b5bbdc7f1223ffd1f0'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'CF-Cache-Status', b'DYNAMIC'), (b'Set-Cookie', b'__cf_bm=8if3dGU69g3S0dKDU5NiLaYMnDO4TCrZfJzWn9tGk_I-1728906591-1.0.1.1-AeJR8mjr55ubW5jiioJi2Pjgr.PHihG1yeuHsejqDCSq0r9yCLJ9zRXYbpb1cFUbdDHb.cvvhoxgzn0hbZID8Q; path=/; expires=Mon, 14-Oct-24 12:19:51 GMT; domain=.api.openai.com; HttpOnly; Secure; SameSite=None'), (b'X-Content-Type-Options', b'nosniff'), (b'Set-Cookie', b'_cfuvid=4oCGKRNQvi36_HSV3p8nrC8g_tdpLKoWJFOhaC5oEvg-1728906591503-0.0.1.1-604800000; path=/; domain=.api.openai.com; HttpOnly; Secure; SameSite=None'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8d2759302f0ee0c5-OTP'), (b'Content-Encoding', b'gzip'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-10-14 14:49:51,221 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2024-10-14 14:49:51,221 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-10-14 14:49:51,222 - DEBUG - receive_response_body.complete
2024-10-14 14:49:51,222 - DEBUG - response_closed.started
2024-10-14 14:49:51,222 - DEBUG - response_closed.complete
2024-10-14 14:49:51,222 - DEBUG - HTTP Response: POST https://api.openai.com/v1/chat/completions "200 OK" Headers([('date', 'Mon, 14 Oct 2024 11:49:51 GMT'), ('content-type', 'application/json'), ('transfer-encoding', 'chunked'), ('connection', 'keep-alive'), ('access-control-expose-headers', 'X-Request-ID'), ('openai-organization', 'user-kzzh9hik9ryjiou4ftvhondh'), ('openai-processing-ms', '603'), ('openai-version', '2020-10-01'), ('x-ratelimit-limit-requests', '10000'), ('x-ratelimit-limit-tokens', '10000'), ('x-ratelimit-remaining-requests', '9993'), ('x-ratelimit-remaining-tokens', '9829'), ('x-ratelimit-reset-requests', '59.263s'), ('x-ratelimit-reset-tokens', '1.026s'), ('x-request-id', 'req_dd2498b1ebe5c0b5bbdc7f1223ffd1f0'), ('strict-transport-security', 'max-age=31536000; includeSubDomains; preload'), ('cf-cache-status', 'DYNAMIC'), ('set-cookie', '__cf_bm=8if3dGU69g3S0dKDU5NiLaYMnDO4TCrZfJzWn9tGk_I-1728906591-1.0.1.1-AeJR8mjr55ubW5jiioJi2Pjgr.PHihG1yeuHsejqDCSq0r9yCLJ9zRXYbpb1cFUbdDHb.cvvhoxgzn0hbZID8Q; path=/; expires=Mon, 14-Oct-24 12:19:51 GMT; domain=.api.openai.com; HttpOnly; Secure; SameSite=None'), ('x-content-type-options', 'nosniff'), ('set-cookie', '_cfuvid=4oCGKRNQvi36_HSV3p8nrC8g_tdpLKoWJFOhaC5oEvg-1728906591503-0.0.1.1-604800000; path=/; domain=.api.openai.com; HttpOnly; Secure; SameSite=None'), ('server', 'cloudflare'), ('cf-ray', '8d2759302f0ee0c5-OTP'), ('content-encoding', 'gzip'), ('alt-svc', 'h3=":443"; ma=86400')])
2024-10-14 14:49:51,222 - DEBUG - request_id: req_dd2498b1ebe5c0b5bbdc7f1223ffd1f0
2024-10-14 14:49:51,225 - DEBUG - Instructor Raw Response: ChatCompletion(id='chatcmpl-AIDs6IalIKJVTEMKmE3HXqIMPn5oP', choices=[Choice(finish_reason='stop', index=0, logprobs=None, message=ChatCompletionMessage(content=None, refusal=None, role='assistant', function_call=None, tool_calls=[ChatCompletionMessageToolCall(id='call_D00USs3f1FHx5MkTQDcQTJ27', function=Function(arguments='{\n"action": "extract_pii"\n}', name='AgentAction'), type='function')]))], created=1728906590, model='gpt-4-0613', object='chat.completion', service_tier=None, system_fingerprint=None, usage=CompletionUsage(completion_tokens=10, prompt_tokens=202, total_tokens=212, completion_tokens_details=None, prompt_tokens_details=None))
2024-10-14 14:49:51,226 - DEBUG - Instructor Request: mode.value='tool_call', response_model=<class 'models.PIIData'>, new_kwargs={'model': 'gpt-4', 'messages': [{'role': 'system', 'content': '\nYou are an AI agent specializing in contract creation and personal information extraction. \n\nYour role is:\n 1. Guide the process of extracting information from documents..\n 2. Verifying the extracted information with human input.\n 3. Identifying parties. \n 4. Constructing a contract. \n\n\nFollow the workflow precisely and ask for human input when needed.\n\n'}, {'role': 'user', 'content': "Extract the name and address from the given text:\n\nROUMANIE ROMAWI ROMANIA Carte CARTE De |Dentitate IDEnTITY D'iDENTITE seria TR Na 409131 CarD cNP 1891113341181 Nume/Nom/Last name T525M ISPILANTE Prenume/Prenom/First namo SENTIMENT BRUSLI Cetatenle/Nallonallte/Nallonallly Sox SexeiSox Romn\u0103 ROU M Loc nastere/Liou do naissancelPlace ol birth Or\u0219. Videle Jud.Teleorman Dom IlulAdresse/Addrass Videle Jud: Teleorman Sos. Giurgiului nr.1 695 TR Emisa dolDelivree parlIssuad by ValabilltatelValldlte Valldlty SPCLEP Videle 04.11.11-13.11.2018 IDROUISPILANTE<<SENTIMENT <BRUSLI<<<< TR409131<0R0u8911137M181113513411813 Or\u0219:"}], 'tools': [{'type': 'function', 'function': {'name': 'PIIData', 'description': 'Correctly extracted `PIIData` with all the required parameters with correct types', 'parameters': {'properties': {'name': {'description': 'Full name of the person', 'title': 'Name', 'type': 'string'}, 'address': {'description': 'Residential address of the person', 'title': 'Address', 'type': 'string'}}, 'required': ['address', 'name'], 'type': 'object'}}}], 'tool_choice': {'type': 'function', 'function': {'name': 'PIIData'}}}
2024-10-14 14:49:51,226 - DEBUG - max_retries: 1
2024-10-14 14:49:51,227 - DEBUG - Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'json_data': {'messages': [{'role': 'system', 'content': '\nYou are an AI agent specializing in contract creation and personal information extraction. \n\nYour role is:\n 1. Guide the process of extracting information from documents..\n 2. Verifying the extracted information with human input.\n 3. Identifying parties. \n 4. Constructing a contract. \n\n\nFollow the workflow precisely and ask for human input when needed.\n\n'}, {'role': 'user', 'content': "Extract the name and address from the given text:\n\nROUMANIE ROMAWI ROMANIA Carte CARTE De |Dentitate IDEnTITY D'iDENTITE seria TR Na 409131 CarD cNP 1891113341181 Nume/Nom/Last name T525M ISPILANTE Prenume/Prenom/First namo SENTIMENT BRUSLI Cetatenle/Nallonallte/Nallonallly Sox SexeiSox Romn\u0103 ROU M Loc nastere/Liou do naissancelPlace ol birth Or\u0219. Videle Jud.Teleorman Dom IlulAdresse/Addrass Videle Jud: Teleorman Sos. Giurgiului nr.1 695 TR Emisa dolDelivree parlIssuad by ValabilltatelValldlte Valldlty SPCLEP Videle 04.11.11-13.11.2018 IDROUISPILANTE<<SENTIMENT <BRUSLI<<<< TR409131<0R0u8911137M181113513411813 Or\u0219:"}], 'model': 'gpt-4', 'tool_choice': {'type': 'function', 'function': {'name': 'PIIData'}}, 'tools': [{'type': 'function', 'function': {'name': 'PIIData', 'description': 'Correctly extracted `PIIData` with all the required parameters with correct types', 'parameters': {'properties': {'name': {'description': 'Full name of the person', 'title': 'Name', 'type': 'string'}, 'address': {'description': 'Residential address of the person', 'title': 'Address', 'type': 'string'}}, 'required': ['address', 'name'], 'type': 'object'}}}]}}
2024-10-14 14:49:51,228 - DEBUG - Sending HTTP Request: POST https://api.openai.com/v1/chat/completions
2024-10-14 14:49:51,228 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-10-14 14:49:51,228 - DEBUG - send_request_headers.complete
2024-10-14 14:49:51,228 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-10-14 14:49:51,228 - DEBUG - send_request_body.complete
2024-10-14 14:49:51,228 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-10-14 14:49:53,218 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Mon, 14 Oct 2024 11:49:53 GMT'), (b'Content-Type', b'application/json'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'user-kzzh9hik9ryjiou4ftvhondh'), (b'openai-processing-ms', b'1832'), (b'openai-version', b'2020-10-01'), (b'x-ratelimit-limit-requests', b'10000'), (b'x-ratelimit-limit-tokens', b'10000'), (b'x-ratelimit-remaining-requests', b'9992'), (b'x-ratelimit-remaining-tokens', b'9652'), (b'x-ratelimit-reset-requests', b'1m7.13s'), (b'x-ratelimit-reset-tokens', b'2.082s'), (b'x-request-id', b'req_56606074589d37913e2e67dab593cd8c'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8d275934ff39e0c5-OTP'), (b'Content-Encoding', b'gzip'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-10-14 14:49:53,218 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2024-10-14 14:49:53,218 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-10-14 14:49:53,219 - DEBUG - receive_response_body.complete
2024-10-14 14:49:53,219 - DEBUG - response_closed.started
2024-10-14 14:49:53,219 - DEBUG - response_closed.complete
2024-10-14 14:49:53,219 - DEBUG - HTTP Response: POST https://api.openai.com/v1/chat/completions "200 OK" Headers({'date': 'Mon, 14 Oct 2024 11:49:53 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-expose-headers': 'X-Request-ID', 'openai-organization': 'user-kzzh9hik9ryjiou4ftvhondh', 'openai-processing-ms': '1832', 'openai-version': '2020-10-01', 'x-ratelimit-limit-requests': '10000', 'x-ratelimit-limit-tokens': '10000', 'x-ratelimit-remaining-requests': '9992', 'x-ratelimit-remaining-tokens': '9652', 'x-ratelimit-reset-requests': '1m7.13s', 'x-ratelimit-reset-tokens': '2.082s', 'x-request-id': 'req_56606074589d37913e2e67dab593cd8c', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8d275934ff39e0c5-OTP', 'content-encoding': 'gzip', 'alt-svc': 'h3=":443"; ma=86400'})
2024-10-14 14:49:53,219 - DEBUG - request_id: req_56606074589d37913e2e67dab593cd8c
2024-10-14 14:49:53,220 - DEBUG - Instructor Raw Response: ChatCompletion(id='chatcmpl-AIDs7y5Sr1PB0f59DdzoiGhy4mjCF', choices=[Choice(finish_reason='stop', index=0, logprobs=None, message=ChatCompletionMessage(content=None, refusal=None, role='assistant', function_call=None, tool_calls=[ChatCompletionMessageToolCall(id='call_Z0zM8l2JK6jR0xE9aJvNsXLv', function=Function(arguments='{\n"name": "ISPILANTE SENTIMENT BRUSLI",\n"address": "Videle Jud: Teleorman Sos. Giurgiului nr.1 695 TR"\n}', name='PIIData'), type='function')]))], created=1728906591, model='gpt-4-0613', object='chat.completion', service_tier=None, system_fingerprint=None, usage=CompletionUsage(completion_tokens=39, prompt_tokens=377, total_tokens=416, completion_tokens_details=None, prompt_tokens_details=None))
2024-10-14 14:49:55,300 - DEBUG - Instructor Request: mode.value='tool_call', response_model=<class 'models.PIIData'>, new_kwargs={'model': 'gpt-4', 'messages': [{'role': 'system', 'content': '\nYou are an AI agent specializing in contract creation and personal information extraction. \n\nYour role is:\n 1. Guide the process of extracting information from documents..\n 2. Verifying the extracted information with human input.\n 3. Identifying parties. \n 4. Constructing a contract. \n\n\nFollow the workflow precisely and ask for human input when needed.\n\n'}, {'role': 'user', 'content': "Extract the name and address from the given text:\n\nROUMANIE ROVIAINIA ROMANIA Carte Carte DE iDentitate IdEnTITY Didentite seala SS Nr 099994 Card CNP 2410415400542 93coQ Nume/NomiLast name VASILESCU Pronume/Prenom/Flrst name ELENA < CetatenielNatlonallte/Natlonalily M Sex SexelSer Romn\u0103 ROU Loc nastore/Licu de naissancolF 'ar0 ol birth Mun: Dej Jud. Cluj Domiciliu/Adresse A ess Mun. Bucuresti Sec. 5 Str Nicolae Iorga nr.3 900 B Emisa delDelivree parllssued by Valabilitate/Vahidile Valiouy D.EPAB.D- 06.01.17-15.04.2077 IDROUVASILESCU<<ELENA<<<<<<<<<<<<<<< SS099994<0R0u4104151F770415824003421"}], 'tools': [{'type': 'function', 'function': {'name': 'PIIData', 'description': 'Correctly extracted `PIIData` with all the required parameters with correct types', 'parameters': {'properties': {'name': {'description': 'Full name of the person', 'title': 'Name', 'type': 'string'}, 'address': {'description': 'Residential address of the person', 'title': 'Address', 'type': 'string'}}, 'required': ['address', 'name'], 'type': 'object'}}}], 'tool_choice': {'type': 'function', 'function': {'name': 'PIIData'}}}
2024-10-14 14:49:55,301 - DEBUG - max_retries: 1
2024-10-14 14:49:55,303 - DEBUG - Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'json_data': {'messages': [{'role': 'system', 'content': '\nYou are an AI agent specializing in contract creation and personal information extraction. \n\nYour role is:\n 1. Guide the process of extracting information from documents..\n 2. Verifying the extracted information with human input.\n 3. Identifying parties. \n 4. Constructing a contract. \n\n\nFollow the workflow precisely and ask for human input when needed.\n\n'}, {'role': 'user', 'content': "Extract the name and address from the given text:\n\nROUMANIE ROVIAINIA ROMANIA Carte Carte DE iDentitate IdEnTITY Didentite seala SS Nr 099994 Card CNP 2410415400542 93coQ Nume/NomiLast name VASILESCU Pronume/Prenom/Flrst name ELENA < CetatenielNatlonallte/Natlonalily M Sex SexelSer Romn\u0103 ROU Loc nastore/Licu de naissancolF 'ar0 ol birth Mun: Dej Jud. Cluj Domiciliu/Adresse A ess Mun. Bucuresti Sec. 5 Str Nicolae Iorga nr.3 900 B Emisa delDelivree parllssued by Valabilitate/Vahidile Valiouy D.EPAB.D- 06.01.17-15.04.2077 IDROUVASILESCU<<ELENA<<<<<<<<<<<<<<< SS099994<0R0u4104151F770415824003421"}], 'model': 'gpt-4', 'tool_choice': {'type': 'function', 'function': {'name': 'PIIData'}}, 'tools': [{'type': 'function', 'function': {'name': 'PIIData', 'description': 'Correctly extracted `PIIData` with all the required parameters with correct types', 'parameters': {'properties': {'name': {'description': 'Full name of the person', 'title': 'Name', 'type': 'string'}, 'address': {'description': 'Residential address of the person', 'title': 'Address', 'type': 'string'}}, 'required': ['address', 'name'], 'type': 'object'}}}]}}
2024-10-14 14:49:55,303 - DEBUG - Sending HTTP Request: POST https://api.openai.com/v1/chat/completions
2024-10-14 14:49:55,304 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-10-14 14:49:55,304 - DEBUG - send_request_headers.complete
2024-10-14 14:49:55,304 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-10-14 14:49:55,304 - DEBUG - send_request_body.complete
2024-10-14 14:49:55,304 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-10-14 14:49:57,427 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Mon, 14 Oct 2024 11:49:57 GMT'), (b'Content-Type', b'application/json'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'user-kzzh9hik9ryjiou4ftvhondh'), (b'openai-processing-ms', b'1974'), (b'openai-version', b'2020-10-01'), (b'x-ratelimit-limit-requests', b'10000'), (b'x-ratelimit-limit-tokens', b'10000'), (b'x-ratelimit-remaining-requests', b'9991'), (b'x-ratelimit-remaining-tokens', b'9742'), (b'x-ratelimit-reset-requests', b'1m11.703s'), (b'x-ratelimit-reset-tokens', b'1.548s'), (b'x-request-id', b'req_a2050b1c3005a89ded5095ed202e12d1'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8d27594e7de7e0c5-OTP'), (b'Content-Encoding', b'gzip'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-10-14 14:49:57,428 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2024-10-14 14:49:57,428 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-10-14 14:49:57,428 - DEBUG - receive_response_body.complete
2024-10-14 14:49:57,428 - DEBUG - response_closed.started
2024-10-14 14:49:57,428 - DEBUG - response_closed.complete
2024-10-14 14:49:57,428 - DEBUG - HTTP Response: POST https://api.openai.com/v1/chat/completions "200 OK" Headers({'date': 'Mon, 14 Oct 2024 11:49:57 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-expose-headers': 'X-Request-ID', 'openai-organization': 'user-kzzh9hik9ryjiou4ftvhondh', 'openai-processing-ms': '1974', 'openai-version': '2020-10-01', 'x-ratelimit-limit-requests': '10000', 'x-ratelimit-limit-tokens': '10000', 'x-ratelimit-remaining-requests': '9991', 'x-ratelimit-remaining-tokens': '9742', 'x-ratelimit-reset-requests': '1m11.703s', 'x-ratelimit-reset-tokens': '1.548s', 'x-request-id': 'req_a2050b1c3005a89ded5095ed202e12d1', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8d27594e7de7e0c5-OTP', 'content-encoding': 'gzip', 'alt-svc': 'h3=":443"; ma=86400'})
2024-10-14 14:49:57,429 - DEBUG - request_id: req_a2050b1c3005a89ded5095ed202e12d1
2024-10-14 14:49:57,429 - DEBUG - Instructor Raw Response: ChatCompletion(id='chatcmpl-AIDsBYxZeGLtsQJ0DjrOKPOwe1ZML', choices=[Choice(finish_reason='stop', index=0, logprobs=None, message=ChatCompletionMessage(content=None, refusal=None, role='assistant', function_call=None, tool_calls=[ChatCompletionMessageToolCall(id='call_0qgvcZWKmZd89PZPAhqCYcvs', function=Function(arguments='{\n"name": "ELENA VASILESCU",\n"address": "Mun. Bucuresti Sec. 5 Str Nicolae Iorga nr.3 900 B"\n}', name='PIIData'), type='function')]))], created=1728906595, model='gpt-4-0613', object='chat.completion', service_tier=None, system_fingerprint=None, usage=CompletionUsage(completion_tokens=42, prompt_tokens=380, total_tokens=422, completion_tokens_details=None, prompt_tokens_details=None))
2024-10-14 14:49:58,396 - DEBUG - Instructor Request: mode.value='tool_call', response_model=<class 'models.AgentAction'>, new_kwargs={'model': 'gpt-4', 'messages': [{'role': 'system', 'content': '\nYou are an AI agent specializing in contract creation and personal information extraction. \n\nYour role is:\n 1. Guide the process of extracting information from documents..\n 2. Verifying the extracted information with human input.\n 3. Identifying parties. \n 4. Constructing a contract. \n\n\nFollow the workflow precisely and ask for human input when needed.\n\n'}, {'role': 'user', 'content': "Current state: {'verified_pii_data': [{'name': 'ISPILANTE SENTIMENT BRUSLI', 'address': 'Videle Jud: Teleorman Sos. Giurgiului nr.1 695 TR'}, {'name': 'ELENA VASILESCU', 'address': 'Mun. Bucuresti Sec. 5 Str Nicolae Iorga nr.3 900 B'}], 'parties': None, 'contract_details': None, 'contract': None, 'current_action': None}\nWhat action should be taken next? Choose from: extract_pii, identify_parties, determine_contract_type, construct_contract, finish"}], 'tools': [{'type': 'function', 'function': {'name': 'AgentAction', 'description': 'Correctly extracted `AgentAction` with all the required parameters with correct types', 'parameters': {'properties': {'action': {'description': 'Action to be performed by the agent', 'title': 'Action', 'type': 'string'}, 'parameters': {'additionalProperties': {'type': 'string'}, 'description': 'Parameters for the action', 'title': 'Parameters', 'type': 'object'}}, 'required': ['action', 'parameters'], 'type': 'object'}}}], 'tool_choice': {'type': 'function', 'function': {'name': 'AgentAction'}}}
2024-10-14 14:49:58,396 - DEBUG - max_retries: 1
2024-10-14 14:49:58,398 - DEBUG - Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'json_data': {'messages': [{'role': 'system', 'content': '\nYou are an AI agent specializing in contract creation and personal information extraction. \n\nYour role is:\n 1. Guide the process of extracting information from documents..\n 2. Verifying the extracted information with human input.\n 3. Identifying parties. \n 4. Constructing a contract. \n\n\nFollow the workflow precisely and ask for human input when needed.\n\n'}, {'role': 'user', 'content': "Current state: {'verified_pii_data': [{'name': 'ISPILANTE SENTIMENT BRUSLI', 'address': 'Videle Jud: Teleorman Sos. Giurgiului nr.1 695 TR'}, {'name': 'ELENA VASILESCU', 'address': 'Mun. Bucuresti Sec. 5 Str Nicolae Iorga nr.3 900 B'}], 'parties': None, 'contract_details': None, 'contract': None, 'current_action': None}\nWhat action should be taken next? Choose from: extract_pii, identify_parties, determine_contract_type, construct_contract, finish"}], 'model': 'gpt-4', 'tool_choice': {'type': 'function', 'function': {'name': 'AgentAction'}}, 'tools': [{'type': 'function', 'function': {'name': 'AgentAction', 'description': 'Correctly extracted `AgentAction` with all the required parameters with correct types', 'parameters': {'properties': {'action': {'description': 'Action to be performed by the agent', 'title': 'Action', 'type': 'string'}, 'parameters': {'additionalProperties': {'type': 'string'}, 'description': 'Parameters for the action', 'title': 'Parameters', 'type': 'object'}}, 'required': ['action', 'parameters'], 'type': 'object'}}}]}}
2024-10-14 14:49:58,399 - DEBUG - Sending HTTP Request: POST https://api.openai.com/v1/chat/completions
2024-10-14 14:49:58,399 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-10-14 14:49:58,399 - DEBUG - send_request_headers.complete
2024-10-14 14:49:58,399 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-10-14 14:49:58,399 - DEBUG - send_request_body.complete
2024-10-14 14:49:58,400 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-10-14 14:49:59,241 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Mon, 14 Oct 2024 11:49:59 GMT'), (b'Content-Type', b'application/json'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'user-kzzh9hik9ryjiou4ftvhondh'), (b'openai-processing-ms', b'690'), (b'openai-version', b'2020-10-01'), (b'x-ratelimit-limit-requests', b'10000'), (b'x-ratelimit-limit-tokens', b'10000'), (b'x-ratelimit-remaining-requests', b'9991'), (b'x-ratelimit-remaining-tokens', b'9780'), (b'x-ratelimit-reset-requests', b'1m17.243s'), (b'x-ratelimit-reset-tokens', b'1.32s'), (b'x-request-id', b'req_41aef2c6e15a3c0b9d8be1bc1b1d9e77'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8d275961ce73e0c5-OTP'), (b'Content-Encoding', b'gzip'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-10-14 14:49:59,242 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2024-10-14 14:49:59,242 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-10-14 14:49:59,242 - DEBUG - receive_response_body.complete
2024-10-14 14:49:59,242 - DEBUG - response_closed.started
2024-10-14 14:49:59,242 - DEBUG - response_closed.complete
2024-10-14 14:49:59,242 - DEBUG - HTTP Response: POST https://api.openai.com/v1/chat/completions "200 OK" Headers({'date': 'Mon, 14 Oct 2024 11:49:59 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-expose-headers': 'X-Request-ID', 'openai-organization': 'user-kzzh9hik9ryjiou4ftvhondh', 'openai-processing-ms': '690', 'openai-version': '2020-10-01', 'x-ratelimit-limit-requests': '10000', 'x-ratelimit-limit-tokens': '10000', 'x-ratelimit-remaining-requests': '9991', 'x-ratelimit-remaining-tokens': '9780', 'x-ratelimit-reset-requests': '1m17.243s', 'x-ratelimit-reset-tokens': '1.32s', 'x-request-id': 'req_41aef2c6e15a3c0b9d8be1bc1b1d9e77', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8d275961ce73e0c5-OTP', 'content-encoding': 'gzip', 'alt-svc': 'h3=":443"; ma=86400'})
2024-10-14 14:49:59,242 - DEBUG - request_id: req_41aef2c6e15a3c0b9d8be1bc1b1d9e77
2024-10-14 14:49:59,243 - DEBUG - Instructor Raw Response: ChatCompletion(id='chatcmpl-AIDsEeAo0ZwmD8oOllkw5S1sQoOHe', choices=[Choice(finish_reason='stop', index=0, logprobs=None, message=ChatCompletionMessage(content=None, refusal=None, role='assistant', function_call=None, tool_calls=[ChatCompletionMessageToolCall(id='call_GOd2VX5wsxkAn7gbHR6jjWxL', function=Function(arguments='{\n"action": "identify_parties"\n}', name='AgentAction'), type='function')]))], created=1728906598, model='gpt-4-0613', object='chat.completion', service_tier=None, system_fingerprint=None, usage=CompletionUsage(completion_tokens=10, prompt_tokens=281, total_tokens=291, completion_tokens_details=None, prompt_tokens_details=None))
2024-10-14 14:49:59,244 - DEBUG - Instructor Request: mode.value='tool_call', response_model=<class 'models.ContractParties'>, new_kwargs={'model': 'gpt-4', 'messages': [{'role': 'system', 'content': '\nYou are an AI agent specializing in contract creation and personal information extraction. \n\nYour role is:\n 1. Guide the process of extracting information from documents..\n 2. Verifying the extracted information with human input.\n 3. Identifying parties. \n 4. Constructing a contract. \n\n\nFollow the workflow precisely and ask for human input when needed.\n\n'}, {'role': 'user', 'content': 'Identify the buyer and seller from the given information:\n\nName: ISPILANTE SENTIMENT BRUSLI, Address: Videle Jud: Teleorman Sos. Giurgiului nr.1 695 TR\nName: ELENA VASILESCU, Address: Mun. Bucuresti Sec. 5 Str Nicolae Iorga nr.3 900 B'}], 'tools': [{'type': 'function', 'function': {'name': 'ContractParties', 'description': 'Correctly extracted `ContractParties` with all the required parameters with correct types', 'parameters': {'properties': {'buyer': {'description': 'Name of the buyer', 'title': 'Buyer', 'type': 'string'}, 'seller': {'description': 'Name of the seller', 'title': 'Seller', 'type': 'string'}}, 'required': ['buyer', 'seller'], 'type': 'object'}}}], 'tool_choice': {'type': 'function', 'function': {'name': 'ContractParties'}}}
2024-10-14 14:49:59,244 - DEBUG - max_retries: 1
2024-10-14 14:49:59,246 - DEBUG - Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'json_data': {'messages': [{'role': 'system', 'content': '\nYou are an AI agent specializing in contract creation and personal information extraction. \n\nYour role is:\n 1. Guide the process of extracting information from documents..\n 2. Verifying the extracted information with human input.\n 3. Identifying parties. \n 4. Constructing a contract. \n\n\nFollow the workflow precisely and ask for human input when needed.\n\n'}, {'role': 'user', 'content': 'Identify the buyer and seller from the given information:\n\nName: ISPILANTE SENTIMENT BRUSLI, Address: Videle Jud: Teleorman Sos. Giurgiului nr.1 695 TR\nName: ELENA VASILESCU, Address: Mun. Bucuresti Sec. 5 Str Nicolae Iorga nr.3 900 B'}], 'model': 'gpt-4', 'tool_choice': {'type': 'function', 'function': {'name': 'ContractParties'}}, 'tools': [{'type': 'function', 'function': {'name': 'ContractParties', 'description': 'Correctly extracted `ContractParties` with all the required parameters with correct types', 'parameters': {'properties': {'buyer': {'description': 'Name of the buyer', 'title': 'Buyer', 'type': 'string'}, 'seller': {'description': 'Name of the seller', 'title': 'Seller', 'type': 'string'}}, 'required': ['buyer', 'seller'], 'type': 'object'}}}]}}
2024-10-14 14:49:59,247 - DEBUG - Sending HTTP Request: POST https://api.openai.com/v1/chat/completions
2024-10-14 14:49:59,247 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-10-14 14:49:59,247 - DEBUG - send_request_headers.complete
2024-10-14 14:49:59,247 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-10-14 14:49:59,247 - DEBUG - send_request_body.complete
2024-10-14 14:49:59,247 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-10-14 14:50:01,092 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Mon, 14 Oct 2024 11:50:01 GMT'), (b'Content-Type', b'application/json'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'user-kzzh9hik9ryjiou4ftvhondh'), (b'openai-processing-ms', b'1699'), (b'openai-version', b'2020-10-01'), (b'x-ratelimit-limit-requests', b'10000'), (b'x-ratelimit-limit-tokens', b'10000'), (b'x-ratelimit-remaining-requests', b'9990'), (b'x-ratelimit-remaining-tokens', b'9683'), (b'x-ratelimit-reset-requests', b'1m25.041s'), (b'x-ratelimit-reset-tokens', b'1.899s'), (b'x-request-id', b'req_f41751e746b95c67a44e72f29435aa63'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8d2759671f82e0c5-OTP'), (b'Content-Encoding', b'gzip'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-10-14 14:50:01,092 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2024-10-14 14:50:01,092 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-10-14 14:50:01,092 - DEBUG - receive_response_body.complete
2024-10-14 14:50:01,092 - DEBUG - response_closed.started
2024-10-14 14:50:01,092 - DEBUG - response_closed.complete
2024-10-14 14:50:01,092 - DEBUG - HTTP Response: POST https://api.openai.com/v1/chat/completions "200 OK" Headers({'date': 'Mon, 14 Oct 2024 11:50:01 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-expose-headers': 'X-Request-ID', 'openai-organization': 'user-kzzh9hik9ryjiou4ftvhondh', 'openai-processing-ms': '1699', 'openai-version': '2020-10-01', 'x-ratelimit-limit-requests': '10000', 'x-ratelimit-limit-tokens': '10000', 'x-ratelimit-remaining-requests': '9990', 'x-ratelimit-remaining-tokens': '9683', 'x-ratelimit-reset-requests': '1m25.041s', 'x-ratelimit-reset-tokens': '1.899s', 'x-request-id': 'req_f41751e746b95c67a44e72f29435aa63', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8d2759671f82e0c5-OTP', 'content-encoding': 'gzip', 'alt-svc': 'h3=":443"; ma=86400'})
2024-10-14 14:50:01,092 - DEBUG - request_id: req_f41751e746b95c67a44e72f29435aa63
2024-10-14 14:50:01,093 - DEBUG - Instructor Raw Response: ChatCompletion(id='chatcmpl-AIDsFI7el7kLLCCr6Uccj7Ts2ydQd', choices=[Choice(finish_reason='stop', index=0, logprobs=None, message=ChatCompletionMessage(content=None, refusal=None, role='assistant', function_call=None, tool_calls=[ChatCompletionMessageToolCall(id='call_BZ0zJ3UN2iBNebuR8XpX3nfy', function=Function(arguments='{\n  "buyer": "ISPILANTE SENTIMENT BRUSLI",\n  "seller": "ELENA VASILESCU"\n}', name='ContractParties'), type='function')]))], created=1728906599, model='gpt-4-0613', object='chat.completion', service_tier=None, system_fingerprint=None, usage=CompletionUsage(completion_tokens=30, prompt_tokens=232, total_tokens=262, completion_tokens_details=None, prompt_tokens_details=None))
2024-10-14 14:50:01,094 - DEBUG - Instructor Request: mode.value='tool_call', response_model=<class 'models.AgentAction'>, new_kwargs={'model': 'gpt-4', 'messages': [{'role': 'system', 'content': '\nYou are an AI agent specializing in contract creation and personal information extraction. \n\nYour role is:\n 1. Guide the process of extracting information from documents..\n 2. Verifying the extracted information with human input.\n 3. Identifying parties. \n 4. Constructing a contract. \n\n\nFollow the workflow precisely and ask for human input when needed.\n\n'}, {'role': 'user', 'content': "Current state: {'verified_pii_data': [{'name': 'ISPILANTE SENTIMENT BRUSLI', 'address': 'Videle Jud: Teleorman Sos. Giurgiului nr.1 695 TR'}, {'name': 'ELENA VASILESCU', 'address': 'Mun. Bucuresti Sec. 5 Str Nicolae Iorga nr.3 900 B'}], 'parties': {'buyer': 'ISPILANTE SENTIMENT BRUSLI', 'seller': 'ELENA VASILESCU'}, 'contract_details': None, 'contract': None, 'current_action': None}\nWhat action should be taken next? Choose from: extract_pii, identify_parties, determine_contract_type, construct_contract, finish"}], 'tools': [{'type': 'function', 'function': {'name': 'AgentAction', 'description': 'Correctly extracted `AgentAction` with all the required parameters with correct types', 'parameters': {'properties': {'action': {'description': 'Action to be performed by the agent', 'title': 'Action', 'type': 'string'}, 'parameters': {'additionalProperties': {'type': 'string'}, 'description': 'Parameters for the action', 'title': 'Parameters', 'type': 'object'}}, 'required': ['action', 'parameters'], 'type': 'object'}}}], 'tool_choice': {'type': 'function', 'function': {'name': 'AgentAction'}}}
2024-10-14 14:50:01,094 - DEBUG - max_retries: 1
2024-10-14 14:50:01,095 - DEBUG - Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'json_data': {'messages': [{'role': 'system', 'content': '\nYou are an AI agent specializing in contract creation and personal information extraction. \n\nYour role is:\n 1. Guide the process of extracting information from documents..\n 2. Verifying the extracted information with human input.\n 3. Identifying parties. \n 4. Constructing a contract. \n\n\nFollow the workflow precisely and ask for human input when needed.\n\n'}, {'role': 'user', 'content': "Current state: {'verified_pii_data': [{'name': 'ISPILANTE SENTIMENT BRUSLI', 'address': 'Videle Jud: Teleorman Sos. Giurgiului nr.1 695 TR'}, {'name': 'ELENA VASILESCU', 'address': 'Mun. Bucuresti Sec. 5 Str Nicolae Iorga nr.3 900 B'}], 'parties': {'buyer': 'ISPILANTE SENTIMENT BRUSLI', 'seller': 'ELENA VASILESCU'}, 'contract_details': None, 'contract': None, 'current_action': None}\nWhat action should be taken next? Choose from: extract_pii, identify_parties, determine_contract_type, construct_contract, finish"}], 'model': 'gpt-4', 'tool_choice': {'type': 'function', 'function': {'name': 'AgentAction'}}, 'tools': [{'type': 'function', 'function': {'name': 'AgentAction', 'description': 'Correctly extracted `AgentAction` with all the required parameters with correct types', 'parameters': {'properties': {'action': {'description': 'Action to be performed by the agent', 'title': 'Action', 'type': 'string'}, 'parameters': {'additionalProperties': {'type': 'string'}, 'description': 'Parameters for the action', 'title': 'Parameters', 'type': 'object'}}, 'required': ['action', 'parameters'], 'type': 'object'}}}]}}
2024-10-14 14:50:01,096 - DEBUG - Sending HTTP Request: POST https://api.openai.com/v1/chat/completions
2024-10-14 14:50:01,096 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-10-14 14:50:01,096 - DEBUG - send_request_headers.complete
2024-10-14 14:50:01,096 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-10-14 14:50:01,096 - DEBUG - send_request_body.complete
2024-10-14 14:50:01,096 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-10-14 14:50:04,494 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Mon, 14 Oct 2024 11:50:04 GMT'), (b'Content-Type', b'application/json'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'user-kzzh9hik9ryjiou4ftvhondh'), (b'openai-processing-ms', b'3249'), (b'openai-version', b'2020-10-01'), (b'x-ratelimit-limit-requests', b'10000'), (b'x-ratelimit-limit-tokens', b'10000'), (b'x-ratelimit-remaining-requests', b'9989'), (b'x-ratelimit-remaining-tokens', b'9659'), (b'x-ratelimit-reset-requests', b'1m31.831s'), (b'x-ratelimit-reset-tokens', b'2.041s'), (b'x-request-id', b'req_1a090f02c2704d03777dc6e013f27070'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8d275972a9a4e0c5-OTP'), (b'Content-Encoding', b'gzip'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-10-14 14:50:04,495 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2024-10-14 14:50:04,495 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-10-14 14:50:04,496 - DEBUG - receive_response_body.complete
2024-10-14 14:50:04,496 - DEBUG - response_closed.started
2024-10-14 14:50:04,496 - DEBUG - response_closed.complete
2024-10-14 14:50:04,496 - DEBUG - HTTP Response: POST https://api.openai.com/v1/chat/completions "200 OK" Headers({'date': 'Mon, 14 Oct 2024 11:50:04 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-expose-headers': 'X-Request-ID', 'openai-organization': 'user-kzzh9hik9ryjiou4ftvhondh', 'openai-processing-ms': '3249', 'openai-version': '2020-10-01', 'x-ratelimit-limit-requests': '10000', 'x-ratelimit-limit-tokens': '10000', 'x-ratelimit-remaining-requests': '9989', 'x-ratelimit-remaining-tokens': '9659', 'x-ratelimit-reset-requests': '1m31.831s', 'x-ratelimit-reset-tokens': '2.041s', 'x-request-id': 'req_1a090f02c2704d03777dc6e013f27070', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8d275972a9a4e0c5-OTP', 'content-encoding': 'gzip', 'alt-svc': 'h3=":443"; ma=86400'})
2024-10-14 14:50:04,497 - DEBUG - request_id: req_1a090f02c2704d03777dc6e013f27070
2024-10-14 14:50:04,498 - DEBUG - Instructor Raw Response: ChatCompletion(id='chatcmpl-AIDsKvZqgGJpjf83DVbwTU2w9tb9i', choices=[Choice(finish_reason='stop', index=0, logprobs=None, message=ChatCompletionMessage(content=None, refusal=None, role='assistant', function_call=None, tool_calls=[ChatCompletionMessageToolCall(id='call_qYQ015NVxj3aGSIZQGGN9k6l', function=Function(arguments='{\n"action": "determine_contract_type"\n}', name='AgentAction'), type='function')]))], created=1728906604, model='gpt-4-0613', object='chat.completion', service_tier=None, system_fingerprint=None, usage=CompletionUsage(completion_tokens=11, prompt_tokens=305, total_tokens=316, completion_tokens_details=None, prompt_tokens_details=None))
2024-10-14 14:50:07,925 - DEBUG - Instructor Request: mode.value='tool_call', response_model=<class 'models.ContractDetails'>, new_kwargs={'model': 'gpt-4', 'messages': [{'role': 'system', 'content': '\nYou are an AI agent specializing in contract creation and personal information extraction. \n\nYour role is:\n 1. Guide the process of extracting information from documents..\n 2. Verifying the extracted information with human input.\n 3. Identifying parties. \n 4. Constructing a contract. \n\n\nFollow the workflow precisely and ask for human input when needed.\n\n'}, {'role': 'user', 'content': 'Determine the contract details for a airbnb contract between ISPILANTE SENTIMENT BRUSLI and ELENA VASILESCU.'}], 'tools': [{'type': 'function', 'function': {'name': 'ContractDetails', 'description': 'Correctly extracted `ContractDetails` with all the required parameters with correct types', 'parameters': {'properties': {'contract_type': {'description': 'Type of contract (e.g., airbnb, buy-sell, it-consulting)', 'title': 'Contract Type', 'type': 'string'}, 'additional_info': {'additionalProperties': {'type': 'string'}, 'description': 'Additional information specific to the contract type', 'title': 'Additional Info', 'type': 'object'}}, 'required': ['additional_info', 'contract_type'], 'type': 'object'}}}], 'tool_choice': {'type': 'function', 'function': {'name': 'ContractDetails'}}}
2024-10-14 14:50:07,926 - DEBUG - max_retries: 1
2024-10-14 14:50:07,927 - DEBUG - Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'json_data': {'messages': [{'role': 'system', 'content': '\nYou are an AI agent specializing in contract creation and personal information extraction. \n\nYour role is:\n 1. Guide the process of extracting information from documents..\n 2. Verifying the extracted information with human input.\n 3. Identifying parties. \n 4. Constructing a contract. \n\n\nFollow the workflow precisely and ask for human input when needed.\n\n'}, {'role': 'user', 'content': 'Determine the contract details for a airbnb contract between ISPILANTE SENTIMENT BRUSLI and ELENA VASILESCU.'}], 'model': 'gpt-4', 'tool_choice': {'type': 'function', 'function': {'name': 'ContractDetails'}}, 'tools': [{'type': 'function', 'function': {'name': 'ContractDetails', 'description': 'Correctly extracted `ContractDetails` with all the required parameters with correct types', 'parameters': {'properties': {'contract_type': {'description': 'Type of contract (e.g., airbnb, buy-sell, it-consulting)', 'title': 'Contract Type', 'type': 'string'}, 'additional_info': {'additionalProperties': {'type': 'string'}, 'description': 'Additional information specific to the contract type', 'title': 'Additional Info', 'type': 'object'}}, 'required': ['additional_info', 'contract_type'], 'type': 'object'}}}]}}
2024-10-14 14:50:07,927 - DEBUG - Sending HTTP Request: POST https://api.openai.com/v1/chat/completions
2024-10-14 14:50:07,927 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-10-14 14:50:07,928 - DEBUG - send_request_headers.complete
2024-10-14 14:50:07,928 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-10-14 14:50:07,928 - DEBUG - send_request_body.complete
2024-10-14 14:50:07,928 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-10-14 14:50:08,809 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Mon, 14 Oct 2024 11:50:09 GMT'), (b'Content-Type', b'application/json'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'user-kzzh9hik9ryjiou4ftvhondh'), (b'openai-processing-ms', b'726'), (b'openai-version', b'2020-10-01'), (b'x-ratelimit-limit-requests', b'10000'), (b'x-ratelimit-limit-tokens', b'10000'), (b'x-ratelimit-remaining-requests', b'9989'), (b'x-ratelimit-remaining-tokens', b'9865'), (b'x-ratelimit-reset-requests', b'1m33.652s'), (b'x-ratelimit-reset-tokens', b'810ms'), (b'x-request-id', b'req_7de7ee602506b525da25398532e716d9'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8d27599d586ae0c5-OTP'), (b'Content-Encoding', b'gzip'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-10-14 14:50:08,810 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2024-10-14 14:50:08,810 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-10-14 14:50:08,810 - DEBUG - receive_response_body.complete
2024-10-14 14:50:08,810 - DEBUG - response_closed.started
2024-10-14 14:50:08,810 - DEBUG - response_closed.complete
2024-10-14 14:50:08,810 - DEBUG - HTTP Response: POST https://api.openai.com/v1/chat/completions "200 OK" Headers({'date': 'Mon, 14 Oct 2024 11:50:09 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-expose-headers': 'X-Request-ID', 'openai-organization': 'user-kzzh9hik9ryjiou4ftvhondh', 'openai-processing-ms': '726', 'openai-version': '2020-10-01', 'x-ratelimit-limit-requests': '10000', 'x-ratelimit-limit-tokens': '10000', 'x-ratelimit-remaining-requests': '9989', 'x-ratelimit-remaining-tokens': '9865', 'x-ratelimit-reset-requests': '1m33.652s', 'x-ratelimit-reset-tokens': '810ms', 'x-request-id': 'req_7de7ee602506b525da25398532e716d9', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8d27599d586ae0c5-OTP', 'content-encoding': 'gzip', 'alt-svc': 'h3=":443"; ma=86400'})
2024-10-14 14:50:08,810 - DEBUG - request_id: req_7de7ee602506b525da25398532e716d9
2024-10-14 14:50:08,810 - DEBUG - Instructor Raw Response: ChatCompletion(id='chatcmpl-AIDsOupASRJF9IxdYhuhJBSzcPARG', choices=[Choice(finish_reason='stop', index=0, logprobs=None, message=ChatCompletionMessage(content=None, refusal=None, role='assistant', function_call=None, tool_calls=[ChatCompletionMessageToolCall(id='call_2vTuuPn4KyC5k5brFAFVPcXR', function=Function(arguments='{\n  "contract_type": "airbnb"\n}', name='ContractDetails'), type='function')]))], created=1728906608, model='gpt-4-0613', object='chat.completion', service_tier=None, system_fingerprint=None, usage=CompletionUsage(completion_tokens=11, prompt_tokens=184, total_tokens=195, completion_tokens_details=None, prompt_tokens_details=None))
2024-10-14 14:50:08,811 - DEBUG - Instructor Request: mode.value='tool_call', response_model=<class 'models.AgentAction'>, new_kwargs={'model': 'gpt-4', 'messages': [{'role': 'system', 'content': '\nYou are an AI agent specializing in contract creation and personal information extraction. \n\nYour role is:\n 1. Guide the process of extracting information from documents..\n 2. Verifying the extracted information with human input.\n 3. Identifying parties. \n 4. Constructing a contract. \n\n\nFollow the workflow precisely and ask for human input when needed.\n\n'}, {'role': 'user', 'content': "Current state: {'verified_pii_data': [{'name': 'ISPILANTE SENTIMENT BRUSLI', 'address': 'Videle Jud: Teleorman Sos. Giurgiului nr.1 695 TR'}, {'name': 'ELENA VASILESCU', 'address': 'Mun. Bucuresti Sec. 5 Str Nicolae Iorga nr.3 900 B'}], 'parties': {'buyer': 'ISPILANTE SENTIMENT BRUSLI', 'seller': 'ELENA VASILESCU'}, 'contract_details': {'contract_type': 'airbnb', 'additional_info': {}}, 'contract': None, 'current_action': None}\nWhat action should be taken next? Choose from: extract_pii, identify_parties, determine_contract_type, construct_contract, finish"}], 'tools': [{'type': 'function', 'function': {'name': 'AgentAction', 'description': 'Correctly extracted `AgentAction` with all the required parameters with correct types', 'parameters': {'properties': {'action': {'description': 'Action to be performed by the agent', 'title': 'Action', 'type': 'string'}, 'parameters': {'additionalProperties': {'type': 'string'}, 'description': 'Parameters for the action', 'title': 'Parameters', 'type': 'object'}}, 'required': ['action', 'parameters'], 'type': 'object'}}}], 'tool_choice': {'type': 'function', 'function': {'name': 'AgentAction'}}}
2024-10-14 14:50:08,811 - DEBUG - max_retries: 1
2024-10-14 14:50:08,812 - DEBUG - Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'json_data': {'messages': [{'role': 'system', 'content': '\nYou are an AI agent specializing in contract creation and personal information extraction. \n\nYour role is:\n 1. Guide the process of extracting information from documents..\n 2. Verifying the extracted information with human input.\n 3. Identifying parties. \n 4. Constructing a contract. \n\n\nFollow the workflow precisely and ask for human input when needed.\n\n'}, {'role': 'user', 'content': "Current state: {'verified_pii_data': [{'name': 'ISPILANTE SENTIMENT BRUSLI', 'address': 'Videle Jud: Teleorman Sos. Giurgiului nr.1 695 TR'}, {'name': 'ELENA VASILESCU', 'address': 'Mun. Bucuresti Sec. 5 Str Nicolae Iorga nr.3 900 B'}], 'parties': {'buyer': 'ISPILANTE SENTIMENT BRUSLI', 'seller': 'ELENA VASILESCU'}, 'contract_details': {'contract_type': 'airbnb', 'additional_info': {}}, 'contract': None, 'current_action': None}\nWhat action should be taken next? Choose from: extract_pii, identify_parties, determine_contract_type, construct_contract, finish"}], 'model': 'gpt-4', 'tool_choice': {'type': 'function', 'function': {'name': 'AgentAction'}}, 'tools': [{'type': 'function', 'function': {'name': 'AgentAction', 'description': 'Correctly extracted `AgentAction` with all the required parameters with correct types', 'parameters': {'properties': {'action': {'description': 'Action to be performed by the agent', 'title': 'Action', 'type': 'string'}, 'parameters': {'additionalProperties': {'type': 'string'}, 'description': 'Parameters for the action', 'title': 'Parameters', 'type': 'object'}}, 'required': ['action', 'parameters'], 'type': 'object'}}}]}}
2024-10-14 14:50:08,813 - DEBUG - Sending HTTP Request: POST https://api.openai.com/v1/chat/completions
2024-10-14 14:50:08,813 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-10-14 14:50:08,813 - DEBUG - send_request_headers.complete
2024-10-14 14:50:08,813 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-10-14 14:50:08,813 - DEBUG - send_request_body.complete
2024-10-14 14:50:08,813 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-10-14 14:50:09,724 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Mon, 14 Oct 2024 11:50:10 GMT'), (b'Content-Type', b'application/json'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'user-kzzh9hik9ryjiou4ftvhondh'), (b'openai-processing-ms', b'751'), (b'openai-version', b'2020-10-01'), (b'x-ratelimit-limit-requests', b'10000'), (b'x-ratelimit-limit-tokens', b'10000'), (b'x-ratelimit-remaining-requests', b'9988'), (b'x-ratelimit-remaining-tokens', b'9708'), (b'x-ratelimit-reset-requests', b'1m41.383s'), (b'x-ratelimit-reset-tokens', b'1.748s'), (b'x-request-id', b'req_2e0450b7f34ce3bfcd5fb622d957b0f1'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8d2759a2e835e0c5-OTP'), (b'Content-Encoding', b'gzip'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-10-14 14:50:09,724 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2024-10-14 14:50:09,724 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-10-14 14:50:09,725 - DEBUG - receive_response_body.complete
2024-10-14 14:50:09,725 - DEBUG - response_closed.started
2024-10-14 14:50:09,725 - DEBUG - response_closed.complete
2024-10-14 14:50:09,725 - DEBUG - HTTP Response: POST https://api.openai.com/v1/chat/completions "200 OK" Headers({'date': 'Mon, 14 Oct 2024 11:50:10 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-expose-headers': 'X-Request-ID', 'openai-organization': 'user-kzzh9hik9ryjiou4ftvhondh', 'openai-processing-ms': '751', 'openai-version': '2020-10-01', 'x-ratelimit-limit-requests': '10000', 'x-ratelimit-limit-tokens': '10000', 'x-ratelimit-remaining-requests': '9988', 'x-ratelimit-remaining-tokens': '9708', 'x-ratelimit-reset-requests': '1m41.383s', 'x-ratelimit-reset-tokens': '1.748s', 'x-request-id': 'req_2e0450b7f34ce3bfcd5fb622d957b0f1', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8d2759a2e835e0c5-OTP', 'content-encoding': 'gzip', 'alt-svc': 'h3=":443"; ma=86400'})
2024-10-14 14:50:09,725 - DEBUG - request_id: req_2e0450b7f34ce3bfcd5fb622d957b0f1
2024-10-14 14:50:09,725 - DEBUG - Instructor Raw Response: ChatCompletion(id='chatcmpl-AIDsPd5Q2bEwIXWJLWyp5DeHPLxfb', choices=[Choice(finish_reason='stop', index=0, logprobs=None, message=ChatCompletionMessage(content=None, refusal=None, role='assistant', function_call=None, tool_calls=[ChatCompletionMessageToolCall(id='call_0f7uM1ibk9jebXpazaB2WqhS', function=Function(arguments='{\n"action": "determine_contract_type"\n}', name='AgentAction'), type='function')]))], created=1728906609, model='gpt-4-0613', object='chat.completion', service_tier=None, system_fingerprint=None, usage=CompletionUsage(completion_tokens=11, prompt_tokens=317, total_tokens=328, completion_tokens_details=None, prompt_tokens_details=None))
2024-10-14 14:50:20,266 - DEBUG - close.started
2024-10-14 14:50:20,266 - DEBUG - close.complete
2024-10-14 14:50:20,267 - ERROR - Task exception was never retrieved
future: <Task finished name='Task-1' coro=<agent_workflow() done, defined at D:\deve\contract_automation\src\main.py:25> exception=KeyboardInterrupt()>
Traceback (most recent call last):
  File "D:\deve\contract_automation\src\main.py", line 79, in <module>
    asyncio.run(agent_workflow())
  File "D:\deve\contract_automation\.venv\Lib\site-packages\nest_asyncio.py", line 30, in run
    return loop.run_until_complete(task)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\deve\contract_automation\.venv\Lib\site-packages\nest_asyncio.py", line 92, in run_until_complete
    self._run_once()
  File "D:\deve\contract_automation\.venv\Lib\site-packages\nest_asyncio.py", line 133, in _run_once
    handle._run()
  File "C:\Users\neuro\.rye\py\cpython@3.12.0\Lib\asyncio\events.py", line 84, in _run
    self._context.run(self._callback, *self._args)
  File "C:\Users\neuro\.rye\py\cpython@3.12.0\Lib\asyncio\tasks.py", line 386, in __wakeup
    self.__step()
  File "C:\Users\neuro\.rye\py\cpython@3.12.0\Lib\asyncio\tasks.py", line 293, in __step
    self.__step_run_and_handle_result(exc)
  File "C:\Users\neuro\.rye\py\cpython@3.12.0\Lib\asyncio\tasks.py", line 304, in __step_run_and_handle_result
    result = coro.send(None)
             ^^^^^^^^^^^^^^^
  File "D:\deve\contract_automation\src\main.py", line 45, in agent_workflow
    contract_type = input("Enter contract type (airbnb, buy-sell, it-consulting): ").lower().replace(" ", "-")
                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
KeyboardInterrupt
2024-10-14 14:51:15,393 - WARNING - Neither CUDA nor MPS are available - defaulting to CPU. Note: This module is much faster with a GPU.
2024-10-14 14:51:16,649 - DEBUG - load_ssl_context verify=True cert=None trust_env=True http2=False
2024-10-14 14:51:16,650 - DEBUG - load_verify_locations cafile='D:\\deve\\contract_automation\\.venv\\Lib\\site-packages\\certifi\\cacert.pem'
2024-10-14 14:51:16,967 - DEBUG - Patching `client.chat.completions.create` with mode=<Mode.TOOLS: 'tool_call'>
2024-10-14 14:51:16,968 - DEBUG - Using proactor: IocpProactor
2024-10-14 14:51:16,986 - DEBUG - STREAM b'IHDR' 16 13
2024-10-14 14:51:16,986 - DEBUG - STREAM b'iCCP' 41 3152
2024-10-14 14:51:16,986 - DEBUG - iCCP profile name b'ICC Profile'
2024-10-14 14:51:16,986 - DEBUG - Compression method 0
2024-10-14 14:51:16,987 - DEBUG - STREAM b'eXIf' 3205 138
2024-10-14 14:51:16,987 - DEBUG - STREAM b'pHYs' 3355 9
2024-10-14 14:51:16,987 - DEBUG - STREAM b'iTXt' 3376 470
2024-10-14 14:51:16,987 - DEBUG - STREAM b'iDOT' 3858 28
2024-10-14 14:51:16,987 - DEBUG - b'iDOT' 3858 28 (unknown)
2024-10-14 14:51:16,987 - DEBUG - STREAM b'IDAT' 3898 16384
2024-10-14 14:51:16,987 - DEBUG - STREAM b'IHDR' 16 13
2024-10-14 14:51:16,987 - DEBUG - STREAM b'iCCP' 41 3152
2024-10-14 14:51:16,987 - DEBUG - iCCP profile name b'ICC Profile'
2024-10-14 14:51:16,987 - DEBUG - Compression method 0
2024-10-14 14:51:16,987 - DEBUG - STREAM b'eXIf' 3205 138
2024-10-14 14:51:16,987 - DEBUG - STREAM b'pHYs' 3355 9
2024-10-14 14:51:16,987 - DEBUG - STREAM b'iTXt' 3376 470
2024-10-14 14:51:16,987 - DEBUG - STREAM b'iDOT' 3858 28
2024-10-14 14:51:16,987 - DEBUG - b'iDOT' 3858 28 (unknown)
2024-10-14 14:51:16,987 - DEBUG - STREAM b'IDAT' 3898 16384
2024-10-14 14:51:16,997 - DEBUG - tag: XResolution (282) - type: rational (5) Tag Location: 22 - Data Location: 62 - value: b'\x00\x00\x00\x90\x00\x00\x00\x01'
2024-10-14 14:51:16,997 - DEBUG - tag: YResolution (283) - type: rational (5) Tag Location: 34 - Data Location: 70 - value: b'\x00\x00\x00\x90\x00\x00\x00\x01'
2024-10-14 14:51:16,997 - DEBUG - tag: ResolutionUnit (296) - type: short (3) - value: b'\x00\x02'
2024-10-14 14:51:16,997 - DEBUG - tag: ExifIFD (34665) - type: long (4) - value: b'\x00\x00\x00N'
2024-10-14 14:51:16,998 - DEBUG - Error closing: Operation on closed image
2024-10-14 14:51:18,969 - DEBUG - STREAM b'IHDR' 16 13
2024-10-14 14:51:18,969 - DEBUG - STREAM b'iCCP' 41 3152
2024-10-14 14:51:18,969 - DEBUG - iCCP profile name b'ICC Profile'
2024-10-14 14:51:18,969 - DEBUG - Compression method 0
2024-10-14 14:51:18,969 - DEBUG - STREAM b'eXIf' 3205 138
2024-10-14 14:51:18,969 - DEBUG - STREAM b'pHYs' 3355 9
2024-10-14 14:51:18,969 - DEBUG - STREAM b'iTXt' 3376 471
2024-10-14 14:51:18,969 - DEBUG - STREAM b'iDOT' 3859 28
2024-10-14 14:51:18,969 - DEBUG - b'iDOT' 3859 28 (unknown)
2024-10-14 14:51:18,969 - DEBUG - STREAM b'IDAT' 3899 16384
2024-10-14 14:51:18,969 - DEBUG - STREAM b'IHDR' 16 13
2024-10-14 14:51:18,969 - DEBUG - STREAM b'iCCP' 41 3152
2024-10-14 14:51:18,969 - DEBUG - iCCP profile name b'ICC Profile'
2024-10-14 14:51:18,969 - DEBUG - Compression method 0
2024-10-14 14:51:18,969 - DEBUG - STREAM b'eXIf' 3205 138
2024-10-14 14:51:18,969 - DEBUG - STREAM b'pHYs' 3355 9
2024-10-14 14:51:18,969 - DEBUG - STREAM b'iTXt' 3376 471
2024-10-14 14:51:18,969 - DEBUG - STREAM b'iDOT' 3859 28
2024-10-14 14:51:18,970 - DEBUG - b'iDOT' 3859 28 (unknown)
2024-10-14 14:51:18,970 - DEBUG - STREAM b'IDAT' 3899 16384
2024-10-14 14:51:18,987 - DEBUG - tag: XResolution (282) - type: rational (5) Tag Location: 22 - Data Location: 62 - value: b'\x00\x00\x00\x90\x00\x00\x00\x01'
2024-10-14 14:51:18,987 - DEBUG - tag: YResolution (283) - type: rational (5) Tag Location: 34 - Data Location: 70 - value: b'\x00\x00\x00\x90\x00\x00\x00\x01'
2024-10-14 14:51:18,987 - DEBUG - tag: ResolutionUnit (296) - type: short (3) - value: b'\x00\x02'
2024-10-14 14:51:18,987 - DEBUG - tag: ExifIFD (34665) - type: long (4) - value: b'\x00\x00\x00N'
2024-10-14 14:51:18,988 - DEBUG - Error closing: Operation on closed image
2024-10-14 14:51:21,464 - DEBUG - Instructor Request: mode.value='tool_call', response_model=<class 'models.AgentAction'>, new_kwargs={'model': 'gpt-4', 'messages': [{'role': 'system', 'content': '\nYou are an AI agent specializing in contract creation and personal information extraction. \n\nYour role is:\n 1. Guide the process of extracting information from documents..\n 2. Verifying the extracted information with human input.\n 3. Identifying parties. \n 4. Constructing a contract. \n\n\nFollow the workflow precisely and ask for human input when needed.\n\n'}, {'role': 'user', 'content': '\n    Current state:\n    - Verified PII data: 0 entries\n    - Parties identified: No\n    - Contract type determined: No\n    - Contract constructed: No\n    \nWhat action should be taken next? Choose from: extract_pii, identify_parties, determine_contract_type, construct_contract, finish'}], 'tools': [{'type': 'function', 'function': {'name': 'AgentAction', 'description': 'Correctly extracted `AgentAction` with all the required parameters with correct types', 'parameters': {'properties': {'action': {'description': 'Action to be performed by the agent', 'title': 'Action', 'type': 'string'}, 'parameters': {'additionalProperties': {'type': 'string'}, 'description': 'Parameters for the action', 'title': 'Parameters', 'type': 'object'}}, 'required': ['action', 'parameters'], 'type': 'object'}}}], 'tool_choice': {'type': 'function', 'function': {'name': 'AgentAction'}}}
2024-10-14 14:51:21,465 - DEBUG - max_retries: 1
2024-10-14 14:51:21,467 - DEBUG - Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'json_data': {'messages': [{'role': 'system', 'content': '\nYou are an AI agent specializing in contract creation and personal information extraction. \n\nYour role is:\n 1. Guide the process of extracting information from documents..\n 2. Verifying the extracted information with human input.\n 3. Identifying parties. \n 4. Constructing a contract. \n\n\nFollow the workflow precisely and ask for human input when needed.\n\n'}, {'role': 'user', 'content': '\n    Current state:\n    - Verified PII data: 0 entries\n    - Parties identified: No\n    - Contract type determined: No\n    - Contract constructed: No\n    \nWhat action should be taken next? Choose from: extract_pii, identify_parties, determine_contract_type, construct_contract, finish'}], 'model': 'gpt-4', 'tool_choice': {'type': 'function', 'function': {'name': 'AgentAction'}}, 'tools': [{'type': 'function', 'function': {'name': 'AgentAction', 'description': 'Correctly extracted `AgentAction` with all the required parameters with correct types', 'parameters': {'properties': {'action': {'description': 'Action to be performed by the agent', 'title': 'Action', 'type': 'string'}, 'parameters': {'additionalProperties': {'type': 'string'}, 'description': 'Parameters for the action', 'title': 'Parameters', 'type': 'object'}}, 'required': ['action', 'parameters'], 'type': 'object'}}}]}}
2024-10-14 14:51:21,507 - DEBUG - Sending HTTP Request: POST https://api.openai.com/v1/chat/completions
2024-10-14 14:51:21,507 - DEBUG - connect_tcp.started host='api.openai.com' port=443 local_address=None timeout=5.0 socket_options=None
2024-10-14 14:51:21,543 - DEBUG - connect_tcp.complete return_value=<httpcore._backends.sync.SyncStream object at 0x0000021E8B563230>
2024-10-14 14:51:21,543 - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x0000021E8B3C1B50> server_hostname='api.openai.com' timeout=5.0
2024-10-14 14:51:21,550 - DEBUG - start_tls.complete return_value=<httpcore._backends.sync.SyncStream object at 0x0000021E8B563170>
2024-10-14 14:51:21,550 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-10-14 14:51:21,550 - DEBUG - send_request_headers.complete
2024-10-14 14:51:21,550 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-10-14 14:51:21,550 - DEBUG - send_request_body.complete
2024-10-14 14:51:21,550 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-10-14 14:51:22,687 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Mon, 14 Oct 2024 11:51:22 GMT'), (b'Content-Type', b'application/json'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'user-kzzh9hik9ryjiou4ftvhondh'), (b'openai-processing-ms', b'978'), (b'openai-version', b'2020-10-01'), (b'x-ratelimit-limit-requests', b'10000'), (b'x-ratelimit-limit-tokens', b'10000'), (b'x-ratelimit-remaining-requests', b'9995'), (b'x-ratelimit-remaining-tokens', b'9821'), (b'x-ratelimit-reset-requests', b'37.286s'), (b'x-ratelimit-reset-tokens', b'1.074s'), (b'x-request-id', b'req_5372c887f1b0332954c61f94ecdbe122'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'CF-Cache-Status', b'DYNAMIC'), (b'Set-Cookie', b'__cf_bm=oxvvflC.oFiSwueB7RohbeduMDd0pWz7mxxhcR.kco4-1728906682-1.0.1.1-Rz4JoPU3MAu7Q0JxOOVc9q6.R32GI6hrHJNL84z1ymW.wMGoz5kWhvGezpkoR4GLW9mjIgZ2f_I0pzgm45VGUA; path=/; expires=Mon, 14-Oct-24 12:21:22 GMT; domain=.api.openai.com; HttpOnly; Secure; SameSite=None'), (b'X-Content-Type-Options', b'nosniff'), (b'Set-Cookie', b'_cfuvid=jGhp8L1_.q2XUil9GF9eo7IDvvWmGTSJ3XvzyZItjtI-1728906682974-0.0.1.1-604800000; path=/; domain=.api.openai.com; HttpOnly; Secure; SameSite=None'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8d275b698b1ec9e9-OTP'), (b'Content-Encoding', b'gzip'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-10-14 14:51:22,688 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2024-10-14 14:51:22,689 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-10-14 14:51:22,689 - DEBUG - receive_response_body.complete
2024-10-14 14:51:22,689 - DEBUG - response_closed.started
2024-10-14 14:51:22,689 - DEBUG - response_closed.complete
2024-10-14 14:51:22,689 - DEBUG - HTTP Response: POST https://api.openai.com/v1/chat/completions "200 OK" Headers([('date', 'Mon, 14 Oct 2024 11:51:22 GMT'), ('content-type', 'application/json'), ('transfer-encoding', 'chunked'), ('connection', 'keep-alive'), ('access-control-expose-headers', 'X-Request-ID'), ('openai-organization', 'user-kzzh9hik9ryjiou4ftvhondh'), ('openai-processing-ms', '978'), ('openai-version', '2020-10-01'), ('x-ratelimit-limit-requests', '10000'), ('x-ratelimit-limit-tokens', '10000'), ('x-ratelimit-remaining-requests', '9995'), ('x-ratelimit-remaining-tokens', '9821'), ('x-ratelimit-reset-requests', '37.286s'), ('x-ratelimit-reset-tokens', '1.074s'), ('x-request-id', 'req_5372c887f1b0332954c61f94ecdbe122'), ('strict-transport-security', 'max-age=31536000; includeSubDomains; preload'), ('cf-cache-status', 'DYNAMIC'), ('set-cookie', '__cf_bm=oxvvflC.oFiSwueB7RohbeduMDd0pWz7mxxhcR.kco4-1728906682-1.0.1.1-Rz4JoPU3MAu7Q0JxOOVc9q6.R32GI6hrHJNL84z1ymW.wMGoz5kWhvGezpkoR4GLW9mjIgZ2f_I0pzgm45VGUA; path=/; expires=Mon, 14-Oct-24 12:21:22 GMT; domain=.api.openai.com; HttpOnly; Secure; SameSite=None'), ('x-content-type-options', 'nosniff'), ('set-cookie', '_cfuvid=jGhp8L1_.q2XUil9GF9eo7IDvvWmGTSJ3XvzyZItjtI-1728906682974-0.0.1.1-604800000; path=/; domain=.api.openai.com; HttpOnly; Secure; SameSite=None'), ('server', 'cloudflare'), ('cf-ray', '8d275b698b1ec9e9-OTP'), ('content-encoding', 'gzip'), ('alt-svc', 'h3=":443"; ma=86400')])
2024-10-14 14:51:22,690 - DEBUG - request_id: req_5372c887f1b0332954c61f94ecdbe122
2024-10-14 14:51:22,693 - DEBUG - Instructor Raw Response: ChatCompletion(id='chatcmpl-AIDtaNBU07NyFgV0mVKhduCkSUjnR', choices=[Choice(finish_reason='stop', index=0, logprobs=None, message=ChatCompletionMessage(content=None, refusal=None, role='assistant', function_call=None, tool_calls=[ChatCompletionMessageToolCall(id='call_MZkyIDQoMMOtMOlAFGHnC8zd', function=Function(arguments='\n{\n  "action": "extract_pii"\n}', name='AgentAction'), type='function')]))], created=1728906682, model='gpt-4-0613', object='chat.completion', service_tier=None, system_fingerprint=None, usage=CompletionUsage(completion_tokens=12, prompt_tokens=207, total_tokens=219, completion_tokens_details=None, prompt_tokens_details=None))
2024-10-14 14:51:22,693 - DEBUG - Instructor Request: mode.value='tool_call', response_model=<class 'models.PIIData'>, new_kwargs={'model': 'gpt-4', 'messages': [{'role': 'system', 'content': '\nYou are an AI agent specializing in contract creation and personal information extraction. \n\nYour role is:\n 1. Guide the process of extracting information from documents..\n 2. Verifying the extracted information with human input.\n 3. Identifying parties. \n 4. Constructing a contract. \n\n\nFollow the workflow precisely and ask for human input when needed.\n\n'}, {'role': 'user', 'content': "Extract the name and address from the given text:\n\nROUMANIE ROMAWI ROMANIA Carte CARTE De |Dentitate IDEnTITY D'iDENTITE seria TR Na 409131 CarD cNP 1891113341181 Nume/Nom/Last name T525M ISPILANTE Prenume/Prenom/First namo SENTIMENT BRUSLI Cetatenle/Nallonallte/Nallonallly Sox SexeiSox Romn\u0103 ROU M Loc nastere/Liou do naissancelPlace ol birth Or\u0219. Videle Jud.Teleorman Dom IlulAdresse/Addrass Videle Jud: Teleorman Sos. Giurgiului nr.1 695 TR Emisa dolDelivree parlIssuad by ValabilltatelValldlte Valldlty SPCLEP Videle 04.11.11-13.11.2018 IDROUISPILANTE<<SENTIMENT <BRUSLI<<<< TR409131<0R0u8911137M181113513411813 Or\u0219:"}], 'tools': [{'type': 'function', 'function': {'name': 'PIIData', 'description': 'Correctly extracted `PIIData` with all the required parameters with correct types', 'parameters': {'properties': {'name': {'description': 'Full name of the person', 'title': 'Name', 'type': 'string'}, 'address': {'description': 'Residential address of the person', 'title': 'Address', 'type': 'string'}}, 'required': ['address', 'name'], 'type': 'object'}}}], 'tool_choice': {'type': 'function', 'function': {'name': 'PIIData'}}}
2024-10-14 14:51:22,694 - DEBUG - max_retries: 1
2024-10-14 14:51:22,695 - DEBUG - Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'json_data': {'messages': [{'role': 'system', 'content': '\nYou are an AI agent specializing in contract creation and personal information extraction. \n\nYour role is:\n 1. Guide the process of extracting information from documents..\n 2. Verifying the extracted information with human input.\n 3. Identifying parties. \n 4. Constructing a contract. \n\n\nFollow the workflow precisely and ask for human input when needed.\n\n'}, {'role': 'user', 'content': "Extract the name and address from the given text:\n\nROUMANIE ROMAWI ROMANIA Carte CARTE De |Dentitate IDEnTITY D'iDENTITE seria TR Na 409131 CarD cNP 1891113341181 Nume/Nom/Last name T525M ISPILANTE Prenume/Prenom/First namo SENTIMENT BRUSLI Cetatenle/Nallonallte/Nallonallly Sox SexeiSox Romn\u0103 ROU M Loc nastere/Liou do naissancelPlace ol birth Or\u0219. Videle Jud.Teleorman Dom IlulAdresse/Addrass Videle Jud: Teleorman Sos. Giurgiului nr.1 695 TR Emisa dolDelivree parlIssuad by ValabilltatelValldlte Valldlty SPCLEP Videle 04.11.11-13.11.2018 IDROUISPILANTE<<SENTIMENT <BRUSLI<<<< TR409131<0R0u8911137M181113513411813 Or\u0219:"}], 'model': 'gpt-4', 'tool_choice': {'type': 'function', 'function': {'name': 'PIIData'}}, 'tools': [{'type': 'function', 'function': {'name': 'PIIData', 'description': 'Correctly extracted `PIIData` with all the required parameters with correct types', 'parameters': {'properties': {'name': {'description': 'Full name of the person', 'title': 'Name', 'type': 'string'}, 'address': {'description': 'Residential address of the person', 'title': 'Address', 'type': 'string'}}, 'required': ['address', 'name'], 'type': 'object'}}}]}}
2024-10-14 14:51:22,695 - DEBUG - Sending HTTP Request: POST https://api.openai.com/v1/chat/completions
2024-10-14 14:51:22,695 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-10-14 14:51:22,696 - DEBUG - send_request_headers.complete
2024-10-14 14:51:22,696 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-10-14 14:51:22,696 - DEBUG - send_request_body.complete
2024-10-14 14:51:22,696 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-10-14 14:51:24,877 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Mon, 14 Oct 2024 11:51:25 GMT'), (b'Content-Type', b'application/json'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'user-kzzh9hik9ryjiou4ftvhondh'), (b'openai-processing-ms', b'2015'), (b'openai-version', b'2020-10-01'), (b'x-ratelimit-limit-requests', b'10000'), (b'x-ratelimit-limit-tokens', b'10000'), (b'x-ratelimit-remaining-requests', b'9994'), (b'x-ratelimit-remaining-tokens', b'9706'), (b'x-ratelimit-reset-requests', b'44.787s'), (b'x-ratelimit-reset-tokens', b'1.758s'), (b'x-request-id', b'req_f30e2a7293bcb3251ea6e5d31a6e39de'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8d275b70af88c9e9-OTP'), (b'Content-Encoding', b'gzip'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-10-14 14:51:24,877 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2024-10-14 14:51:24,877 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-10-14 14:51:24,878 - DEBUG - receive_response_body.complete
2024-10-14 14:51:24,878 - DEBUG - response_closed.started
2024-10-14 14:51:24,878 - DEBUG - response_closed.complete
2024-10-14 14:51:24,878 - DEBUG - HTTP Response: POST https://api.openai.com/v1/chat/completions "200 OK" Headers({'date': 'Mon, 14 Oct 2024 11:51:25 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-expose-headers': 'X-Request-ID', 'openai-organization': 'user-kzzh9hik9ryjiou4ftvhondh', 'openai-processing-ms': '2015', 'openai-version': '2020-10-01', 'x-ratelimit-limit-requests': '10000', 'x-ratelimit-limit-tokens': '10000', 'x-ratelimit-remaining-requests': '9994', 'x-ratelimit-remaining-tokens': '9706', 'x-ratelimit-reset-requests': '44.787s', 'x-ratelimit-reset-tokens': '1.758s', 'x-request-id': 'req_f30e2a7293bcb3251ea6e5d31a6e39de', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8d275b70af88c9e9-OTP', 'content-encoding': 'gzip', 'alt-svc': 'h3=":443"; ma=86400'})
2024-10-14 14:51:24,878 - DEBUG - request_id: req_f30e2a7293bcb3251ea6e5d31a6e39de
2024-10-14 14:51:24,878 - DEBUG - Instructor Raw Response: ChatCompletion(id='chatcmpl-AIDtbMigSQVauljqR164dqJn4OPWL', choices=[Choice(finish_reason='stop', index=0, logprobs=None, message=ChatCompletionMessage(content=None, refusal=None, role='assistant', function_call=None, tool_calls=[ChatCompletionMessageToolCall(id='call_tEynhNbPBs7Oc9ybm04qWVYF', function=Function(arguments='{\n"name": "ISPILANTE SENTIMENT BRUSLI",\n"address": "Sos. Giurgiului nr.1 695 TR Videle Jud: Teleorman"\n}', name='PIIData'), type='function')]))], created=1728906683, model='gpt-4-0613', object='chat.completion', service_tier=None, system_fingerprint=None, usage=CompletionUsage(completion_tokens=38, prompt_tokens=377, total_tokens=415, completion_tokens_details=None, prompt_tokens_details=None))
2024-10-14 14:51:26,949 - DEBUG - Instructor Request: mode.value='tool_call', response_model=<class 'models.PIIData'>, new_kwargs={'model': 'gpt-4', 'messages': [{'role': 'system', 'content': '\nYou are an AI agent specializing in contract creation and personal information extraction. \n\nYour role is:\n 1. Guide the process of extracting information from documents..\n 2. Verifying the extracted information with human input.\n 3. Identifying parties. \n 4. Constructing a contract. \n\n\nFollow the workflow precisely and ask for human input when needed.\n\n'}, {'role': 'user', 'content': "Extract the name and address from the given text:\n\nROUMANIE ROVIAINIA ROMANIA Carte Carte DE iDentitate IdEnTITY Didentite seala SS Nr 099994 Card CNP 2410415400542 93coQ Nume/NomiLast name VASILESCU Pronume/Prenom/Flrst name ELENA < CetatenielNatlonallte/Natlonalily M Sex SexelSer Romn\u0103 ROU Loc nastore/Licu de naissancolF 'ar0 ol birth Mun: Dej Jud. Cluj Domiciliu/Adresse A ess Mun. Bucuresti Sec. 5 Str Nicolae Iorga nr.3 900 B Emisa delDelivree parllssued by Valabilitate/Vahidile Valiouy D.EPAB.D- 06.01.17-15.04.2077 IDROUVASILESCU<<ELENA<<<<<<<<<<<<<<< SS099994<0R0u4104151F770415824003421"}], 'tools': [{'type': 'function', 'function': {'name': 'PIIData', 'description': 'Correctly extracted `PIIData` with all the required parameters with correct types', 'parameters': {'properties': {'name': {'description': 'Full name of the person', 'title': 'Name', 'type': 'string'}, 'address': {'description': 'Residential address of the person', 'title': 'Address', 'type': 'string'}}, 'required': ['address', 'name'], 'type': 'object'}}}], 'tool_choice': {'type': 'function', 'function': {'name': 'PIIData'}}}
2024-10-14 14:51:26,949 - DEBUG - max_retries: 1
2024-10-14 14:51:26,951 - DEBUG - Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'json_data': {'messages': [{'role': 'system', 'content': '\nYou are an AI agent specializing in contract creation and personal information extraction. \n\nYour role is:\n 1. Guide the process of extracting information from documents..\n 2. Verifying the extracted information with human input.\n 3. Identifying parties. \n 4. Constructing a contract. \n\n\nFollow the workflow precisely and ask for human input when needed.\n\n'}, {'role': 'user', 'content': "Extract the name and address from the given text:\n\nROUMANIE ROVIAINIA ROMANIA Carte Carte DE iDentitate IdEnTITY Didentite seala SS Nr 099994 Card CNP 2410415400542 93coQ Nume/NomiLast name VASILESCU Pronume/Prenom/Flrst name ELENA < CetatenielNatlonallte/Natlonalily M Sex SexelSer Romn\u0103 ROU Loc nastore/Licu de naissancolF 'ar0 ol birth Mun: Dej Jud. Cluj Domiciliu/Adresse A ess Mun. Bucuresti Sec. 5 Str Nicolae Iorga nr.3 900 B Emisa delDelivree parllssued by Valabilitate/Vahidile Valiouy D.EPAB.D- 06.01.17-15.04.2077 IDROUVASILESCU<<ELENA<<<<<<<<<<<<<<< SS099994<0R0u4104151F770415824003421"}], 'model': 'gpt-4', 'tool_choice': {'type': 'function', 'function': {'name': 'PIIData'}}, 'tools': [{'type': 'function', 'function': {'name': 'PIIData', 'description': 'Correctly extracted `PIIData` with all the required parameters with correct types', 'parameters': {'properties': {'name': {'description': 'Full name of the person', 'title': 'Name', 'type': 'string'}, 'address': {'description': 'Residential address of the person', 'title': 'Address', 'type': 'string'}}, 'required': ['address', 'name'], 'type': 'object'}}}]}}
2024-10-14 14:51:26,952 - DEBUG - Sending HTTP Request: POST https://api.openai.com/v1/chat/completions
2024-10-14 14:51:26,952 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-10-14 14:51:26,952 - DEBUG - send_request_headers.complete
2024-10-14 14:51:26,952 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-10-14 14:51:26,953 - DEBUG - send_request_body.complete
2024-10-14 14:51:26,953 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-10-14 14:51:29,566 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Mon, 14 Oct 2024 11:51:29 GMT'), (b'Content-Type', b'application/json'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'user-kzzh9hik9ryjiou4ftvhondh'), (b'openai-processing-ms', b'2443'), (b'openai-version', b'2020-10-01'), (b'x-ratelimit-limit-requests', b'10000'), (b'x-ratelimit-limit-tokens', b'10000'), (b'x-ratelimit-remaining-requests', b'9994'), (b'x-ratelimit-remaining-tokens', b'9742'), (b'x-ratelimit-reset-requests', b'49.166s'), (b'x-ratelimit-reset-tokens', b'1.548s'), (b'x-request-id', b'req_d5c1761e2c322da0e67c0e0a97bb3588'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8d275b8b49e1c9e9-OTP'), (b'Content-Encoding', b'gzip'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-10-14 14:51:29,567 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2024-10-14 14:51:29,567 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-10-14 14:51:29,567 - DEBUG - receive_response_body.complete
2024-10-14 14:51:29,568 - DEBUG - response_closed.started
2024-10-14 14:51:29,568 - DEBUG - response_closed.complete
2024-10-14 14:51:29,568 - DEBUG - HTTP Response: POST https://api.openai.com/v1/chat/completions "200 OK" Headers({'date': 'Mon, 14 Oct 2024 11:51:29 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-expose-headers': 'X-Request-ID', 'openai-organization': 'user-kzzh9hik9ryjiou4ftvhondh', 'openai-processing-ms': '2443', 'openai-version': '2020-10-01', 'x-ratelimit-limit-requests': '10000', 'x-ratelimit-limit-tokens': '10000', 'x-ratelimit-remaining-requests': '9994', 'x-ratelimit-remaining-tokens': '9742', 'x-ratelimit-reset-requests': '49.166s', 'x-ratelimit-reset-tokens': '1.548s', 'x-request-id': 'req_d5c1761e2c322da0e67c0e0a97bb3588', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8d275b8b49e1c9e9-OTP', 'content-encoding': 'gzip', 'alt-svc': 'h3=":443"; ma=86400'})
2024-10-14 14:51:29,568 - DEBUG - request_id: req_d5c1761e2c322da0e67c0e0a97bb3588
2024-10-14 14:51:29,569 - DEBUG - Instructor Raw Response: ChatCompletion(id='chatcmpl-AIDtfoBXkBll5t9QK7nxcmPp3gH1U', choices=[Choice(finish_reason='stop', index=0, logprobs=None, message=ChatCompletionMessage(content=None, refusal=None, role='assistant', function_call=None, tool_calls=[ChatCompletionMessageToolCall(id='call_KmbYOMRd5vpDfXhW117xtcPa', function=Function(arguments='{\n"name": "ELENA VASILESCU",\n"address": "Mun. Bucuresti Sec. 5 Str Nicolae Iorga nr.3 900 B"\n}', name='PIIData'), type='function')]))], created=1728906687, model='gpt-4-0613', object='chat.completion', service_tier=None, system_fingerprint=None, usage=CompletionUsage(completion_tokens=42, prompt_tokens=380, total_tokens=422, completion_tokens_details=None, prompt_tokens_details=None))
2024-10-14 14:51:30,942 - DEBUG - Instructor Request: mode.value='tool_call', response_model=<class 'models.AgentAction'>, new_kwargs={'model': 'gpt-4', 'messages': [{'role': 'system', 'content': '\nYou are an AI agent specializing in contract creation and personal information extraction. \n\nYour role is:\n 1. Guide the process of extracting information from documents..\n 2. Verifying the extracted information with human input.\n 3. Identifying parties. \n 4. Constructing a contract. \n\n\nFollow the workflow precisely and ask for human input when needed.\n\n'}, {'role': 'user', 'content': '\n    Current state:\n    - Verified PII data: 2 entries\n    - Parties identified: No\n    - Contract type determined: No\n    - Contract constructed: No\n    \nWhat action should be taken next? Choose from: extract_pii, identify_parties, determine_contract_type, construct_contract, finish'}], 'tools': [{'type': 'function', 'function': {'name': 'AgentAction', 'description': 'Correctly extracted `AgentAction` with all the required parameters with correct types', 'parameters': {'properties': {'action': {'description': 'Action to be performed by the agent', 'title': 'Action', 'type': 'string'}, 'parameters': {'additionalProperties': {'type': 'string'}, 'description': 'Parameters for the action', 'title': 'Parameters', 'type': 'object'}}, 'required': ['action', 'parameters'], 'type': 'object'}}}], 'tool_choice': {'type': 'function', 'function': {'name': 'AgentAction'}}}
2024-10-14 14:51:30,942 - DEBUG - max_retries: 1
2024-10-14 14:51:30,943 - DEBUG - Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'json_data': {'messages': [{'role': 'system', 'content': '\nYou are an AI agent specializing in contract creation and personal information extraction. \n\nYour role is:\n 1. Guide the process of extracting information from documents..\n 2. Verifying the extracted information with human input.\n 3. Identifying parties. \n 4. Constructing a contract. \n\n\nFollow the workflow precisely and ask for human input when needed.\n\n'}, {'role': 'user', 'content': '\n    Current state:\n    - Verified PII data: 2 entries\n    - Parties identified: No\n    - Contract type determined: No\n    - Contract constructed: No\n    \nWhat action should be taken next? Choose from: extract_pii, identify_parties, determine_contract_type, construct_contract, finish'}], 'model': 'gpt-4', 'tool_choice': {'type': 'function', 'function': {'name': 'AgentAction'}}, 'tools': [{'type': 'function', 'function': {'name': 'AgentAction', 'description': 'Correctly extracted `AgentAction` with all the required parameters with correct types', 'parameters': {'properties': {'action': {'description': 'Action to be performed by the agent', 'title': 'Action', 'type': 'string'}, 'parameters': {'additionalProperties': {'type': 'string'}, 'description': 'Parameters for the action', 'title': 'Parameters', 'type': 'object'}}, 'required': ['action', 'parameters'], 'type': 'object'}}}]}}
2024-10-14 14:51:30,944 - DEBUG - Sending HTTP Request: POST https://api.openai.com/v1/chat/completions
2024-10-14 14:51:30,944 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-10-14 14:51:30,944 - DEBUG - send_request_headers.complete
2024-10-14 14:51:30,944 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-10-14 14:51:30,944 - DEBUG - send_request_body.complete
2024-10-14 14:51:30,944 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-10-14 14:51:32,116 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Mon, 14 Oct 2024 11:51:32 GMT'), (b'Content-Type', b'application/json'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'user-kzzh9hik9ryjiou4ftvhondh'), (b'openai-processing-ms', b'1022'), (b'openai-version', b'2020-10-01'), (b'x-ratelimit-limit-requests', b'10000'), (b'x-ratelimit-limit-tokens', b'10000'), (b'x-ratelimit-remaining-requests', b'9993'), (b'x-ratelimit-remaining-tokens', b'9821'), (b'x-ratelimit-reset-requests', b'53.818s'), (b'x-ratelimit-reset-tokens', b'1.074s'), (b'x-request-id', b'req_6d1f6c7f81f1d91ac8230950461fefe9'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8d275ba43d7cc9e9-OTP'), (b'Content-Encoding', b'gzip'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-10-14 14:51:32,116 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2024-10-14 14:51:32,116 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-10-14 14:51:32,116 - DEBUG - receive_response_body.complete
2024-10-14 14:51:32,117 - DEBUG - response_closed.started
2024-10-14 14:51:32,117 - DEBUG - response_closed.complete
2024-10-14 14:51:32,117 - DEBUG - HTTP Response: POST https://api.openai.com/v1/chat/completions "200 OK" Headers({'date': 'Mon, 14 Oct 2024 11:51:32 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-expose-headers': 'X-Request-ID', 'openai-organization': 'user-kzzh9hik9ryjiou4ftvhondh', 'openai-processing-ms': '1022', 'openai-version': '2020-10-01', 'x-ratelimit-limit-requests': '10000', 'x-ratelimit-limit-tokens': '10000', 'x-ratelimit-remaining-requests': '9993', 'x-ratelimit-remaining-tokens': '9821', 'x-ratelimit-reset-requests': '53.818s', 'x-ratelimit-reset-tokens': '1.074s', 'x-request-id': 'req_6d1f6c7f81f1d91ac8230950461fefe9', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8d275ba43d7cc9e9-OTP', 'content-encoding': 'gzip', 'alt-svc': 'h3=":443"; ma=86400'})
2024-10-14 14:51:32,117 - DEBUG - request_id: req_6d1f6c7f81f1d91ac8230950461fefe9
2024-10-14 14:51:32,117 - DEBUG - Instructor Raw Response: ChatCompletion(id='chatcmpl-AIDtjKU9tXgrH0qMqYpBUXFdc2YuM', choices=[Choice(finish_reason='stop', index=0, logprobs=None, message=ChatCompletionMessage(content=None, refusal=None, role='assistant', function_call=None, tool_calls=[ChatCompletionMessageToolCall(id='call_5MxzwgtYskQNc7ekeVzS0hVM', function=Function(arguments='\n{\n  "action": "identify_parties"\n}', name='AgentAction'), type='function')]))], created=1728906691, model='gpt-4-0613', object='chat.completion', service_tier=None, system_fingerprint=None, usage=CompletionUsage(completion_tokens=12, prompt_tokens=207, total_tokens=219, completion_tokens_details=None, prompt_tokens_details=None))
2024-10-14 14:51:32,118 - DEBUG - Instructor Request: mode.value='tool_call', response_model=<class 'models.ContractParties'>, new_kwargs={'model': 'gpt-4', 'messages': [{'role': 'system', 'content': '\nYou are an AI agent specializing in contract creation and personal information extraction. \n\nYour role is:\n 1. Guide the process of extracting information from documents..\n 2. Verifying the extracted information with human input.\n 3. Identifying parties. \n 4. Constructing a contract. \n\n\nFollow the workflow precisely and ask for human input when needed.\n\n'}, {'role': 'user', 'content': 'Identify the buyer and seller from the given information:\n\nName: ISPILANTE SENTIMENT BRUSLI, Address: Sos. Giurgiului nr.1 695 TR Videle Jud: Teleorman\nName: ELENA VASILESCU, Address: Mun. Bucuresti Sec. 5 Str Nicolae Iorga nr.3 900 B'}], 'tools': [{'type': 'function', 'function': {'name': 'ContractParties', 'description': 'Correctly extracted `ContractParties` with all the required parameters with correct types', 'parameters': {'properties': {'buyer': {'description': 'Name of the buyer', 'title': 'Buyer', 'type': 'string'}, 'seller': {'description': 'Name of the seller', 'title': 'Seller', 'type': 'string'}}, 'required': ['buyer', 'seller'], 'type': 'object'}}}], 'tool_choice': {'type': 'function', 'function': {'name': 'ContractParties'}}}
2024-10-14 14:51:32,118 - DEBUG - max_retries: 1
2024-10-14 14:51:32,119 - DEBUG - Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'json_data': {'messages': [{'role': 'system', 'content': '\nYou are an AI agent specializing in contract creation and personal information extraction. \n\nYour role is:\n 1. Guide the process of extracting information from documents..\n 2. Verifying the extracted information with human input.\n 3. Identifying parties. \n 4. Constructing a contract. \n\n\nFollow the workflow precisely and ask for human input when needed.\n\n'}, {'role': 'user', 'content': 'Identify the buyer and seller from the given information:\n\nName: ISPILANTE SENTIMENT BRUSLI, Address: Sos. Giurgiului nr.1 695 TR Videle Jud: Teleorman\nName: ELENA VASILESCU, Address: Mun. Bucuresti Sec. 5 Str Nicolae Iorga nr.3 900 B'}], 'model': 'gpt-4', 'tool_choice': {'type': 'function', 'function': {'name': 'ContractParties'}}, 'tools': [{'type': 'function', 'function': {'name': 'ContractParties', 'description': 'Correctly extracted `ContractParties` with all the required parameters with correct types', 'parameters': {'properties': {'buyer': {'description': 'Name of the buyer', 'title': 'Buyer', 'type': 'string'}, 'seller': {'description': 'Name of the seller', 'title': 'Seller', 'type': 'string'}}, 'required': ['buyer', 'seller'], 'type': 'object'}}}]}}
2024-10-14 14:51:32,120 - DEBUG - Sending HTTP Request: POST https://api.openai.com/v1/chat/completions
2024-10-14 14:51:32,120 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-10-14 14:51:32,120 - DEBUG - send_request_headers.complete
2024-10-14 14:51:32,120 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-10-14 14:51:32,120 - DEBUG - send_request_body.complete
2024-10-14 14:51:32,120 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-10-14 14:51:34,434 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Mon, 14 Oct 2024 11:51:34 GMT'), (b'Content-Type', b'application/json'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'user-kzzh9hik9ryjiou4ftvhondh'), (b'openai-processing-ms', b'2162'), (b'openai-version', b'2020-10-01'), (b'x-ratelimit-limit-requests', b'10000'), (b'x-ratelimit-limit-tokens', b'10000'), (b'x-ratelimit-remaining-requests', b'9992'), (b'x-ratelimit-remaining-tokens', b'9810'), (b'x-ratelimit-reset-requests', b'1m1.284s'), (b'x-ratelimit-reset-tokens', b'1.135s'), (b'x-request-id', b'req_0a3f47cbe923d13c34398a52d21ebfed'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8d275bab9c7ac9e9-OTP'), (b'Content-Encoding', b'gzip'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-10-14 14:51:34,435 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2024-10-14 14:51:34,435 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-10-14 14:51:34,436 - DEBUG - receive_response_body.complete
2024-10-14 14:51:34,436 - DEBUG - response_closed.started
2024-10-14 14:51:34,436 - DEBUG - response_closed.complete
2024-10-14 14:51:34,436 - DEBUG - HTTP Response: POST https://api.openai.com/v1/chat/completions "200 OK" Headers({'date': 'Mon, 14 Oct 2024 11:51:34 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-expose-headers': 'X-Request-ID', 'openai-organization': 'user-kzzh9hik9ryjiou4ftvhondh', 'openai-processing-ms': '2162', 'openai-version': '2020-10-01', 'x-ratelimit-limit-requests': '10000', 'x-ratelimit-limit-tokens': '10000', 'x-ratelimit-remaining-requests': '9992', 'x-ratelimit-remaining-tokens': '9810', 'x-ratelimit-reset-requests': '1m1.284s', 'x-ratelimit-reset-tokens': '1.135s', 'x-request-id': 'req_0a3f47cbe923d13c34398a52d21ebfed', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8d275bab9c7ac9e9-OTP', 'content-encoding': 'gzip', 'alt-svc': 'h3=":443"; ma=86400'})
2024-10-14 14:51:34,437 - DEBUG - request_id: req_0a3f47cbe923d13c34398a52d21ebfed
2024-10-14 14:51:34,438 - DEBUG - Instructor Raw Response: ChatCompletion(id='chatcmpl-AIDtkqtBs1Yn61IbeWs3EUqe3fL0v', choices=[Choice(finish_reason='stop', index=0, logprobs=None, message=ChatCompletionMessage(content=None, refusal=None, role='assistant', function_call=None, tool_calls=[ChatCompletionMessageToolCall(id='call_4DOrnQHETa9tAOUEd73ZtRY7', function=Function(arguments='{\n  "buyer": "ISPILANTE SENTIMENT BRUSLI",\n  "seller": "ELENA VASILESCU"\n}', name='ContractParties'), type='function')]))], created=1728906692, model='gpt-4-0613', object='chat.completion', service_tier=None, system_fingerprint=None, usage=CompletionUsage(completion_tokens=30, prompt_tokens=232, total_tokens=262, completion_tokens_details=None, prompt_tokens_details=None))
2024-10-14 14:51:34,440 - DEBUG - Instructor Request: mode.value='tool_call', response_model=<class 'models.AgentAction'>, new_kwargs={'model': 'gpt-4', 'messages': [{'role': 'system', 'content': '\nYou are an AI agent specializing in contract creation and personal information extraction. \n\nYour role is:\n 1. Guide the process of extracting information from documents..\n 2. Verifying the extracted information with human input.\n 3. Identifying parties. \n 4. Constructing a contract. \n\n\nFollow the workflow precisely and ask for human input when needed.\n\n'}, {'role': 'user', 'content': '\n    Current state:\n    - Verified PII data: 2 entries\n    - Parties identified: Yes\n    - Contract type determined: No\n    - Contract constructed: No\n    \nWhat action should be taken next? Choose from: extract_pii, identify_parties, determine_contract_type, construct_contract, finish'}], 'tools': [{'type': 'function', 'function': {'name': 'AgentAction', 'description': 'Correctly extracted `AgentAction` with all the required parameters with correct types', 'parameters': {'properties': {'action': {'description': 'Action to be performed by the agent', 'title': 'Action', 'type': 'string'}, 'parameters': {'additionalProperties': {'type': 'string'}, 'description': 'Parameters for the action', 'title': 'Parameters', 'type': 'object'}}, 'required': ['action', 'parameters'], 'type': 'object'}}}], 'tool_choice': {'type': 'function', 'function': {'name': 'AgentAction'}}}
2024-10-14 14:51:34,440 - DEBUG - max_retries: 1
2024-10-14 14:51:34,443 - DEBUG - Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'json_data': {'messages': [{'role': 'system', 'content': '\nYou are an AI agent specializing in contract creation and personal information extraction. \n\nYour role is:\n 1. Guide the process of extracting information from documents..\n 2. Verifying the extracted information with human input.\n 3. Identifying parties. \n 4. Constructing a contract. \n\n\nFollow the workflow precisely and ask for human input when needed.\n\n'}, {'role': 'user', 'content': '\n    Current state:\n    - Verified PII data: 2 entries\n    - Parties identified: Yes\n    - Contract type determined: No\n    - Contract constructed: No\n    \nWhat action should be taken next? Choose from: extract_pii, identify_parties, determine_contract_type, construct_contract, finish'}], 'model': 'gpt-4', 'tool_choice': {'type': 'function', 'function': {'name': 'AgentAction'}}, 'tools': [{'type': 'function', 'function': {'name': 'AgentAction', 'description': 'Correctly extracted `AgentAction` with all the required parameters with correct types', 'parameters': {'properties': {'action': {'description': 'Action to be performed by the agent', 'title': 'Action', 'type': 'string'}, 'parameters': {'additionalProperties': {'type': 'string'}, 'description': 'Parameters for the action', 'title': 'Parameters', 'type': 'object'}}, 'required': ['action', 'parameters'], 'type': 'object'}}}]}}
2024-10-14 14:51:34,443 - DEBUG - Sending HTTP Request: POST https://api.openai.com/v1/chat/completions
2024-10-14 14:51:34,444 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-10-14 14:51:34,444 - DEBUG - send_request_headers.complete
2024-10-14 14:51:34,444 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-10-14 14:51:34,444 - DEBUG - send_request_body.complete
2024-10-14 14:51:34,444 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-10-14 14:51:35,476 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Mon, 14 Oct 2024 11:51:35 GMT'), (b'Content-Type', b'application/json'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'user-kzzh9hik9ryjiou4ftvhondh'), (b'openai-processing-ms', b'872'), (b'openai-version', b'2020-10-01'), (b'x-ratelimit-limit-requests', b'10000'), (b'x-ratelimit-limit-tokens', b'10000'), (b'x-ratelimit-remaining-requests', b'9992'), (b'x-ratelimit-remaining-tokens', b'9749'), (b'x-ratelimit-reset-requests', b'1m7.598s'), (b'x-ratelimit-reset-tokens', b'1.5s'), (b'x-request-id', b'req_85ab9aaaf960ac91d9345366eef1bb0b'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8d275bba1809c9e9-OTP'), (b'Content-Encoding', b'gzip'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-10-14 14:51:35,477 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2024-10-14 14:51:35,477 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-10-14 14:51:35,478 - DEBUG - receive_response_body.complete
2024-10-14 14:51:35,478 - DEBUG - response_closed.started
2024-10-14 14:51:35,478 - DEBUG - response_closed.complete
2024-10-14 14:51:35,478 - DEBUG - HTTP Response: POST https://api.openai.com/v1/chat/completions "200 OK" Headers({'date': 'Mon, 14 Oct 2024 11:51:35 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-expose-headers': 'X-Request-ID', 'openai-organization': 'user-kzzh9hik9ryjiou4ftvhondh', 'openai-processing-ms': '872', 'openai-version': '2020-10-01', 'x-ratelimit-limit-requests': '10000', 'x-ratelimit-limit-tokens': '10000', 'x-ratelimit-remaining-requests': '9992', 'x-ratelimit-remaining-tokens': '9749', 'x-ratelimit-reset-requests': '1m7.598s', 'x-ratelimit-reset-tokens': '1.5s', 'x-request-id': 'req_85ab9aaaf960ac91d9345366eef1bb0b', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8d275bba1809c9e9-OTP', 'content-encoding': 'gzip', 'alt-svc': 'h3=":443"; ma=86400'})
2024-10-14 14:51:35,479 - DEBUG - request_id: req_85ab9aaaf960ac91d9345366eef1bb0b
2024-10-14 14:51:35,480 - DEBUG - Instructor Raw Response: ChatCompletion(id='chatcmpl-AIDtnXiuT0QbjjeOjEJ9tQDShMOPb', choices=[Choice(finish_reason='stop', index=0, logprobs=None, message=ChatCompletionMessage(content=None, refusal=None, role='assistant', function_call=None, tool_calls=[ChatCompletionMessageToolCall(id='call_6zLRcMrrAmnn5dLQz4KWgp6W', function=Function(arguments='\n{\n"action": "determine_contract_type"\n}', name='AgentAction'), type='function')]))], created=1728906695, model='gpt-4-0613', object='chat.completion', service_tier=None, system_fingerprint=None, usage=CompletionUsage(completion_tokens=12, prompt_tokens=207, total_tokens=219, completion_tokens_details=None, prompt_tokens_details=None))
2024-10-14 14:51:38,872 - DEBUG - Instructor Request: mode.value='tool_call', response_model=<class 'models.ContractDetails'>, new_kwargs={'model': 'gpt-4', 'messages': [{'role': 'system', 'content': '\nYou are an AI agent specializing in contract creation and personal information extraction. \n\nYour role is:\n 1. Guide the process of extracting information from documents..\n 2. Verifying the extracted information with human input.\n 3. Identifying parties. \n 4. Constructing a contract. \n\n\nFollow the workflow precisely and ask for human input when needed.\n\n'}, {'role': 'user', 'content': 'Determine the contract details for a airbnb contract between ISPILANTE SENTIMENT BRUSLI and ELENA VASILESCU.'}], 'tools': [{'type': 'function', 'function': {'name': 'ContractDetails', 'description': 'Correctly extracted `ContractDetails` with all the required parameters with correct types', 'parameters': {'properties': {'contract_type': {'description': 'Type of contract (e.g., airbnb, buy-sell, it-consulting)', 'title': 'Contract Type', 'type': 'string'}, 'additional_info': {'additionalProperties': {'type': 'string'}, 'description': 'Additional information specific to the contract type', 'title': 'Additional Info', 'type': 'object'}}, 'required': ['additional_info', 'contract_type'], 'type': 'object'}}}], 'tool_choice': {'type': 'function', 'function': {'name': 'ContractDetails'}}}
2024-10-14 14:51:38,872 - DEBUG - max_retries: 1
2024-10-14 14:51:38,874 - DEBUG - Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'json_data': {'messages': [{'role': 'system', 'content': '\nYou are an AI agent specializing in contract creation and personal information extraction. \n\nYour role is:\n 1. Guide the process of extracting information from documents..\n 2. Verifying the extracted information with human input.\n 3. Identifying parties. \n 4. Constructing a contract. \n\n\nFollow the workflow precisely and ask for human input when needed.\n\n'}, {'role': 'user', 'content': 'Determine the contract details for a airbnb contract between ISPILANTE SENTIMENT BRUSLI and ELENA VASILESCU.'}], 'model': 'gpt-4', 'tool_choice': {'type': 'function', 'function': {'name': 'ContractDetails'}}, 'tools': [{'type': 'function', 'function': {'name': 'ContractDetails', 'description': 'Correctly extracted `ContractDetails` with all the required parameters with correct types', 'parameters': {'properties': {'contract_type': {'description': 'Type of contract (e.g., airbnb, buy-sell, it-consulting)', 'title': 'Contract Type', 'type': 'string'}, 'additional_info': {'additionalProperties': {'type': 'string'}, 'description': 'Additional information specific to the contract type', 'title': 'Additional Info', 'type': 'object'}}, 'required': ['additional_info', 'contract_type'], 'type': 'object'}}}]}}
2024-10-14 14:51:38,874 - DEBUG - Sending HTTP Request: POST https://api.openai.com/v1/chat/completions
2024-10-14 14:51:38,875 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-10-14 14:51:38,875 - DEBUG - send_request_headers.complete
2024-10-14 14:51:38,875 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-10-14 14:51:38,875 - DEBUG - send_request_body.complete
2024-10-14 14:51:38,875 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-10-14 14:51:39,784 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Mon, 14 Oct 2024 11:51:40 GMT'), (b'Content-Type', b'application/json'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'user-kzzh9hik9ryjiou4ftvhondh'), (b'openai-processing-ms', b'752'), (b'openai-version', b'2020-10-01'), (b'x-ratelimit-limit-requests', b'10000'), (b'x-ratelimit-limit-tokens', b'10000'), (b'x-ratelimit-remaining-requests', b'9991'), (b'x-ratelimit-remaining-tokens', b'9865'), (b'x-ratelimit-reset-requests', b'1m11.801s'), (b'x-ratelimit-reset-tokens', b'810ms'), (b'x-request-id', b'req_f2c6558c7bba3baddf692a14ad898872'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8d275bd5cc11c9e9-OTP'), (b'Content-Encoding', b'gzip'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-10-14 14:51:39,785 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2024-10-14 14:51:39,785 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-10-14 14:51:39,785 - DEBUG - receive_response_body.complete
2024-10-14 14:51:39,786 - DEBUG - response_closed.started
2024-10-14 14:51:39,786 - DEBUG - response_closed.complete
2024-10-14 14:51:39,786 - DEBUG - HTTP Response: POST https://api.openai.com/v1/chat/completions "200 OK" Headers({'date': 'Mon, 14 Oct 2024 11:51:40 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-expose-headers': 'X-Request-ID', 'openai-organization': 'user-kzzh9hik9ryjiou4ftvhondh', 'openai-processing-ms': '752', 'openai-version': '2020-10-01', 'x-ratelimit-limit-requests': '10000', 'x-ratelimit-limit-tokens': '10000', 'x-ratelimit-remaining-requests': '9991', 'x-ratelimit-remaining-tokens': '9865', 'x-ratelimit-reset-requests': '1m11.801s', 'x-ratelimit-reset-tokens': '810ms', 'x-request-id': 'req_f2c6558c7bba3baddf692a14ad898872', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8d275bd5cc11c9e9-OTP', 'content-encoding': 'gzip', 'alt-svc': 'h3=":443"; ma=86400'})
2024-10-14 14:51:39,786 - DEBUG - request_id: req_f2c6558c7bba3baddf692a14ad898872
2024-10-14 14:51:39,787 - DEBUG - Instructor Raw Response: ChatCompletion(id='chatcmpl-AIDtrBOMrW5TvsEVetJBy2f018GS6', choices=[Choice(finish_reason='stop', index=0, logprobs=None, message=ChatCompletionMessage(content=None, refusal=None, role='assistant', function_call=None, tool_calls=[ChatCompletionMessageToolCall(id='call_FJ6GISMi612qYnnnqJLqmAlC', function=Function(arguments='{\n"contract_type": "airbnb"\n}', name='ContractDetails'), type='function')]))], created=1728906699, model='gpt-4-0613', object='chat.completion', service_tier=None, system_fingerprint=None, usage=CompletionUsage(completion_tokens=10, prompt_tokens=184, total_tokens=194, completion_tokens_details=None, prompt_tokens_details=None))
2024-10-14 14:51:39,790 - DEBUG - Instructor Request: mode.value='tool_call', response_model=<class 'models.AgentAction'>, new_kwargs={'model': 'gpt-4', 'messages': [{'role': 'system', 'content': '\nYou are an AI agent specializing in contract creation and personal information extraction. \n\nYour role is:\n 1. Guide the process of extracting information from documents..\n 2. Verifying the extracted information with human input.\n 3. Identifying parties. \n 4. Constructing a contract. \n\n\nFollow the workflow precisely and ask for human input when needed.\n\n'}, {'role': 'user', 'content': '\n    Current state:\n    - Verified PII data: 2 entries\n    - Parties identified: Yes\n    - Contract type determined: Yes\n    - Contract constructed: No\n    \nWhat action should be taken next? Choose from: extract_pii, identify_parties, determine_contract_type, construct_contract, finish'}], 'tools': [{'type': 'function', 'function': {'name': 'AgentAction', 'description': 'Correctly extracted `AgentAction` with all the required parameters with correct types', 'parameters': {'properties': {'action': {'description': 'Action to be performed by the agent', 'title': 'Action', 'type': 'string'}, 'parameters': {'additionalProperties': {'type': 'string'}, 'description': 'Parameters for the action', 'title': 'Parameters', 'type': 'object'}}, 'required': ['action', 'parameters'], 'type': 'object'}}}], 'tool_choice': {'type': 'function', 'function': {'name': 'AgentAction'}}}
2024-10-14 14:51:39,790 - DEBUG - max_retries: 1
2024-10-14 14:51:39,793 - DEBUG - Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'json_data': {'messages': [{'role': 'system', 'content': '\nYou are an AI agent specializing in contract creation and personal information extraction. \n\nYour role is:\n 1. Guide the process of extracting information from documents..\n 2. Verifying the extracted information with human input.\n 3. Identifying parties. \n 4. Constructing a contract. \n\n\nFollow the workflow precisely and ask for human input when needed.\n\n'}, {'role': 'user', 'content': '\n    Current state:\n    - Verified PII data: 2 entries\n    - Parties identified: Yes\n    - Contract type determined: Yes\n    - Contract constructed: No\n    \nWhat action should be taken next? Choose from: extract_pii, identify_parties, determine_contract_type, construct_contract, finish'}], 'model': 'gpt-4', 'tool_choice': {'type': 'function', 'function': {'name': 'AgentAction'}}, 'tools': [{'type': 'function', 'function': {'name': 'AgentAction', 'description': 'Correctly extracted `AgentAction` with all the required parameters with correct types', 'parameters': {'properties': {'action': {'description': 'Action to be performed by the agent', 'title': 'Action', 'type': 'string'}, 'parameters': {'additionalProperties': {'type': 'string'}, 'description': 'Parameters for the action', 'title': 'Parameters', 'type': 'object'}}, 'required': ['action', 'parameters'], 'type': 'object'}}}]}}
2024-10-14 14:51:39,794 - DEBUG - Sending HTTP Request: POST https://api.openai.com/v1/chat/completions
2024-10-14 14:51:39,794 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-10-14 14:51:39,794 - DEBUG - send_request_headers.complete
2024-10-14 14:51:39,794 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-10-14 14:51:39,794 - DEBUG - send_request_body.complete
2024-10-14 14:51:39,795 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-10-14 14:51:40,620 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Mon, 14 Oct 2024 11:51:40 GMT'), (b'Content-Type', b'application/json'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'user-kzzh9hik9ryjiou4ftvhondh'), (b'openai-processing-ms', b'668'), (b'openai-version', b'2020-10-01'), (b'x-ratelimit-limit-requests', b'10000'), (b'x-ratelimit-limit-tokens', b'10000'), (b'x-ratelimit-remaining-requests', b'9990'), (b'x-ratelimit-remaining-tokens', b'9779'), (b'x-ratelimit-reset-requests', b'1m19.528s'), (b'x-ratelimit-reset-tokens', b'1.324s'), (b'x-request-id', b'req_3f1f12e75839c4abf02c27f3e2b60490'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8d275bdb8cc4c9e9-OTP'), (b'Content-Encoding', b'gzip'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-10-14 14:51:40,621 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2024-10-14 14:51:40,621 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-10-14 14:51:40,621 - DEBUG - receive_response_body.complete
2024-10-14 14:51:40,621 - DEBUG - response_closed.started
2024-10-14 14:51:40,621 - DEBUG - response_closed.complete
2024-10-14 14:51:40,621 - DEBUG - HTTP Response: POST https://api.openai.com/v1/chat/completions "200 OK" Headers({'date': 'Mon, 14 Oct 2024 11:51:40 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-expose-headers': 'X-Request-ID', 'openai-organization': 'user-kzzh9hik9ryjiou4ftvhondh', 'openai-processing-ms': '668', 'openai-version': '2020-10-01', 'x-ratelimit-limit-requests': '10000', 'x-ratelimit-limit-tokens': '10000', 'x-ratelimit-remaining-requests': '9990', 'x-ratelimit-remaining-tokens': '9779', 'x-ratelimit-reset-requests': '1m19.528s', 'x-ratelimit-reset-tokens': '1.324s', 'x-request-id': 'req_3f1f12e75839c4abf02c27f3e2b60490', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8d275bdb8cc4c9e9-OTP', 'content-encoding': 'gzip', 'alt-svc': 'h3=":443"; ma=86400'})
2024-10-14 14:51:40,621 - DEBUG - request_id: req_3f1f12e75839c4abf02c27f3e2b60490
2024-10-14 14:51:40,621 - DEBUG - Instructor Raw Response: ChatCompletion(id='chatcmpl-AIDtsGAeVL9MYHLrco3DcT2lPYh2x', choices=[Choice(finish_reason='stop', index=0, logprobs=None, message=ChatCompletionMessage(content=None, refusal=None, role='assistant', function_call=None, tool_calls=[ChatCompletionMessageToolCall(id='call_ut7g4p2k6wk8fEOsBA6qvnzQ', function=Function(arguments='\n{\n"action": "construct_contract"\n}', name='AgentAction'), type='function')]))], created=1728906700, model='gpt-4-0613', object='chat.completion', service_tier=None, system_fingerprint=None, usage=CompletionUsage(completion_tokens=10, prompt_tokens=207, total_tokens=217, completion_tokens_details=None, prompt_tokens_details=None))
2024-10-14 14:51:40,622 - DEBUG - Instructor Request: mode.value='tool_call', response_model=<class 'models.Contract'>, new_kwargs={'model': 'gpt-4', 'messages': [{'role': 'system', 'content': '\nYou are an AI agent specializing in contract creation and personal information extraction. \n\nYour role is:\n 1. Guide the process of extracting information from documents..\n 2. Verifying the extracted information with human input.\n 3. Identifying parties. \n 4. Constructing a contract. \n\n\nFollow the workflow precisely and ask for human input when needed.\n\n'}, {'role': 'user', 'content': 'Create a airbnb contract using the following template:\n\nAirbnb Rental Agreement Template (Improved Version)\n\nRental Agreement\n\nThis Rental Agreement ("Agreement") is made on [date] between:\n\n1. Parties\n\nHost: [Host\'s Name], residing at [Host\'s Address].\n\nGuest: [Guest\'s Name], residing at [Guest\'s Address].\n\n2. Property\n\nThe Host agrees to rent the property located at [Property Address] to the Guest for the term specified below.\n\nProperty Type: [Apartment/House/Condo/Other]\n\nBedrooms: [Number]\n\nBathrooms: [Number]\n\nOther Features: [Details]\n\n3. Rental Term\n\nThe Guest shall have access to the property for the following period:\n\nFixed Term: From [Start Date] at [Start Time] to [End Date] at [End Time].\n\nMonth-to-Month Lease: Starting on [Start Date], ending upon notice of [X] days from either party.\n\n4. Rental Amount\n\nTotal Rent: [Total Rent in USD]\n\nPayment Method: [e.g., bank transfer, credit card]\n\nPayment Due Date: [Due Date]\n\n5. Security Deposit\n\nAmount: [Security Deposit in USD]\n\nRefundable within [State\'s Requirement] after the lease ends, minus any deductions for damages.\n\n6. House Rules\n\nQuiet Hours: [Yes/No]. If yes, from [Start Time] to [End Time].\n\nSmoking Policy: [Prohibited/Permitted only in specific areas].\n\nPets: [Allowed/Not Allowed]. If allowed, specify any pet fees or restrictions.\n\n7. Utilities and Services\n\nThe Host shall provide all utilities and services, except for: [List of exceptions].\n\n8. Occupants\n\nThe total number of occupants allowed on the property is [Number of Guests].\n\n9. Parking\n\nParking Availability: [Number of Spaces, Fee (if any), and Description of Parking Space].\n\n10. Fees\n\nThe Guest agrees to pay the following fees upon execution of this Agreement:\n\nCleaning Fee: [Amount in USD]\n\nTaxes: [Amount in USD]\n\nOther Fees: [Specify and list amounts]\n\n11. Subletting\n\nSubletting Rights: [Allowed/Not Allowed]. If allowed, subtenants [must/must not] be approved by the Host prior to occupancy.\n\n12. Inspection and Maintenance\n\nMove-in Inspection: A move-in inspection checklist [will/will not] be completed.\n\nRight to Inspect: The Host has the right to inspect the property with reasonable notice as required by law.\n\nMaintenance: The Guest shall maintain the property in good condition. Any damages caused will be deducted from the Security Deposit.\n\n13. Liability\n\nThe Guest shall be responsible for any damages to the property.\n\nThe Host shall not be liable for injuries sustained by the Guest or their guests.\n\n14. Termination\n\nEither party may terminate this Agreement upon [X] days\' notice. All outstanding payments must be settled.\n\n15. Governing Law\n\nThis Agreement shall be governed by the laws of [Jurisdiction].\n\n16. Entire Agreement\n\nThis Agreement constitutes the entire understanding between the Host and the Guest regarding the rental and supersedes all prior agreements, whether written or oral.\n\n17. Signatures\n\nHost Signature: ______________________\n\nDate: ______________________\n\nGuest Signature: ______________________\n\nDate: ______________________\n\nBuyer: ISPILANTE SENTIMENT BRUSLI, Seller: ELENA VASILESCU, Address: Sos. Giurgiului nr.1 695 TR Videle Jud: Teleorman, Additional Details: {}'}], 'tools': [{'type': 'function', 'function': {'name': 'Contract', 'description': 'Correctly extracted `Contract` with all the required parameters with correct types', 'parameters': {'properties': {'buyer': {'description': 'Name of the buyer', 'title': 'Buyer', 'type': 'string'}, 'seller': {'description': 'Name of the seller', 'title': 'Seller', 'type': 'string'}, 'address': {'description': 'Address where the contract is applicable', 'title': 'Address', 'type': 'string'}, 'terms': {'description': 'Terms of the contract', 'title': 'Terms', 'type': 'string'}}, 'required': ['address', 'buyer', 'seller', 'terms'], 'type': 'object'}}}], 'tool_choice': {'type': 'function', 'function': {'name': 'Contract'}}}
2024-10-14 14:51:40,622 - DEBUG - max_retries: 1
2024-10-14 14:51:40,623 - DEBUG - Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'json_data': {'messages': [{'role': 'system', 'content': '\nYou are an AI agent specializing in contract creation and personal information extraction. \n\nYour role is:\n 1. Guide the process of extracting information from documents..\n 2. Verifying the extracted information with human input.\n 3. Identifying parties. \n 4. Constructing a contract. \n\n\nFollow the workflow precisely and ask for human input when needed.\n\n'}, {'role': 'user', 'content': 'Create a airbnb contract using the following template:\n\nAirbnb Rental Agreement Template (Improved Version)\n\nRental Agreement\n\nThis Rental Agreement ("Agreement") is made on [date] between:\n\n1. Parties\n\nHost: [Host\'s Name], residing at [Host\'s Address].\n\nGuest: [Guest\'s Name], residing at [Guest\'s Address].\n\n2. Property\n\nThe Host agrees to rent the property located at [Property Address] to the Guest for the term specified below.\n\nProperty Type: [Apartment/House/Condo/Other]\n\nBedrooms: [Number]\n\nBathrooms: [Number]\n\nOther Features: [Details]\n\n3. Rental Term\n\nThe Guest shall have access to the property for the following period:\n\nFixed Term: From [Start Date] at [Start Time] to [End Date] at [End Time].\n\nMonth-to-Month Lease: Starting on [Start Date], ending upon notice of [X] days from either party.\n\n4. Rental Amount\n\nTotal Rent: [Total Rent in USD]\n\nPayment Method: [e.g., bank transfer, credit card]\n\nPayment Due Date: [Due Date]\n\n5. Security Deposit\n\nAmount: [Security Deposit in USD]\n\nRefundable within [State\'s Requirement] after the lease ends, minus any deductions for damages.\n\n6. House Rules\n\nQuiet Hours: [Yes/No]. If yes, from [Start Time] to [End Time].\n\nSmoking Policy: [Prohibited/Permitted only in specific areas].\n\nPets: [Allowed/Not Allowed]. If allowed, specify any pet fees or restrictions.\n\n7. Utilities and Services\n\nThe Host shall provide all utilities and services, except for: [List of exceptions].\n\n8. Occupants\n\nThe total number of occupants allowed on the property is [Number of Guests].\n\n9. Parking\n\nParking Availability: [Number of Spaces, Fee (if any), and Description of Parking Space].\n\n10. Fees\n\nThe Guest agrees to pay the following fees upon execution of this Agreement:\n\nCleaning Fee: [Amount in USD]\n\nTaxes: [Amount in USD]\n\nOther Fees: [Specify and list amounts]\n\n11. Subletting\n\nSubletting Rights: [Allowed/Not Allowed]. If allowed, subtenants [must/must not] be approved by the Host prior to occupancy.\n\n12. Inspection and Maintenance\n\nMove-in Inspection: A move-in inspection checklist [will/will not] be completed.\n\nRight to Inspect: The Host has the right to inspect the property with reasonable notice as required by law.\n\nMaintenance: The Guest shall maintain the property in good condition. Any damages caused will be deducted from the Security Deposit.\n\n13. Liability\n\nThe Guest shall be responsible for any damages to the property.\n\nThe Host shall not be liable for injuries sustained by the Guest or their guests.\n\n14. Termination\n\nEither party may terminate this Agreement upon [X] days\' notice. All outstanding payments must be settled.\n\n15. Governing Law\n\nThis Agreement shall be governed by the laws of [Jurisdiction].\n\n16. Entire Agreement\n\nThis Agreement constitutes the entire understanding between the Host and the Guest regarding the rental and supersedes all prior agreements, whether written or oral.\n\n17. Signatures\n\nHost Signature: ______________________\n\nDate: ______________________\n\nGuest Signature: ______________________\n\nDate: ______________________\n\nBuyer: ISPILANTE SENTIMENT BRUSLI, Seller: ELENA VASILESCU, Address: Sos. Giurgiului nr.1 695 TR Videle Jud: Teleorman, Additional Details: {}'}], 'model': 'gpt-4', 'tool_choice': {'type': 'function', 'function': {'name': 'Contract'}}, 'tools': [{'type': 'function', 'function': {'name': 'Contract', 'description': 'Correctly extracted `Contract` with all the required parameters with correct types', 'parameters': {'properties': {'buyer': {'description': 'Name of the buyer', 'title': 'Buyer', 'type': 'string'}, 'seller': {'description': 'Name of the seller', 'title': 'Seller', 'type': 'string'}, 'address': {'description': 'Address where the contract is applicable', 'title': 'Address', 'type': 'string'}, 'terms': {'description': 'Terms of the contract', 'title': 'Terms', 'type': 'string'}}, 'required': ['address', 'buyer', 'seller', 'terms'], 'type': 'object'}}}]}}
2024-10-14 14:51:40,624 - DEBUG - Sending HTTP Request: POST https://api.openai.com/v1/chat/completions
2024-10-14 14:51:40,624 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-10-14 14:51:40,624 - DEBUG - send_request_headers.complete
2024-10-14 14:51:40,624 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-10-14 14:51:40,624 - DEBUG - send_request_body.complete
2024-10-14 14:51:40,624 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-10-14 14:51:48,813 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Mon, 14 Oct 2024 11:51:49 GMT'), (b'Content-Type', b'application/json'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'user-kzzh9hik9ryjiou4ftvhondh'), (b'openai-processing-ms', b'8031'), (b'openai-version', b'2020-10-01'), (b'x-ratelimit-limit-requests', b'10000'), (b'x-ratelimit-limit-tokens', b'10000'), (b'x-ratelimit-remaining-requests', b'9989'), (b'x-ratelimit-remaining-tokens', b'8980'), (b'x-ratelimit-reset-requests', b'1m27.334s'), (b'x-ratelimit-reset-tokens', b'6.119s'), (b'x-request-id', b'req_c5e4fec73703ce9586ce0796c8266e25'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8d275be0bbcec9e9-OTP'), (b'Content-Encoding', b'gzip'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-10-14 14:51:48,814 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2024-10-14 14:51:48,815 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-10-14 14:51:48,815 - DEBUG - receive_response_body.complete
2024-10-14 14:51:48,816 - DEBUG - response_closed.started
2024-10-14 14:51:48,816 - DEBUG - response_closed.complete
2024-10-14 14:51:48,816 - DEBUG - HTTP Response: POST https://api.openai.com/v1/chat/completions "200 OK" Headers({'date': 'Mon, 14 Oct 2024 11:51:49 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-expose-headers': 'X-Request-ID', 'openai-organization': 'user-kzzh9hik9ryjiou4ftvhondh', 'openai-processing-ms': '8031', 'openai-version': '2020-10-01', 'x-ratelimit-limit-requests': '10000', 'x-ratelimit-limit-tokens': '10000', 'x-ratelimit-remaining-requests': '9989', 'x-ratelimit-remaining-tokens': '8980', 'x-ratelimit-reset-requests': '1m27.334s', 'x-ratelimit-reset-tokens': '6.119s', 'x-request-id': 'req_c5e4fec73703ce9586ce0796c8266e25', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8d275be0bbcec9e9-OTP', 'content-encoding': 'gzip', 'alt-svc': 'h3=":443"; ma=86400'})
2024-10-14 14:51:48,816 - DEBUG - request_id: req_c5e4fec73703ce9586ce0796c8266e25
2024-10-14 14:51:48,817 - DEBUG - Instructor Raw Response: ChatCompletion(id='chatcmpl-AIDtt2z7WXMQui03AklU0iLWbSUIZ', choices=[Choice(finish_reason='stop', index=0, logprobs=None, message=ChatCompletionMessage(content=None, refusal=None, role='assistant', function_call=None, tool_calls=[ChatCompletionMessageToolCall(id='call_3K8yQYYs8oXQkvD9CFYsgFzi', function=Function(arguments='{\n"buyer": "ISPILANTE SENTIMENT BRUSLI",\n"seller": "ELENA VASILESCU",\n"address": "Sos. Giurgiului nr.1 695 TR Videle Jud: Teleorman",\n"terms": "This Rental Agreement is made between the Host: ELENA VASILESCU and Guest: ISPILANTE SENTIMENT BRUSLI. The property located at Sos. Giurgiului nr.1 695 TR Videle Jud: Teleorman is agreed to be rented to the Guest for the specified term. The total rental amount, payment method, due date, and security deposit details will be provided individually. House rules, utilities and services, occupancy limit, and parking availability will also be clearly defined. Fees, subletting rights, inspection and maintenance regulations, liability distribution, termination protocols, and governing laws are also included in the agreement. The agreement is concluded when both parties sign."\n\n}', name='Contract'), type='function')]))], created=1728906701, model='gpt-4-0613', object='chat.completion', service_tier=None, system_fingerprint=None, usage=CompletionUsage(completion_tokens=197, prompt_tokens=892, total_tokens=1089, completion_tokens_details=None, prompt_tokens_details=None))
2024-10-14 14:51:48,819 - DEBUG - Instructor Request: mode.value='tool_call', response_model=<class 'models.AgentAction'>, new_kwargs={'model': 'gpt-4', 'messages': [{'role': 'system', 'content': '\nYou are an AI agent specializing in contract creation and personal information extraction. \n\nYour role is:\n 1. Guide the process of extracting information from documents..\n 2. Verifying the extracted information with human input.\n 3. Identifying parties. \n 4. Constructing a contract. \n\n\nFollow the workflow precisely and ask for human input when needed.\n\n'}, {'role': 'user', 'content': '\n    Current state:\n    - Verified PII data: 2 entries\n    - Parties identified: Yes\n    - Contract type determined: Yes\n    - Contract constructed: Yes\n    \nWhat action should be taken next? Choose from: extract_pii, identify_parties, determine_contract_type, construct_contract, finish'}], 'tools': [{'type': 'function', 'function': {'name': 'AgentAction', 'description': 'Correctly extracted `AgentAction` with all the required parameters with correct types', 'parameters': {'properties': {'action': {'description': 'Action to be performed by the agent', 'title': 'Action', 'type': 'string'}, 'parameters': {'additionalProperties': {'type': 'string'}, 'description': 'Parameters for the action', 'title': 'Parameters', 'type': 'object'}}, 'required': ['action', 'parameters'], 'type': 'object'}}}], 'tool_choice': {'type': 'function', 'function': {'name': 'AgentAction'}}}
2024-10-14 14:51:48,820 - DEBUG - max_retries: 1
2024-10-14 14:51:48,821 - DEBUG - Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'json_data': {'messages': [{'role': 'system', 'content': '\nYou are an AI agent specializing in contract creation and personal information extraction. \n\nYour role is:\n 1. Guide the process of extracting information from documents..\n 2. Verifying the extracted information with human input.\n 3. Identifying parties. \n 4. Constructing a contract. \n\n\nFollow the workflow precisely and ask for human input when needed.\n\n'}, {'role': 'user', 'content': '\n    Current state:\n    - Verified PII data: 2 entries\n    - Parties identified: Yes\n    - Contract type determined: Yes\n    - Contract constructed: Yes\n    \nWhat action should be taken next? Choose from: extract_pii, identify_parties, determine_contract_type, construct_contract, finish'}], 'model': 'gpt-4', 'tool_choice': {'type': 'function', 'function': {'name': 'AgentAction'}}, 'tools': [{'type': 'function', 'function': {'name': 'AgentAction', 'description': 'Correctly extracted `AgentAction` with all the required parameters with correct types', 'parameters': {'properties': {'action': {'description': 'Action to be performed by the agent', 'title': 'Action', 'type': 'string'}, 'parameters': {'additionalProperties': {'type': 'string'}, 'description': 'Parameters for the action', 'title': 'Parameters', 'type': 'object'}}, 'required': ['action', 'parameters'], 'type': 'object'}}}]}}
2024-10-14 14:51:48,821 - DEBUG - Sending HTTP Request: POST https://api.openai.com/v1/chat/completions
2024-10-14 14:51:48,822 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-10-14 14:51:48,822 - DEBUG - send_request_headers.complete
2024-10-14 14:51:48,822 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-10-14 14:51:48,822 - DEBUG - send_request_body.complete
2024-10-14 14:51:48,822 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-10-14 14:51:49,751 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Mon, 14 Oct 2024 11:51:50 GMT'), (b'Content-Type', b'application/json'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'user-kzzh9hik9ryjiou4ftvhondh'), (b'openai-processing-ms', b'782'), (b'openai-version', b'2020-10-01'), (b'x-ratelimit-limit-requests', b'10000'), (b'x-ratelimit-limit-tokens', b'10000'), (b'x-ratelimit-remaining-requests', b'9989'), (b'x-ratelimit-remaining-tokens', b'9656'), (b'x-ratelimit-reset-requests', b'1m27.779s'), (b'x-ratelimit-reset-tokens', b'2.058s'), (b'x-request-id', b'req_35914c998933b3f27ab3e544cd81879a'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8d275c13f889c9e9-OTP'), (b'Content-Encoding', b'gzip'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-10-14 14:51:49,752 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2024-10-14 14:51:49,752 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-10-14 14:51:49,753 - DEBUG - receive_response_body.complete
2024-10-14 14:51:49,753 - DEBUG - response_closed.started
2024-10-14 14:51:49,753 - DEBUG - response_closed.complete
2024-10-14 14:51:49,754 - DEBUG - HTTP Response: POST https://api.openai.com/v1/chat/completions "200 OK" Headers({'date': 'Mon, 14 Oct 2024 11:51:50 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-expose-headers': 'X-Request-ID', 'openai-organization': 'user-kzzh9hik9ryjiou4ftvhondh', 'openai-processing-ms': '782', 'openai-version': '2020-10-01', 'x-ratelimit-limit-requests': '10000', 'x-ratelimit-limit-tokens': '10000', 'x-ratelimit-remaining-requests': '9989', 'x-ratelimit-remaining-tokens': '9656', 'x-ratelimit-reset-requests': '1m27.779s', 'x-ratelimit-reset-tokens': '2.058s', 'x-request-id': 'req_35914c998933b3f27ab3e544cd81879a', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8d275c13f889c9e9-OTP', 'content-encoding': 'gzip', 'alt-svc': 'h3=":443"; ma=86400'})
2024-10-14 14:51:49,754 - DEBUG - request_id: req_35914c998933b3f27ab3e544cd81879a
2024-10-14 14:51:49,755 - DEBUG - Instructor Raw Response: ChatCompletion(id='chatcmpl-AIDu1U2mez3v4zxlry0daKfTljb67', choices=[Choice(finish_reason='stop', index=0, logprobs=None, message=ChatCompletionMessage(content=None, refusal=None, role='assistant', function_call=None, tool_calls=[ChatCompletionMessageToolCall(id='call_ZNQhJ3OzgVjANdXj3faKCHzn', function=Function(arguments='\n{\n"action": "finish"\n}', name='AgentAction'), type='function')]))], created=1728906709, model='gpt-4-0613', object='chat.completion', service_tier=None, system_fingerprint=None, usage=CompletionUsage(completion_tokens=9, prompt_tokens=207, total_tokens=216, completion_tokens_details=None, prompt_tokens_details=None))
2024-10-14 14:51:49,901 - DEBUG - close.started
2024-10-14 14:51:49,901 - DEBUG - close.complete
2024-10-14 14:53:57,547 - WARNING - Neither CUDA nor MPS are available - defaulting to CPU. Note: This module is much faster with a GPU.
2024-10-14 14:53:58,812 - DEBUG - load_ssl_context verify=True cert=None trust_env=True http2=False
2024-10-14 14:53:58,813 - DEBUG - load_verify_locations cafile='D:\\deve\\contract_automation\\.venv\\Lib\\site-packages\\certifi\\cacert.pem'
2024-10-14 14:53:59,137 - DEBUG - Patching `client.chat.completions.create` with mode=<Mode.TOOLS: 'tool_call'>
2024-10-14 14:53:59,137 - DEBUG - Using proactor: IocpProactor
2024-10-14 14:53:59,161 - DEBUG - STREAM b'IHDR' 16 13
2024-10-14 14:53:59,161 - DEBUG - STREAM b'iCCP' 41 3152
2024-10-14 14:53:59,161 - DEBUG - iCCP profile name b'ICC Profile'
2024-10-14 14:53:59,161 - DEBUG - Compression method 0
2024-10-14 14:53:59,161 - DEBUG - STREAM b'eXIf' 3205 138
2024-10-14 14:53:59,161 - DEBUG - STREAM b'pHYs' 3355 9
2024-10-14 14:53:59,161 - DEBUG - STREAM b'iTXt' 3376 470
2024-10-14 14:53:59,161 - DEBUG - STREAM b'iDOT' 3858 28
2024-10-14 14:53:59,161 - DEBUG - b'iDOT' 3858 28 (unknown)
2024-10-14 14:53:59,161 - DEBUG - STREAM b'IDAT' 3898 16384
2024-10-14 14:53:59,161 - DEBUG - STREAM b'IHDR' 16 13
2024-10-14 14:53:59,161 - DEBUG - STREAM b'iCCP' 41 3152
2024-10-14 14:53:59,162 - DEBUG - iCCP profile name b'ICC Profile'
2024-10-14 14:53:59,162 - DEBUG - Compression method 0
2024-10-14 14:53:59,162 - DEBUG - STREAM b'eXIf' 3205 138
2024-10-14 14:53:59,162 - DEBUG - STREAM b'pHYs' 3355 9
2024-10-14 14:53:59,162 - DEBUG - STREAM b'iTXt' 3376 470
2024-10-14 14:53:59,162 - DEBUG - STREAM b'iDOT' 3858 28
2024-10-14 14:53:59,162 - DEBUG - b'iDOT' 3858 28 (unknown)
2024-10-14 14:53:59,162 - DEBUG - STREAM b'IDAT' 3898 16384
2024-10-14 14:53:59,171 - DEBUG - tag: XResolution (282) - type: rational (5) Tag Location: 22 - Data Location: 62 - value: b'\x00\x00\x00\x90\x00\x00\x00\x01'
2024-10-14 14:53:59,172 - DEBUG - tag: YResolution (283) - type: rational (5) Tag Location: 34 - Data Location: 70 - value: b'\x00\x00\x00\x90\x00\x00\x00\x01'
2024-10-14 14:53:59,172 - DEBUG - tag: ResolutionUnit (296) - type: short (3) - value: b'\x00\x02'
2024-10-14 14:53:59,172 - DEBUG - tag: ExifIFD (34665) - type: long (4) - value: b'\x00\x00\x00N'
2024-10-14 14:53:59,172 - DEBUG - Error closing: Operation on closed image
2024-10-14 14:54:01,359 - DEBUG - STREAM b'IHDR' 16 13
2024-10-14 14:54:01,359 - DEBUG - STREAM b'iCCP' 41 3152
2024-10-14 14:54:01,359 - DEBUG - iCCP profile name b'ICC Profile'
2024-10-14 14:54:01,359 - DEBUG - Compression method 0
2024-10-14 14:54:01,359 - DEBUG - STREAM b'eXIf' 3205 138
2024-10-14 14:54:01,359 - DEBUG - STREAM b'pHYs' 3355 9
2024-10-14 14:54:01,359 - DEBUG - STREAM b'iTXt' 3376 471
2024-10-14 14:54:01,359 - DEBUG - STREAM b'iDOT' 3859 28
2024-10-14 14:54:01,359 - DEBUG - b'iDOT' 3859 28 (unknown)
2024-10-14 14:54:01,359 - DEBUG - STREAM b'IDAT' 3899 16384
2024-10-14 14:54:01,359 - DEBUG - STREAM b'IHDR' 16 13
2024-10-14 14:54:01,359 - DEBUG - STREAM b'iCCP' 41 3152
2024-10-14 14:54:01,359 - DEBUG - iCCP profile name b'ICC Profile'
2024-10-14 14:54:01,359 - DEBUG - Compression method 0
2024-10-14 14:54:01,359 - DEBUG - STREAM b'eXIf' 3205 138
2024-10-14 14:54:01,360 - DEBUG - STREAM b'pHYs' 3355 9
2024-10-14 14:54:01,360 - DEBUG - STREAM b'iTXt' 3376 471
2024-10-14 14:54:01,360 - DEBUG - STREAM b'iDOT' 3859 28
2024-10-14 14:54:01,360 - DEBUG - b'iDOT' 3859 28 (unknown)
2024-10-14 14:54:01,360 - DEBUG - STREAM b'IDAT' 3899 16384
2024-10-14 14:54:01,376 - DEBUG - tag: XResolution (282) - type: rational (5) Tag Location: 22 - Data Location: 62 - value: b'\x00\x00\x00\x90\x00\x00\x00\x01'
2024-10-14 14:54:01,377 - DEBUG - tag: YResolution (283) - type: rational (5) Tag Location: 34 - Data Location: 70 - value: b'\x00\x00\x00\x90\x00\x00\x00\x01'
2024-10-14 14:54:01,377 - DEBUG - tag: ResolutionUnit (296) - type: short (3) - value: b'\x00\x02'
2024-10-14 14:54:01,377 - DEBUG - tag: ExifIFD (34665) - type: long (4) - value: b'\x00\x00\x00N'
2024-10-14 14:54:01,378 - DEBUG - Error closing: Operation on closed image
2024-10-14 14:54:03,937 - DEBUG - Instructor Request: mode.value='tool_call', response_model=<class 'models.AgentAction'>, new_kwargs={'model': 'gpt-4', 'messages': [{'role': 'system', 'content': '\nYou are an AI agent specializing in contract creation and personal information extraction. \n\nYour role is:\n 1. Guide the process of extracting information from documents..\n 2. Verifying the extracted information with human input.\n 3. Identifying parties. \n 4. Constructing a contract. \n\n\nFollow the workflow precisely and ask for human input when needed.\n\n'}, {'role': 'user', 'content': '\n    Current state:\n    - Verified PII data: 0 entries\n    - Parties identified: No\n    - Contract type determined: No\n    - Contract constructed: No\n    \nWhat action should be taken next? Choose from: extract_pii, identify_parties, determine_contract_type, construct_contract, finish'}], 'tools': [{'type': 'function', 'function': {'name': 'AgentAction', 'description': 'Correctly extracted `AgentAction` with all the required parameters with correct types', 'parameters': {'properties': {'action': {'description': 'Action to be performed by the agent', 'title': 'Action', 'type': 'string'}, 'parameters': {'additionalProperties': {'type': 'string'}, 'description': 'Parameters for the action', 'title': 'Parameters', 'type': 'object'}}, 'required': ['action', 'parameters'], 'type': 'object'}}}], 'tool_choice': {'type': 'function', 'function': {'name': 'AgentAction'}}}
2024-10-14 14:54:03,937 - DEBUG - max_retries: 1
2024-10-14 14:54:03,940 - DEBUG - Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'json_data': {'messages': [{'role': 'system', 'content': '\nYou are an AI agent specializing in contract creation and personal information extraction. \n\nYour role is:\n 1. Guide the process of extracting information from documents..\n 2. Verifying the extracted information with human input.\n 3. Identifying parties. \n 4. Constructing a contract. \n\n\nFollow the workflow precisely and ask for human input when needed.\n\n'}, {'role': 'user', 'content': '\n    Current state:\n    - Verified PII data: 0 entries\n    - Parties identified: No\n    - Contract type determined: No\n    - Contract constructed: No\n    \nWhat action should be taken next? Choose from: extract_pii, identify_parties, determine_contract_type, construct_contract, finish'}], 'model': 'gpt-4', 'tool_choice': {'type': 'function', 'function': {'name': 'AgentAction'}}, 'tools': [{'type': 'function', 'function': {'name': 'AgentAction', 'description': 'Correctly extracted `AgentAction` with all the required parameters with correct types', 'parameters': {'properties': {'action': {'description': 'Action to be performed by the agent', 'title': 'Action', 'type': 'string'}, 'parameters': {'additionalProperties': {'type': 'string'}, 'description': 'Parameters for the action', 'title': 'Parameters', 'type': 'object'}}, 'required': ['action', 'parameters'], 'type': 'object'}}}]}}
2024-10-14 14:54:03,969 - DEBUG - Sending HTTP Request: POST https://api.openai.com/v1/chat/completions
2024-10-14 14:54:03,970 - DEBUG - connect_tcp.started host='api.openai.com' port=443 local_address=None timeout=5.0 socket_options=None
2024-10-14 14:54:03,983 - DEBUG - connect_tcp.complete return_value=<httpcore._backends.sync.SyncStream object at 0x000002116634B4A0>
2024-10-14 14:54:03,983 - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x00000211661A1B50> server_hostname='api.openai.com' timeout=5.0
2024-10-14 14:54:03,992 - DEBUG - start_tls.complete return_value=<httpcore._backends.sync.SyncStream object at 0x000002116634B3B0>
2024-10-14 14:54:03,992 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-10-14 14:54:03,993 - DEBUG - send_request_headers.complete
2024-10-14 14:54:03,993 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-10-14 14:54:03,993 - DEBUG - send_request_body.complete
2024-10-14 14:54:03,993 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-10-14 14:54:04,939 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Mon, 14 Oct 2024 11:54:05 GMT'), (b'Content-Type', b'application/json'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'user-kzzh9hik9ryjiou4ftvhondh'), (b'openai-processing-ms', b'779'), (b'openai-version', b'2020-10-01'), (b'x-ratelimit-limit-requests', b'10000'), (b'x-ratelimit-limit-tokens', b'10000'), (b'x-ratelimit-remaining-requests', b'9999'), (b'x-ratelimit-remaining-tokens', b'9821'), (b'x-ratelimit-reset-requests', b'8.64s'), (b'x-ratelimit-reset-tokens', b'1.074s'), (b'x-request-id', b'req_7fe619a7411e9bc8387a44b8fb8c01b4'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'CF-Cache-Status', b'DYNAMIC'), (b'Set-Cookie', b'__cf_bm=7CLzlczIj3OwHrJp9YzmCqEetjsoUevVMrvVNsfSjco-1728906845-1.0.1.1-jmTQm9PCGRYfFjpZxoCnuMyAAV3UNPy1QwotOre3z3fBF8Kfa_L3Z_Jqvk0y1MTJP0rf6ACRrk1U.i4oq9XJmw; path=/; expires=Mon, 14-Oct-24 12:24:05 GMT; domain=.api.openai.com; HttpOnly; Secure; SameSite=None'), (b'X-Content-Type-Options', b'nosniff'), (b'Set-Cookie', b'_cfuvid=U1YjgB1e0dKo0_Oo8jJ5Iky1gqiLA54ZMi.opDuLT28-1728906845233-0.0.1.1-604800000; path=/; domain=.api.openai.com; HttpOnly; Secure; SameSite=None'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8d275f60d8deb689-OTP'), (b'Content-Encoding', b'gzip'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-10-14 14:54:04,940 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2024-10-14 14:54:04,940 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-10-14 14:54:04,940 - DEBUG - receive_response_body.complete
2024-10-14 14:54:04,941 - DEBUG - response_closed.started
2024-10-14 14:54:04,941 - DEBUG - response_closed.complete
2024-10-14 14:54:04,941 - DEBUG - HTTP Response: POST https://api.openai.com/v1/chat/completions "200 OK" Headers([('date', 'Mon, 14 Oct 2024 11:54:05 GMT'), ('content-type', 'application/json'), ('transfer-encoding', 'chunked'), ('connection', 'keep-alive'), ('access-control-expose-headers', 'X-Request-ID'), ('openai-organization', 'user-kzzh9hik9ryjiou4ftvhondh'), ('openai-processing-ms', '779'), ('openai-version', '2020-10-01'), ('x-ratelimit-limit-requests', '10000'), ('x-ratelimit-limit-tokens', '10000'), ('x-ratelimit-remaining-requests', '9999'), ('x-ratelimit-remaining-tokens', '9821'), ('x-ratelimit-reset-requests', '8.64s'), ('x-ratelimit-reset-tokens', '1.074s'), ('x-request-id', 'req_7fe619a7411e9bc8387a44b8fb8c01b4'), ('strict-transport-security', 'max-age=31536000; includeSubDomains; preload'), ('cf-cache-status', 'DYNAMIC'), ('set-cookie', '__cf_bm=7CLzlczIj3OwHrJp9YzmCqEetjsoUevVMrvVNsfSjco-1728906845-1.0.1.1-jmTQm9PCGRYfFjpZxoCnuMyAAV3UNPy1QwotOre3z3fBF8Kfa_L3Z_Jqvk0y1MTJP0rf6ACRrk1U.i4oq9XJmw; path=/; expires=Mon, 14-Oct-24 12:24:05 GMT; domain=.api.openai.com; HttpOnly; Secure; SameSite=None'), ('x-content-type-options', 'nosniff'), ('set-cookie', '_cfuvid=U1YjgB1e0dKo0_Oo8jJ5Iky1gqiLA54ZMi.opDuLT28-1728906845233-0.0.1.1-604800000; path=/; domain=.api.openai.com; HttpOnly; Secure; SameSite=None'), ('server', 'cloudflare'), ('cf-ray', '8d275f60d8deb689-OTP'), ('content-encoding', 'gzip'), ('alt-svc', 'h3=":443"; ma=86400')])
2024-10-14 14:54:04,941 - DEBUG - request_id: req_7fe619a7411e9bc8387a44b8fb8c01b4
2024-10-14 14:54:04,943 - DEBUG - Instructor Raw Response: ChatCompletion(id='chatcmpl-AIDwCv6327TYTk0bn3BDKUnRi5Xff', choices=[Choice(finish_reason='stop', index=0, logprobs=None, message=ChatCompletionMessage(content=None, refusal=None, role='assistant', function_call=None, tool_calls=[ChatCompletionMessageToolCall(id='call_JYLgJyW9Hhvp1NfwtBpZFFVd', function=Function(arguments='\n{\n"action": "extract_pii"\n}', name='AgentAction'), type='function')]))], created=1728906844, model='gpt-4-0613', object='chat.completion', service_tier=None, system_fingerprint=None, usage=CompletionUsage(completion_tokens=11, prompt_tokens=207, total_tokens=218, completion_tokens_details=None, prompt_tokens_details=None))
2024-10-14 14:54:04,944 - DEBUG - Instructor Request: mode.value='tool_call', response_model=<class 'models.PIIData'>, new_kwargs={'model': 'gpt-4', 'messages': [{'role': 'system', 'content': '\nYou are an AI agent specializing in contract creation and personal information extraction. \n\nYour role is:\n 1. Guide the process of extracting information from documents..\n 2. Verifying the extracted information with human input.\n 3. Identifying parties. \n 4. Constructing a contract. \n\n\nFollow the workflow precisely and ask for human input when needed.\n\n'}, {'role': 'user', 'content': "Extract the name and address from the given text:\n\nROUMANIE ROMAWI ROMANIA Carte CARTE De |Dentitate IDEnTITY D'iDENTITE seria TR Na 409131 CarD cNP 1891113341181 Nume/Nom/Last name T525M ISPILANTE Prenume/Prenom/First namo SENTIMENT BRUSLI Cetatenle/Nallonallte/Nallonallly Sox SexeiSox Romn\u0103 ROU M Loc nastere/Liou do naissancelPlace ol birth Or\u0219. Videle Jud.Teleorman Dom IlulAdresse/Addrass Videle Jud: Teleorman Sos. Giurgiului nr.1 695 TR Emisa dolDelivree parlIssuad by ValabilltatelValldlte Valldlty SPCLEP Videle 04.11.11-13.11.2018 IDROUISPILANTE<<SENTIMENT <BRUSLI<<<< TR409131<0R0u8911137M181113513411813 Or\u0219:"}], 'tools': [{'type': 'function', 'function': {'name': 'PIIData', 'description': 'Correctly extracted `PIIData` with all the required parameters with correct types', 'parameters': {'properties': {'name': {'description': 'Full name of the person', 'title': 'Name', 'type': 'string'}, 'address': {'description': 'Residential address of the person', 'title': 'Address', 'type': 'string'}}, 'required': ['address', 'name'], 'type': 'object'}}}], 'tool_choice': {'type': 'function', 'function': {'name': 'PIIData'}}}
2024-10-14 14:54:04,944 - DEBUG - max_retries: 1
2024-10-14 14:54:04,945 - DEBUG - Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'json_data': {'messages': [{'role': 'system', 'content': '\nYou are an AI agent specializing in contract creation and personal information extraction. \n\nYour role is:\n 1. Guide the process of extracting information from documents..\n 2. Verifying the extracted information with human input.\n 3. Identifying parties. \n 4. Constructing a contract. \n\n\nFollow the workflow precisely and ask for human input when needed.\n\n'}, {'role': 'user', 'content': "Extract the name and address from the given text:\n\nROUMANIE ROMAWI ROMANIA Carte CARTE De |Dentitate IDEnTITY D'iDENTITE seria TR Na 409131 CarD cNP 1891113341181 Nume/Nom/Last name T525M ISPILANTE Prenume/Prenom/First namo SENTIMENT BRUSLI Cetatenle/Nallonallte/Nallonallly Sox SexeiSox Romn\u0103 ROU M Loc nastere/Liou do naissancelPlace ol birth Or\u0219. Videle Jud.Teleorman Dom IlulAdresse/Addrass Videle Jud: Teleorman Sos. Giurgiului nr.1 695 TR Emisa dolDelivree parlIssuad by ValabilltatelValldlte Valldlty SPCLEP Videle 04.11.11-13.11.2018 IDROUISPILANTE<<SENTIMENT <BRUSLI<<<< TR409131<0R0u8911137M181113513411813 Or\u0219:"}], 'model': 'gpt-4', 'tool_choice': {'type': 'function', 'function': {'name': 'PIIData'}}, 'tools': [{'type': 'function', 'function': {'name': 'PIIData', 'description': 'Correctly extracted `PIIData` with all the required parameters with correct types', 'parameters': {'properties': {'name': {'description': 'Full name of the person', 'title': 'Name', 'type': 'string'}, 'address': {'description': 'Residential address of the person', 'title': 'Address', 'type': 'string'}}, 'required': ['address', 'name'], 'type': 'object'}}}]}}
2024-10-14 14:54:04,946 - DEBUG - Sending HTTP Request: POST https://api.openai.com/v1/chat/completions
2024-10-14 14:54:04,946 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-10-14 14:54:04,946 - DEBUG - send_request_headers.complete
2024-10-14 14:54:04,946 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-10-14 14:54:04,946 - DEBUG - send_request_body.complete
2024-10-14 14:54:04,947 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-10-14 14:54:07,257 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Mon, 14 Oct 2024 11:54:07 GMT'), (b'Content-Type', b'application/json'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'user-kzzh9hik9ryjiou4ftvhondh'), (b'openai-processing-ms', b'2146'), (b'openai-version', b'2020-10-01'), (b'x-ratelimit-limit-requests', b'10000'), (b'x-ratelimit-limit-tokens', b'10000'), (b'x-ratelimit-remaining-requests', b'9998'), (b'x-ratelimit-remaining-tokens', b'9676'), (b'x-ratelimit-reset-requests', b'16.326s'), (b'x-ratelimit-reset-tokens', b'1.938s'), (b'x-request-id', b'req_aa08539081db08f3191047a6ab6d9cb9'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8d275f66cfb8b689-OTP'), (b'Content-Encoding', b'gzip'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-10-14 14:54:07,258 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2024-10-14 14:54:07,258 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-10-14 14:54:07,258 - DEBUG - receive_response_body.complete
2024-10-14 14:54:07,258 - DEBUG - response_closed.started
2024-10-14 14:54:07,258 - DEBUG - response_closed.complete
2024-10-14 14:54:07,258 - DEBUG - HTTP Response: POST https://api.openai.com/v1/chat/completions "200 OK" Headers({'date': 'Mon, 14 Oct 2024 11:54:07 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-expose-headers': 'X-Request-ID', 'openai-organization': 'user-kzzh9hik9ryjiou4ftvhondh', 'openai-processing-ms': '2146', 'openai-version': '2020-10-01', 'x-ratelimit-limit-requests': '10000', 'x-ratelimit-limit-tokens': '10000', 'x-ratelimit-remaining-requests': '9998', 'x-ratelimit-remaining-tokens': '9676', 'x-ratelimit-reset-requests': '16.326s', 'x-ratelimit-reset-tokens': '1.938s', 'x-request-id': 'req_aa08539081db08f3191047a6ab6d9cb9', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8d275f66cfb8b689-OTP', 'content-encoding': 'gzip', 'alt-svc': 'h3=":443"; ma=86400'})
2024-10-14 14:54:07,258 - DEBUG - request_id: req_aa08539081db08f3191047a6ab6d9cb9
2024-10-14 14:54:07,258 - DEBUG - Instructor Raw Response: ChatCompletion(id='chatcmpl-AIDwDG9JuPuVTTg3HPfSOSjnq2E04', choices=[Choice(finish_reason='stop', index=0, logprobs=None, message=ChatCompletionMessage(content=None, refusal=None, role='assistant', function_call=None, tool_calls=[ChatCompletionMessageToolCall(id='call_3qlpQ6mWsAb8IQhIScpe14iD', function=Function(arguments='{\n"name": "T525M ISPILANTE SENTIMENT BRUSLI",\n"address": "Videle Jud: Teleorman Sos. Giurgiului nr.1 695 TR"\n}', name='PIIData'), type='function')]))], created=1728906845, model='gpt-4-0613', object='chat.completion', service_tier=None, system_fingerprint=None, usage=CompletionUsage(completion_tokens=42, prompt_tokens=377, total_tokens=419, completion_tokens_details=None, prompt_tokens_details=None))
2024-10-14 14:54:09,323 - DEBUG - Instructor Request: mode.value='tool_call', response_model=<class 'models.PIIData'>, new_kwargs={'model': 'gpt-4', 'messages': [{'role': 'system', 'content': '\nYou are an AI agent specializing in contract creation and personal information extraction. \n\nYour role is:\n 1. Guide the process of extracting information from documents..\n 2. Verifying the extracted information with human input.\n 3. Identifying parties. \n 4. Constructing a contract. \n\n\nFollow the workflow precisely and ask for human input when needed.\n\n'}, {'role': 'user', 'content': "Extract the name and address from the given text:\n\nROUMANIE ROVIAINIA ROMANIA Carte Carte DE iDentitate IdEnTITY Didentite seala SS Nr 099994 Card CNP 2410415400542 93coQ Nume/NomiLast name VASILESCU Pronume/Prenom/Flrst name ELENA < CetatenielNatlonallte/Natlonalily M Sex SexelSer Romn\u0103 ROU Loc nastore/Licu de naissancolF 'ar0 ol birth Mun: Dej Jud. Cluj Domiciliu/Adresse A ess Mun. Bucuresti Sec. 5 Str Nicolae Iorga nr.3 900 B Emisa delDelivree parllssued by Valabilitate/Vahidile Valiouy D.EPAB.D- 06.01.17-15.04.2077 IDROUVASILESCU<<ELENA<<<<<<<<<<<<<<< SS099994<0R0u4104151F770415824003421"}], 'tools': [{'type': 'function', 'function': {'name': 'PIIData', 'description': 'Correctly extracted `PIIData` with all the required parameters with correct types', 'parameters': {'properties': {'name': {'description': 'Full name of the person', 'title': 'Name', 'type': 'string'}, 'address': {'description': 'Residential address of the person', 'title': 'Address', 'type': 'string'}}, 'required': ['address', 'name'], 'type': 'object'}}}], 'tool_choice': {'type': 'function', 'function': {'name': 'PIIData'}}}
2024-10-14 14:54:09,323 - DEBUG - max_retries: 1
2024-10-14 14:54:09,325 - DEBUG - Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'json_data': {'messages': [{'role': 'system', 'content': '\nYou are an AI agent specializing in contract creation and personal information extraction. \n\nYour role is:\n 1. Guide the process of extracting information from documents..\n 2. Verifying the extracted information with human input.\n 3. Identifying parties. \n 4. Constructing a contract. \n\n\nFollow the workflow precisely and ask for human input when needed.\n\n'}, {'role': 'user', 'content': "Extract the name and address from the given text:\n\nROUMANIE ROVIAINIA ROMANIA Carte Carte DE iDentitate IdEnTITY Didentite seala SS Nr 099994 Card CNP 2410415400542 93coQ Nume/NomiLast name VASILESCU Pronume/Prenom/Flrst name ELENA < CetatenielNatlonallte/Natlonalily M Sex SexelSer Romn\u0103 ROU Loc nastore/Licu de naissancolF 'ar0 ol birth Mun: Dej Jud. Cluj Domiciliu/Adresse A ess Mun. Bucuresti Sec. 5 Str Nicolae Iorga nr.3 900 B Emisa delDelivree parllssued by Valabilitate/Vahidile Valiouy D.EPAB.D- 06.01.17-15.04.2077 IDROUVASILESCU<<ELENA<<<<<<<<<<<<<<< SS099994<0R0u4104151F770415824003421"}], 'model': 'gpt-4', 'tool_choice': {'type': 'function', 'function': {'name': 'PIIData'}}, 'tools': [{'type': 'function', 'function': {'name': 'PIIData', 'description': 'Correctly extracted `PIIData` with all the required parameters with correct types', 'parameters': {'properties': {'name': {'description': 'Full name of the person', 'title': 'Name', 'type': 'string'}, 'address': {'description': 'Residential address of the person', 'title': 'Address', 'type': 'string'}}, 'required': ['address', 'name'], 'type': 'object'}}}]}}
2024-10-14 14:54:09,325 - DEBUG - Sending HTTP Request: POST https://api.openai.com/v1/chat/completions
2024-10-14 14:54:09,325 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-10-14 14:54:09,325 - DEBUG - send_request_headers.complete
2024-10-14 14:54:09,325 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-10-14 14:54:09,325 - DEBUG - send_request_body.complete
2024-10-14 14:54:09,325 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-10-14 14:54:12,342 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Mon, 14 Oct 2024 11:54:12 GMT'), (b'Content-Type', b'application/json'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'user-kzzh9hik9ryjiou4ftvhondh'), (b'openai-processing-ms', b'2455'), (b'openai-version', b'2020-10-01'), (b'x-ratelimit-limit-requests', b'10000'), (b'x-ratelimit-limit-tokens', b'10000'), (b'x-ratelimit-remaining-requests', b'9997'), (b'x-ratelimit-remaining-tokens', b'9742'), (b'x-ratelimit-reset-requests', b'20.579s'), (b'x-ratelimit-reset-tokens', b'1.548s'), (b'x-request-id', b'req_d3d409e685e6406713b31a7e46f5bdbb'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8d275f822cacb689-OTP'), (b'Content-Encoding', b'gzip'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-10-14 14:54:12,342 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2024-10-14 14:54:12,342 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-10-14 14:54:12,342 - DEBUG - receive_response_body.complete
2024-10-14 14:54:12,343 - DEBUG - response_closed.started
2024-10-14 14:54:12,343 - DEBUG - response_closed.complete
2024-10-14 14:54:12,343 - DEBUG - HTTP Response: POST https://api.openai.com/v1/chat/completions "200 OK" Headers({'date': 'Mon, 14 Oct 2024 11:54:12 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-expose-headers': 'X-Request-ID', 'openai-organization': 'user-kzzh9hik9ryjiou4ftvhondh', 'openai-processing-ms': '2455', 'openai-version': '2020-10-01', 'x-ratelimit-limit-requests': '10000', 'x-ratelimit-limit-tokens': '10000', 'x-ratelimit-remaining-requests': '9997', 'x-ratelimit-remaining-tokens': '9742', 'x-ratelimit-reset-requests': '20.579s', 'x-ratelimit-reset-tokens': '1.548s', 'x-request-id': 'req_d3d409e685e6406713b31a7e46f5bdbb', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8d275f822cacb689-OTP', 'content-encoding': 'gzip', 'alt-svc': 'h3=":443"; ma=86400'})
2024-10-14 14:54:12,343 - DEBUG - request_id: req_d3d409e685e6406713b31a7e46f5bdbb
2024-10-14 14:54:12,343 - DEBUG - Instructor Raw Response: ChatCompletion(id='chatcmpl-AIDwIQi22tMvinVFkgorJMyXuYXdq', choices=[Choice(finish_reason='stop', index=0, logprobs=None, message=ChatCompletionMessage(content=None, refusal=None, role='assistant', function_call=None, tool_calls=[ChatCompletionMessageToolCall(id='call_VfJ25PWUUUhiQV4zfGuUE55U', function=Function(arguments='{\n"name": "ELENA VASILESCU",\n"address": "Mun. Bucuresti Sec. 5 Str Nicolae Iorga nr.3 900 B"\n}', name='PIIData'), type='function')]))], created=1728906850, model='gpt-4-0613', object='chat.completion', service_tier=None, system_fingerprint=None, usage=CompletionUsage(completion_tokens=42, prompt_tokens=380, total_tokens=422, completion_tokens_details=None, prompt_tokens_details=None))
2024-10-14 14:54:13,562 - DEBUG - Instructor Request: mode.value='tool_call', response_model=<class 'models.AgentAction'>, new_kwargs={'model': 'gpt-4', 'messages': [{'role': 'system', 'content': '\nYou are an AI agent specializing in contract creation and personal information extraction. \n\nYour role is:\n 1. Guide the process of extracting information from documents..\n 2. Verifying the extracted information with human input.\n 3. Identifying parties. \n 4. Constructing a contract. \n\n\nFollow the workflow precisely and ask for human input when needed.\n\n'}, {'role': 'user', 'content': '\n    Current state:\n    - Verified PII data: 2 entries\n    - Parties identified: No\n    - Contract type determined: No\n    - Contract constructed: No\n    \nWhat action should be taken next? Choose from: extract_pii, identify_parties, determine_contract_type, construct_contract, finish'}], 'tools': [{'type': 'function', 'function': {'name': 'AgentAction', 'description': 'Correctly extracted `AgentAction` with all the required parameters with correct types', 'parameters': {'properties': {'action': {'description': 'Action to be performed by the agent', 'title': 'Action', 'type': 'string'}, 'parameters': {'additionalProperties': {'type': 'string'}, 'description': 'Parameters for the action', 'title': 'Parameters', 'type': 'object'}}, 'required': ['action', 'parameters'], 'type': 'object'}}}], 'tool_choice': {'type': 'function', 'function': {'name': 'AgentAction'}}}
2024-10-14 14:54:13,562 - DEBUG - max_retries: 1
2024-10-14 14:54:13,564 - DEBUG - Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'json_data': {'messages': [{'role': 'system', 'content': '\nYou are an AI agent specializing in contract creation and personal information extraction. \n\nYour role is:\n 1. Guide the process of extracting information from documents..\n 2. Verifying the extracted information with human input.\n 3. Identifying parties. \n 4. Constructing a contract. \n\n\nFollow the workflow precisely and ask for human input when needed.\n\n'}, {'role': 'user', 'content': '\n    Current state:\n    - Verified PII data: 2 entries\n    - Parties identified: No\n    - Contract type determined: No\n    - Contract constructed: No\n    \nWhat action should be taken next? Choose from: extract_pii, identify_parties, determine_contract_type, construct_contract, finish'}], 'model': 'gpt-4', 'tool_choice': {'type': 'function', 'function': {'name': 'AgentAction'}}, 'tools': [{'type': 'function', 'function': {'name': 'AgentAction', 'description': 'Correctly extracted `AgentAction` with all the required parameters with correct types', 'parameters': {'properties': {'action': {'description': 'Action to be performed by the agent', 'title': 'Action', 'type': 'string'}, 'parameters': {'additionalProperties': {'type': 'string'}, 'description': 'Parameters for the action', 'title': 'Parameters', 'type': 'object'}}, 'required': ['action', 'parameters'], 'type': 'object'}}}]}}
2024-10-14 14:54:13,564 - DEBUG - Sending HTTP Request: POST https://api.openai.com/v1/chat/completions
2024-10-14 14:54:13,565 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-10-14 14:54:13,565 - DEBUG - send_request_headers.complete
2024-10-14 14:54:13,565 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-10-14 14:54:13,565 - DEBUG - send_request_body.complete
2024-10-14 14:54:13,565 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-10-14 14:54:14,727 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Mon, 14 Oct 2024 11:54:15 GMT'), (b'Content-Type', b'application/json'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'user-kzzh9hik9ryjiou4ftvhondh'), (b'openai-processing-ms', b'998'), (b'openai-version', b'2020-10-01'), (b'x-ratelimit-limit-requests', b'10000'), (b'x-ratelimit-limit-tokens', b'10000'), (b'x-ratelimit-remaining-requests', b'9997'), (b'x-ratelimit-remaining-tokens', b'9821'), (b'x-ratelimit-reset-requests', b'24.99s'), (b'x-ratelimit-reset-tokens', b'1.074s'), (b'x-request-id', b'req_58b14494d4e368cc4376010b42731bd9'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8d275f9ca8feb689-OTP'), (b'Content-Encoding', b'gzip'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-10-14 14:54:14,728 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2024-10-14 14:54:14,729 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-10-14 14:54:14,729 - DEBUG - receive_response_body.complete
2024-10-14 14:54:14,730 - DEBUG - response_closed.started
2024-10-14 14:54:14,730 - DEBUG - response_closed.complete
2024-10-14 14:54:14,730 - DEBUG - HTTP Response: POST https://api.openai.com/v1/chat/completions "200 OK" Headers({'date': 'Mon, 14 Oct 2024 11:54:15 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-expose-headers': 'X-Request-ID', 'openai-organization': 'user-kzzh9hik9ryjiou4ftvhondh', 'openai-processing-ms': '998', 'openai-version': '2020-10-01', 'x-ratelimit-limit-requests': '10000', 'x-ratelimit-limit-tokens': '10000', 'x-ratelimit-remaining-requests': '9997', 'x-ratelimit-remaining-tokens': '9821', 'x-ratelimit-reset-requests': '24.99s', 'x-ratelimit-reset-tokens': '1.074s', 'x-request-id': 'req_58b14494d4e368cc4376010b42731bd9', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8d275f9ca8feb689-OTP', 'content-encoding': 'gzip', 'alt-svc': 'h3=":443"; ma=86400'})
2024-10-14 14:54:14,730 - DEBUG - request_id: req_58b14494d4e368cc4376010b42731bd9
2024-10-14 14:54:14,731 - DEBUG - Instructor Raw Response: ChatCompletion(id='chatcmpl-AIDwMJEejjvBee3Oc95pwuCAMueEI', choices=[Choice(finish_reason='stop', index=0, logprobs=None, message=ChatCompletionMessage(content=None, refusal=None, role='assistant', function_call=None, tool_calls=[ChatCompletionMessageToolCall(id='call_tzpbYtfG46s5MoiuUQ3RkdHw', function=Function(arguments='{\n"action": "identify_parties"\n}', name='AgentAction'), type='function')]))], created=1728906854, model='gpt-4-0613', object='chat.completion', service_tier=None, system_fingerprint=None, usage=CompletionUsage(completion_tokens=10, prompt_tokens=207, total_tokens=217, completion_tokens_details=None, prompt_tokens_details=None))
2024-10-14 14:54:14,733 - DEBUG - Instructor Request: mode.value='tool_call', response_model=<class 'models.ContractParties'>, new_kwargs={'model': 'gpt-4', 'messages': [{'role': 'system', 'content': '\nYou are an AI agent specializing in contract creation and personal information extraction. \n\nYour role is:\n 1. Guide the process of extracting information from documents..\n 2. Verifying the extracted information with human input.\n 3. Identifying parties. \n 4. Constructing a contract. \n\n\nFollow the workflow precisely and ask for human input when needed.\n\n'}, {'role': 'user', 'content': 'Identify the buyer and seller from the given information:\n\nName: T525M ISPILANTE SENTIMENT BRUSLI, Address: Videle Jud: Teleorman Sos. Giurgiului nr.1 695 TR\nName: ELENA VASILESCU, Address: Mun. Bucuresti Sec. 5 Str Nicolae Iorga nr.3 900 B'}], 'tools': [{'type': 'function', 'function': {'name': 'ContractParties', 'description': 'Correctly extracted `ContractParties` with all the required parameters with correct types', 'parameters': {'properties': {'buyer': {'description': 'Name of the buyer', 'title': 'Buyer', 'type': 'string'}, 'seller': {'description': 'Name of the seller', 'title': 'Seller', 'type': 'string'}}, 'required': ['buyer', 'seller'], 'type': 'object'}}}], 'tool_choice': {'type': 'function', 'function': {'name': 'ContractParties'}}}
2024-10-14 14:54:14,733 - DEBUG - max_retries: 1
2024-10-14 14:54:14,736 - DEBUG - Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'json_data': {'messages': [{'role': 'system', 'content': '\nYou are an AI agent specializing in contract creation and personal information extraction. \n\nYour role is:\n 1. Guide the process of extracting information from documents..\n 2. Verifying the extracted information with human input.\n 3. Identifying parties. \n 4. Constructing a contract. \n\n\nFollow the workflow precisely and ask for human input when needed.\n\n'}, {'role': 'user', 'content': 'Identify the buyer and seller from the given information:\n\nName: T525M ISPILANTE SENTIMENT BRUSLI, Address: Videle Jud: Teleorman Sos. Giurgiului nr.1 695 TR\nName: ELENA VASILESCU, Address: Mun. Bucuresti Sec. 5 Str Nicolae Iorga nr.3 900 B'}], 'model': 'gpt-4', 'tool_choice': {'type': 'function', 'function': {'name': 'ContractParties'}}, 'tools': [{'type': 'function', 'function': {'name': 'ContractParties', 'description': 'Correctly extracted `ContractParties` with all the required parameters with correct types', 'parameters': {'properties': {'buyer': {'description': 'Name of the buyer', 'title': 'Buyer', 'type': 'string'}, 'seller': {'description': 'Name of the seller', 'title': 'Seller', 'type': 'string'}}, 'required': ['buyer', 'seller'], 'type': 'object'}}}]}}
2024-10-14 14:54:14,736 - DEBUG - Sending HTTP Request: POST https://api.openai.com/v1/chat/completions
2024-10-14 14:54:14,737 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-10-14 14:54:14,737 - DEBUG - send_request_headers.complete
2024-10-14 14:54:14,737 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-10-14 14:54:14,737 - DEBUG - send_request_body.complete
2024-10-14 14:54:14,737 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-10-14 14:54:16,631 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Mon, 14 Oct 2024 11:54:16 GMT'), (b'Content-Type', b'application/json'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'user-kzzh9hik9ryjiou4ftvhondh'), (b'openai-processing-ms', b'1730'), (b'openai-version', b'2020-10-01'), (b'x-ratelimit-limit-requests', b'10000'), (b'x-ratelimit-limit-tokens', b'10000'), (b'x-ratelimit-remaining-requests', b'9996'), (b'x-ratelimit-remaining-tokens', b'9810'), (b'x-ratelimit-reset-requests', b'32.456s'), (b'x-ratelimit-reset-tokens', b'1.136s'), (b'x-request-id', b'req_8a069d41c7c61d4731ef974925dda71d'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8d275fa3f9dab689-OTP'), (b'Content-Encoding', b'gzip'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-10-14 14:54:16,632 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2024-10-14 14:54:16,632 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-10-14 14:54:16,633 - DEBUG - receive_response_body.complete
2024-10-14 14:54:16,633 - DEBUG - response_closed.started
2024-10-14 14:54:16,633 - DEBUG - response_closed.complete
2024-10-14 14:54:16,633 - DEBUG - HTTP Response: POST https://api.openai.com/v1/chat/completions "200 OK" Headers({'date': 'Mon, 14 Oct 2024 11:54:16 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-expose-headers': 'X-Request-ID', 'openai-organization': 'user-kzzh9hik9ryjiou4ftvhondh', 'openai-processing-ms': '1730', 'openai-version': '2020-10-01', 'x-ratelimit-limit-requests': '10000', 'x-ratelimit-limit-tokens': '10000', 'x-ratelimit-remaining-requests': '9996', 'x-ratelimit-remaining-tokens': '9810', 'x-ratelimit-reset-requests': '32.456s', 'x-ratelimit-reset-tokens': '1.136s', 'x-request-id': 'req_8a069d41c7c61d4731ef974925dda71d', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8d275fa3f9dab689-OTP', 'content-encoding': 'gzip', 'alt-svc': 'h3=":443"; ma=86400'})
2024-10-14 14:54:16,634 - DEBUG - request_id: req_8a069d41c7c61d4731ef974925dda71d
2024-10-14 14:54:16,635 - DEBUG - Instructor Raw Response: ChatCompletion(id='chatcmpl-AIDwNr9Glj1pS0HkaBVrRka5TFH5T', choices=[Choice(finish_reason='stop', index=0, logprobs=None, message=ChatCompletionMessage(content=None, refusal=None, role='assistant', function_call=None, tool_calls=[ChatCompletionMessageToolCall(id='call_U7XbnNk56pVFwTT6gGEpb9ps', function=Function(arguments='{\n"buyer": "T525M ISPILANTE SENTIMENT BRUSLI",\n"seller": "ELENA VASILESCU"\n}', name='ContractParties'), type='function')]))], created=1728906855, model='gpt-4-0613', object='chat.completion', service_tier=None, system_fingerprint=None, usage=CompletionUsage(completion_tokens=31, prompt_tokens=235, total_tokens=266, completion_tokens_details=None, prompt_tokens_details=None))
2024-10-14 14:54:16,638 - DEBUG - Instructor Request: mode.value='tool_call', response_model=<class 'models.AgentAction'>, new_kwargs={'model': 'gpt-4', 'messages': [{'role': 'system', 'content': '\nYou are an AI agent specializing in contract creation and personal information extraction. \n\nYour role is:\n 1. Guide the process of extracting information from documents..\n 2. Verifying the extracted information with human input.\n 3. Identifying parties. \n 4. Constructing a contract. \n\n\nFollow the workflow precisely and ask for human input when needed.\n\n'}, {'role': 'user', 'content': '\n    Current state:\n    - Verified PII data: 2 entries\n    - Parties identified: Yes\n    - Contract type determined: No\n    - Contract constructed: No\n    \nWhat action should be taken next? Choose from: extract_pii, identify_parties, determine_contract_type, construct_contract, finish'}], 'tools': [{'type': 'function', 'function': {'name': 'AgentAction', 'description': 'Correctly extracted `AgentAction` with all the required parameters with correct types', 'parameters': {'properties': {'action': {'description': 'Action to be performed by the agent', 'title': 'Action', 'type': 'string'}, 'parameters': {'additionalProperties': {'type': 'string'}, 'description': 'Parameters for the action', 'title': 'Parameters', 'type': 'object'}}, 'required': ['action', 'parameters'], 'type': 'object'}}}], 'tool_choice': {'type': 'function', 'function': {'name': 'AgentAction'}}}
2024-10-14 14:54:16,638 - DEBUG - max_retries: 1
2024-10-14 14:54:16,642 - DEBUG - Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'json_data': {'messages': [{'role': 'system', 'content': '\nYou are an AI agent specializing in contract creation and personal information extraction. \n\nYour role is:\n 1. Guide the process of extracting information from documents..\n 2. Verifying the extracted information with human input.\n 3. Identifying parties. \n 4. Constructing a contract. \n\n\nFollow the workflow precisely and ask for human input when needed.\n\n'}, {'role': 'user', 'content': '\n    Current state:\n    - Verified PII data: 2 entries\n    - Parties identified: Yes\n    - Contract type determined: No\n    - Contract constructed: No\n    \nWhat action should be taken next? Choose from: extract_pii, identify_parties, determine_contract_type, construct_contract, finish'}], 'model': 'gpt-4', 'tool_choice': {'type': 'function', 'function': {'name': 'AgentAction'}}, 'tools': [{'type': 'function', 'function': {'name': 'AgentAction', 'description': 'Correctly extracted `AgentAction` with all the required parameters with correct types', 'parameters': {'properties': {'action': {'description': 'Action to be performed by the agent', 'title': 'Action', 'type': 'string'}, 'parameters': {'additionalProperties': {'type': 'string'}, 'description': 'Parameters for the action', 'title': 'Parameters', 'type': 'object'}}, 'required': ['action', 'parameters'], 'type': 'object'}}}]}}
2024-10-14 14:54:16,642 - DEBUG - Sending HTTP Request: POST https://api.openai.com/v1/chat/completions
2024-10-14 14:54:16,643 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-10-14 14:54:16,643 - DEBUG - send_request_headers.complete
2024-10-14 14:54:16,643 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-10-14 14:54:16,643 - DEBUG - send_request_body.complete
2024-10-14 14:54:16,643 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-10-14 14:54:17,718 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Mon, 14 Oct 2024 11:54:18 GMT'), (b'Content-Type', b'application/json'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'user-kzzh9hik9ryjiou4ftvhondh'), (b'openai-processing-ms', b'917'), (b'openai-version', b'2020-10-01'), (b'x-ratelimit-limit-requests', b'10000'), (b'x-ratelimit-limit-tokens', b'10000'), (b'x-ratelimit-remaining-requests', b'9995'), (b'x-ratelimit-remaining-tokens', b'9748'), (b'x-ratelimit-reset-requests', b'39.189s'), (b'x-ratelimit-reset-tokens', b'1.506s'), (b'x-request-id', b'req_9c6376f18f02f3a648960848fd38ac20'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8d275fafeec5b689-OTP'), (b'Content-Encoding', b'gzip'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-10-14 14:54:17,719 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2024-10-14 14:54:17,719 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-10-14 14:54:17,720 - DEBUG - receive_response_body.complete
2024-10-14 14:54:17,720 - DEBUG - response_closed.started
2024-10-14 14:54:17,720 - DEBUG - response_closed.complete
2024-10-14 14:54:17,720 - DEBUG - HTTP Response: POST https://api.openai.com/v1/chat/completions "200 OK" Headers({'date': 'Mon, 14 Oct 2024 11:54:18 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-expose-headers': 'X-Request-ID', 'openai-organization': 'user-kzzh9hik9ryjiou4ftvhondh', 'openai-processing-ms': '917', 'openai-version': '2020-10-01', 'x-ratelimit-limit-requests': '10000', 'x-ratelimit-limit-tokens': '10000', 'x-ratelimit-remaining-requests': '9995', 'x-ratelimit-remaining-tokens': '9748', 'x-ratelimit-reset-requests': '39.189s', 'x-ratelimit-reset-tokens': '1.506s', 'x-request-id': 'req_9c6376f18f02f3a648960848fd38ac20', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8d275fafeec5b689-OTP', 'content-encoding': 'gzip', 'alt-svc': 'h3=":443"; ma=86400'})
2024-10-14 14:54:17,721 - DEBUG - request_id: req_9c6376f18f02f3a648960848fd38ac20
2024-10-14 14:54:17,722 - DEBUG - Instructor Raw Response: ChatCompletion(id='chatcmpl-AIDwPYSYIWh4BLVJL2DkkbT3mfCrW', choices=[Choice(finish_reason='stop', index=0, logprobs=None, message=ChatCompletionMessage(content=None, refusal=None, role='assistant', function_call=None, tool_calls=[ChatCompletionMessageToolCall(id='call_eE1nFPUzIgNOvzzrcn6dFXk3', function=Function(arguments='\n{\n  "action": "determine_contract_type"\n}', name='AgentAction'), type='function')]))], created=1728906857, model='gpt-4-0613', object='chat.completion', service_tier=None, system_fingerprint=None, usage=CompletionUsage(completion_tokens=13, prompt_tokens=207, total_tokens=220, completion_tokens_details=None, prompt_tokens_details=None))
2024-10-14 14:54:22,012 - DEBUG - Instructor Request: mode.value='tool_call', response_model=<class 'models.ContractDetails'>, new_kwargs={'model': 'gpt-4', 'messages': [{'role': 'system', 'content': '\nYou are an AI agent specializing in contract creation and personal information extraction. \n\nYour role is:\n 1. Guide the process of extracting information from documents..\n 2. Verifying the extracted information with human input.\n 3. Identifying parties. \n 4. Constructing a contract. \n\n\nFollow the workflow precisely and ask for human input when needed.\n\n'}, {'role': 'user', 'content': 'Determine the contract details for a airbnb contract between T525M ISPILANTE SENTIMENT BRUSLI and ELENA VASILESCU.'}], 'tools': [{'type': 'function', 'function': {'name': 'ContractDetails', 'description': 'Correctly extracted `ContractDetails` with all the required parameters with correct types', 'parameters': {'properties': {'contract_type': {'description': 'Type of contract (e.g., airbnb, buy-sell, it-consulting)', 'title': 'Contract Type', 'type': 'string'}, 'additional_info': {'additionalProperties': {'type': 'string'}, 'description': 'Additional information specific to the contract type', 'title': 'Additional Info', 'type': 'object'}}, 'required': ['additional_info', 'contract_type'], 'type': 'object'}}}], 'tool_choice': {'type': 'function', 'function': {'name': 'ContractDetails'}}}
2024-10-14 14:54:22,013 - DEBUG - max_retries: 1
2024-10-14 14:54:22,015 - DEBUG - Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'json_data': {'messages': [{'role': 'system', 'content': '\nYou are an AI agent specializing in contract creation and personal information extraction. \n\nYour role is:\n 1. Guide the process of extracting information from documents..\n 2. Verifying the extracted information with human input.\n 3. Identifying parties. \n 4. Constructing a contract. \n\n\nFollow the workflow precisely and ask for human input when needed.\n\n'}, {'role': 'user', 'content': 'Determine the contract details for a airbnb contract between T525M ISPILANTE SENTIMENT BRUSLI and ELENA VASILESCU.'}], 'model': 'gpt-4', 'tool_choice': {'type': 'function', 'function': {'name': 'ContractDetails'}}, 'tools': [{'type': 'function', 'function': {'name': 'ContractDetails', 'description': 'Correctly extracted `ContractDetails` with all the required parameters with correct types', 'parameters': {'properties': {'contract_type': {'description': 'Type of contract (e.g., airbnb, buy-sell, it-consulting)', 'title': 'Contract Type', 'type': 'string'}, 'additional_info': {'additionalProperties': {'type': 'string'}, 'description': 'Additional information specific to the contract type', 'title': 'Additional Info', 'type': 'object'}}, 'required': ['additional_info', 'contract_type'], 'type': 'object'}}}]}}
2024-10-14 14:54:22,015 - DEBUG - Sending HTTP Request: POST https://api.openai.com/v1/chat/completions
2024-10-14 14:54:22,015 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-10-14 14:54:22,016 - DEBUG - send_request_headers.complete
2024-10-14 14:54:22,016 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-10-14 14:54:22,016 - DEBUG - send_request_body.complete
2024-10-14 14:54:22,016 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-10-14 14:54:22,910 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Mon, 14 Oct 2024 11:54:23 GMT'), (b'Content-Type', b'application/json'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'user-kzzh9hik9ryjiou4ftvhondh'), (b'openai-processing-ms', b'736'), (b'openai-version', b'2020-10-01'), (b'x-ratelimit-limit-requests', b'10000'), (b'x-ratelimit-limit-tokens', b'10000'), (b'x-ratelimit-remaining-requests', b'9995'), (b'x-ratelimit-remaining-tokens', b'9864'), (b'x-ratelimit-reset-requests', b'42.458s'), (b'x-ratelimit-reset-tokens', b'816ms'), (b'x-request-id', b'req_0413adfcf08facf46e54992ef8549415'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8d275fd17cb9b689-OTP'), (b'Content-Encoding', b'gzip'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-10-14 14:54:22,911 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2024-10-14 14:54:22,911 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-10-14 14:54:22,911 - DEBUG - receive_response_body.complete
2024-10-14 14:54:22,912 - DEBUG - response_closed.started
2024-10-14 14:54:22,912 - DEBUG - response_closed.complete
2024-10-14 14:54:22,912 - DEBUG - HTTP Response: POST https://api.openai.com/v1/chat/completions "200 OK" Headers({'date': 'Mon, 14 Oct 2024 11:54:23 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-expose-headers': 'X-Request-ID', 'openai-organization': 'user-kzzh9hik9ryjiou4ftvhondh', 'openai-processing-ms': '736', 'openai-version': '2020-10-01', 'x-ratelimit-limit-requests': '10000', 'x-ratelimit-limit-tokens': '10000', 'x-ratelimit-remaining-requests': '9995', 'x-ratelimit-remaining-tokens': '9864', 'x-ratelimit-reset-requests': '42.458s', 'x-ratelimit-reset-tokens': '816ms', 'x-request-id': 'req_0413adfcf08facf46e54992ef8549415', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8d275fd17cb9b689-OTP', 'content-encoding': 'gzip', 'alt-svc': 'h3=":443"; ma=86400'})
2024-10-14 14:54:22,912 - DEBUG - request_id: req_0413adfcf08facf46e54992ef8549415
2024-10-14 14:54:22,913 - DEBUG - Instructor Raw Response: ChatCompletion(id='chatcmpl-AIDwUP4fVC0lE7Wz8NLaiDZjTLCBe', choices=[Choice(finish_reason='stop', index=0, logprobs=None, message=ChatCompletionMessage(content=None, refusal=None, role='assistant', function_call=None, tool_calls=[ChatCompletionMessageToolCall(id='call_zfiU0urlXXASADxlcqNq2Zc7', function=Function(arguments='{\n  "contract_type": "airbnb"\n}', name='ContractDetails'), type='function')]))], created=1728906862, model='gpt-4-0613', object='chat.completion', service_tier=None, system_fingerprint=None, usage=CompletionUsage(completion_tokens=11, prompt_tokens=187, total_tokens=198, completion_tokens_details=None, prompt_tokens_details=None))
2024-10-14 14:54:22,916 - DEBUG - Instructor Request: mode.value='tool_call', response_model=<class 'models.AgentAction'>, new_kwargs={'model': 'gpt-4', 'messages': [{'role': 'system', 'content': '\nYou are an AI agent specializing in contract creation and personal information extraction. \n\nYour role is:\n 1. Guide the process of extracting information from documents..\n 2. Verifying the extracted information with human input.\n 3. Identifying parties. \n 4. Constructing a contract. \n\n\nFollow the workflow precisely and ask for human input when needed.\n\n'}, {'role': 'user', 'content': '\n    Current state:\n    - Verified PII data: 2 entries\n    - Parties identified: Yes\n    - Contract type determined: Yes\n    - Contract constructed: No\n    \nWhat action should be taken next? Choose from: extract_pii, identify_parties, determine_contract_type, construct_contract, finish'}], 'tools': [{'type': 'function', 'function': {'name': 'AgentAction', 'description': 'Correctly extracted `AgentAction` with all the required parameters with correct types', 'parameters': {'properties': {'action': {'description': 'Action to be performed by the agent', 'title': 'Action', 'type': 'string'}, 'parameters': {'additionalProperties': {'type': 'string'}, 'description': 'Parameters for the action', 'title': 'Parameters', 'type': 'object'}}, 'required': ['action', 'parameters'], 'type': 'object'}}}], 'tool_choice': {'type': 'function', 'function': {'name': 'AgentAction'}}}
2024-10-14 14:54:22,916 - DEBUG - max_retries: 1
2024-10-14 14:54:22,920 - DEBUG - Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'json_data': {'messages': [{'role': 'system', 'content': '\nYou are an AI agent specializing in contract creation and personal information extraction. \n\nYour role is:\n 1. Guide the process of extracting information from documents..\n 2. Verifying the extracted information with human input.\n 3. Identifying parties. \n 4. Constructing a contract. \n\n\nFollow the workflow precisely and ask for human input when needed.\n\n'}, {'role': 'user', 'content': '\n    Current state:\n    - Verified PII data: 2 entries\n    - Parties identified: Yes\n    - Contract type determined: Yes\n    - Contract constructed: No\n    \nWhat action should be taken next? Choose from: extract_pii, identify_parties, determine_contract_type, construct_contract, finish'}], 'model': 'gpt-4', 'tool_choice': {'type': 'function', 'function': {'name': 'AgentAction'}}, 'tools': [{'type': 'function', 'function': {'name': 'AgentAction', 'description': 'Correctly extracted `AgentAction` with all the required parameters with correct types', 'parameters': {'properties': {'action': {'description': 'Action to be performed by the agent', 'title': 'Action', 'type': 'string'}, 'parameters': {'additionalProperties': {'type': 'string'}, 'description': 'Parameters for the action', 'title': 'Parameters', 'type': 'object'}}, 'required': ['action', 'parameters'], 'type': 'object'}}}]}}
2024-10-14 14:54:22,920 - DEBUG - Sending HTTP Request: POST https://api.openai.com/v1/chat/completions
2024-10-14 14:54:22,921 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-10-14 14:54:22,921 - DEBUG - send_request_headers.complete
2024-10-14 14:54:22,921 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-10-14 14:54:22,921 - DEBUG - send_request_body.complete
2024-10-14 14:54:22,921 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-10-14 14:54:24,015 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Mon, 14 Oct 2024 11:54:24 GMT'), (b'Content-Type', b'application/json'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'user-kzzh9hik9ryjiou4ftvhondh'), (b'openai-processing-ms', b'939'), (b'openai-version', b'2020-10-01'), (b'x-ratelimit-limit-requests', b'10000'), (b'x-ratelimit-limit-tokens', b'10000'), (b'x-ratelimit-remaining-requests', b'9994'), (b'x-ratelimit-remaining-tokens', b'9774'), (b'x-ratelimit-reset-requests', b'50.189s'), (b'x-ratelimit-reset-tokens', b'1.353s'), (b'x-request-id', b'req_9916c4092740f86d9a16df9ff7050b7e'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8d275fd71a5bb689-OTP'), (b'Content-Encoding', b'gzip'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-10-14 14:54:24,016 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2024-10-14 14:54:24,016 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-10-14 14:54:24,017 - DEBUG - receive_response_body.complete
2024-10-14 14:54:24,017 - DEBUG - response_closed.started
2024-10-14 14:54:24,017 - DEBUG - response_closed.complete
2024-10-14 14:54:24,017 - DEBUG - HTTP Response: POST https://api.openai.com/v1/chat/completions "200 OK" Headers({'date': 'Mon, 14 Oct 2024 11:54:24 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-expose-headers': 'X-Request-ID', 'openai-organization': 'user-kzzh9hik9ryjiou4ftvhondh', 'openai-processing-ms': '939', 'openai-version': '2020-10-01', 'x-ratelimit-limit-requests': '10000', 'x-ratelimit-limit-tokens': '10000', 'x-ratelimit-remaining-requests': '9994', 'x-ratelimit-remaining-tokens': '9774', 'x-ratelimit-reset-requests': '50.189s', 'x-ratelimit-reset-tokens': '1.353s', 'x-request-id': 'req_9916c4092740f86d9a16df9ff7050b7e', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8d275fd71a5bb689-OTP', 'content-encoding': 'gzip', 'alt-svc': 'h3=":443"; ma=86400'})
2024-10-14 14:54:24,017 - DEBUG - request_id: req_9916c4092740f86d9a16df9ff7050b7e
2024-10-14 14:54:24,018 - DEBUG - Instructor Raw Response: ChatCompletion(id='chatcmpl-AIDwV8d4T0EgaKQau27NxzCUBLro9', choices=[Choice(finish_reason='stop', index=0, logprobs=None, message=ChatCompletionMessage(content=None, refusal=None, role='assistant', function_call=None, tool_calls=[ChatCompletionMessageToolCall(id='call_ab1kQgbvymReKFe0OpeFErxI', function=Function(arguments='\n{\n  "action": "construct_contract"\n}', name='AgentAction'), type='function')]))], created=1728906863, model='gpt-4-0613', object='chat.completion', service_tier=None, system_fingerprint=None, usage=CompletionUsage(completion_tokens=11, prompt_tokens=207, total_tokens=218, completion_tokens_details=None, prompt_tokens_details=None))
2024-10-14 14:54:24,021 - DEBUG - Instructor Request: mode.value='tool_call', response_model=<class 'models.Contract'>, new_kwargs={'model': 'gpt-4', 'messages': [{'role': 'system', 'content': '\nYou are an AI agent specializing in contract creation and personal information extraction. \n\nYour role is:\n 1. Guide the process of extracting information from documents..\n 2. Verifying the extracted information with human input.\n 3. Identifying parties. \n 4. Constructing a contract. \n\n\nFollow the workflow precisely and ask for human input when needed.\n\n'}, {'role': 'user', 'content': 'Create a airbnb contract using the following template:\n\nAirbnb Rental Agreement Template (Improved Version)\n\nRental Agreement\n\nThis Rental Agreement ("Agreement") is made on [date] between:\n\n1. Parties\n\nHost: [Host\'s Name], residing at [Host\'s Address].\n\nGuest: [Guest\'s Name], residing at [Guest\'s Address].\n\n2. Property\n\nThe Host agrees to rent the property located at [Property Address] to the Guest for the term specified below.\n\nProperty Type: [Apartment/House/Condo/Other]\n\nBedrooms: [Number]\n\nBathrooms: [Number]\n\nOther Features: [Details]\n\n3. Rental Term\n\nThe Guest shall have access to the property for the following period:\n\nFixed Term: From [Start Date] at [Start Time] to [End Date] at [End Time].\n\nMonth-to-Month Lease: Starting on [Start Date], ending upon notice of [X] days from either party.\n\n4. Rental Amount\n\nTotal Rent: [Total Rent in USD]\n\nPayment Method: [e.g., bank transfer, credit card]\n\nPayment Due Date: [Due Date]\n\n5. Security Deposit\n\nAmount: [Security Deposit in USD]\n\nRefundable within [State\'s Requirement] after the lease ends, minus any deductions for damages.\n\n6. House Rules\n\nQuiet Hours: [Yes/No]. If yes, from [Start Time] to [End Time].\n\nSmoking Policy: [Prohibited/Permitted only in specific areas].\n\nPets: [Allowed/Not Allowed]. If allowed, specify any pet fees or restrictions.\n\n7. Utilities and Services\n\nThe Host shall provide all utilities and services, except for: [List of exceptions].\n\n8. Occupants\n\nThe total number of occupants allowed on the property is [Number of Guests].\n\n9. Parking\n\nParking Availability: [Number of Spaces, Fee (if any), and Description of Parking Space].\n\n10. Fees\n\nThe Guest agrees to pay the following fees upon execution of this Agreement:\n\nCleaning Fee: [Amount in USD]\n\nTaxes: [Amount in USD]\n\nOther Fees: [Specify and list amounts]\n\n11. Subletting\n\nSubletting Rights: [Allowed/Not Allowed]. If allowed, subtenants [must/must not] be approved by the Host prior to occupancy.\n\n12. Inspection and Maintenance\n\nMove-in Inspection: A move-in inspection checklist [will/will not] be completed.\n\nRight to Inspect: The Host has the right to inspect the property with reasonable notice as required by law.\n\nMaintenance: The Guest shall maintain the property in good condition. Any damages caused will be deducted from the Security Deposit.\n\n13. Liability\n\nThe Guest shall be responsible for any damages to the property.\n\nThe Host shall not be liable for injuries sustained by the Guest or their guests.\n\n14. Termination\n\nEither party may terminate this Agreement upon [X] days\' notice. All outstanding payments must be settled.\n\n15. Governing Law\n\nThis Agreement shall be governed by the laws of [Jurisdiction].\n\n16. Entire Agreement\n\nThis Agreement constitutes the entire understanding between the Host and the Guest regarding the rental and supersedes all prior agreements, whether written or oral.\n\n17. Signatures\n\nHost Signature: ______________________\n\nDate: ______________________\n\nGuest Signature: ______________________\n\nDate: ______________________\n\nBuyer: T525M ISPILANTE SENTIMENT BRUSLI, Seller: ELENA VASILESCU, Address: Videle Jud: Teleorman Sos. Giurgiului nr.1 695 TR, Additional Details: {}'}], 'tools': [{'type': 'function', 'function': {'name': 'Contract', 'description': 'Correctly extracted `Contract` with all the required parameters with correct types', 'parameters': {'properties': {'buyer': {'description': 'Name of the buyer', 'title': 'Buyer', 'type': 'string'}, 'seller': {'description': 'Name of the seller', 'title': 'Seller', 'type': 'string'}, 'address': {'description': 'Address where the contract is applicable', 'title': 'Address', 'type': 'string'}, 'terms': {'description': 'Terms of the contract', 'title': 'Terms', 'type': 'string'}}, 'required': ['address', 'buyer', 'seller', 'terms'], 'type': 'object'}}}], 'tool_choice': {'type': 'function', 'function': {'name': 'Contract'}}}
2024-10-14 14:54:24,022 - DEBUG - max_retries: 1
2024-10-14 14:54:24,026 - DEBUG - Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'json_data': {'messages': [{'role': 'system', 'content': '\nYou are an AI agent specializing in contract creation and personal information extraction. \n\nYour role is:\n 1. Guide the process of extracting information from documents..\n 2. Verifying the extracted information with human input.\n 3. Identifying parties. \n 4. Constructing a contract. \n\n\nFollow the workflow precisely and ask for human input when needed.\n\n'}, {'role': 'user', 'content': 'Create a airbnb contract using the following template:\n\nAirbnb Rental Agreement Template (Improved Version)\n\nRental Agreement\n\nThis Rental Agreement ("Agreement") is made on [date] between:\n\n1. Parties\n\nHost: [Host\'s Name], residing at [Host\'s Address].\n\nGuest: [Guest\'s Name], residing at [Guest\'s Address].\n\n2. Property\n\nThe Host agrees to rent the property located at [Property Address] to the Guest for the term specified below.\n\nProperty Type: [Apartment/House/Condo/Other]\n\nBedrooms: [Number]\n\nBathrooms: [Number]\n\nOther Features: [Details]\n\n3. Rental Term\n\nThe Guest shall have access to the property for the following period:\n\nFixed Term: From [Start Date] at [Start Time] to [End Date] at [End Time].\n\nMonth-to-Month Lease: Starting on [Start Date], ending upon notice of [X] days from either party.\n\n4. Rental Amount\n\nTotal Rent: [Total Rent in USD]\n\nPayment Method: [e.g., bank transfer, credit card]\n\nPayment Due Date: [Due Date]\n\n5. Security Deposit\n\nAmount: [Security Deposit in USD]\n\nRefundable within [State\'s Requirement] after the lease ends, minus any deductions for damages.\n\n6. House Rules\n\nQuiet Hours: [Yes/No]. If yes, from [Start Time] to [End Time].\n\nSmoking Policy: [Prohibited/Permitted only in specific areas].\n\nPets: [Allowed/Not Allowed]. If allowed, specify any pet fees or restrictions.\n\n7. Utilities and Services\n\nThe Host shall provide all utilities and services, except for: [List of exceptions].\n\n8. Occupants\n\nThe total number of occupants allowed on the property is [Number of Guests].\n\n9. Parking\n\nParking Availability: [Number of Spaces, Fee (if any), and Description of Parking Space].\n\n10. Fees\n\nThe Guest agrees to pay the following fees upon execution of this Agreement:\n\nCleaning Fee: [Amount in USD]\n\nTaxes: [Amount in USD]\n\nOther Fees: [Specify and list amounts]\n\n11. Subletting\n\nSubletting Rights: [Allowed/Not Allowed]. If allowed, subtenants [must/must not] be approved by the Host prior to occupancy.\n\n12. Inspection and Maintenance\n\nMove-in Inspection: A move-in inspection checklist [will/will not] be completed.\n\nRight to Inspect: The Host has the right to inspect the property with reasonable notice as required by law.\n\nMaintenance: The Guest shall maintain the property in good condition. Any damages caused will be deducted from the Security Deposit.\n\n13. Liability\n\nThe Guest shall be responsible for any damages to the property.\n\nThe Host shall not be liable for injuries sustained by the Guest or their guests.\n\n14. Termination\n\nEither party may terminate this Agreement upon [X] days\' notice. All outstanding payments must be settled.\n\n15. Governing Law\n\nThis Agreement shall be governed by the laws of [Jurisdiction].\n\n16. Entire Agreement\n\nThis Agreement constitutes the entire understanding between the Host and the Guest regarding the rental and supersedes all prior agreements, whether written or oral.\n\n17. Signatures\n\nHost Signature: ______________________\n\nDate: ______________________\n\nGuest Signature: ______________________\n\nDate: ______________________\n\nBuyer: T525M ISPILANTE SENTIMENT BRUSLI, Seller: ELENA VASILESCU, Address: Videle Jud: Teleorman Sos. Giurgiului nr.1 695 TR, Additional Details: {}'}], 'model': 'gpt-4', 'tool_choice': {'type': 'function', 'function': {'name': 'Contract'}}, 'tools': [{'type': 'function', 'function': {'name': 'Contract', 'description': 'Correctly extracted `Contract` with all the required parameters with correct types', 'parameters': {'properties': {'buyer': {'description': 'Name of the buyer', 'title': 'Buyer', 'type': 'string'}, 'seller': {'description': 'Name of the seller', 'title': 'Seller', 'type': 'string'}, 'address': {'description': 'Address where the contract is applicable', 'title': 'Address', 'type': 'string'}, 'terms': {'description': 'Terms of the contract', 'title': 'Terms', 'type': 'string'}}, 'required': ['address', 'buyer', 'seller', 'terms'], 'type': 'object'}}}]}}
2024-10-14 14:54:24,027 - DEBUG - Sending HTTP Request: POST https://api.openai.com/v1/chat/completions
2024-10-14 14:54:24,027 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-10-14 14:54:24,027 - DEBUG - send_request_headers.complete
2024-10-14 14:54:24,027 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-10-14 14:54:24,028 - DEBUG - send_request_body.complete
2024-10-14 14:54:24,028 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-10-14 14:54:38,429 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Mon, 14 Oct 2024 11:54:38 GMT'), (b'Content-Type', b'application/json'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'user-kzzh9hik9ryjiou4ftvhondh'), (b'openai-processing-ms', b'14242'), (b'openai-version', b'2020-10-01'), (b'x-ratelimit-limit-requests', b'10000'), (b'x-ratelimit-limit-tokens', b'10000'), (b'x-ratelimit-remaining-requests', b'9993'), (b'x-ratelimit-remaining-tokens', b'9018'), (b'x-ratelimit-reset-requests', b'57.72s'), (b'x-ratelimit-reset-tokens', b'5.89s'), (b'x-request-id', b'req_08aa3720100dbe8ab33f5c93171176af'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8d275fde0950b689-OTP'), (b'Content-Encoding', b'gzip'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-10-14 14:54:38,430 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2024-10-14 14:54:38,430 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-10-14 14:54:38,430 - DEBUG - receive_response_body.complete
2024-10-14 14:54:38,430 - DEBUG - response_closed.started
2024-10-14 14:54:38,430 - DEBUG - response_closed.complete
2024-10-14 14:54:38,430 - DEBUG - HTTP Response: POST https://api.openai.com/v1/chat/completions "200 OK" Headers({'date': 'Mon, 14 Oct 2024 11:54:38 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-expose-headers': 'X-Request-ID', 'openai-organization': 'user-kzzh9hik9ryjiou4ftvhondh', 'openai-processing-ms': '14242', 'openai-version': '2020-10-01', 'x-ratelimit-limit-requests': '10000', 'x-ratelimit-limit-tokens': '10000', 'x-ratelimit-remaining-requests': '9993', 'x-ratelimit-remaining-tokens': '9018', 'x-ratelimit-reset-requests': '57.72s', 'x-ratelimit-reset-tokens': '5.89s', 'x-request-id': 'req_08aa3720100dbe8ab33f5c93171176af', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8d275fde0950b689-OTP', 'content-encoding': 'gzip', 'alt-svc': 'h3=":443"; ma=86400'})
2024-10-14 14:54:38,431 - DEBUG - request_id: req_08aa3720100dbe8ab33f5c93171176af
2024-10-14 14:54:38,432 - DEBUG - Instructor Raw Response: ChatCompletion(id='chatcmpl-AIDwWU7Rb23jYuvhTcuIoO52DfT2j', choices=[Choice(finish_reason='stop', index=0, logprobs=None, message=ChatCompletionMessage(content=None, refusal=None, role='assistant', function_call=None, tool_calls=[ChatCompletionMessageToolCall(id='call_kGd1WCOnrj1diBVYhOu61zNg', function=Function(arguments='{\n"buyer": "T525M ISPILANTE SENTIMENT BRUSLI",\n"seller": "ELENA VASILESCU",\n"address": "Videle Jud: Teleorman Sos. Giurgiului nr.1 695 TR",\n"terms": "This Rental Agreement is made on a certain date between:\\n\\nHost: ELENA VASILESCU, residing at a specified address.\\n\\nGuest: T525M ISPILANTE SENTIMENT BRUSLI, residing at a specified address.\\n\\nThe property located at Videle Jud: Teleorman Sos. Giurgiului nr.1 695 TR is agreed to be rented to the Guest for a specific term. The Host will provide all utilities and services, with an exception list to be provided.\\n\\nThe total number of occupants allowed on the property is a certain number.\\n\\nAdditional rules regarding subletting, inspection and maintenance, liability, and termination are to be followed. All the terms are to be governed by the laws of a specified jurisdiction.\\n\\nThe Guest agrees to the listed fees, security deposit, and rental amount. Along with the provisions regarding quiet hours, smoking policies, pet policies, and parking details.\\n\\nThis Agreement constitutes the entire understanding between the Host and the Guest regarding the rental and supersedes all prior agreements, whether written or oral."\n}', name='Contract'), type='function')]))], created=1728906864, model='gpt-4-0613', object='chat.completion', service_tier=None, system_fingerprint=None, usage=CompletionUsage(completion_tokens=285, prompt_tokens=895, total_tokens=1180, completion_tokens_details=None, prompt_tokens_details=None))
2024-10-14 14:54:38,432 - DEBUG - Instructor Request: mode.value='tool_call', response_model=<class 'models.AgentAction'>, new_kwargs={'model': 'gpt-4', 'messages': [{'role': 'system', 'content': '\nYou are an AI agent specializing in contract creation and personal information extraction. \n\nYour role is:\n 1. Guide the process of extracting information from documents..\n 2. Verifying the extracted information with human input.\n 3. Identifying parties. \n 4. Constructing a contract. \n\n\nFollow the workflow precisely and ask for human input when needed.\n\n'}, {'role': 'user', 'content': '\n    Current state:\n    - Verified PII data: 2 entries\n    - Parties identified: Yes\n    - Contract type determined: Yes\n    - Contract constructed: Yes\n    \nWhat action should be taken next? Choose from: extract_pii, identify_parties, determine_contract_type, construct_contract, finish'}], 'tools': [{'type': 'function', 'function': {'name': 'AgentAction', 'description': 'Correctly extracted `AgentAction` with all the required parameters with correct types', 'parameters': {'properties': {'action': {'description': 'Action to be performed by the agent', 'title': 'Action', 'type': 'string'}, 'parameters': {'additionalProperties': {'type': 'string'}, 'description': 'Parameters for the action', 'title': 'Parameters', 'type': 'object'}}, 'required': ['action', 'parameters'], 'type': 'object'}}}], 'tool_choice': {'type': 'function', 'function': {'name': 'AgentAction'}}}
2024-10-14 14:54:38,433 - DEBUG - max_retries: 1
2024-10-14 14:54:38,434 - DEBUG - Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'json_data': {'messages': [{'role': 'system', 'content': '\nYou are an AI agent specializing in contract creation and personal information extraction. \n\nYour role is:\n 1. Guide the process of extracting information from documents..\n 2. Verifying the extracted information with human input.\n 3. Identifying parties. \n 4. Constructing a contract. \n\n\nFollow the workflow precisely and ask for human input when needed.\n\n'}, {'role': 'user', 'content': '\n    Current state:\n    - Verified PII data: 2 entries\n    - Parties identified: Yes\n    - Contract type determined: Yes\n    - Contract constructed: Yes\n    \nWhat action should be taken next? Choose from: extract_pii, identify_parties, determine_contract_type, construct_contract, finish'}], 'model': 'gpt-4', 'tool_choice': {'type': 'function', 'function': {'name': 'AgentAction'}}, 'tools': [{'type': 'function', 'function': {'name': 'AgentAction', 'description': 'Correctly extracted `AgentAction` with all the required parameters with correct types', 'parameters': {'properties': {'action': {'description': 'Action to be performed by the agent', 'title': 'Action', 'type': 'string'}, 'parameters': {'additionalProperties': {'type': 'string'}, 'description': 'Parameters for the action', 'title': 'Parameters', 'type': 'object'}}, 'required': ['action', 'parameters'], 'type': 'object'}}}]}}
2024-10-14 14:54:38,434 - DEBUG - Sending HTTP Request: POST https://api.openai.com/v1/chat/completions
2024-10-14 14:54:38,435 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-10-14 14:54:38,435 - DEBUG - send_request_headers.complete
2024-10-14 14:54:38,435 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-10-14 14:54:38,435 - DEBUG - send_request_body.complete
2024-10-14 14:54:38,435 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-10-14 14:54:39,254 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Mon, 14 Oct 2024 11:54:39 GMT'), (b'Content-Type', b'application/json'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'user-kzzh9hik9ryjiou4ftvhondh'), (b'openai-processing-ms', b'661'), (b'openai-version', b'2020-10-01'), (b'x-ratelimit-limit-requests', b'10000'), (b'x-ratelimit-limit-tokens', b'10000'), (b'x-ratelimit-remaining-requests', b'9993'), (b'x-ratelimit-remaining-tokens', b'9567'), (b'x-ratelimit-reset-requests', b'51.958s'), (b'x-ratelimit-reset-tokens', b'2.593s'), (b'x-request-id', b'req_4098ba5f09d5ec8219346d783ea63b60'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8d276038198db689-OTP'), (b'Content-Encoding', b'gzip'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-10-14 14:54:39,254 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2024-10-14 14:54:39,254 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-10-14 14:54:39,254 - DEBUG - receive_response_body.complete
2024-10-14 14:54:39,255 - DEBUG - response_closed.started
2024-10-14 14:54:39,255 - DEBUG - response_closed.complete
2024-10-14 14:54:39,255 - DEBUG - HTTP Response: POST https://api.openai.com/v1/chat/completions "200 OK" Headers({'date': 'Mon, 14 Oct 2024 11:54:39 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-expose-headers': 'X-Request-ID', 'openai-organization': 'user-kzzh9hik9ryjiou4ftvhondh', 'openai-processing-ms': '661', 'openai-version': '2020-10-01', 'x-ratelimit-limit-requests': '10000', 'x-ratelimit-limit-tokens': '10000', 'x-ratelimit-remaining-requests': '9993', 'x-ratelimit-remaining-tokens': '9567', 'x-ratelimit-reset-requests': '51.958s', 'x-ratelimit-reset-tokens': '2.593s', 'x-request-id': 'req_4098ba5f09d5ec8219346d783ea63b60', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8d276038198db689-OTP', 'content-encoding': 'gzip', 'alt-svc': 'h3=":443"; ma=86400'})
2024-10-14 14:54:39,255 - DEBUG - request_id: req_4098ba5f09d5ec8219346d783ea63b60
2024-10-14 14:54:39,255 - DEBUG - Instructor Raw Response: ChatCompletion(id='chatcmpl-AIDwk8tAmx18LrPBB1Zifc0DTJ9X1', choices=[Choice(finish_reason='stop', index=0, logprobs=None, message=ChatCompletionMessage(content=None, refusal=None, role='assistant', function_call=None, tool_calls=[ChatCompletionMessageToolCall(id='call_egMZ4cHa7eBOoJnIOe8QHrwV', function=Function(arguments='\n{\n"action": "finish"\n}', name='AgentAction'), type='function')]))], created=1728906878, model='gpt-4-0613', object='chat.completion', service_tier=None, system_fingerprint=None, usage=CompletionUsage(completion_tokens=9, prompt_tokens=207, total_tokens=216, completion_tokens_details=None, prompt_tokens_details=None))
2024-10-14 14:54:39,414 - DEBUG - close.started
2024-10-14 14:54:39,415 - DEBUG - close.complete
2024-10-14 14:55:54,026 - WARNING - Neither CUDA nor MPS are available - defaulting to CPU. Note: This module is much faster with a GPU.
2024-10-14 14:55:55,288 - DEBUG - load_ssl_context verify=True cert=None trust_env=True http2=False
2024-10-14 14:55:55,288 - DEBUG - load_verify_locations cafile='D:\\deve\\contract_automation\\.venv\\Lib\\site-packages\\certifi\\cacert.pem'
2024-10-14 14:55:55,617 - DEBUG - Patching `client.chat.completions.create` with mode=<Mode.TOOLS: 'tool_call'>
2024-10-14 14:55:55,618 - DEBUG - Using proactor: IocpProactor
2024-10-14 14:55:55,637 - DEBUG - STREAM b'IHDR' 16 13
2024-10-14 14:55:55,637 - DEBUG - STREAM b'iCCP' 41 3152
2024-10-14 14:55:55,637 - DEBUG - iCCP profile name b'ICC Profile'
2024-10-14 14:55:55,637 - DEBUG - Compression method 0
2024-10-14 14:55:55,637 - DEBUG - STREAM b'eXIf' 3205 138
2024-10-14 14:55:55,637 - DEBUG - STREAM b'pHYs' 3355 9
2024-10-14 14:55:55,637 - DEBUG - STREAM b'iTXt' 3376 470
2024-10-14 14:55:55,637 - DEBUG - STREAM b'iDOT' 3858 28
2024-10-14 14:55:55,637 - DEBUG - b'iDOT' 3858 28 (unknown)
2024-10-14 14:55:55,637 - DEBUG - STREAM b'IDAT' 3898 16384
2024-10-14 14:55:55,637 - DEBUG - STREAM b'IHDR' 16 13
2024-10-14 14:55:55,637 - DEBUG - STREAM b'iCCP' 41 3152
2024-10-14 14:55:55,637 - DEBUG - iCCP profile name b'ICC Profile'
2024-10-14 14:55:55,637 - DEBUG - Compression method 0
2024-10-14 14:55:55,637 - DEBUG - STREAM b'eXIf' 3205 138
2024-10-14 14:55:55,638 - DEBUG - STREAM b'pHYs' 3355 9
2024-10-14 14:55:55,638 - DEBUG - STREAM b'iTXt' 3376 470
2024-10-14 14:55:55,638 - DEBUG - STREAM b'iDOT' 3858 28
2024-10-14 14:55:55,638 - DEBUG - b'iDOT' 3858 28 (unknown)
2024-10-14 14:55:55,638 - DEBUG - STREAM b'IDAT' 3898 16384
2024-10-14 14:55:55,647 - DEBUG - tag: XResolution (282) - type: rational (5) Tag Location: 22 - Data Location: 62 - value: b'\x00\x00\x00\x90\x00\x00\x00\x01'
2024-10-14 14:55:55,647 - DEBUG - tag: YResolution (283) - type: rational (5) Tag Location: 34 - Data Location: 70 - value: b'\x00\x00\x00\x90\x00\x00\x00\x01'
2024-10-14 14:55:55,648 - DEBUG - tag: ResolutionUnit (296) - type: short (3) - value: b'\x00\x02'
2024-10-14 14:55:55,648 - DEBUG - tag: ExifIFD (34665) - type: long (4) - value: b'\x00\x00\x00N'
2024-10-14 14:55:55,648 - DEBUG - Error closing: Operation on closed image
2024-10-14 14:55:57,829 - DEBUG - STREAM b'IHDR' 16 13
2024-10-14 14:55:57,829 - DEBUG - STREAM b'iCCP' 41 3152
2024-10-14 14:55:57,829 - DEBUG - iCCP profile name b'ICC Profile'
2024-10-14 14:55:57,829 - DEBUG - Compression method 0
2024-10-14 14:55:57,830 - DEBUG - STREAM b'eXIf' 3205 138
2024-10-14 14:55:57,830 - DEBUG - STREAM b'pHYs' 3355 9
2024-10-14 14:55:57,830 - DEBUG - STREAM b'iTXt' 3376 471
2024-10-14 14:55:57,830 - DEBUG - STREAM b'iDOT' 3859 28
2024-10-14 14:55:57,830 - DEBUG - b'iDOT' 3859 28 (unknown)
2024-10-14 14:55:57,830 - DEBUG - STREAM b'IDAT' 3899 16384
2024-10-14 14:55:57,830 - DEBUG - STREAM b'IHDR' 16 13
2024-10-14 14:55:57,830 - DEBUG - STREAM b'iCCP' 41 3152
2024-10-14 14:55:57,830 - DEBUG - iCCP profile name b'ICC Profile'
2024-10-14 14:55:57,830 - DEBUG - Compression method 0
2024-10-14 14:55:57,830 - DEBUG - STREAM b'eXIf' 3205 138
2024-10-14 14:55:57,830 - DEBUG - STREAM b'pHYs' 3355 9
2024-10-14 14:55:57,830 - DEBUG - STREAM b'iTXt' 3376 471
2024-10-14 14:55:57,830 - DEBUG - STREAM b'iDOT' 3859 28
2024-10-14 14:55:57,830 - DEBUG - b'iDOT' 3859 28 (unknown)
2024-10-14 14:55:57,830 - DEBUG - STREAM b'IDAT' 3899 16384
2024-10-14 14:55:57,847 - DEBUG - tag: XResolution (282) - type: rational (5) Tag Location: 22 - Data Location: 62 - value: b'\x00\x00\x00\x90\x00\x00\x00\x01'
2024-10-14 14:55:57,847 - DEBUG - tag: YResolution (283) - type: rational (5) Tag Location: 34 - Data Location: 70 - value: b'\x00\x00\x00\x90\x00\x00\x00\x01'
2024-10-14 14:55:57,847 - DEBUG - tag: ResolutionUnit (296) - type: short (3) - value: b'\x00\x02'
2024-10-14 14:55:57,847 - DEBUG - tag: ExifIFD (34665) - type: long (4) - value: b'\x00\x00\x00N'
2024-10-14 14:55:57,848 - DEBUG - Error closing: Operation on closed image
2024-10-14 14:56:00,505 - DEBUG - Instructor Request: mode.value='tool_call', response_model=<class 'models.AgentAction'>, new_kwargs={'model': 'gpt-4', 'messages': [{'role': 'system', 'content': '\nYou are an AI agent specializing in contract creation and personal information extraction. \n\nYour role is:\n 1. Guide the process of extracting information from documents..\n 2. Verifying the extracted information with human input.\n 3. Identifying parties. \n 4. Constructing a contract. \n\n\nFollow the workflow precisely and ask for human input when needed.\n\n'}, {'role': 'user', 'content': '\n    Current state:\n    - Verified PII data: 0 entries\n    - Parties identified: No\n    - Contract type determined: No\n    - Contract constructed: No\n    \nWhat action should be taken next? Choose from: extract_pii, identify_parties, determine_contract_type, construct_contract, finish'}], 'tools': [{'type': 'function', 'function': {'name': 'AgentAction', 'description': 'Correctly extracted `AgentAction` with all the required parameters with correct types', 'parameters': {'properties': {'action': {'description': 'Action to be performed by the agent', 'title': 'Action', 'type': 'string'}, 'parameters': {'additionalProperties': {'type': 'string'}, 'description': 'Parameters for the action', 'title': 'Parameters', 'type': 'object'}}, 'required': ['action', 'parameters'], 'type': 'object'}}}], 'tool_choice': {'type': 'function', 'function': {'name': 'AgentAction'}}}
2024-10-14 14:56:00,506 - DEBUG - max_retries: 1
2024-10-14 14:56:00,508 - DEBUG - Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'json_data': {'messages': [{'role': 'system', 'content': '\nYou are an AI agent specializing in contract creation and personal information extraction. \n\nYour role is:\n 1. Guide the process of extracting information from documents..\n 2. Verifying the extracted information with human input.\n 3. Identifying parties. \n 4. Constructing a contract. \n\n\nFollow the workflow precisely and ask for human input when needed.\n\n'}, {'role': 'user', 'content': '\n    Current state:\n    - Verified PII data: 0 entries\n    - Parties identified: No\n    - Contract type determined: No\n    - Contract constructed: No\n    \nWhat action should be taken next? Choose from: extract_pii, identify_parties, determine_contract_type, construct_contract, finish'}], 'model': 'gpt-4', 'tool_choice': {'type': 'function', 'function': {'name': 'AgentAction'}}, 'tools': [{'type': 'function', 'function': {'name': 'AgentAction', 'description': 'Correctly extracted `AgentAction` with all the required parameters with correct types', 'parameters': {'properties': {'action': {'description': 'Action to be performed by the agent', 'title': 'Action', 'type': 'string'}, 'parameters': {'additionalProperties': {'type': 'string'}, 'description': 'Parameters for the action', 'title': 'Parameters', 'type': 'object'}}, 'required': ['action', 'parameters'], 'type': 'object'}}}]}}
2024-10-14 14:56:00,540 - DEBUG - Sending HTTP Request: POST https://api.openai.com/v1/chat/completions
2024-10-14 14:56:00,540 - DEBUG - connect_tcp.started host='api.openai.com' port=443 local_address=None timeout=5.0 socket_options=None
2024-10-14 14:56:00,568 - DEBUG - connect_tcp.complete return_value=<httpcore._backends.sync.SyncStream object at 0x000002027596F7D0>
2024-10-14 14:56:00,568 - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x00000202757CDBD0> server_hostname='api.openai.com' timeout=5.0
2024-10-14 14:56:00,578 - DEBUG - start_tls.complete return_value=<httpcore._backends.sync.SyncStream object at 0x000002027596F6E0>
2024-10-14 14:56:00,578 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-10-14 14:56:00,578 - DEBUG - send_request_headers.complete
2024-10-14 14:56:00,578 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-10-14 14:56:00,578 - DEBUG - send_request_body.complete
2024-10-14 14:56:00,578 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-10-14 14:56:01,387 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Mon, 14 Oct 2024 11:56:01 GMT'), (b'Content-Type', b'application/json'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'user-kzzh9hik9ryjiou4ftvhondh'), (b'openai-processing-ms', b'641'), (b'openai-version', b'2020-10-01'), (b'x-ratelimit-limit-requests', b'10000'), (b'x-ratelimit-limit-tokens', b'10000'), (b'x-ratelimit-remaining-requests', b'9999'), (b'x-ratelimit-remaining-tokens', b'9821'), (b'x-ratelimit-reset-requests', b'8.64s'), (b'x-ratelimit-reset-tokens', b'1.074s'), (b'x-request-id', b'req_17f73dc9e78e64e6cf23eae4a0a384bc'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'CF-Cache-Status', b'DYNAMIC'), (b'Set-Cookie', b'__cf_bm=EgAsNYfG5PcP4UluAiqCS0rsSGNNT0bWB95_u84F.lI-1728906961-1.0.1.1-o9HMsvWGkbmYvryv9rM7oUwtTktzrVDRyxBGzQ4eUsfnzUMuq7WrV_nO1vqgMQfxyXwza1l8WqhPoWIegpOfHA; path=/; expires=Mon, 14-Oct-24 12:26:01 GMT; domain=.api.openai.com; HttpOnly; Secure; SameSite=None'), (b'X-Content-Type-Options', b'nosniff'), (b'Set-Cookie', b'_cfuvid=sT_Nq2QPc8mj8j1qiFGCSYDM34GnriOQpAQujSFWk6A-1728906961687-0.0.1.1-604800000; path=/; domain=.api.openai.com; HttpOnly; Secure; SameSite=None'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8d2762398a87c9e5-OTP'), (b'Content-Encoding', b'gzip'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-10-14 14:56:01,388 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2024-10-14 14:56:01,388 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-10-14 14:56:01,388 - DEBUG - receive_response_body.complete
2024-10-14 14:56:01,388 - DEBUG - response_closed.started
2024-10-14 14:56:01,388 - DEBUG - response_closed.complete
2024-10-14 14:56:01,388 - DEBUG - HTTP Response: POST https://api.openai.com/v1/chat/completions "200 OK" Headers([('date', 'Mon, 14 Oct 2024 11:56:01 GMT'), ('content-type', 'application/json'), ('transfer-encoding', 'chunked'), ('connection', 'keep-alive'), ('access-control-expose-headers', 'X-Request-ID'), ('openai-organization', 'user-kzzh9hik9ryjiou4ftvhondh'), ('openai-processing-ms', '641'), ('openai-version', '2020-10-01'), ('x-ratelimit-limit-requests', '10000'), ('x-ratelimit-limit-tokens', '10000'), ('x-ratelimit-remaining-requests', '9999'), ('x-ratelimit-remaining-tokens', '9821'), ('x-ratelimit-reset-requests', '8.64s'), ('x-ratelimit-reset-tokens', '1.074s'), ('x-request-id', 'req_17f73dc9e78e64e6cf23eae4a0a384bc'), ('strict-transport-security', 'max-age=31536000; includeSubDomains; preload'), ('cf-cache-status', 'DYNAMIC'), ('set-cookie', '__cf_bm=EgAsNYfG5PcP4UluAiqCS0rsSGNNT0bWB95_u84F.lI-1728906961-1.0.1.1-o9HMsvWGkbmYvryv9rM7oUwtTktzrVDRyxBGzQ4eUsfnzUMuq7WrV_nO1vqgMQfxyXwza1l8WqhPoWIegpOfHA; path=/; expires=Mon, 14-Oct-24 12:26:01 GMT; domain=.api.openai.com; HttpOnly; Secure; SameSite=None'), ('x-content-type-options', 'nosniff'), ('set-cookie', '_cfuvid=sT_Nq2QPc8mj8j1qiFGCSYDM34GnriOQpAQujSFWk6A-1728906961687-0.0.1.1-604800000; path=/; domain=.api.openai.com; HttpOnly; Secure; SameSite=None'), ('server', 'cloudflare'), ('cf-ray', '8d2762398a87c9e5-OTP'), ('content-encoding', 'gzip'), ('alt-svc', 'h3=":443"; ma=86400')])
2024-10-14 14:56:01,388 - DEBUG - request_id: req_17f73dc9e78e64e6cf23eae4a0a384bc
2024-10-14 14:56:01,390 - DEBUG - Instructor Raw Response: ChatCompletion(id='chatcmpl-AIDy5CrQ9ij6RTNOLGfCIpQ86h4RV', choices=[Choice(finish_reason='stop', index=0, logprobs=None, message=ChatCompletionMessage(content=None, refusal=None, role='assistant', function_call=None, tool_calls=[ChatCompletionMessageToolCall(id='call_xp3RdNT3QD0zZczKBCjefGeZ', function=Function(arguments='\n{\n"action": "extract_pii"\n}', name='AgentAction'), type='function')]))], created=1728906961, model='gpt-4-0613', object='chat.completion', service_tier=None, system_fingerprint=None, usage=CompletionUsage(completion_tokens=11, prompt_tokens=207, total_tokens=218, completion_tokens_details=None, prompt_tokens_details=None))
2024-10-14 14:56:01,391 - DEBUG - Instructor Request: mode.value='tool_call', response_model=<class 'models.PIIData'>, new_kwargs={'model': 'gpt-4', 'messages': [{'role': 'system', 'content': '\nYou are an AI agent specializing in contract creation and personal information extraction. \n\nYour role is:\n 1. Guide the process of extracting information from documents..\n 2. Verifying the extracted information with human input.\n 3. Identifying parties. \n 4. Constructing a contract. \n\n\nFollow the workflow precisely and ask for human input when needed.\n\n'}, {'role': 'user', 'content': "Extract the name and address from the given text:\n\nROUMANIE ROMAWI ROMANIA Carte CARTE De |Dentitate IDEnTITY D'iDENTITE seria TR Na 409131 CarD cNP 1891113341181 Nume/Nom/Last name T525M ISPILANTE Prenume/Prenom/First namo SENTIMENT BRUSLI Cetatenle/Nallonallte/Nallonallly Sox SexeiSox Romn\u0103 ROU M Loc nastere/Liou do naissancelPlace ol birth Or\u0219. Videle Jud.Teleorman Dom IlulAdresse/Addrass Videle Jud: Teleorman Sos. Giurgiului nr.1 695 TR Emisa dolDelivree parlIssuad by ValabilltatelValldlte Valldlty SPCLEP Videle 04.11.11-13.11.2018 IDROUISPILANTE<<SENTIMENT <BRUSLI<<<< TR409131<0R0u8911137M181113513411813 Or\u0219:"}], 'tools': [{'type': 'function', 'function': {'name': 'PIIData', 'description': 'Correctly extracted `PIIData` with all the required parameters with correct types', 'parameters': {'properties': {'name': {'description': 'Full name of the person', 'title': 'Name', 'type': 'string'}, 'address': {'description': 'Residential address of the person', 'title': 'Address', 'type': 'string'}}, 'required': ['address', 'name'], 'type': 'object'}}}], 'tool_choice': {'type': 'function', 'function': {'name': 'PIIData'}}}
2024-10-14 14:56:01,391 - DEBUG - max_retries: 1
2024-10-14 14:56:01,393 - DEBUG - Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'json_data': {'messages': [{'role': 'system', 'content': '\nYou are an AI agent specializing in contract creation and personal information extraction. \n\nYour role is:\n 1. Guide the process of extracting information from documents..\n 2. Verifying the extracted information with human input.\n 3. Identifying parties. \n 4. Constructing a contract. \n\n\nFollow the workflow precisely and ask for human input when needed.\n\n'}, {'role': 'user', 'content': "Extract the name and address from the given text:\n\nROUMANIE ROMAWI ROMANIA Carte CARTE De |Dentitate IDEnTITY D'iDENTITE seria TR Na 409131 CarD cNP 1891113341181 Nume/Nom/Last name T525M ISPILANTE Prenume/Prenom/First namo SENTIMENT BRUSLI Cetatenle/Nallonallte/Nallonallly Sox SexeiSox Romn\u0103 ROU M Loc nastere/Liou do naissancelPlace ol birth Or\u0219. Videle Jud.Teleorman Dom IlulAdresse/Addrass Videle Jud: Teleorman Sos. Giurgiului nr.1 695 TR Emisa dolDelivree parlIssuad by ValabilltatelValldlte Valldlty SPCLEP Videle 04.11.11-13.11.2018 IDROUISPILANTE<<SENTIMENT <BRUSLI<<<< TR409131<0R0u8911137M181113513411813 Or\u0219:"}], 'model': 'gpt-4', 'tool_choice': {'type': 'function', 'function': {'name': 'PIIData'}}, 'tools': [{'type': 'function', 'function': {'name': 'PIIData', 'description': 'Correctly extracted `PIIData` with all the required parameters with correct types', 'parameters': {'properties': {'name': {'description': 'Full name of the person', 'title': 'Name', 'type': 'string'}, 'address': {'description': 'Residential address of the person', 'title': 'Address', 'type': 'string'}}, 'required': ['address', 'name'], 'type': 'object'}}}]}}
2024-10-14 14:56:01,393 - DEBUG - Sending HTTP Request: POST https://api.openai.com/v1/chat/completions
2024-10-14 14:56:01,393 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-10-14 14:56:01,394 - DEBUG - send_request_headers.complete
2024-10-14 14:56:01,394 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-10-14 14:56:01,394 - DEBUG - send_request_body.complete
2024-10-14 14:56:01,394 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-10-14 14:56:03,713 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Mon, 14 Oct 2024 11:56:04 GMT'), (b'Content-Type', b'application/json'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'user-kzzh9hik9ryjiou4ftvhondh'), (b'openai-processing-ms', b'2147'), (b'openai-version', b'2020-10-01'), (b'x-ratelimit-limit-requests', b'10000'), (b'x-ratelimit-limit-tokens', b'10000'), (b'x-ratelimit-remaining-requests', b'9998'), (b'x-ratelimit-remaining-tokens', b'9657'), (b'x-ratelimit-reset-requests', b'16.441s'), (b'x-ratelimit-reset-tokens', b'2.053s'), (b'x-request-id', b'req_13d075138a6634e0ea077230f5e62c6a'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8d27623e9a5ec9e5-OTP'), (b'Content-Encoding', b'gzip'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-10-14 14:56:03,714 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2024-10-14 14:56:03,714 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-10-14 14:56:03,714 - DEBUG - receive_response_body.complete
2024-10-14 14:56:03,714 - DEBUG - response_closed.started
2024-10-14 14:56:03,714 - DEBUG - response_closed.complete
2024-10-14 14:56:03,714 - DEBUG - HTTP Response: POST https://api.openai.com/v1/chat/completions "200 OK" Headers({'date': 'Mon, 14 Oct 2024 11:56:04 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-expose-headers': 'X-Request-ID', 'openai-organization': 'user-kzzh9hik9ryjiou4ftvhondh', 'openai-processing-ms': '2147', 'openai-version': '2020-10-01', 'x-ratelimit-limit-requests': '10000', 'x-ratelimit-limit-tokens': '10000', 'x-ratelimit-remaining-requests': '9998', 'x-ratelimit-remaining-tokens': '9657', 'x-ratelimit-reset-requests': '16.441s', 'x-ratelimit-reset-tokens': '2.053s', 'x-request-id': 'req_13d075138a6634e0ea077230f5e62c6a', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8d27623e9a5ec9e5-OTP', 'content-encoding': 'gzip', 'alt-svc': 'h3=":443"; ma=86400'})
2024-10-14 14:56:03,714 - DEBUG - request_id: req_13d075138a6634e0ea077230f5e62c6a
2024-10-14 14:56:03,714 - DEBUG - Instructor Raw Response: ChatCompletion(id='chatcmpl-AIDy5PyZsEcxoXW9leh6ddLbYkbJh', choices=[Choice(finish_reason='stop', index=0, logprobs=None, message=ChatCompletionMessage(content=None, refusal=None, role='assistant', function_call=None, tool_calls=[ChatCompletionMessageToolCall(id='call_nvrd4Xu0e6kdSSDs5peTYwid', function=Function(arguments='{\n"name": "ISPILANTE SENTIMENT BRUSLI",\n"address": "Videle Jud: Teleorman Sos. Giurgiului nr.1 695 TR"\n}', name='PIIData'), type='function')]))], created=1728906961, model='gpt-4-0613', object='chat.completion', service_tier=None, system_fingerprint=None, usage=CompletionUsage(completion_tokens=39, prompt_tokens=377, total_tokens=416, completion_tokens_details=None, prompt_tokens_details=None))
2024-10-14 14:56:06,894 - DEBUG - Instructor Request: mode.value='tool_call', response_model=<class 'models.PIIData'>, new_kwargs={'model': 'gpt-4', 'messages': [{'role': 'system', 'content': '\nYou are an AI agent specializing in contract creation and personal information extraction. \n\nYour role is:\n 1. Guide the process of extracting information from documents..\n 2. Verifying the extracted information with human input.\n 3. Identifying parties. \n 4. Constructing a contract. \n\n\nFollow the workflow precisely and ask for human input when needed.\n\n'}, {'role': 'user', 'content': "Extract the name and address from the given text:\n\nROUMANIE ROVIAINIA ROMANIA Carte Carte DE iDentitate IdEnTITY Didentite seala SS Nr 099994 Card CNP 2410415400542 93coQ Nume/NomiLast name VASILESCU Pronume/Prenom/Flrst name ELENA < CetatenielNatlonallte/Natlonalily M Sex SexelSer Romn\u0103 ROU Loc nastore/Licu de naissancolF 'ar0 ol birth Mun: Dej Jud. Cluj Domiciliu/Adresse A ess Mun. Bucuresti Sec. 5 Str Nicolae Iorga nr.3 900 B Emisa delDelivree parllssued by Valabilitate/Vahidile Valiouy D.EPAB.D- 06.01.17-15.04.2077 IDROUVASILESCU<<ELENA<<<<<<<<<<<<<<< SS099994<0R0u4104151F770415824003421"}], 'tools': [{'type': 'function', 'function': {'name': 'PIIData', 'description': 'Correctly extracted `PIIData` with all the required parameters with correct types', 'parameters': {'properties': {'name': {'description': 'Full name of the person', 'title': 'Name', 'type': 'string'}, 'address': {'description': 'Residential address of the person', 'title': 'Address', 'type': 'string'}}, 'required': ['address', 'name'], 'type': 'object'}}}], 'tool_choice': {'type': 'function', 'function': {'name': 'PIIData'}}}
2024-10-14 14:56:06,895 - DEBUG - max_retries: 1
2024-10-14 14:56:06,897 - DEBUG - Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'json_data': {'messages': [{'role': 'system', 'content': '\nYou are an AI agent specializing in contract creation and personal information extraction. \n\nYour role is:\n 1. Guide the process of extracting information from documents..\n 2. Verifying the extracted information with human input.\n 3. Identifying parties. \n 4. Constructing a contract. \n\n\nFollow the workflow precisely and ask for human input when needed.\n\n'}, {'role': 'user', 'content': "Extract the name and address from the given text:\n\nROUMANIE ROVIAINIA ROMANIA Carte Carte DE iDentitate IdEnTITY Didentite seala SS Nr 099994 Card CNP 2410415400542 93coQ Nume/NomiLast name VASILESCU Pronume/Prenom/Flrst name ELENA < CetatenielNatlonallte/Natlonalily M Sex SexelSer Romn\u0103 ROU Loc nastore/Licu de naissancolF 'ar0 ol birth Mun: Dej Jud. Cluj Domiciliu/Adresse A ess Mun. Bucuresti Sec. 5 Str Nicolae Iorga nr.3 900 B Emisa delDelivree parllssued by Valabilitate/Vahidile Valiouy D.EPAB.D- 06.01.17-15.04.2077 IDROUVASILESCU<<ELENA<<<<<<<<<<<<<<< SS099994<0R0u4104151F770415824003421"}], 'model': 'gpt-4', 'tool_choice': {'type': 'function', 'function': {'name': 'PIIData'}}, 'tools': [{'type': 'function', 'function': {'name': 'PIIData', 'description': 'Correctly extracted `PIIData` with all the required parameters with correct types', 'parameters': {'properties': {'name': {'description': 'Full name of the person', 'title': 'Name', 'type': 'string'}, 'address': {'description': 'Residential address of the person', 'title': 'Address', 'type': 'string'}}, 'required': ['address', 'name'], 'type': 'object'}}}]}}
2024-10-14 14:56:06,897 - DEBUG - Sending HTTP Request: POST https://api.openai.com/v1/chat/completions
2024-10-14 14:56:06,897 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-10-14 14:56:06,898 - DEBUG - send_request_headers.complete
2024-10-14 14:56:06,898 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-10-14 14:56:06,898 - DEBUG - send_request_body.complete
2024-10-14 14:56:06,898 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-10-14 14:56:08,751 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Mon, 14 Oct 2024 11:56:09 GMT'), (b'Content-Type', b'application/json'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'user-kzzh9hik9ryjiou4ftvhondh'), (b'openai-processing-ms', b'1705'), (b'openai-version', b'2020-10-01'), (b'x-ratelimit-limit-requests', b'10000'), (b'x-ratelimit-limit-tokens', b'10000'), (b'x-ratelimit-remaining-requests', b'9997'), (b'x-ratelimit-remaining-tokens', b'9742'), (b'x-ratelimit-reset-requests', b'19.592s'), (b'x-ratelimit-reset-tokens', b'1.548s'), (b'x-request-id', b'req_77c194b8b8be0204a561d78e12eecc1f'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8d2762610f0cc9e5-OTP'), (b'Content-Encoding', b'gzip'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-10-14 14:56:08,752 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2024-10-14 14:56:08,752 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-10-14 14:56:08,752 - DEBUG - receive_response_body.complete
2024-10-14 14:56:08,753 - DEBUG - response_closed.started
2024-10-14 14:56:08,753 - DEBUG - response_closed.complete
2024-10-14 14:56:08,753 - DEBUG - HTTP Response: POST https://api.openai.com/v1/chat/completions "200 OK" Headers({'date': 'Mon, 14 Oct 2024 11:56:09 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-expose-headers': 'X-Request-ID', 'openai-organization': 'user-kzzh9hik9ryjiou4ftvhondh', 'openai-processing-ms': '1705', 'openai-version': '2020-10-01', 'x-ratelimit-limit-requests': '10000', 'x-ratelimit-limit-tokens': '10000', 'x-ratelimit-remaining-requests': '9997', 'x-ratelimit-remaining-tokens': '9742', 'x-ratelimit-reset-requests': '19.592s', 'x-ratelimit-reset-tokens': '1.548s', 'x-request-id': 'req_77c194b8b8be0204a561d78e12eecc1f', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8d2762610f0cc9e5-OTP', 'content-encoding': 'gzip', 'alt-svc': 'h3=":443"; ma=86400'})
2024-10-14 14:56:08,753 - DEBUG - request_id: req_77c194b8b8be0204a561d78e12eecc1f
2024-10-14 14:56:08,754 - DEBUG - Instructor Raw Response: ChatCompletion(id='chatcmpl-AIDyBFAbQN1j904i6VxPmUr55KtoD', choices=[Choice(finish_reason='stop', index=0, logprobs=None, message=ChatCompletionMessage(content=None, refusal=None, role='assistant', function_call=None, tool_calls=[ChatCompletionMessageToolCall(id='call_ii9FHhkSdmEPAXJeev5j6u2Y', function=Function(arguments='{\n"name": "ELENA VASILESCU",\n"address": "Mun. Bucuresti Sec. 5 Str Nicolae Iorga nr.3"\n}', name='PIIData'), type='function')]))], created=1728906967, model='gpt-4-0613', object='chat.completion', service_tier=None, system_fingerprint=None, usage=CompletionUsage(completion_tokens=39, prompt_tokens=380, total_tokens=419, completion_tokens_details=None, prompt_tokens_details=None))
2024-10-14 14:56:10,566 - DEBUG - Instructor Request: mode.value='tool_call', response_model=<class 'models.AgentAction'>, new_kwargs={'model': 'gpt-4', 'messages': [{'role': 'system', 'content': '\nYou are an AI agent specializing in contract creation and personal information extraction. \n\nYour role is:\n 1. Guide the process of extracting information from documents..\n 2. Verifying the extracted information with human input.\n 3. Identifying parties. \n 4. Constructing a contract. \n\n\nFollow the workflow precisely and ask for human input when needed.\n\n'}, {'role': 'user', 'content': '\n    Current state:\n    - Verified PII data: 2 entries\n    - Parties identified: No\n    - Contract type determined: No\n    - Contract constructed: No\n    \nWhat action should be taken next? Choose from: extract_pii, identify_parties, determine_contract_type, construct_contract, finish'}], 'tools': [{'type': 'function', 'function': {'name': 'AgentAction', 'description': 'Correctly extracted `AgentAction` with all the required parameters with correct types', 'parameters': {'properties': {'action': {'description': 'Action to be performed by the agent', 'title': 'Action', 'type': 'string'}, 'parameters': {'additionalProperties': {'type': 'string'}, 'description': 'Parameters for the action', 'title': 'Parameters', 'type': 'object'}}, 'required': ['action', 'parameters'], 'type': 'object'}}}], 'tool_choice': {'type': 'function', 'function': {'name': 'AgentAction'}}}
2024-10-14 14:56:10,566 - DEBUG - max_retries: 1
2024-10-14 14:56:10,568 - DEBUG - Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'json_data': {'messages': [{'role': 'system', 'content': '\nYou are an AI agent specializing in contract creation and personal information extraction. \n\nYour role is:\n 1. Guide the process of extracting information from documents..\n 2. Verifying the extracted information with human input.\n 3. Identifying parties. \n 4. Constructing a contract. \n\n\nFollow the workflow precisely and ask for human input when needed.\n\n'}, {'role': 'user', 'content': '\n    Current state:\n    - Verified PII data: 2 entries\n    - Parties identified: No\n    - Contract type determined: No\n    - Contract constructed: No\n    \nWhat action should be taken next? Choose from: extract_pii, identify_parties, determine_contract_type, construct_contract, finish'}], 'model': 'gpt-4', 'tool_choice': {'type': 'function', 'function': {'name': 'AgentAction'}}, 'tools': [{'type': 'function', 'function': {'name': 'AgentAction', 'description': 'Correctly extracted `AgentAction` with all the required parameters with correct types', 'parameters': {'properties': {'action': {'description': 'Action to be performed by the agent', 'title': 'Action', 'type': 'string'}, 'parameters': {'additionalProperties': {'type': 'string'}, 'description': 'Parameters for the action', 'title': 'Parameters', 'type': 'object'}}, 'required': ['action', 'parameters'], 'type': 'object'}}}]}}
2024-10-14 14:56:10,569 - DEBUG - Sending HTTP Request: POST https://api.openai.com/v1/chat/completions
2024-10-14 14:56:10,569 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-10-14 14:56:10,569 - DEBUG - send_request_headers.complete
2024-10-14 14:56:10,569 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-10-14 14:56:10,569 - DEBUG - send_request_body.complete
2024-10-14 14:56:10,569 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-10-14 14:56:11,435 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Mon, 14 Oct 2024 11:56:11 GMT'), (b'Content-Type', b'application/json'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'user-kzzh9hik9ryjiou4ftvhondh'), (b'openai-processing-ms', b'717'), (b'openai-version', b'2020-10-01'), (b'x-ratelimit-limit-requests', b'10000'), (b'x-ratelimit-limit-tokens', b'10000'), (b'x-ratelimit-remaining-requests', b'9997'), (b'x-ratelimit-remaining-tokens', b'9821'), (b'x-ratelimit-reset-requests', b'24.565s'), (b'x-ratelimit-reset-tokens', b'1.074s'), (b'x-request-id', b'req_b00bab4a198e72fbf8d1504138624f61'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8d276277f863c9e5-OTP'), (b'Content-Encoding', b'gzip'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-10-14 14:56:11,435 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2024-10-14 14:56:11,435 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-10-14 14:56:11,435 - DEBUG - receive_response_body.complete
2024-10-14 14:56:11,435 - DEBUG - response_closed.started
2024-10-14 14:56:11,435 - DEBUG - response_closed.complete
2024-10-14 14:56:11,435 - DEBUG - HTTP Response: POST https://api.openai.com/v1/chat/completions "200 OK" Headers({'date': 'Mon, 14 Oct 2024 11:56:11 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-expose-headers': 'X-Request-ID', 'openai-organization': 'user-kzzh9hik9ryjiou4ftvhondh', 'openai-processing-ms': '717', 'openai-version': '2020-10-01', 'x-ratelimit-limit-requests': '10000', 'x-ratelimit-limit-tokens': '10000', 'x-ratelimit-remaining-requests': '9997', 'x-ratelimit-remaining-tokens': '9821', 'x-ratelimit-reset-requests': '24.565s', 'x-ratelimit-reset-tokens': '1.074s', 'x-request-id': 'req_b00bab4a198e72fbf8d1504138624f61', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8d276277f863c9e5-OTP', 'content-encoding': 'gzip', 'alt-svc': 'h3=":443"; ma=86400'})
2024-10-14 14:56:11,436 - DEBUG - request_id: req_b00bab4a198e72fbf8d1504138624f61
2024-10-14 14:56:11,436 - DEBUG - Instructor Raw Response: ChatCompletion(id='chatcmpl-AIDyFSD3AOe1typr1aq8VgjrU05mj', choices=[Choice(finish_reason='stop', index=0, logprobs=None, message=ChatCompletionMessage(content=None, refusal=None, role='assistant', function_call=None, tool_calls=[ChatCompletionMessageToolCall(id='call_V2mGwgu5PluXWCDNeUxekNj9', function=Function(arguments='\n{\n"action": "identify_parties"\n}', name='AgentAction'), type='function')]))], created=1728906971, model='gpt-4-0613', object='chat.completion', service_tier=None, system_fingerprint=None, usage=CompletionUsage(completion_tokens=11, prompt_tokens=207, total_tokens=218, completion_tokens_details=None, prompt_tokens_details=None))
2024-10-14 14:56:11,437 - DEBUG - Instructor Request: mode.value='tool_call', response_model=<class 'models.ContractParties'>, new_kwargs={'model': 'gpt-4', 'messages': [{'role': 'system', 'content': '\nYou are an AI agent specializing in contract creation and personal information extraction. \n\nYour role is:\n 1. Guide the process of extracting information from documents..\n 2. Verifying the extracted information with human input.\n 3. Identifying parties. \n 4. Constructing a contract. \n\n\nFollow the workflow precisely and ask for human input when needed.\n\n'}, {'role': 'user', 'content': 'Identify the buyer and seller from the given information:\n\nName: ISPILANTE SENTIMENT BRUSLI, Address: Videle Jud: Teleorman Sos. Giurgiului nr.1 695 TR\nName: ELENA VASILESCU, Address: Mun. Bucuresti Sec. 5 Str Nicolae Iorga nr.3'}], 'tools': [{'type': 'function', 'function': {'name': 'ContractParties', 'description': 'Correctly extracted `ContractParties` with all the required parameters with correct types', 'parameters': {'properties': {'buyer': {'description': 'Name of the buyer', 'title': 'Buyer', 'type': 'string'}, 'seller': {'description': 'Name of the seller', 'title': 'Seller', 'type': 'string'}}, 'required': ['buyer', 'seller'], 'type': 'object'}}}], 'tool_choice': {'type': 'function', 'function': {'name': 'ContractParties'}}}
2024-10-14 14:56:11,437 - DEBUG - max_retries: 1
2024-10-14 14:56:11,439 - DEBUG - Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'json_data': {'messages': [{'role': 'system', 'content': '\nYou are an AI agent specializing in contract creation and personal information extraction. \n\nYour role is:\n 1. Guide the process of extracting information from documents..\n 2. Verifying the extracted information with human input.\n 3. Identifying parties. \n 4. Constructing a contract. \n\n\nFollow the workflow precisely and ask for human input when needed.\n\n'}, {'role': 'user', 'content': 'Identify the buyer and seller from the given information:\n\nName: ISPILANTE SENTIMENT BRUSLI, Address: Videle Jud: Teleorman Sos. Giurgiului nr.1 695 TR\nName: ELENA VASILESCU, Address: Mun. Bucuresti Sec. 5 Str Nicolae Iorga nr.3'}], 'model': 'gpt-4', 'tool_choice': {'type': 'function', 'function': {'name': 'ContractParties'}}, 'tools': [{'type': 'function', 'function': {'name': 'ContractParties', 'description': 'Correctly extracted `ContractParties` with all the required parameters with correct types', 'parameters': {'properties': {'buyer': {'description': 'Name of the buyer', 'title': 'Buyer', 'type': 'string'}, 'seller': {'description': 'Name of the seller', 'title': 'Seller', 'type': 'string'}}, 'required': ['buyer', 'seller'], 'type': 'object'}}}]}}
2024-10-14 14:56:11,439 - DEBUG - Sending HTTP Request: POST https://api.openai.com/v1/chat/completions
2024-10-14 14:56:11,439 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-10-14 14:56:11,440 - DEBUG - send_request_headers.complete
2024-10-14 14:56:11,440 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-10-14 14:56:11,440 - DEBUG - send_request_body.complete
2024-10-14 14:56:11,440 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-10-14 14:56:13,120 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Mon, 14 Oct 2024 11:56:13 GMT'), (b'Content-Type', b'application/json'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'user-kzzh9hik9ryjiou4ftvhondh'), (b'openai-processing-ms', b'1531'), (b'openai-version', b'2020-10-01'), (b'x-ratelimit-limit-requests', b'10000'), (b'x-ratelimit-limit-tokens', b'10000'), (b'x-ratelimit-remaining-requests', b'9996'), (b'x-ratelimit-remaining-tokens', b'9763'), (b'x-ratelimit-reset-requests', b'32.326s'), (b'x-ratelimit-reset-tokens', b'1.419s'), (b'x-request-id', b'req_5f08f12c337a0d030d180ec9d872e698'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8d27627d69afc9e5-OTP'), (b'Content-Encoding', b'gzip'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-10-14 14:56:13,121 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2024-10-14 14:56:13,121 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-10-14 14:56:13,122 - DEBUG - receive_response_body.complete
2024-10-14 14:56:13,122 - DEBUG - response_closed.started
2024-10-14 14:56:13,122 - DEBUG - response_closed.complete
2024-10-14 14:56:13,122 - DEBUG - HTTP Response: POST https://api.openai.com/v1/chat/completions "200 OK" Headers({'date': 'Mon, 14 Oct 2024 11:56:13 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-expose-headers': 'X-Request-ID', 'openai-organization': 'user-kzzh9hik9ryjiou4ftvhondh', 'openai-processing-ms': '1531', 'openai-version': '2020-10-01', 'x-ratelimit-limit-requests': '10000', 'x-ratelimit-limit-tokens': '10000', 'x-ratelimit-remaining-requests': '9996', 'x-ratelimit-remaining-tokens': '9763', 'x-ratelimit-reset-requests': '32.326s', 'x-ratelimit-reset-tokens': '1.419s', 'x-request-id': 'req_5f08f12c337a0d030d180ec9d872e698', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8d27627d69afc9e5-OTP', 'content-encoding': 'gzip', 'alt-svc': 'h3=":443"; ma=86400'})
2024-10-14 14:56:13,123 - DEBUG - request_id: req_5f08f12c337a0d030d180ec9d872e698
2024-10-14 14:56:13,124 - DEBUG - Instructor Raw Response: ChatCompletion(id='chatcmpl-AIDyFPSJCUcdxU5Vui12xGLdkVtig', choices=[Choice(finish_reason='stop', index=0, logprobs=None, message=ChatCompletionMessage(content=None, refusal=None, role='assistant', function_call=None, tool_calls=[ChatCompletionMessageToolCall(id='call_gBt1LoaUP6FqhXkSkQ1Y5l0e', function=Function(arguments='{\n  "buyer": "ELENA VASILESCU",\n  "seller": "ISPILANTE SENTIMENT BRUSLI"\n}', name='ContractParties'), type='function')]))], created=1728906971, model='gpt-4-0613', object='chat.completion', service_tier=None, system_fingerprint=None, usage=CompletionUsage(completion_tokens=30, prompt_tokens=229, total_tokens=259, completion_tokens_details=None, prompt_tokens_details=None))
2024-10-14 14:56:13,126 - DEBUG - Instructor Request: mode.value='tool_call', response_model=<class 'models.AgentAction'>, new_kwargs={'model': 'gpt-4', 'messages': [{'role': 'system', 'content': '\nYou are an AI agent specializing in contract creation and personal information extraction. \n\nYour role is:\n 1. Guide the process of extracting information from documents..\n 2. Verifying the extracted information with human input.\n 3. Identifying parties. \n 4. Constructing a contract. \n\n\nFollow the workflow precisely and ask for human input when needed.\n\n'}, {'role': 'user', 'content': '\n    Current state:\n    - Verified PII data: 2 entries\n    - Parties identified: Yes\n    - Contract type determined: No\n    - Contract constructed: No\n    \nWhat action should be taken next? Choose from: extract_pii, identify_parties, determine_contract_type, construct_contract, finish'}], 'tools': [{'type': 'function', 'function': {'name': 'AgentAction', 'description': 'Correctly extracted `AgentAction` with all the required parameters with correct types', 'parameters': {'properties': {'action': {'description': 'Action to be performed by the agent', 'title': 'Action', 'type': 'string'}, 'parameters': {'additionalProperties': {'type': 'string'}, 'description': 'Parameters for the action', 'title': 'Parameters', 'type': 'object'}}, 'required': ['action', 'parameters'], 'type': 'object'}}}], 'tool_choice': {'type': 'function', 'function': {'name': 'AgentAction'}}}
2024-10-14 14:56:13,126 - DEBUG - max_retries: 1
2024-10-14 14:56:13,130 - DEBUG - Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'json_data': {'messages': [{'role': 'system', 'content': '\nYou are an AI agent specializing in contract creation and personal information extraction. \n\nYour role is:\n 1. Guide the process of extracting information from documents..\n 2. Verifying the extracted information with human input.\n 3. Identifying parties. \n 4. Constructing a contract. \n\n\nFollow the workflow precisely and ask for human input when needed.\n\n'}, {'role': 'user', 'content': '\n    Current state:\n    - Verified PII data: 2 entries\n    - Parties identified: Yes\n    - Contract type determined: No\n    - Contract constructed: No\n    \nWhat action should be taken next? Choose from: extract_pii, identify_parties, determine_contract_type, construct_contract, finish'}], 'model': 'gpt-4', 'tool_choice': {'type': 'function', 'function': {'name': 'AgentAction'}}, 'tools': [{'type': 'function', 'function': {'name': 'AgentAction', 'description': 'Correctly extracted `AgentAction` with all the required parameters with correct types', 'parameters': {'properties': {'action': {'description': 'Action to be performed by the agent', 'title': 'Action', 'type': 'string'}, 'parameters': {'additionalProperties': {'type': 'string'}, 'description': 'Parameters for the action', 'title': 'Parameters', 'type': 'object'}}, 'required': ['action', 'parameters'], 'type': 'object'}}}]}}
2024-10-14 14:56:13,131 - DEBUG - Sending HTTP Request: POST https://api.openai.com/v1/chat/completions
2024-10-14 14:56:13,131 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-10-14 14:56:13,131 - DEBUG - send_request_headers.complete
2024-10-14 14:56:13,131 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-10-14 14:56:13,132 - DEBUG - send_request_body.complete
2024-10-14 14:56:13,132 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-10-14 14:56:14,104 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Mon, 14 Oct 2024 11:56:14 GMT'), (b'Content-Type', b'application/json'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'user-kzzh9hik9ryjiou4ftvhondh'), (b'openai-processing-ms', b'814'), (b'openai-version', b'2020-10-01'), (b'x-ratelimit-limit-requests', b'10000'), (b'x-ratelimit-limit-tokens', b'10000'), (b'x-ratelimit-remaining-requests', b'9995'), (b'x-ratelimit-remaining-tokens', b'9751'), (b'x-ratelimit-reset-requests', b'39.278s'), (b'x-ratelimit-reset-tokens', b'1.49s'), (b'x-request-id', b'req_7da5b54b85d5271677a9786b0258aa04'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8d276287f96bc9e5-OTP'), (b'Content-Encoding', b'gzip'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-10-14 14:56:14,105 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2024-10-14 14:56:14,105 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-10-14 14:56:14,105 - DEBUG - receive_response_body.complete
2024-10-14 14:56:14,106 - DEBUG - response_closed.started
2024-10-14 14:56:14,106 - DEBUG - response_closed.complete
2024-10-14 14:56:14,107 - DEBUG - HTTP Response: POST https://api.openai.com/v1/chat/completions "200 OK" Headers({'date': 'Mon, 14 Oct 2024 11:56:14 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-expose-headers': 'X-Request-ID', 'openai-organization': 'user-kzzh9hik9ryjiou4ftvhondh', 'openai-processing-ms': '814', 'openai-version': '2020-10-01', 'x-ratelimit-limit-requests': '10000', 'x-ratelimit-limit-tokens': '10000', 'x-ratelimit-remaining-requests': '9995', 'x-ratelimit-remaining-tokens': '9751', 'x-ratelimit-reset-requests': '39.278s', 'x-ratelimit-reset-tokens': '1.49s', 'x-request-id': 'req_7da5b54b85d5271677a9786b0258aa04', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8d276287f96bc9e5-OTP', 'content-encoding': 'gzip', 'alt-svc': 'h3=":443"; ma=86400'})
2024-10-14 14:56:14,107 - DEBUG - request_id: req_7da5b54b85d5271677a9786b0258aa04
2024-10-14 14:56:14,108 - DEBUG - Instructor Raw Response: ChatCompletion(id='chatcmpl-AIDyHxkefJmVeZ0k1hJoy1Jcs7qVF', choices=[Choice(finish_reason='stop', index=0, logprobs=None, message=ChatCompletionMessage(content=None, refusal=None, role='assistant', function_call=None, tool_calls=[ChatCompletionMessageToolCall(id='call_cF7cNH4eK86GcH22gDraPeug', function=Function(arguments='\n{\n"action": "determine_contract_type"\n}', name='AgentAction'), type='function')]))], created=1728906973, model='gpt-4-0613', object='chat.completion', service_tier=None, system_fingerprint=None, usage=CompletionUsage(completion_tokens=12, prompt_tokens=207, total_tokens=219, completion_tokens_details=None, prompt_tokens_details=None))
2024-10-14 14:56:18,087 - DEBUG - Instructor Request: mode.value='tool_call', response_model=<class 'models.ContractDetails'>, new_kwargs={'model': 'gpt-4', 'messages': [{'role': 'system', 'content': '\nYou are an AI agent specializing in contract creation and personal information extraction. \n\nYour role is:\n 1. Guide the process of extracting information from documents..\n 2. Verifying the extracted information with human input.\n 3. Identifying parties. \n 4. Constructing a contract. \n\n\nFollow the workflow precisely and ask for human input when needed.\n\n'}, {'role': 'user', 'content': 'Determine the contract details for a airbnb contract between ELENA VASILESCU and ISPILANTE SENTIMENT BRUSLI. Who is the host (property owner) and who is the guest?'}], 'tools': [{'type': 'function', 'function': {'name': 'ContractDetails', 'description': 'Correctly extracted `ContractDetails` with all the required parameters with correct types', 'parameters': {'properties': {'contract_type': {'description': 'Type of contract (e.g., airbnb, buy-sell, it-consulting)', 'title': 'Contract Type', 'type': 'string'}, 'additional_info': {'additionalProperties': {'type': 'string'}, 'description': 'Additional information specific to the contract type', 'title': 'Additional Info', 'type': 'object'}}, 'required': ['additional_info', 'contract_type'], 'type': 'object'}}}], 'tool_choice': {'type': 'function', 'function': {'name': 'ContractDetails'}}}
2024-10-14 14:56:18,088 - DEBUG - max_retries: 1
2024-10-14 14:56:18,090 - DEBUG - Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'json_data': {'messages': [{'role': 'system', 'content': '\nYou are an AI agent specializing in contract creation and personal information extraction. \n\nYour role is:\n 1. Guide the process of extracting information from documents..\n 2. Verifying the extracted information with human input.\n 3. Identifying parties. \n 4. Constructing a contract. \n\n\nFollow the workflow precisely and ask for human input when needed.\n\n'}, {'role': 'user', 'content': 'Determine the contract details for a airbnb contract between ELENA VASILESCU and ISPILANTE SENTIMENT BRUSLI. Who is the host (property owner) and who is the guest?'}], 'model': 'gpt-4', 'tool_choice': {'type': 'function', 'function': {'name': 'ContractDetails'}}, 'tools': [{'type': 'function', 'function': {'name': 'ContractDetails', 'description': 'Correctly extracted `ContractDetails` with all the required parameters with correct types', 'parameters': {'properties': {'contract_type': {'description': 'Type of contract (e.g., airbnb, buy-sell, it-consulting)', 'title': 'Contract Type', 'type': 'string'}, 'additional_info': {'additionalProperties': {'type': 'string'}, 'description': 'Additional information specific to the contract type', 'title': 'Additional Info', 'type': 'object'}}, 'required': ['additional_info', 'contract_type'], 'type': 'object'}}}]}}
2024-10-14 14:56:18,090 - DEBUG - Sending HTTP Request: POST https://api.openai.com/v1/chat/completions
2024-10-14 14:56:18,090 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-10-14 14:56:18,091 - DEBUG - send_request_headers.complete
2024-10-14 14:56:18,091 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-10-14 14:56:18,091 - DEBUG - send_request_body.complete
2024-10-14 14:56:18,091 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-10-14 14:56:18,950 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Mon, 14 Oct 2024 11:56:19 GMT'), (b'Content-Type', b'application/json'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'user-kzzh9hik9ryjiou4ftvhondh'), (b'openai-processing-ms', b'709'), (b'openai-version', b'2020-10-01'), (b'x-ratelimit-limit-requests', b'10000'), (b'x-ratelimit-limit-tokens', b'10000'), (b'x-ratelimit-remaining-requests', b'9995'), (b'x-ratelimit-remaining-tokens', b'9852'), (b'x-ratelimit-reset-requests', b'42.956s'), (b'x-ratelimit-reset-tokens', b'888ms'), (b'x-request-id', b'req_bbb985835bc3ddba872ec8e1c235b218'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8d2762a6ff4cc9e5-OTP'), (b'Content-Encoding', b'gzip'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-10-14 14:56:18,951 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2024-10-14 14:56:18,951 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-10-14 14:56:18,951 - DEBUG - receive_response_body.complete
2024-10-14 14:56:18,952 - DEBUG - response_closed.started
2024-10-14 14:56:18,952 - DEBUG - response_closed.complete
2024-10-14 14:56:18,952 - DEBUG - HTTP Response: POST https://api.openai.com/v1/chat/completions "200 OK" Headers({'date': 'Mon, 14 Oct 2024 11:56:19 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-expose-headers': 'X-Request-ID', 'openai-organization': 'user-kzzh9hik9ryjiou4ftvhondh', 'openai-processing-ms': '709', 'openai-version': '2020-10-01', 'x-ratelimit-limit-requests': '10000', 'x-ratelimit-limit-tokens': '10000', 'x-ratelimit-remaining-requests': '9995', 'x-ratelimit-remaining-tokens': '9852', 'x-ratelimit-reset-requests': '42.956s', 'x-ratelimit-reset-tokens': '888ms', 'x-request-id': 'req_bbb985835bc3ddba872ec8e1c235b218', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8d2762a6ff4cc9e5-OTP', 'content-encoding': 'gzip', 'alt-svc': 'h3=":443"; ma=86400'})
2024-10-14 14:56:18,952 - DEBUG - request_id: req_bbb985835bc3ddba872ec8e1c235b218
2024-10-14 14:56:18,953 - DEBUG - Instructor Raw Response: ChatCompletion(id='chatcmpl-AIDyMEaBeztR4cEnTrl49xwvBRrpb', choices=[Choice(finish_reason='stop', index=0, logprobs=None, message=ChatCompletionMessage(content=None, refusal=None, role='assistant', function_call=None, tool_calls=[ChatCompletionMessageToolCall(id='call_1rmhndynXxMhtEYKcW7s6k6x', function=Function(arguments='{\n  "contract_type": "airbnb"\n}', name='ContractDetails'), type='function')]))], created=1728906978, model='gpt-4-0613', object='chat.completion', service_tier=None, system_fingerprint=None, usage=CompletionUsage(completion_tokens=11, prompt_tokens=198, total_tokens=209, completion_tokens_details=None, prompt_tokens_details=None))
2024-10-14 14:56:30,571 - DEBUG - Instructor Request: mode.value='tool_call', response_model=<class 'models.ContractDetails'>, new_kwargs={'model': 'gpt-4', 'messages': [{'role': 'system', 'content': '\nYou are an AI agent specializing in contract creation and personal information extraction. \n\nYour role is:\n 1. Guide the process of extracting information from documents..\n 2. Verifying the extracted information with human input.\n 3. Identifying parties. \n 4. Constructing a contract. \n\n\nFollow the workflow precisely and ask for human input when needed.\n\n'}, {'role': 'user', 'content': 'Determine the contract details for a airbnb contract between ELENA VASILESCU and ISPILANTE SENTIMENT BRUSLI. Who is the host (property owner) and who is the guest?'}], 'tools': [{'type': 'function', 'function': {'name': 'ContractDetails', 'description': 'Correctly extracted `ContractDetails` with all the required parameters with correct types', 'parameters': {'properties': {'contract_type': {'description': 'Type of contract (e.g., airbnb, buy-sell, it-consulting)', 'title': 'Contract Type', 'type': 'string'}, 'additional_info': {'additionalProperties': {'type': 'string'}, 'description': 'Additional information specific to the contract type', 'title': 'Additional Info', 'type': 'object'}}, 'required': ['additional_info', 'contract_type'], 'type': 'object'}}}], 'tool_choice': {'type': 'function', 'function': {'name': 'ContractDetails'}}}
2024-10-14 14:56:30,571 - DEBUG - max_retries: 1
2024-10-14 14:56:30,572 - DEBUG - Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'json_data': {'messages': [{'role': 'system', 'content': '\nYou are an AI agent specializing in contract creation and personal information extraction. \n\nYour role is:\n 1. Guide the process of extracting information from documents..\n 2. Verifying the extracted information with human input.\n 3. Identifying parties. \n 4. Constructing a contract. \n\n\nFollow the workflow precisely and ask for human input when needed.\n\n'}, {'role': 'user', 'content': 'Determine the contract details for a airbnb contract between ELENA VASILESCU and ISPILANTE SENTIMENT BRUSLI. Who is the host (property owner) and who is the guest?'}], 'model': 'gpt-4', 'tool_choice': {'type': 'function', 'function': {'name': 'ContractDetails'}}, 'tools': [{'type': 'function', 'function': {'name': 'ContractDetails', 'description': 'Correctly extracted `ContractDetails` with all the required parameters with correct types', 'parameters': {'properties': {'contract_type': {'description': 'Type of contract (e.g., airbnb, buy-sell, it-consulting)', 'title': 'Contract Type', 'type': 'string'}, 'additional_info': {'additionalProperties': {'type': 'string'}, 'description': 'Additional information specific to the contract type', 'title': 'Additional Info', 'type': 'object'}}, 'required': ['additional_info', 'contract_type'], 'type': 'object'}}}]}}
2024-10-14 14:56:30,572 - DEBUG - Sending HTTP Request: POST https://api.openai.com/v1/chat/completions
2024-10-14 14:56:30,573 - DEBUG - close.started
2024-10-14 14:56:30,573 - DEBUG - close.complete
2024-10-14 14:56:30,573 - DEBUG - connect_tcp.started host='api.openai.com' port=443 local_address=None timeout=5.0 socket_options=None
2024-10-14 14:56:30,581 - DEBUG - connect_tcp.complete return_value=<httpcore._backends.sync.SyncStream object at 0x00000202759A1A30>
2024-10-14 14:56:30,581 - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x00000202757CDBD0> server_hostname='api.openai.com' timeout=5.0
2024-10-14 14:56:30,588 - DEBUG - start_tls.complete return_value=<httpcore._backends.sync.SyncStream object at 0x00000202759A1CD0>
2024-10-14 14:56:30,588 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-10-14 14:56:30,588 - DEBUG - send_request_headers.complete
2024-10-14 14:56:30,588 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-10-14 14:56:30,588 - DEBUG - send_request_body.complete
2024-10-14 14:56:30,588 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-10-14 14:56:31,411 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Mon, 14 Oct 2024 11:56:31 GMT'), (b'Content-Type', b'application/json'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'user-kzzh9hik9ryjiou4ftvhondh'), (b'openai-processing-ms', b'661'), (b'openai-version', b'2020-10-01'), (b'x-ratelimit-limit-requests', b'10000'), (b'x-ratelimit-limit-tokens', b'10000'), (b'x-ratelimit-remaining-requests', b'9995'), (b'x-ratelimit-remaining-tokens', b'9852'), (b'x-ratelimit-reset-requests', b'39.102s'), (b'x-ratelimit-reset-tokens', b'888ms'), (b'x-request-id', b'req_ed98c40eecf074841b04436ff410eb47'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8d2762f51da6c9cd-OTP'), (b'Content-Encoding', b'gzip'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-10-14 14:56:31,411 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2024-10-14 14:56:31,411 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-10-14 14:56:31,412 - DEBUG - receive_response_body.complete
2024-10-14 14:56:31,412 - DEBUG - response_closed.started
2024-10-14 14:56:31,412 - DEBUG - response_closed.complete
2024-10-14 14:56:31,412 - DEBUG - HTTP Response: POST https://api.openai.com/v1/chat/completions "200 OK" Headers({'date': 'Mon, 14 Oct 2024 11:56:31 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-expose-headers': 'X-Request-ID', 'openai-organization': 'user-kzzh9hik9ryjiou4ftvhondh', 'openai-processing-ms': '661', 'openai-version': '2020-10-01', 'x-ratelimit-limit-requests': '10000', 'x-ratelimit-limit-tokens': '10000', 'x-ratelimit-remaining-requests': '9995', 'x-ratelimit-remaining-tokens': '9852', 'x-ratelimit-reset-requests': '39.102s', 'x-ratelimit-reset-tokens': '888ms', 'x-request-id': 'req_ed98c40eecf074841b04436ff410eb47', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8d2762f51da6c9cd-OTP', 'content-encoding': 'gzip', 'alt-svc': 'h3=":443"; ma=86400'})
2024-10-14 14:56:31,412 - DEBUG - request_id: req_ed98c40eecf074841b04436ff410eb47
2024-10-14 14:56:31,412 - DEBUG - Instructor Raw Response: ChatCompletion(id='chatcmpl-AIDyZwtGfYA2dLTOWPdPKhEw7R82J', choices=[Choice(finish_reason='stop', index=0, logprobs=None, message=ChatCompletionMessage(content=None, refusal=None, role='assistant', function_call=None, tool_calls=[ChatCompletionMessageToolCall(id='call_ZruEtElDuoFTtfrbUrIs2QaA', function=Function(arguments='{\n"contract_type": "airbnb"\n}', name='ContractDetails'), type='function')]))], created=1728906991, model='gpt-4-0613', object='chat.completion', service_tier=None, system_fingerprint=None, usage=CompletionUsage(completion_tokens=10, prompt_tokens=198, total_tokens=208, completion_tokens_details=None, prompt_tokens_details=None))
2024-10-14 14:56:39,490 - DEBUG - close.started
2024-10-14 14:56:39,490 - DEBUG - close.complete
2024-10-14 14:56:39,490 - ERROR - Task exception was never retrieved
future: <Task finished name='Task-1' coro=<agent_workflow() done, defined at D:\deve\contract_automation\src\main.py:25> exception=KeyboardInterrupt()>
Traceback (most recent call last):
  File "D:\deve\contract_automation\src\main.py", line 94, in <module>
    print(f"Address: {state.contract.address}")
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\deve\contract_automation\.venv\Lib\site-packages\nest_asyncio.py", line 30, in run
    return loop.run_until_complete(task)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\deve\contract_automation\.venv\Lib\site-packages\nest_asyncio.py", line 92, in run_until_complete
    self._run_once()
  File "D:\deve\contract_automation\.venv\Lib\site-packages\nest_asyncio.py", line 133, in _run_once
    handle._run()
  File "C:\Users\neuro\.rye\py\cpython@3.12.0\Lib\asyncio\events.py", line 84, in _run
    self._context.run(self._callback, *self._args)
  File "C:\Users\neuro\.rye\py\cpython@3.12.0\Lib\asyncio\tasks.py", line 386, in __wakeup
    self.__step()
  File "C:\Users\neuro\.rye\py\cpython@3.12.0\Lib\asyncio\tasks.py", line 293, in __step
    self.__step_run_and_handle_result(exc)
  File "C:\Users\neuro\.rye\py\cpython@3.12.0\Lib\asyncio\tasks.py", line 304, in __step_run_and_handle_result
    result = coro.send(None)
             ^^^^^^^^^^^^^^^
  File "D:\deve\contract_automation\src\main.py", line 55, in agent_workflow
    contract_type = input("Enter contract type (airbnb, buy-sell, it-consulting): ").lower().replace(" ", "-")
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
KeyboardInterrupt
2024-10-14 14:58:26,114 - WARNING - Neither CUDA nor MPS are available - defaulting to CPU. Note: This module is much faster with a GPU.
2024-10-14 14:59:34,393 - WARNING - Neither CUDA nor MPS are available - defaulting to CPU. Note: This module is much faster with a GPU.
2024-10-14 14:59:35,668 - DEBUG - load_ssl_context verify=True cert=None trust_env=True http2=False
2024-10-14 14:59:35,669 - DEBUG - load_verify_locations cafile='D:\\deve\\contract_automation\\.venv\\Lib\\site-packages\\certifi\\cacert.pem'
2024-10-14 14:59:35,992 - DEBUG - Patching `client.chat.completions.create` with mode=<Mode.TOOLS: 'tool_call'>
2024-10-14 14:59:35,992 - DEBUG - Using proactor: IocpProactor
2024-10-14 14:59:36,011 - DEBUG - STREAM b'IHDR' 16 13
2024-10-14 14:59:36,011 - DEBUG - STREAM b'iCCP' 41 3152
2024-10-14 14:59:36,011 - DEBUG - iCCP profile name b'ICC Profile'
2024-10-14 14:59:36,011 - DEBUG - Compression method 0
2024-10-14 14:59:36,011 - DEBUG - STREAM b'eXIf' 3205 138
2024-10-14 14:59:36,011 - DEBUG - STREAM b'pHYs' 3355 9
2024-10-14 14:59:36,011 - DEBUG - STREAM b'iTXt' 3376 470
2024-10-14 14:59:36,011 - DEBUG - STREAM b'iDOT' 3858 28
2024-10-14 14:59:36,011 - DEBUG - b'iDOT' 3858 28 (unknown)
2024-10-14 14:59:36,011 - DEBUG - STREAM b'IDAT' 3898 16384
2024-10-14 14:59:36,011 - DEBUG - STREAM b'IHDR' 16 13
2024-10-14 14:59:36,011 - DEBUG - STREAM b'iCCP' 41 3152
2024-10-14 14:59:36,011 - DEBUG - iCCP profile name b'ICC Profile'
2024-10-14 14:59:36,011 - DEBUG - Compression method 0
2024-10-14 14:59:36,011 - DEBUG - STREAM b'eXIf' 3205 138
2024-10-14 14:59:36,011 - DEBUG - STREAM b'pHYs' 3355 9
2024-10-14 14:59:36,011 - DEBUG - STREAM b'iTXt' 3376 470
2024-10-14 14:59:36,011 - DEBUG - STREAM b'iDOT' 3858 28
2024-10-14 14:59:36,012 - DEBUG - b'iDOT' 3858 28 (unknown)
2024-10-14 14:59:36,012 - DEBUG - STREAM b'IDAT' 3898 16384
2024-10-14 14:59:36,021 - DEBUG - tag: XResolution (282) - type: rational (5) Tag Location: 22 - Data Location: 62 - value: b'\x00\x00\x00\x90\x00\x00\x00\x01'
2024-10-14 14:59:36,021 - DEBUG - tag: YResolution (283) - type: rational (5) Tag Location: 34 - Data Location: 70 - value: b'\x00\x00\x00\x90\x00\x00\x00\x01'
2024-10-14 14:59:36,021 - DEBUG - tag: ResolutionUnit (296) - type: short (3) - value: b'\x00\x02'
2024-10-14 14:59:36,022 - DEBUG - tag: ExifIFD (34665) - type: long (4) - value: b'\x00\x00\x00N'
2024-10-14 14:59:36,022 - DEBUG - Error closing: Operation on closed image
2024-10-14 14:59:38,158 - DEBUG - STREAM b'IHDR' 16 13
2024-10-14 14:59:38,158 - DEBUG - STREAM b'iCCP' 41 3152
2024-10-14 14:59:38,159 - DEBUG - iCCP profile name b'ICC Profile'
2024-10-14 14:59:38,159 - DEBUG - Compression method 0
2024-10-14 14:59:38,159 - DEBUG - STREAM b'eXIf' 3205 138
2024-10-14 14:59:38,159 - DEBUG - STREAM b'pHYs' 3355 9
2024-10-14 14:59:38,159 - DEBUG - STREAM b'iTXt' 3376 471
2024-10-14 14:59:38,159 - DEBUG - STREAM b'iDOT' 3859 28
2024-10-14 14:59:38,159 - DEBUG - b'iDOT' 3859 28 (unknown)
2024-10-14 14:59:38,159 - DEBUG - STREAM b'IDAT' 3899 16384
2024-10-14 14:59:38,159 - DEBUG - STREAM b'IHDR' 16 13
2024-10-14 14:59:38,159 - DEBUG - STREAM b'iCCP' 41 3152
2024-10-14 14:59:38,159 - DEBUG - iCCP profile name b'ICC Profile'
2024-10-14 14:59:38,159 - DEBUG - Compression method 0
2024-10-14 14:59:38,159 - DEBUG - STREAM b'eXIf' 3205 138
2024-10-14 14:59:38,159 - DEBUG - STREAM b'pHYs' 3355 9
2024-10-14 14:59:38,159 - DEBUG - STREAM b'iTXt' 3376 471
2024-10-14 14:59:38,160 - DEBUG - STREAM b'iDOT' 3859 28
2024-10-14 14:59:38,160 - DEBUG - b'iDOT' 3859 28 (unknown)
2024-10-14 14:59:38,160 - DEBUG - STREAM b'IDAT' 3899 16384
2024-10-14 14:59:38,178 - DEBUG - tag: XResolution (282) - type: rational (5) Tag Location: 22 - Data Location: 62 - value: b'\x00\x00\x00\x90\x00\x00\x00\x01'
2024-10-14 14:59:38,178 - DEBUG - tag: YResolution (283) - type: rational (5) Tag Location: 34 - Data Location: 70 - value: b'\x00\x00\x00\x90\x00\x00\x00\x01'
2024-10-14 14:59:38,178 - DEBUG - tag: ResolutionUnit (296) - type: short (3) - value: b'\x00\x02'
2024-10-14 14:59:38,178 - DEBUG - tag: ExifIFD (34665) - type: long (4) - value: b'\x00\x00\x00N'
2024-10-14 14:59:38,179 - DEBUG - Error closing: Operation on closed image
2024-10-14 14:59:41,310 - DEBUG - Instructor Request: mode.value='tool_call', response_model=<class 'models.AgentAction'>, new_kwargs={'model': 'gpt-4', 'messages': [{'role': 'system', 'content': '\nYou are an AI agent specializing in contract creation and personal information extraction. \n\nYour role is:\n 1. Guide the process of extracting information from documents..\n 2. Verifying the extracted information with human input.\n 3. Identifying parties. \n 4. Constructing a contract. \n\n\nFollow the workflow precisely and ask for human input when needed.\n\n'}, {'role': 'user', 'content': '\n    Current state:\n    - Verified PII data: 0 entries\n    - Parties identified: No\n    - Contract type determined: No\n    - Contract constructed: No\n    \nWhat action should be taken next? Choose from: extract_pii, identify_parties, determine_contract_type, construct_contract, finish'}], 'tools': [{'type': 'function', 'function': {'name': 'AgentAction', 'description': 'Correctly extracted `AgentAction` with all the required parameters with correct types', 'parameters': {'properties': {'action': {'description': 'Action to be performed by the agent', 'title': 'Action', 'type': 'string'}, 'parameters': {'additionalProperties': {'type': 'string'}, 'description': 'Parameters for the action', 'title': 'Parameters', 'type': 'object'}}, 'required': ['action', 'parameters'], 'type': 'object'}}}], 'tool_choice': {'type': 'function', 'function': {'name': 'AgentAction'}}}
2024-10-14 14:59:41,311 - DEBUG - max_retries: 1
2024-10-14 14:59:41,313 - DEBUG - Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'json_data': {'messages': [{'role': 'system', 'content': '\nYou are an AI agent specializing in contract creation and personal information extraction. \n\nYour role is:\n 1. Guide the process of extracting information from documents..\n 2. Verifying the extracted information with human input.\n 3. Identifying parties. \n 4. Constructing a contract. \n\n\nFollow the workflow precisely and ask for human input when needed.\n\n'}, {'role': 'user', 'content': '\n    Current state:\n    - Verified PII data: 0 entries\n    - Parties identified: No\n    - Contract type determined: No\n    - Contract constructed: No\n    \nWhat action should be taken next? Choose from: extract_pii, identify_parties, determine_contract_type, construct_contract, finish'}], 'model': 'gpt-4', 'tool_choice': {'type': 'function', 'function': {'name': 'AgentAction'}}, 'tools': [{'type': 'function', 'function': {'name': 'AgentAction', 'description': 'Correctly extracted `AgentAction` with all the required parameters with correct types', 'parameters': {'properties': {'action': {'description': 'Action to be performed by the agent', 'title': 'Action', 'type': 'string'}, 'parameters': {'additionalProperties': {'type': 'string'}, 'description': 'Parameters for the action', 'title': 'Parameters', 'type': 'object'}}, 'required': ['action', 'parameters'], 'type': 'object'}}}]}}
2024-10-14 14:59:41,345 - DEBUG - Sending HTTP Request: POST https://api.openai.com/v1/chat/completions
2024-10-14 14:59:41,346 - DEBUG - connect_tcp.started host='api.openai.com' port=443 local_address=None timeout=5.0 socket_options=None
2024-10-14 14:59:41,373 - DEBUG - connect_tcp.complete return_value=<httpcore._backends.sync.SyncStream object at 0x000001C6DC89BD70>
2024-10-14 14:59:41,373 - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x000001C6DC715B50> server_hostname='api.openai.com' timeout=5.0
2024-10-14 14:59:41,386 - DEBUG - start_tls.complete return_value=<httpcore._backends.sync.SyncStream object at 0x000001C6D7227E00>
2024-10-14 14:59:41,386 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-10-14 14:59:41,386 - DEBUG - send_request_headers.complete
2024-10-14 14:59:41,386 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-10-14 14:59:41,386 - DEBUG - send_request_body.complete
2024-10-14 14:59:41,386 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-10-14 14:59:42,347 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Mon, 14 Oct 2024 11:59:42 GMT'), (b'Content-Type', b'application/json'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'user-kzzh9hik9ryjiou4ftvhondh'), (b'openai-processing-ms', b'807'), (b'openai-version', b'2020-10-01'), (b'x-ratelimit-limit-requests', b'10000'), (b'x-ratelimit-limit-tokens', b'10000'), (b'x-ratelimit-remaining-requests', b'9999'), (b'x-ratelimit-remaining-tokens', b'9821'), (b'x-ratelimit-reset-requests', b'8.64s'), (b'x-ratelimit-reset-tokens', b'1.074s'), (b'x-request-id', b'req_a73f404507a465c28484af8fbc38d380'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'CF-Cache-Status', b'DYNAMIC'), (b'Set-Cookie', b'__cf_bm=ZtQ7eLrfvlrhWe5HhUQAR5RxwdEwdD17hAYlN9Zr7u4-1728907182-1.0.1.1-uAMvFgPu4ehQTt5kMxzaaSgyjXji2tG68mLoKXdNVI5OzvpXs0_JmwbhrxD2DohgMJx93WRe52045K.vHu.xEg; path=/; expires=Mon, 14-Oct-24 12:29:42 GMT; domain=.api.openai.com; HttpOnly; Secure; SameSite=None'), (b'X-Content-Type-Options', b'nosniff'), (b'Set-Cookie', b'_cfuvid=5YKKmX11yghMoYxrJUkQwwDUQ4Po1GL8hgodJWHYdCk-1728907182656-0.0.1.1-604800000; path=/; domain=.api.openai.com; HttpOnly; Secure; SameSite=None'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8d27679d9a47c9f3-OTP'), (b'Content-Encoding', b'gzip'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-10-14 14:59:42,347 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2024-10-14 14:59:42,347 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-10-14 14:59:42,347 - DEBUG - receive_response_body.complete
2024-10-14 14:59:42,347 - DEBUG - response_closed.started
2024-10-14 14:59:42,348 - DEBUG - response_closed.complete
2024-10-14 14:59:42,348 - DEBUG - HTTP Response: POST https://api.openai.com/v1/chat/completions "200 OK" Headers([('date', 'Mon, 14 Oct 2024 11:59:42 GMT'), ('content-type', 'application/json'), ('transfer-encoding', 'chunked'), ('connection', 'keep-alive'), ('access-control-expose-headers', 'X-Request-ID'), ('openai-organization', 'user-kzzh9hik9ryjiou4ftvhondh'), ('openai-processing-ms', '807'), ('openai-version', '2020-10-01'), ('x-ratelimit-limit-requests', '10000'), ('x-ratelimit-limit-tokens', '10000'), ('x-ratelimit-remaining-requests', '9999'), ('x-ratelimit-remaining-tokens', '9821'), ('x-ratelimit-reset-requests', '8.64s'), ('x-ratelimit-reset-tokens', '1.074s'), ('x-request-id', 'req_a73f404507a465c28484af8fbc38d380'), ('strict-transport-security', 'max-age=31536000; includeSubDomains; preload'), ('cf-cache-status', 'DYNAMIC'), ('set-cookie', '__cf_bm=ZtQ7eLrfvlrhWe5HhUQAR5RxwdEwdD17hAYlN9Zr7u4-1728907182-1.0.1.1-uAMvFgPu4ehQTt5kMxzaaSgyjXji2tG68mLoKXdNVI5OzvpXs0_JmwbhrxD2DohgMJx93WRe52045K.vHu.xEg; path=/; expires=Mon, 14-Oct-24 12:29:42 GMT; domain=.api.openai.com; HttpOnly; Secure; SameSite=None'), ('x-content-type-options', 'nosniff'), ('set-cookie', '_cfuvid=5YKKmX11yghMoYxrJUkQwwDUQ4Po1GL8hgodJWHYdCk-1728907182656-0.0.1.1-604800000; path=/; domain=.api.openai.com; HttpOnly; Secure; SameSite=None'), ('server', 'cloudflare'), ('cf-ray', '8d27679d9a47c9f3-OTP'), ('content-encoding', 'gzip'), ('alt-svc', 'h3=":443"; ma=86400')])
2024-10-14 14:59:42,348 - DEBUG - request_id: req_a73f404507a465c28484af8fbc38d380
2024-10-14 14:59:42,350 - DEBUG - Instructor Raw Response: ChatCompletion(id='chatcmpl-AIE1dKwaRoSWJx8mFmvpcIlB6JtDY', choices=[Choice(finish_reason='stop', index=0, logprobs=None, message=ChatCompletionMessage(content=None, refusal=None, role='assistant', function_call=None, tool_calls=[ChatCompletionMessageToolCall(id='call_fljRW85pByK7E0wnAIXBNMMz', function=Function(arguments='\n{\n  "action": "extract_pii"\n}', name='AgentAction'), type='function')]))], created=1728907181, model='gpt-4-0613', object='chat.completion', service_tier=None, system_fingerprint=None, usage=CompletionUsage(completion_tokens=12, prompt_tokens=207, total_tokens=219, completion_tokens_details=None, prompt_tokens_details=None))
2024-10-14 14:59:42,351 - DEBUG - Instructor Request: mode.value='tool_call', response_model=<class 'models.PIIData'>, new_kwargs={'model': 'gpt-4', 'messages': [{'role': 'system', 'content': '\nYou are an AI agent specializing in contract creation and personal information extraction. \n\nYour role is:\n 1. Guide the process of extracting information from documents..\n 2. Verifying the extracted information with human input.\n 3. Identifying parties. \n 4. Constructing a contract. \n\n\nFollow the workflow precisely and ask for human input when needed.\n\n'}, {'role': 'user', 'content': "Extract the name and address from the given text:\n\nROUMANIE ROMAWI ROMANIA Carte CARTE De |Dentitate IDEnTITY D'iDENTITE seria TR Na 409131 CarD cNP 1891113341181 Nume/Nom/Last name T525M ISPILANTE Prenume/Prenom/First namo SENTIMENT BRUSLI Cetatenle/Nallonallte/Nallonallly Sox SexeiSox Romn\u0103 ROU M Loc nastere/Liou do naissancelPlace ol birth Or\u0219. Videle Jud.Teleorman Dom IlulAdresse/Addrass Videle Jud: Teleorman Sos. Giurgiului nr.1 695 TR Emisa dolDelivree parlIssuad by ValabilltatelValldlte Valldlty SPCLEP Videle 04.11.11-13.11.2018 IDROUISPILANTE<<SENTIMENT <BRUSLI<<<< TR409131<0R0u8911137M181113513411813 Or\u0219:"}], 'tools': [{'type': 'function', 'function': {'name': 'PIIData', 'description': 'Correctly extracted `PIIData` with all the required parameters with correct types', 'parameters': {'properties': {'name': {'description': 'Full name of the person', 'title': 'Name', 'type': 'string'}, 'address': {'description': 'Residential address of the person', 'title': 'Address', 'type': 'string'}}, 'required': ['address', 'name'], 'type': 'object'}}}], 'tool_choice': {'type': 'function', 'function': {'name': 'PIIData'}}}
2024-10-14 14:59:42,351 - DEBUG - max_retries: 1
2024-10-14 14:59:42,352 - DEBUG - Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'json_data': {'messages': [{'role': 'system', 'content': '\nYou are an AI agent specializing in contract creation and personal information extraction. \n\nYour role is:\n 1. Guide the process of extracting information from documents..\n 2. Verifying the extracted information with human input.\n 3. Identifying parties. \n 4. Constructing a contract. \n\n\nFollow the workflow precisely and ask for human input when needed.\n\n'}, {'role': 'user', 'content': "Extract the name and address from the given text:\n\nROUMANIE ROMAWI ROMANIA Carte CARTE De |Dentitate IDEnTITY D'iDENTITE seria TR Na 409131 CarD cNP 1891113341181 Nume/Nom/Last name T525M ISPILANTE Prenume/Prenom/First namo SENTIMENT BRUSLI Cetatenle/Nallonallte/Nallonallly Sox SexeiSox Romn\u0103 ROU M Loc nastere/Liou do naissancelPlace ol birth Or\u0219. Videle Jud.Teleorman Dom IlulAdresse/Addrass Videle Jud: Teleorman Sos. Giurgiului nr.1 695 TR Emisa dolDelivree parlIssuad by ValabilltatelValldlte Valldlty SPCLEP Videle 04.11.11-13.11.2018 IDROUISPILANTE<<SENTIMENT <BRUSLI<<<< TR409131<0R0u8911137M181113513411813 Or\u0219:"}], 'model': 'gpt-4', 'tool_choice': {'type': 'function', 'function': {'name': 'PIIData'}}, 'tools': [{'type': 'function', 'function': {'name': 'PIIData', 'description': 'Correctly extracted `PIIData` with all the required parameters with correct types', 'parameters': {'properties': {'name': {'description': 'Full name of the person', 'title': 'Name', 'type': 'string'}, 'address': {'description': 'Residential address of the person', 'title': 'Address', 'type': 'string'}}, 'required': ['address', 'name'], 'type': 'object'}}}]}}
2024-10-14 14:59:42,352 - DEBUG - Sending HTTP Request: POST https://api.openai.com/v1/chat/completions
2024-10-14 14:59:42,352 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-10-14 14:59:42,353 - DEBUG - send_request_headers.complete
2024-10-14 14:59:42,353 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-10-14 14:59:42,353 - DEBUG - send_request_body.complete
2024-10-14 14:59:42,353 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-10-14 14:59:44,771 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Mon, 14 Oct 2024 11:59:45 GMT'), (b'Content-Type', b'application/json'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'user-kzzh9hik9ryjiou4ftvhondh'), (b'openai-processing-ms', b'2264'), (b'openai-version', b'2020-10-01'), (b'x-ratelimit-limit-requests', b'10000'), (b'x-ratelimit-limit-tokens', b'10000'), (b'x-ratelimit-remaining-requests', b'9998'), (b'x-ratelimit-remaining-tokens', b'9678'), (b'x-ratelimit-reset-requests', b'16.309s'), (b'x-ratelimit-reset-tokens', b'1.927s'), (b'x-request-id', b'req_eb6c384c03d6e40428da5b19d7bcfcc0'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8d2767a3ad38c9f3-OTP'), (b'Content-Encoding', b'gzip'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-10-14 14:59:44,772 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2024-10-14 14:59:44,772 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-10-14 14:59:44,772 - DEBUG - receive_response_body.complete
2024-10-14 14:59:44,772 - DEBUG - response_closed.started
2024-10-14 14:59:44,772 - DEBUG - response_closed.complete
2024-10-14 14:59:44,772 - DEBUG - HTTP Response: POST https://api.openai.com/v1/chat/completions "200 OK" Headers({'date': 'Mon, 14 Oct 2024 11:59:45 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-expose-headers': 'X-Request-ID', 'openai-organization': 'user-kzzh9hik9ryjiou4ftvhondh', 'openai-processing-ms': '2264', 'openai-version': '2020-10-01', 'x-ratelimit-limit-requests': '10000', 'x-ratelimit-limit-tokens': '10000', 'x-ratelimit-remaining-requests': '9998', 'x-ratelimit-remaining-tokens': '9678', 'x-ratelimit-reset-requests': '16.309s', 'x-ratelimit-reset-tokens': '1.927s', 'x-request-id': 'req_eb6c384c03d6e40428da5b19d7bcfcc0', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8d2767a3ad38c9f3-OTP', 'content-encoding': 'gzip', 'alt-svc': 'h3=":443"; ma=86400'})
2024-10-14 14:59:44,772 - DEBUG - request_id: req_eb6c384c03d6e40428da5b19d7bcfcc0
2024-10-14 14:59:44,772 - DEBUG - Instructor Raw Response: ChatCompletion(id='chatcmpl-AIE1eRDi3EQ48qtNQJFoZteR4zuBJ', choices=[Choice(finish_reason='stop', index=0, logprobs=None, message=ChatCompletionMessage(content=None, refusal=None, role='assistant', function_call=None, tool_calls=[ChatCompletionMessageToolCall(id='call_t8lRCZ0dLHaEyTvvBSLpTsaP', function=Function(arguments='{\n"name": "ISPILANTE SENTIMENT BRUSLI",\n"address": "Videle Jud: Teleorman Sos. Giurgiului nr.1 695 TR"\n}', name='PIIData'), type='function')]))], created=1728907182, model='gpt-4-0613', object='chat.completion', service_tier=None, system_fingerprint=None, usage=CompletionUsage(completion_tokens=39, prompt_tokens=377, total_tokens=416, completion_tokens_details=None, prompt_tokens_details=None))
2024-10-14 14:59:48,346 - DEBUG - Instructor Request: mode.value='tool_call', response_model=<class 'models.PIIData'>, new_kwargs={'model': 'gpt-4', 'messages': [{'role': 'system', 'content': '\nYou are an AI agent specializing in contract creation and personal information extraction. \n\nYour role is:\n 1. Guide the process of extracting information from documents..\n 2. Verifying the extracted information with human input.\n 3. Identifying parties. \n 4. Constructing a contract. \n\n\nFollow the workflow precisely and ask for human input when needed.\n\n'}, {'role': 'user', 'content': "Extract the name and address from the given text:\n\nROUMANIE ROVIAINIA ROMANIA Carte Carte DE iDentitate IdEnTITY Didentite seala SS Nr 099994 Card CNP 2410415400542 93coQ Nume/NomiLast name VASILESCU Pronume/Prenom/Flrst name ELENA < CetatenielNatlonallte/Natlonalily M Sex SexelSer Romn\u0103 ROU Loc nastore/Licu de naissancolF 'ar0 ol birth Mun: Dej Jud. Cluj Domiciliu/Adresse A ess Mun. Bucuresti Sec. 5 Str Nicolae Iorga nr.3 900 B Emisa delDelivree parllssued by Valabilitate/Vahidile Valiouy D.EPAB.D- 06.01.17-15.04.2077 IDROUVASILESCU<<ELENA<<<<<<<<<<<<<<< SS099994<0R0u4104151F770415824003421"}], 'tools': [{'type': 'function', 'function': {'name': 'PIIData', 'description': 'Correctly extracted `PIIData` with all the required parameters with correct types', 'parameters': {'properties': {'name': {'description': 'Full name of the person', 'title': 'Name', 'type': 'string'}, 'address': {'description': 'Residential address of the person', 'title': 'Address', 'type': 'string'}}, 'required': ['address', 'name'], 'type': 'object'}}}], 'tool_choice': {'type': 'function', 'function': {'name': 'PIIData'}}}
2024-10-14 14:59:48,347 - DEBUG - max_retries: 1
2024-10-14 14:59:48,349 - DEBUG - Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'json_data': {'messages': [{'role': 'system', 'content': '\nYou are an AI agent specializing in contract creation and personal information extraction. \n\nYour role is:\n 1. Guide the process of extracting information from documents..\n 2. Verifying the extracted information with human input.\n 3. Identifying parties. \n 4. Constructing a contract. \n\n\nFollow the workflow precisely and ask for human input when needed.\n\n'}, {'role': 'user', 'content': "Extract the name and address from the given text:\n\nROUMANIE ROVIAINIA ROMANIA Carte Carte DE iDentitate IdEnTITY Didentite seala SS Nr 099994 Card CNP 2410415400542 93coQ Nume/NomiLast name VASILESCU Pronume/Prenom/Flrst name ELENA < CetatenielNatlonallte/Natlonalily M Sex SexelSer Romn\u0103 ROU Loc nastore/Licu de naissancolF 'ar0 ol birth Mun: Dej Jud. Cluj Domiciliu/Adresse A ess Mun. Bucuresti Sec. 5 Str Nicolae Iorga nr.3 900 B Emisa delDelivree parllssued by Valabilitate/Vahidile Valiouy D.EPAB.D- 06.01.17-15.04.2077 IDROUVASILESCU<<ELENA<<<<<<<<<<<<<<< SS099994<0R0u4104151F770415824003421"}], 'model': 'gpt-4', 'tool_choice': {'type': 'function', 'function': {'name': 'PIIData'}}, 'tools': [{'type': 'function', 'function': {'name': 'PIIData', 'description': 'Correctly extracted `PIIData` with all the required parameters with correct types', 'parameters': {'properties': {'name': {'description': 'Full name of the person', 'title': 'Name', 'type': 'string'}, 'address': {'description': 'Residential address of the person', 'title': 'Address', 'type': 'string'}}, 'required': ['address', 'name'], 'type': 'object'}}}]}}
2024-10-14 14:59:48,349 - DEBUG - Sending HTTP Request: POST https://api.openai.com/v1/chat/completions
2024-10-14 14:59:48,350 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-10-14 14:59:48,350 - DEBUG - send_request_headers.complete
2024-10-14 14:59:48,350 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-10-14 14:59:48,350 - DEBUG - send_request_body.complete
2024-10-14 14:59:48,350 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-10-14 14:59:50,391 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Mon, 14 Oct 2024 11:59:50 GMT'), (b'Content-Type', b'application/json'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'user-kzzh9hik9ryjiou4ftvhondh'), (b'openai-processing-ms', b'1887'), (b'openai-version', b'2020-10-01'), (b'x-ratelimit-limit-requests', b'10000'), (b'x-ratelimit-limit-tokens', b'10000'), (b'x-ratelimit-remaining-requests', b'9997'), (b'x-ratelimit-remaining-tokens', b'9742'), (b'x-ratelimit-reset-requests', b'18.96s'), (b'x-ratelimit-reset-tokens', b'1.548s'), (b'x-request-id', b'req_4d1eba1a528fdf780081e74919401457'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8d2767c92c39c9f3-OTP'), (b'Content-Encoding', b'gzip'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-10-14 14:59:50,392 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2024-10-14 14:59:50,392 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-10-14 14:59:50,393 - DEBUG - receive_response_body.complete
2024-10-14 14:59:50,393 - DEBUG - response_closed.started
2024-10-14 14:59:50,393 - DEBUG - response_closed.complete
2024-10-14 14:59:50,393 - DEBUG - HTTP Response: POST https://api.openai.com/v1/chat/completions "200 OK" Headers({'date': 'Mon, 14 Oct 2024 11:59:50 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-expose-headers': 'X-Request-ID', 'openai-organization': 'user-kzzh9hik9ryjiou4ftvhondh', 'openai-processing-ms': '1887', 'openai-version': '2020-10-01', 'x-ratelimit-limit-requests': '10000', 'x-ratelimit-limit-tokens': '10000', 'x-ratelimit-remaining-requests': '9997', 'x-ratelimit-remaining-tokens': '9742', 'x-ratelimit-reset-requests': '18.96s', 'x-ratelimit-reset-tokens': '1.548s', 'x-request-id': 'req_4d1eba1a528fdf780081e74919401457', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8d2767c92c39c9f3-OTP', 'content-encoding': 'gzip', 'alt-svc': 'h3=":443"; ma=86400'})
2024-10-14 14:59:50,394 - DEBUG - request_id: req_4d1eba1a528fdf780081e74919401457
2024-10-14 14:59:50,394 - DEBUG - Instructor Raw Response: ChatCompletion(id='chatcmpl-AIE1kdRFUTdofSFi5GBvH0TZDfpfu', choices=[Choice(finish_reason='stop', index=0, logprobs=None, message=ChatCompletionMessage(content=None, refusal=None, role='assistant', function_call=None, tool_calls=[ChatCompletionMessageToolCall(id='call_A5pEmFFn0Au4eUvAf92oJui6', function=Function(arguments='{\n"name": "ELENA VASILESCU",\n"address": "Mun. Bucuresti Sec. 5 Str Nicolae Iorga nr.3 900 B"\n}', name='PIIData'), type='function')]))], created=1728907188, model='gpt-4-0613', object='chat.completion', service_tier=None, system_fingerprint=None, usage=CompletionUsage(completion_tokens=42, prompt_tokens=380, total_tokens=422, completion_tokens_details=None, prompt_tokens_details=None))
2024-10-14 14:59:51,577 - DEBUG - Instructor Request: mode.value='tool_call', response_model=<class 'models.AgentAction'>, new_kwargs={'model': 'gpt-4', 'messages': [{'role': 'system', 'content': '\nYou are an AI agent specializing in contract creation and personal information extraction. \n\nYour role is:\n 1. Guide the process of extracting information from documents..\n 2. Verifying the extracted information with human input.\n 3. Identifying parties. \n 4. Constructing a contract. \n\n\nFollow the workflow precisely and ask for human input when needed.\n\n'}, {'role': 'user', 'content': '\n    Current state:\n    - Verified PII data: 2 entries\n    - Parties identified: No\n    - Contract type determined: No\n    - Contract constructed: No\n    \nWhat action should be taken next? Choose from: extract_pii, identify_parties, determine_contract_type, construct_contract, finish'}], 'tools': [{'type': 'function', 'function': {'name': 'AgentAction', 'description': 'Correctly extracted `AgentAction` with all the required parameters with correct types', 'parameters': {'properties': {'action': {'description': 'Action to be performed by the agent', 'title': 'Action', 'type': 'string'}, 'parameters': {'additionalProperties': {'type': 'string'}, 'description': 'Parameters for the action', 'title': 'Parameters', 'type': 'object'}}, 'required': ['action', 'parameters'], 'type': 'object'}}}], 'tool_choice': {'type': 'function', 'function': {'name': 'AgentAction'}}}
2024-10-14 14:59:51,577 - DEBUG - max_retries: 1
2024-10-14 14:59:51,579 - DEBUG - Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'json_data': {'messages': [{'role': 'system', 'content': '\nYou are an AI agent specializing in contract creation and personal information extraction. \n\nYour role is:\n 1. Guide the process of extracting information from documents..\n 2. Verifying the extracted information with human input.\n 3. Identifying parties. \n 4. Constructing a contract. \n\n\nFollow the workflow precisely and ask for human input when needed.\n\n'}, {'role': 'user', 'content': '\n    Current state:\n    - Verified PII data: 2 entries\n    - Parties identified: No\n    - Contract type determined: No\n    - Contract constructed: No\n    \nWhat action should be taken next? Choose from: extract_pii, identify_parties, determine_contract_type, construct_contract, finish'}], 'model': 'gpt-4', 'tool_choice': {'type': 'function', 'function': {'name': 'AgentAction'}}, 'tools': [{'type': 'function', 'function': {'name': 'AgentAction', 'description': 'Correctly extracted `AgentAction` with all the required parameters with correct types', 'parameters': {'properties': {'action': {'description': 'Action to be performed by the agent', 'title': 'Action', 'type': 'string'}, 'parameters': {'additionalProperties': {'type': 'string'}, 'description': 'Parameters for the action', 'title': 'Parameters', 'type': 'object'}}, 'required': ['action', 'parameters'], 'type': 'object'}}}]}}
2024-10-14 14:59:51,579 - DEBUG - Sending HTTP Request: POST https://api.openai.com/v1/chat/completions
2024-10-14 14:59:51,579 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-10-14 14:59:51,580 - DEBUG - send_request_headers.complete
2024-10-14 14:59:51,580 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-10-14 14:59:51,580 - DEBUG - send_request_body.complete
2024-10-14 14:59:51,580 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-10-14 14:59:52,575 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Mon, 14 Oct 2024 11:59:52 GMT'), (b'Content-Type', b'application/json'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'user-kzzh9hik9ryjiou4ftvhondh'), (b'openai-processing-ms', b'834'), (b'openai-version', b'2020-10-01'), (b'x-ratelimit-limit-requests', b'10000'), (b'x-ratelimit-limit-tokens', b'10000'), (b'x-ratelimit-remaining-requests', b'9997'), (b'x-ratelimit-remaining-tokens', b'9821'), (b'x-ratelimit-reset-requests', b'24.367s'), (b'x-ratelimit-reset-tokens', b'1.074s'), (b'x-request-id', b'req_c6aba0b20d3b44be5e0b77b678077623'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8d2767dd5d19c9f3-OTP'), (b'Content-Encoding', b'gzip'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-10-14 14:59:52,575 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2024-10-14 14:59:52,575 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-10-14 14:59:52,576 - DEBUG - receive_response_body.complete
2024-10-14 14:59:52,576 - DEBUG - response_closed.started
2024-10-14 14:59:52,576 - DEBUG - response_closed.complete
2024-10-14 14:59:52,576 - DEBUG - HTTP Response: POST https://api.openai.com/v1/chat/completions "200 OK" Headers({'date': 'Mon, 14 Oct 2024 11:59:52 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-expose-headers': 'X-Request-ID', 'openai-organization': 'user-kzzh9hik9ryjiou4ftvhondh', 'openai-processing-ms': '834', 'openai-version': '2020-10-01', 'x-ratelimit-limit-requests': '10000', 'x-ratelimit-limit-tokens': '10000', 'x-ratelimit-remaining-requests': '9997', 'x-ratelimit-remaining-tokens': '9821', 'x-ratelimit-reset-requests': '24.367s', 'x-ratelimit-reset-tokens': '1.074s', 'x-request-id': 'req_c6aba0b20d3b44be5e0b77b678077623', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8d2767dd5d19c9f3-OTP', 'content-encoding': 'gzip', 'alt-svc': 'h3=":443"; ma=86400'})
2024-10-14 14:59:52,576 - DEBUG - request_id: req_c6aba0b20d3b44be5e0b77b678077623
2024-10-14 14:59:52,576 - DEBUG - Instructor Raw Response: ChatCompletion(id='chatcmpl-AIE1ojcaOyplgfhEbKRx4q5AZZDYQ', choices=[Choice(finish_reason='stop', index=0, logprobs=None, message=ChatCompletionMessage(content=None, refusal=None, role='assistant', function_call=None, tool_calls=[ChatCompletionMessageToolCall(id='call_9jkohtaajErUAF33NcJnE3lJ', function=Function(arguments='{\n  "action": "identify_parties"\n}', name='AgentAction'), type='function')]))], created=1728907192, model='gpt-4-0613', object='chat.completion', service_tier=None, system_fingerprint=None, usage=CompletionUsage(completion_tokens=11, prompt_tokens=207, total_tokens=218, completion_tokens_details=None, prompt_tokens_details=None))
2024-10-14 14:59:52,578 - DEBUG - Instructor Request: mode.value='tool_call', response_model=<class 'models.ContractParties'>, new_kwargs={'model': 'gpt-4', 'messages': [{'role': 'system', 'content': '\nYou are an AI agent specializing in contract creation and personal information extraction. \n\nYour role is:\n 1. Guide the process of extracting information from documents..\n 2. Verifying the extracted information with human input.\n 3. Identifying parties. \n 4. Constructing a contract. \n\n\nFollow the workflow precisely and ask for human input when needed.\n\n'}, {'role': 'user', 'content': 'Identify the buyer and seller from the given information:\n\nName: ISPILANTE SENTIMENT BRUSLI, Address: Videle Jud: Teleorman Sos. Giurgiului nr.1 695 TR\nName: ELENA VASILESCU, Address: Mun. Bucuresti Sec. 5 Str Nicolae Iorga nr.3 900 B'}], 'tools': [{'type': 'function', 'function': {'name': 'ContractParties', 'description': 'Correctly extracted `ContractParties` with all the required parameters with correct types', 'parameters': {'properties': {'buyer': {'description': 'Name of the buyer', 'title': 'Buyer', 'type': 'string'}, 'seller': {'description': 'Name of the seller', 'title': 'Seller', 'type': 'string'}}, 'required': ['buyer', 'seller'], 'type': 'object'}}}], 'tool_choice': {'type': 'function', 'function': {'name': 'ContractParties'}}}
2024-10-14 14:59:52,578 - DEBUG - max_retries: 1
2024-10-14 14:59:52,580 - DEBUG - Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'json_data': {'messages': [{'role': 'system', 'content': '\nYou are an AI agent specializing in contract creation and personal information extraction. \n\nYour role is:\n 1. Guide the process of extracting information from documents..\n 2. Verifying the extracted information with human input.\n 3. Identifying parties. \n 4. Constructing a contract. \n\n\nFollow the workflow precisely and ask for human input when needed.\n\n'}, {'role': 'user', 'content': 'Identify the buyer and seller from the given information:\n\nName: ISPILANTE SENTIMENT BRUSLI, Address: Videle Jud: Teleorman Sos. Giurgiului nr.1 695 TR\nName: ELENA VASILESCU, Address: Mun. Bucuresti Sec. 5 Str Nicolae Iorga nr.3 900 B'}], 'model': 'gpt-4', 'tool_choice': {'type': 'function', 'function': {'name': 'ContractParties'}}, 'tools': [{'type': 'function', 'function': {'name': 'ContractParties', 'description': 'Correctly extracted `ContractParties` with all the required parameters with correct types', 'parameters': {'properties': {'buyer': {'description': 'Name of the buyer', 'title': 'Buyer', 'type': 'string'}, 'seller': {'description': 'Name of the seller', 'title': 'Seller', 'type': 'string'}}, 'required': ['buyer', 'seller'], 'type': 'object'}}}]}}
2024-10-14 14:59:52,581 - DEBUG - Sending HTTP Request: POST https://api.openai.com/v1/chat/completions
2024-10-14 14:59:52,581 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-10-14 14:59:52,581 - DEBUG - send_request_headers.complete
2024-10-14 14:59:52,582 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-10-14 14:59:52,582 - DEBUG - send_request_body.complete
2024-10-14 14:59:52,582 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-10-14 14:59:54,142 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Mon, 14 Oct 2024 11:59:54 GMT'), (b'Content-Type', b'application/json'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'user-kzzh9hik9ryjiou4ftvhondh'), (b'openai-processing-ms', b'1403'), (b'openai-version', b'2020-10-01'), (b'x-ratelimit-limit-requests', b'10000'), (b'x-ratelimit-limit-tokens', b'10000'), (b'x-ratelimit-remaining-requests', b'9996'), (b'x-ratelimit-remaining-tokens', b'9782'), (b'x-ratelimit-reset-requests', b'32.011s'), (b'x-ratelimit-reset-tokens', b'1.307s'), (b'x-request-id', b'req_a51ad0ff9b117741369f9619930b0c4f'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8d2767e39fb9c9f3-OTP'), (b'Content-Encoding', b'gzip'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-10-14 14:59:54,143 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2024-10-14 14:59:54,144 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-10-14 14:59:54,144 - DEBUG - receive_response_body.complete
2024-10-14 14:59:54,144 - DEBUG - response_closed.started
2024-10-14 14:59:54,144 - DEBUG - response_closed.complete
2024-10-14 14:59:54,145 - DEBUG - HTTP Response: POST https://api.openai.com/v1/chat/completions "200 OK" Headers({'date': 'Mon, 14 Oct 2024 11:59:54 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-expose-headers': 'X-Request-ID', 'openai-organization': 'user-kzzh9hik9ryjiou4ftvhondh', 'openai-processing-ms': '1403', 'openai-version': '2020-10-01', 'x-ratelimit-limit-requests': '10000', 'x-ratelimit-limit-tokens': '10000', 'x-ratelimit-remaining-requests': '9996', 'x-ratelimit-remaining-tokens': '9782', 'x-ratelimit-reset-requests': '32.011s', 'x-ratelimit-reset-tokens': '1.307s', 'x-request-id': 'req_a51ad0ff9b117741369f9619930b0c4f', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8d2767e39fb9c9f3-OTP', 'content-encoding': 'gzip', 'alt-svc': 'h3=":443"; ma=86400'})
2024-10-14 14:59:54,145 - DEBUG - request_id: req_a51ad0ff9b117741369f9619930b0c4f
2024-10-14 14:59:54,146 - DEBUG - Instructor Raw Response: ChatCompletion(id='chatcmpl-AIE1pjVGYd6VZsa0EseyDrwZkcxL7', choices=[Choice(finish_reason='stop', index=0, logprobs=None, message=ChatCompletionMessage(content=None, refusal=None, role='assistant', function_call=None, tool_calls=[ChatCompletionMessageToolCall(id='call_Cjt2BsXpcQEjgzIac7wvOcbl', function=Function(arguments='{\n"buyer": "ISPILANTE SENTIMENT BRUSLI",\n"seller": "ELENA VASILESCU"\n}', name='ContractParties'), type='function')]))], created=1728907193, model='gpt-4-0613', object='chat.completion', service_tier=None, system_fingerprint=None, usage=CompletionUsage(completion_tokens=28, prompt_tokens=232, total_tokens=260, completion_tokens_details=None, prompt_tokens_details=None))
2024-10-14 14:59:54,149 - DEBUG - Instructor Request: mode.value='tool_call', response_model=<class 'models.AgentAction'>, new_kwargs={'model': 'gpt-4', 'messages': [{'role': 'system', 'content': '\nYou are an AI agent specializing in contract creation and personal information extraction. \n\nYour role is:\n 1. Guide the process of extracting information from documents..\n 2. Verifying the extracted information with human input.\n 3. Identifying parties. \n 4. Constructing a contract. \n\n\nFollow the workflow precisely and ask for human input when needed.\n\n'}, {'role': 'user', 'content': '\n    Current state:\n    - Verified PII data: 2 entries\n    - Parties identified: Yes\n    - Contract type determined: No\n    - Contract constructed: No\n    \nWhat action should be taken next? Choose from: extract_pii, identify_parties, determine_contract_type, construct_contract, finish'}], 'tools': [{'type': 'function', 'function': {'name': 'AgentAction', 'description': 'Correctly extracted `AgentAction` with all the required parameters with correct types', 'parameters': {'properties': {'action': {'description': 'Action to be performed by the agent', 'title': 'Action', 'type': 'string'}, 'parameters': {'additionalProperties': {'type': 'string'}, 'description': 'Parameters for the action', 'title': 'Parameters', 'type': 'object'}}, 'required': ['action', 'parameters'], 'type': 'object'}}}], 'tool_choice': {'type': 'function', 'function': {'name': 'AgentAction'}}}
2024-10-14 14:59:54,149 - DEBUG - max_retries: 1
2024-10-14 14:59:54,153 - DEBUG - Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'json_data': {'messages': [{'role': 'system', 'content': '\nYou are an AI agent specializing in contract creation and personal information extraction. \n\nYour role is:\n 1. Guide the process of extracting information from documents..\n 2. Verifying the extracted information with human input.\n 3. Identifying parties. \n 4. Constructing a contract. \n\n\nFollow the workflow precisely and ask for human input when needed.\n\n'}, {'role': 'user', 'content': '\n    Current state:\n    - Verified PII data: 2 entries\n    - Parties identified: Yes\n    - Contract type determined: No\n    - Contract constructed: No\n    \nWhat action should be taken next? Choose from: extract_pii, identify_parties, determine_contract_type, construct_contract, finish'}], 'model': 'gpt-4', 'tool_choice': {'type': 'function', 'function': {'name': 'AgentAction'}}, 'tools': [{'type': 'function', 'function': {'name': 'AgentAction', 'description': 'Correctly extracted `AgentAction` with all the required parameters with correct types', 'parameters': {'properties': {'action': {'description': 'Action to be performed by the agent', 'title': 'Action', 'type': 'string'}, 'parameters': {'additionalProperties': {'type': 'string'}, 'description': 'Parameters for the action', 'title': 'Parameters', 'type': 'object'}}, 'required': ['action', 'parameters'], 'type': 'object'}}}]}}
2024-10-14 14:59:54,154 - DEBUG - Sending HTTP Request: POST https://api.openai.com/v1/chat/completions
2024-10-14 14:59:54,154 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-10-14 14:59:54,154 - DEBUG - send_request_headers.complete
2024-10-14 14:59:54,154 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-10-14 14:59:54,154 - DEBUG - send_request_body.complete
2024-10-14 14:59:54,154 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-10-14 14:59:55,518 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Mon, 14 Oct 2024 11:59:55 GMT'), (b'Content-Type', b'application/json'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'user-kzzh9hik9ryjiou4ftvhondh'), (b'openai-processing-ms', b'1210'), (b'openai-version', b'2020-10-01'), (b'x-ratelimit-limit-requests', b'10000'), (b'x-ratelimit-limit-tokens', b'10000'), (b'x-ratelimit-remaining-requests', b'9995'), (b'x-ratelimit-remaining-tokens', b'9752'), (b'x-ratelimit-reset-requests', b'39.072s'), (b'x-ratelimit-reset-tokens', b'1.484s'), (b'x-request-id', b'req_5ce1b914e8f3c969065122e26874f6a8'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8d2767ed689fc9f3-OTP'), (b'Content-Encoding', b'gzip'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-10-14 14:59:55,519 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2024-10-14 14:59:55,519 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-10-14 14:59:55,520 - DEBUG - receive_response_body.complete
2024-10-14 14:59:55,520 - DEBUG - response_closed.started
2024-10-14 14:59:55,520 - DEBUG - response_closed.complete
2024-10-14 14:59:55,520 - DEBUG - HTTP Response: POST https://api.openai.com/v1/chat/completions "200 OK" Headers({'date': 'Mon, 14 Oct 2024 11:59:55 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-expose-headers': 'X-Request-ID', 'openai-organization': 'user-kzzh9hik9ryjiou4ftvhondh', 'openai-processing-ms': '1210', 'openai-version': '2020-10-01', 'x-ratelimit-limit-requests': '10000', 'x-ratelimit-limit-tokens': '10000', 'x-ratelimit-remaining-requests': '9995', 'x-ratelimit-remaining-tokens': '9752', 'x-ratelimit-reset-requests': '39.072s', 'x-ratelimit-reset-tokens': '1.484s', 'x-request-id': 'req_5ce1b914e8f3c969065122e26874f6a8', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8d2767ed689fc9f3-OTP', 'content-encoding': 'gzip', 'alt-svc': 'h3=":443"; ma=86400'})
2024-10-14 14:59:55,520 - DEBUG - request_id: req_5ce1b914e8f3c969065122e26874f6a8
2024-10-14 14:59:55,521 - DEBUG - Instructor Raw Response: ChatCompletion(id='chatcmpl-AIE1qNEY9St1jC0Py0xdZcWVXBBJs', choices=[Choice(finish_reason='stop', index=0, logprobs=None, message=ChatCompletionMessage(content=None, refusal=None, role='assistant', function_call=None, tool_calls=[ChatCompletionMessageToolCall(id='call_rX8eEFSgEb0Llrz1CDid9i2C', function=Function(arguments='{\n  "action": "determine_contract_type"\n}', name='AgentAction'), type='function')]))], created=1728907194, model='gpt-4-0613', object='chat.completion', service_tier=None, system_fingerprint=None, usage=CompletionUsage(completion_tokens=12, prompt_tokens=207, total_tokens=219, completion_tokens_details=None, prompt_tokens_details=None))
2024-10-14 14:59:59,199 - DEBUG - Instructor Request: mode.value='tool_call', response_model=<class 'models.ContractDetails'>, new_kwargs={'model': 'gpt-4', 'messages': [{'role': 'system', 'content': '\nYou are an AI agent specializing in contract creation and personal information extraction. \n\nYour role is:\n 1. Guide the process of extracting information from documents..\n 2. Verifying the extracted information with human input.\n 3. Identifying parties. \n 4. Constructing a contract. \n\n\nFollow the workflow precisely and ask for human input when needed.\n\n'}, {'role': 'user', 'content': "Determine the contract details for a airbnb contract between ISPILANTE SENTIMENT BRUSLI and ELENA VASILESCU. Who is the host (property owner) and who is the guest? Please provide the roles in a JSON format with keys 'host' and 'guest' for Airbnb, 'seller' and 'buyer' for buy-sell, or 'consultant' and 'client' for IT consulting."}], 'tools': [{'type': 'function', 'function': {'name': 'ContractDetails', 'description': 'Correctly extracted `ContractDetails` with all the required parameters with correct types', 'parameters': {'properties': {'contract_type': {'description': 'Type of contract (e.g., airbnb, buy-sell, it-consulting)', 'title': 'Contract Type', 'type': 'string'}, 'additional_info': {'additionalProperties': {'type': 'string'}, 'description': 'Additional information specific to the contract type', 'title': 'Additional Info', 'type': 'object'}}, 'required': ['additional_info', 'contract_type'], 'type': 'object'}}}], 'tool_choice': {'type': 'function', 'function': {'name': 'ContractDetails'}}}
2024-10-14 14:59:59,200 - DEBUG - max_retries: 1
2024-10-14 14:59:59,202 - DEBUG - Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'json_data': {'messages': [{'role': 'system', 'content': '\nYou are an AI agent specializing in contract creation and personal information extraction. \n\nYour role is:\n 1. Guide the process of extracting information from documents..\n 2. Verifying the extracted information with human input.\n 3. Identifying parties. \n 4. Constructing a contract. \n\n\nFollow the workflow precisely and ask for human input when needed.\n\n'}, {'role': 'user', 'content': "Determine the contract details for a airbnb contract between ISPILANTE SENTIMENT BRUSLI and ELENA VASILESCU. Who is the host (property owner) and who is the guest? Please provide the roles in a JSON format with keys 'host' and 'guest' for Airbnb, 'seller' and 'buyer' for buy-sell, or 'consultant' and 'client' for IT consulting."}], 'model': 'gpt-4', 'tool_choice': {'type': 'function', 'function': {'name': 'ContractDetails'}}, 'tools': [{'type': 'function', 'function': {'name': 'ContractDetails', 'description': 'Correctly extracted `ContractDetails` with all the required parameters with correct types', 'parameters': {'properties': {'contract_type': {'description': 'Type of contract (e.g., airbnb, buy-sell, it-consulting)', 'title': 'Contract Type', 'type': 'string'}, 'additional_info': {'additionalProperties': {'type': 'string'}, 'description': 'Additional information specific to the contract type', 'title': 'Additional Info', 'type': 'object'}}, 'required': ['additional_info', 'contract_type'], 'type': 'object'}}}]}}
2024-10-14 14:59:59,202 - DEBUG - Sending HTTP Request: POST https://api.openai.com/v1/chat/completions
2024-10-14 14:59:59,203 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-10-14 14:59:59,203 - DEBUG - send_request_headers.complete
2024-10-14 14:59:59,203 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-10-14 14:59:59,203 - DEBUG - send_request_body.complete
2024-10-14 14:59:59,203 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-10-14 15:00:00,088 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Mon, 14 Oct 2024 12:00:00 GMT'), (b'Content-Type', b'application/json'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'user-kzzh9hik9ryjiou4ftvhondh'), (b'openai-processing-ms', b'725'), (b'openai-version', b'2020-10-01'), (b'x-ratelimit-limit-requests', b'10000'), (b'x-ratelimit-limit-tokens', b'10000'), (b'x-ratelimit-remaining-requests', b'9995'), (b'x-ratelimit-remaining-tokens', b'9810'), (b'x-ratelimit-reset-requests', b'42.658s'), (b'x-ratelimit-reset-tokens', b'1.14s'), (b'x-request-id', b'req_ab619858b39edd7c237822d66e8d22a7'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8d27680cfd50c9f3-OTP'), (b'Content-Encoding', b'gzip'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-10-14 15:00:00,089 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2024-10-14 15:00:00,089 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-10-14 15:00:00,090 - DEBUG - receive_response_body.complete
2024-10-14 15:00:00,090 - DEBUG - response_closed.started
2024-10-14 15:00:00,090 - DEBUG - response_closed.complete
2024-10-14 15:00:00,090 - DEBUG - HTTP Response: POST https://api.openai.com/v1/chat/completions "200 OK" Headers({'date': 'Mon, 14 Oct 2024 12:00:00 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-expose-headers': 'X-Request-ID', 'openai-organization': 'user-kzzh9hik9ryjiou4ftvhondh', 'openai-processing-ms': '725', 'openai-version': '2020-10-01', 'x-ratelimit-limit-requests': '10000', 'x-ratelimit-limit-tokens': '10000', 'x-ratelimit-remaining-requests': '9995', 'x-ratelimit-remaining-tokens': '9810', 'x-ratelimit-reset-requests': '42.658s', 'x-ratelimit-reset-tokens': '1.14s', 'x-request-id': 'req_ab619858b39edd7c237822d66e8d22a7', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8d27680cfd50c9f3-OTP', 'content-encoding': 'gzip', 'alt-svc': 'h3=":443"; ma=86400'})
2024-10-14 15:00:00,091 - DEBUG - request_id: req_ab619858b39edd7c237822d66e8d22a7
2024-10-14 15:00:00,092 - DEBUG - Instructor Raw Response: ChatCompletion(id='chatcmpl-AIE1vHAqpvYiW3eJtZF3n6PnIlNoZ', choices=[Choice(finish_reason='stop', index=0, logprobs=None, message=ChatCompletionMessage(content=None, refusal=None, role='assistant', function_call=None, tool_calls=[ChatCompletionMessageToolCall(id='call_yiXJLHsb1tY5anokbsTFgyn5', function=Function(arguments='{\n  "contract_type": "airbnb"\n}', name='ContractDetails'), type='function')]))], created=1728907199, model='gpt-4-0613', object='chat.completion', service_tier=None, system_fingerprint=None, usage=CompletionUsage(completion_tokens=11, prompt_tokens=243, total_tokens=254, completion_tokens_details=None, prompt_tokens_details=None))
2024-10-14 15:00:26,571 - DEBUG - close.started
2024-10-14 15:00:26,572 - DEBUG - close.complete
2024-10-14 15:00:26,572 - ERROR - Task exception was never retrieved
future: <Task finished name='Task-1' coro=<agent_workflow() done, defined at D:\deve\contract_automation\src\main.py:25> exception=KeyboardInterrupt()>
Traceback (most recent call last):
  File "D:\deve\contract_automation\src\main.py", line 105, in <module>
    asyncio.run(agent_workflow())
  File "D:\deve\contract_automation\.venv\Lib\site-packages\nest_asyncio.py", line 30, in run
    return loop.run_until_complete(task)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\deve\contract_automation\.venv\Lib\site-packages\nest_asyncio.py", line 92, in run_until_complete
    self._run_once()
  File "D:\deve\contract_automation\.venv\Lib\site-packages\nest_asyncio.py", line 133, in _run_once
    handle._run()
  File "C:\Users\neuro\.rye\py\cpython@3.12.0\Lib\asyncio\events.py", line 84, in _run
    self._context.run(self._callback, *self._args)
  File "C:\Users\neuro\.rye\py\cpython@3.12.0\Lib\asyncio\tasks.py", line 386, in __wakeup
    self.__step()
  File "C:\Users\neuro\.rye\py\cpython@3.12.0\Lib\asyncio\tasks.py", line 293, in __step
    self.__step_run_and_handle_result(exc)
  File "C:\Users\neuro\.rye\py\cpython@3.12.0\Lib\asyncio\tasks.py", line 304, in __step_run_and_handle_result
    result = coro.send(None)
             ^^^^^^^^^^^^^^^
  File "D:\deve\contract_automation\src\main.py", line 66, in agent_workflow
    confirmation = input("Is this role assignment correct? (yes/no): ").lower()
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
KeyboardInterrupt
2024-10-14 15:01:13,558 - WARNING - Neither CUDA nor MPS are available - defaulting to CPU. Note: This module is much faster with a GPU.
2024-10-14 15:01:14,811 - DEBUG - load_ssl_context verify=True cert=None trust_env=True http2=False
2024-10-14 15:01:14,811 - DEBUG - load_verify_locations cafile='D:\\deve\\contract_automation\\.venv\\Lib\\site-packages\\certifi\\cacert.pem'
2024-10-14 15:01:15,146 - DEBUG - Patching `client.chat.completions.create` with mode=<Mode.TOOLS: 'tool_call'>
2024-10-14 15:01:15,147 - DEBUG - Using proactor: IocpProactor
2024-10-14 15:01:15,167 - DEBUG - STREAM b'IHDR' 16 13
2024-10-14 15:01:15,167 - DEBUG - STREAM b'iCCP' 41 3152
2024-10-14 15:01:15,167 - DEBUG - iCCP profile name b'ICC Profile'
2024-10-14 15:01:15,167 - DEBUG - Compression method 0
2024-10-14 15:01:15,167 - DEBUG - STREAM b'eXIf' 3205 138
2024-10-14 15:01:15,167 - DEBUG - STREAM b'pHYs' 3355 9
2024-10-14 15:01:15,167 - DEBUG - STREAM b'iTXt' 3376 470
2024-10-14 15:01:15,167 - DEBUG - STREAM b'iDOT' 3858 28
2024-10-14 15:01:15,167 - DEBUG - b'iDOT' 3858 28 (unknown)
2024-10-14 15:01:15,167 - DEBUG - STREAM b'IDAT' 3898 16384
2024-10-14 15:01:15,167 - DEBUG - STREAM b'IHDR' 16 13
2024-10-14 15:01:15,167 - DEBUG - STREAM b'iCCP' 41 3152
2024-10-14 15:01:15,167 - DEBUG - iCCP profile name b'ICC Profile'
2024-10-14 15:01:15,167 - DEBUG - Compression method 0
2024-10-14 15:01:15,167 - DEBUG - STREAM b'eXIf' 3205 138
2024-10-14 15:01:15,167 - DEBUG - STREAM b'pHYs' 3355 9
2024-10-14 15:01:15,167 - DEBUG - STREAM b'iTXt' 3376 470
2024-10-14 15:01:15,167 - DEBUG - STREAM b'iDOT' 3858 28
2024-10-14 15:01:15,167 - DEBUG - b'iDOT' 3858 28 (unknown)
2024-10-14 15:01:15,168 - DEBUG - STREAM b'IDAT' 3898 16384
2024-10-14 15:01:15,177 - DEBUG - tag: XResolution (282) - type: rational (5) Tag Location: 22 - Data Location: 62 - value: b'\x00\x00\x00\x90\x00\x00\x00\x01'
2024-10-14 15:01:15,177 - DEBUG - tag: YResolution (283) - type: rational (5) Tag Location: 34 - Data Location: 70 - value: b'\x00\x00\x00\x90\x00\x00\x00\x01'
2024-10-14 15:01:15,177 - DEBUG - tag: ResolutionUnit (296) - type: short (3) - value: b'\x00\x02'
2024-10-14 15:01:15,177 - DEBUG - tag: ExifIFD (34665) - type: long (4) - value: b'\x00\x00\x00N'
2024-10-14 15:01:15,178 - DEBUG - Error closing: Operation on closed image
2024-10-14 15:01:17,195 - DEBUG - STREAM b'IHDR' 16 13
2024-10-14 15:01:17,195 - DEBUG - STREAM b'iCCP' 41 3152
2024-10-14 15:01:17,195 - DEBUG - iCCP profile name b'ICC Profile'
2024-10-14 15:01:17,195 - DEBUG - Compression method 0
2024-10-14 15:01:17,196 - DEBUG - STREAM b'eXIf' 3205 138
2024-10-14 15:01:17,196 - DEBUG - STREAM b'pHYs' 3355 9
2024-10-14 15:01:17,196 - DEBUG - STREAM b'iTXt' 3376 471
2024-10-14 15:01:17,196 - DEBUG - STREAM b'iDOT' 3859 28
2024-10-14 15:01:17,196 - DEBUG - b'iDOT' 3859 28 (unknown)
2024-10-14 15:01:17,196 - DEBUG - STREAM b'IDAT' 3899 16384
2024-10-14 15:01:17,196 - DEBUG - STREAM b'IHDR' 16 13
2024-10-14 15:01:17,196 - DEBUG - STREAM b'iCCP' 41 3152
2024-10-14 15:01:17,196 - DEBUG - iCCP profile name b'ICC Profile'
2024-10-14 15:01:17,196 - DEBUG - Compression method 0
2024-10-14 15:01:17,196 - DEBUG - STREAM b'eXIf' 3205 138
2024-10-14 15:01:17,196 - DEBUG - STREAM b'pHYs' 3355 9
2024-10-14 15:01:17,196 - DEBUG - STREAM b'iTXt' 3376 471
2024-10-14 15:01:17,196 - DEBUG - STREAM b'iDOT' 3859 28
2024-10-14 15:01:17,196 - DEBUG - b'iDOT' 3859 28 (unknown)
2024-10-14 15:01:17,196 - DEBUG - STREAM b'IDAT' 3899 16384
2024-10-14 15:01:17,213 - DEBUG - tag: XResolution (282) - type: rational (5) Tag Location: 22 - Data Location: 62 - value: b'\x00\x00\x00\x90\x00\x00\x00\x01'
2024-10-14 15:01:17,213 - DEBUG - tag: YResolution (283) - type: rational (5) Tag Location: 34 - Data Location: 70 - value: b'\x00\x00\x00\x90\x00\x00\x00\x01'
2024-10-14 15:01:17,213 - DEBUG - tag: ResolutionUnit (296) - type: short (3) - value: b'\x00\x02'
2024-10-14 15:01:17,213 - DEBUG - tag: ExifIFD (34665) - type: long (4) - value: b'\x00\x00\x00N'
2024-10-14 15:01:17,214 - DEBUG - Error closing: Operation on closed image
2024-10-14 15:01:19,678 - DEBUG - Instructor Request: mode.value='tool_call', response_model=<class 'models.AgentAction'>, new_kwargs={'model': 'gpt-4', 'messages': [{'role': 'system', 'content': '\nYou are an AI agent specializing in contract creation and personal information extraction. \n\nYour role is:\n 1. Guide the process of extracting information from documents..\n 2. Verifying the extracted information with human input.\n 3. Identifying parties. \n 4. Constructing a contract. \n\n\nFollow the workflow precisely and ask for human input when needed.\n\n'}, {'role': 'user', 'content': '\n    Current state:\n    - Verified PII data: 0 entries\n    - Parties identified: No\n    - Contract type determined: No\n    - Contract constructed: No\n    \nWhat action should be taken next? Choose from: extract_pii, identify_parties, determine_contract_type, construct_contract, finish'}], 'tools': [{'type': 'function', 'function': {'name': 'AgentAction', 'description': 'Correctly extracted `AgentAction` with all the required parameters with correct types', 'parameters': {'properties': {'action': {'description': 'Action to be performed by the agent', 'title': 'Action', 'type': 'string'}, 'parameters': {'additionalProperties': {'type': 'string'}, 'description': 'Parameters for the action', 'title': 'Parameters', 'type': 'object'}}, 'required': ['action', 'parameters'], 'type': 'object'}}}], 'tool_choice': {'type': 'function', 'function': {'name': 'AgentAction'}}}
2024-10-14 15:01:19,679 - DEBUG - max_retries: 1
2024-10-14 15:01:19,681 - DEBUG - Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'json_data': {'messages': [{'role': 'system', 'content': '\nYou are an AI agent specializing in contract creation and personal information extraction. \n\nYour role is:\n 1. Guide the process of extracting information from documents..\n 2. Verifying the extracted information with human input.\n 3. Identifying parties. \n 4. Constructing a contract. \n\n\nFollow the workflow precisely and ask for human input when needed.\n\n'}, {'role': 'user', 'content': '\n    Current state:\n    - Verified PII data: 0 entries\n    - Parties identified: No\n    - Contract type determined: No\n    - Contract constructed: No\n    \nWhat action should be taken next? Choose from: extract_pii, identify_parties, determine_contract_type, construct_contract, finish'}], 'model': 'gpt-4', 'tool_choice': {'type': 'function', 'function': {'name': 'AgentAction'}}, 'tools': [{'type': 'function', 'function': {'name': 'AgentAction', 'description': 'Correctly extracted `AgentAction` with all the required parameters with correct types', 'parameters': {'properties': {'action': {'description': 'Action to be performed by the agent', 'title': 'Action', 'type': 'string'}, 'parameters': {'additionalProperties': {'type': 'string'}, 'description': 'Parameters for the action', 'title': 'Parameters', 'type': 'object'}}, 'required': ['action', 'parameters'], 'type': 'object'}}}]}}
2024-10-14 15:01:19,719 - DEBUG - Sending HTTP Request: POST https://api.openai.com/v1/chat/completions
2024-10-14 15:01:19,719 - DEBUG - connect_tcp.started host='api.openai.com' port=443 local_address=None timeout=5.0 socket_options=None
2024-10-14 15:01:19,731 - DEBUG - connect_tcp.complete return_value=<httpcore._backends.sync.SyncStream object at 0x000001D56A5E7CE0>
2024-10-14 15:01:19,731 - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x000001D56A465B50> server_hostname='api.openai.com' timeout=5.0
2024-10-14 15:01:19,737 - DEBUG - start_tls.complete return_value=<httpcore._backends.sync.SyncStream object at 0x000001D56A5E7A70>
2024-10-14 15:01:19,738 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-10-14 15:01:19,738 - DEBUG - send_request_headers.complete
2024-10-14 15:01:19,738 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-10-14 15:01:19,738 - DEBUG - send_request_body.complete
2024-10-14 15:01:19,738 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-10-14 15:01:20,676 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Mon, 14 Oct 2024 12:01:20 GMT'), (b'Content-Type', b'application/json'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'user-kzzh9hik9ryjiou4ftvhondh'), (b'openai-processing-ms', b'779'), (b'openai-version', b'2020-10-01'), (b'x-ratelimit-limit-requests', b'10000'), (b'x-ratelimit-limit-tokens', b'10000'), (b'x-ratelimit-remaining-requests', b'9999'), (b'x-ratelimit-remaining-tokens', b'9821'), (b'x-ratelimit-reset-requests', b'8.64s'), (b'x-ratelimit-reset-tokens', b'1.074s'), (b'x-request-id', b'req_7321a29598c781e65b1fc3d4c135eab4'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'CF-Cache-Status', b'DYNAMIC'), (b'Set-Cookie', b'__cf_bm=EYKhdskg55SC4U09..2ewBo5wcU_rWSOZ10cGtDtFzk-1728907280-1.0.1.1-BBQFmrbyYkf__CYvX0rzbYLq3AdWaDELBXVd1pyHW4jcrBW4pBG87zARP9b1aHwRT1klXCs6blN0OnD8umXnWA; path=/; expires=Mon, 14-Oct-24 12:31:20 GMT; domain=.api.openai.com; HttpOnly; Secure; SameSite=None'), (b'X-Content-Type-Options', b'nosniff'), (b'Set-Cookie', b'_cfuvid=KBcdjWOPsNS8_IwIqOz15yiOfBKEsQsZoowb5L1qeso-1728907280989-0.0.1.1-604800000; path=/; domain=.api.openai.com; HttpOnly; Secure; SameSite=None'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8d276a045bbcc9ed-OTP'), (b'Content-Encoding', b'gzip'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-10-14 15:01:20,677 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2024-10-14 15:01:20,677 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-10-14 15:01:20,677 - DEBUG - receive_response_body.complete
2024-10-14 15:01:20,677 - DEBUG - response_closed.started
2024-10-14 15:01:20,678 - DEBUG - response_closed.complete
2024-10-14 15:01:20,678 - DEBUG - HTTP Response: POST https://api.openai.com/v1/chat/completions "200 OK" Headers([('date', 'Mon, 14 Oct 2024 12:01:20 GMT'), ('content-type', 'application/json'), ('transfer-encoding', 'chunked'), ('connection', 'keep-alive'), ('access-control-expose-headers', 'X-Request-ID'), ('openai-organization', 'user-kzzh9hik9ryjiou4ftvhondh'), ('openai-processing-ms', '779'), ('openai-version', '2020-10-01'), ('x-ratelimit-limit-requests', '10000'), ('x-ratelimit-limit-tokens', '10000'), ('x-ratelimit-remaining-requests', '9999'), ('x-ratelimit-remaining-tokens', '9821'), ('x-ratelimit-reset-requests', '8.64s'), ('x-ratelimit-reset-tokens', '1.074s'), ('x-request-id', 'req_7321a29598c781e65b1fc3d4c135eab4'), ('strict-transport-security', 'max-age=31536000; includeSubDomains; preload'), ('cf-cache-status', 'DYNAMIC'), ('set-cookie', '__cf_bm=EYKhdskg55SC4U09..2ewBo5wcU_rWSOZ10cGtDtFzk-1728907280-1.0.1.1-BBQFmrbyYkf__CYvX0rzbYLq3AdWaDELBXVd1pyHW4jcrBW4pBG87zARP9b1aHwRT1klXCs6blN0OnD8umXnWA; path=/; expires=Mon, 14-Oct-24 12:31:20 GMT; domain=.api.openai.com; HttpOnly; Secure; SameSite=None'), ('x-content-type-options', 'nosniff'), ('set-cookie', '_cfuvid=KBcdjWOPsNS8_IwIqOz15yiOfBKEsQsZoowb5L1qeso-1728907280989-0.0.1.1-604800000; path=/; domain=.api.openai.com; HttpOnly; Secure; SameSite=None'), ('server', 'cloudflare'), ('cf-ray', '8d276a045bbcc9ed-OTP'), ('content-encoding', 'gzip'), ('alt-svc', 'h3=":443"; ma=86400')])
2024-10-14 15:01:20,678 - DEBUG - request_id: req_7321a29598c781e65b1fc3d4c135eab4
2024-10-14 15:01:20,680 - DEBUG - Instructor Raw Response: ChatCompletion(id='chatcmpl-AIE3EfATVXjDcptAfOLnJJvVVnrQ0', choices=[Choice(finish_reason='stop', index=0, logprobs=None, message=ChatCompletionMessage(content=None, refusal=None, role='assistant', function_call=None, tool_calls=[ChatCompletionMessageToolCall(id='call_ub6lqtrW9qgYLYTGsuZpDF2R', function=Function(arguments='{\n"action": "extract_pii"\n}', name='AgentAction'), type='function')]))], created=1728907280, model='gpt-4-0613', object='chat.completion', service_tier=None, system_fingerprint=None, usage=CompletionUsage(completion_tokens=10, prompt_tokens=207, total_tokens=217, completion_tokens_details=None, prompt_tokens_details=None))
2024-10-14 15:01:20,681 - DEBUG - Instructor Request: mode.value='tool_call', response_model=<class 'models.PIIData'>, new_kwargs={'model': 'gpt-4', 'messages': [{'role': 'system', 'content': '\nYou are an AI agent specializing in contract creation and personal information extraction. \n\nYour role is:\n 1. Guide the process of extracting information from documents..\n 2. Verifying the extracted information with human input.\n 3. Identifying parties. \n 4. Constructing a contract. \n\n\nFollow the workflow precisely and ask for human input when needed.\n\n'}, {'role': 'user', 'content': "Extract the name and address from the given text:\n\nROUMANIE ROMAWI ROMANIA Carte CARTE De |Dentitate IDEnTITY D'iDENTITE seria TR Na 409131 CarD cNP 1891113341181 Nume/Nom/Last name T525M ISPILANTE Prenume/Prenom/First namo SENTIMENT BRUSLI Cetatenle/Nallonallte/Nallonallly Sox SexeiSox Romn\u0103 ROU M Loc nastere/Liou do naissancelPlace ol birth Or\u0219. Videle Jud.Teleorman Dom IlulAdresse/Addrass Videle Jud: Teleorman Sos. Giurgiului nr.1 695 TR Emisa dolDelivree parlIssuad by ValabilltatelValldlte Valldlty SPCLEP Videle 04.11.11-13.11.2018 IDROUISPILANTE<<SENTIMENT <BRUSLI<<<< TR409131<0R0u8911137M181113513411813 Or\u0219:"}], 'tools': [{'type': 'function', 'function': {'name': 'PIIData', 'description': 'Correctly extracted `PIIData` with all the required parameters with correct types', 'parameters': {'properties': {'name': {'description': 'Full name of the person', 'title': 'Name', 'type': 'string'}, 'address': {'description': 'Residential address of the person', 'title': 'Address', 'type': 'string'}}, 'required': ['address', 'name'], 'type': 'object'}}}], 'tool_choice': {'type': 'function', 'function': {'name': 'PIIData'}}}
2024-10-14 15:01:20,681 - DEBUG - max_retries: 1
2024-10-14 15:01:20,682 - DEBUG - Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'json_data': {'messages': [{'role': 'system', 'content': '\nYou are an AI agent specializing in contract creation and personal information extraction. \n\nYour role is:\n 1. Guide the process of extracting information from documents..\n 2. Verifying the extracted information with human input.\n 3. Identifying parties. \n 4. Constructing a contract. \n\n\nFollow the workflow precisely and ask for human input when needed.\n\n'}, {'role': 'user', 'content': "Extract the name and address from the given text:\n\nROUMANIE ROMAWI ROMANIA Carte CARTE De |Dentitate IDEnTITY D'iDENTITE seria TR Na 409131 CarD cNP 1891113341181 Nume/Nom/Last name T525M ISPILANTE Prenume/Prenom/First namo SENTIMENT BRUSLI Cetatenle/Nallonallte/Nallonallly Sox SexeiSox Romn\u0103 ROU M Loc nastere/Liou do naissancelPlace ol birth Or\u0219. Videle Jud.Teleorman Dom IlulAdresse/Addrass Videle Jud: Teleorman Sos. Giurgiului nr.1 695 TR Emisa dolDelivree parlIssuad by ValabilltatelValldlte Valldlty SPCLEP Videle 04.11.11-13.11.2018 IDROUISPILANTE<<SENTIMENT <BRUSLI<<<< TR409131<0R0u8911137M181113513411813 Or\u0219:"}], 'model': 'gpt-4', 'tool_choice': {'type': 'function', 'function': {'name': 'PIIData'}}, 'tools': [{'type': 'function', 'function': {'name': 'PIIData', 'description': 'Correctly extracted `PIIData` with all the required parameters with correct types', 'parameters': {'properties': {'name': {'description': 'Full name of the person', 'title': 'Name', 'type': 'string'}, 'address': {'description': 'Residential address of the person', 'title': 'Address', 'type': 'string'}}, 'required': ['address', 'name'], 'type': 'object'}}}]}}
2024-10-14 15:01:20,683 - DEBUG - Sending HTTP Request: POST https://api.openai.com/v1/chat/completions
2024-10-14 15:01:20,683 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-10-14 15:01:20,683 - DEBUG - send_request_headers.complete
2024-10-14 15:01:20,683 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-10-14 15:01:20,683 - DEBUG - send_request_body.complete
2024-10-14 15:01:20,683 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-10-14 15:01:23,965 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Mon, 14 Oct 2024 12:01:24 GMT'), (b'Content-Type', b'application/json'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'user-kzzh9hik9ryjiou4ftvhondh'), (b'openai-processing-ms', b'3131'), (b'openai-version', b'2020-10-01'), (b'x-ratelimit-limit-requests', b'10000'), (b'x-ratelimit-limit-tokens', b'10000'), (b'x-ratelimit-remaining-requests', b'9998'), (b'x-ratelimit-remaining-tokens', b'9676'), (b'x-ratelimit-reset-requests', b'16.336s'), (b'x-ratelimit-reset-tokens', b'1.942s'), (b'x-request-id', b'req_87547e70ba6c484e3e8ba121bd22dc5c'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8d276a0a3f55c9ed-OTP'), (b'Content-Encoding', b'gzip'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-10-14 15:01:23,966 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2024-10-14 15:01:23,967 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-10-14 15:01:23,967 - DEBUG - receive_response_body.complete
2024-10-14 15:01:23,967 - DEBUG - response_closed.started
2024-10-14 15:01:23,967 - DEBUG - response_closed.complete
2024-10-14 15:01:23,968 - DEBUG - HTTP Response: POST https://api.openai.com/v1/chat/completions "200 OK" Headers({'date': 'Mon, 14 Oct 2024 12:01:24 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-expose-headers': 'X-Request-ID', 'openai-organization': 'user-kzzh9hik9ryjiou4ftvhondh', 'openai-processing-ms': '3131', 'openai-version': '2020-10-01', 'x-ratelimit-limit-requests': '10000', 'x-ratelimit-limit-tokens': '10000', 'x-ratelimit-remaining-requests': '9998', 'x-ratelimit-remaining-tokens': '9676', 'x-ratelimit-reset-requests': '16.336s', 'x-ratelimit-reset-tokens': '1.942s', 'x-request-id': 'req_87547e70ba6c484e3e8ba121bd22dc5c', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8d276a0a3f55c9ed-OTP', 'content-encoding': 'gzip', 'alt-svc': 'h3=":443"; ma=86400'})
2024-10-14 15:01:23,968 - DEBUG - request_id: req_87547e70ba6c484e3e8ba121bd22dc5c
2024-10-14 15:01:23,969 - DEBUG - Instructor Raw Response: ChatCompletion(id='chatcmpl-AIE3FTPeR61Yl64xWKBFccxT1wH2T', choices=[Choice(finish_reason='stop', index=0, logprobs=None, message=ChatCompletionMessage(content=None, refusal=None, role='assistant', function_call=None, tool_calls=[ChatCompletionMessageToolCall(id='call_PYJAQImzCXztrnINCbjrPCQG', function=Function(arguments='{\n"name": "ISPILANTE SENTIMENT BRUSLI",\n"address": "Videle Jud: Teleorman Sos. Giurgiului nr.1 695 TR"\n}', name='PIIData'), type='function')]))], created=1728907281, model='gpt-4-0613', object='chat.completion', service_tier=None, system_fingerprint=None, usage=CompletionUsage(completion_tokens=39, prompt_tokens=377, total_tokens=416, completion_tokens_details=None, prompt_tokens_details=None))
2024-10-14 15:01:26,547 - DEBUG - Instructor Request: mode.value='tool_call', response_model=<class 'models.PIIData'>, new_kwargs={'model': 'gpt-4', 'messages': [{'role': 'system', 'content': '\nYou are an AI agent specializing in contract creation and personal information extraction. \n\nYour role is:\n 1. Guide the process of extracting information from documents..\n 2. Verifying the extracted information with human input.\n 3. Identifying parties. \n 4. Constructing a contract. \n\n\nFollow the workflow precisely and ask for human input when needed.\n\n'}, {'role': 'user', 'content': "Extract the name and address from the given text:\n\nROUMANIE ROVIAINIA ROMANIA Carte Carte DE iDentitate IdEnTITY Didentite seala SS Nr 099994 Card CNP 2410415400542 93coQ Nume/NomiLast name VASILESCU Pronume/Prenom/Flrst name ELENA < CetatenielNatlonallte/Natlonalily M Sex SexelSer Romn\u0103 ROU Loc nastore/Licu de naissancolF 'ar0 ol birth Mun: Dej Jud. Cluj Domiciliu/Adresse A ess Mun. Bucuresti Sec. 5 Str Nicolae Iorga nr.3 900 B Emisa delDelivree parllssued by Valabilitate/Vahidile Valiouy D.EPAB.D- 06.01.17-15.04.2077 IDROUVASILESCU<<ELENA<<<<<<<<<<<<<<< SS099994<0R0u4104151F770415824003421"}], 'tools': [{'type': 'function', 'function': {'name': 'PIIData', 'description': 'Correctly extracted `PIIData` with all the required parameters with correct types', 'parameters': {'properties': {'name': {'description': 'Full name of the person', 'title': 'Name', 'type': 'string'}, 'address': {'description': 'Residential address of the person', 'title': 'Address', 'type': 'string'}}, 'required': ['address', 'name'], 'type': 'object'}}}], 'tool_choice': {'type': 'function', 'function': {'name': 'PIIData'}}}
2024-10-14 15:01:26,547 - DEBUG - max_retries: 1
2024-10-14 15:01:26,550 - DEBUG - Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'json_data': {'messages': [{'role': 'system', 'content': '\nYou are an AI agent specializing in contract creation and personal information extraction. \n\nYour role is:\n 1. Guide the process of extracting information from documents..\n 2. Verifying the extracted information with human input.\n 3. Identifying parties. \n 4. Constructing a contract. \n\n\nFollow the workflow precisely and ask for human input when needed.\n\n'}, {'role': 'user', 'content': "Extract the name and address from the given text:\n\nROUMANIE ROVIAINIA ROMANIA Carte Carte DE iDentitate IdEnTITY Didentite seala SS Nr 099994 Card CNP 2410415400542 93coQ Nume/NomiLast name VASILESCU Pronume/Prenom/Flrst name ELENA < CetatenielNatlonallte/Natlonalily M Sex SexelSer Romn\u0103 ROU Loc nastore/Licu de naissancolF 'ar0 ol birth Mun: Dej Jud. Cluj Domiciliu/Adresse A ess Mun. Bucuresti Sec. 5 Str Nicolae Iorga nr.3 900 B Emisa delDelivree parllssued by Valabilitate/Vahidile Valiouy D.EPAB.D- 06.01.17-15.04.2077 IDROUVASILESCU<<ELENA<<<<<<<<<<<<<<< SS099994<0R0u4104151F770415824003421"}], 'model': 'gpt-4', 'tool_choice': {'type': 'function', 'function': {'name': 'PIIData'}}, 'tools': [{'type': 'function', 'function': {'name': 'PIIData', 'description': 'Correctly extracted `PIIData` with all the required parameters with correct types', 'parameters': {'properties': {'name': {'description': 'Full name of the person', 'title': 'Name', 'type': 'string'}, 'address': {'description': 'Residential address of the person', 'title': 'Address', 'type': 'string'}}, 'required': ['address', 'name'], 'type': 'object'}}}]}}
2024-10-14 15:01:26,551 - DEBUG - Sending HTTP Request: POST https://api.openai.com/v1/chat/completions
2024-10-14 15:01:26,551 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-10-14 15:01:26,551 - DEBUG - send_request_headers.complete
2024-10-14 15:01:26,552 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-10-14 15:01:26,552 - DEBUG - send_request_body.complete
2024-10-14 15:01:26,552 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-10-14 15:01:28,743 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Mon, 14 Oct 2024 12:01:29 GMT'), (b'Content-Type', b'application/json'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'user-kzzh9hik9ryjiou4ftvhondh'), (b'openai-processing-ms', b'2039'), (b'openai-version', b'2020-10-01'), (b'x-ratelimit-limit-requests', b'10000'), (b'x-ratelimit-limit-tokens', b'10000'), (b'x-ratelimit-remaining-requests', b'9997'), (b'x-ratelimit-remaining-tokens', b'9742'), (b'x-ratelimit-reset-requests', b'19.102s'), (b'x-ratelimit-reset-tokens', b'1.548s'), (b'x-request-id', b'req_ab8aba45250f6893f81feb66511e2357'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8d276a2ef87ec9ed-OTP'), (b'Content-Encoding', b'gzip'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-10-14 15:01:28,744 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2024-10-14 15:01:28,744 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-10-14 15:01:28,744 - DEBUG - receive_response_body.complete
2024-10-14 15:01:28,744 - DEBUG - response_closed.started
2024-10-14 15:01:28,744 - DEBUG - response_closed.complete
2024-10-14 15:01:28,744 - DEBUG - HTTP Response: POST https://api.openai.com/v1/chat/completions "200 OK" Headers({'date': 'Mon, 14 Oct 2024 12:01:29 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-expose-headers': 'X-Request-ID', 'openai-organization': 'user-kzzh9hik9ryjiou4ftvhondh', 'openai-processing-ms': '2039', 'openai-version': '2020-10-01', 'x-ratelimit-limit-requests': '10000', 'x-ratelimit-limit-tokens': '10000', 'x-ratelimit-remaining-requests': '9997', 'x-ratelimit-remaining-tokens': '9742', 'x-ratelimit-reset-requests': '19.102s', 'x-ratelimit-reset-tokens': '1.548s', 'x-request-id': 'req_ab8aba45250f6893f81feb66511e2357', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8d276a2ef87ec9ed-OTP', 'content-encoding': 'gzip', 'alt-svc': 'h3=":443"; ma=86400'})
2024-10-14 15:01:28,744 - DEBUG - request_id: req_ab8aba45250f6893f81feb66511e2357
2024-10-14 15:01:28,744 - DEBUG - Instructor Raw Response: ChatCompletion(id='chatcmpl-AIE3L0sMA4rdWoVAkfiYCNlvFjcbt', choices=[Choice(finish_reason='stop', index=0, logprobs=None, message=ChatCompletionMessage(content=None, refusal=None, role='assistant', function_call=None, tool_calls=[ChatCompletionMessageToolCall(id='call_22QgfAjDc995b1DTVYIWE2DY', function=Function(arguments='{\n"name": "VASILESCU ELENA",\n"address": "Mun. Bucuresti Sec. 5 Str Nicolae Iorga nr.3"\n}', name='PIIData'), type='function')]))], created=1728907287, model='gpt-4-0613', object='chat.completion', service_tier=None, system_fingerprint=None, usage=CompletionUsage(completion_tokens=38, prompt_tokens=380, total_tokens=418, completion_tokens_details=None, prompt_tokens_details=None))
2024-10-14 15:01:33,182 - DEBUG - Instructor Request: mode.value='tool_call', response_model=<class 'models.AgentAction'>, new_kwargs={'model': 'gpt-4', 'messages': [{'role': 'system', 'content': '\nYou are an AI agent specializing in contract creation and personal information extraction. \n\nYour role is:\n 1. Guide the process of extracting information from documents..\n 2. Verifying the extracted information with human input.\n 3. Identifying parties. \n 4. Constructing a contract. \n\n\nFollow the workflow precisely and ask for human input when needed.\n\n'}, {'role': 'user', 'content': '\n    Current state:\n    - Verified PII data: 2 entries\n    - Parties identified: No\n    - Contract type determined: No\n    - Contract constructed: No\n    \nWhat action should be taken next? Choose from: extract_pii, identify_parties, determine_contract_type, construct_contract, finish'}], 'tools': [{'type': 'function', 'function': {'name': 'AgentAction', 'description': 'Correctly extracted `AgentAction` with all the required parameters with correct types', 'parameters': {'properties': {'action': {'description': 'Action to be performed by the agent', 'title': 'Action', 'type': 'string'}, 'parameters': {'additionalProperties': {'type': 'string'}, 'description': 'Parameters for the action', 'title': 'Parameters', 'type': 'object'}}, 'required': ['action', 'parameters'], 'type': 'object'}}}], 'tool_choice': {'type': 'function', 'function': {'name': 'AgentAction'}}}
2024-10-14 15:01:33,183 - DEBUG - max_retries: 1
2024-10-14 15:01:33,185 - DEBUG - Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'json_data': {'messages': [{'role': 'system', 'content': '\nYou are an AI agent specializing in contract creation and personal information extraction. \n\nYour role is:\n 1. Guide the process of extracting information from documents..\n 2. Verifying the extracted information with human input.\n 3. Identifying parties. \n 4. Constructing a contract. \n\n\nFollow the workflow precisely and ask for human input when needed.\n\n'}, {'role': 'user', 'content': '\n    Current state:\n    - Verified PII data: 2 entries\n    - Parties identified: No\n    - Contract type determined: No\n    - Contract constructed: No\n    \nWhat action should be taken next? Choose from: extract_pii, identify_parties, determine_contract_type, construct_contract, finish'}], 'model': 'gpt-4', 'tool_choice': {'type': 'function', 'function': {'name': 'AgentAction'}}, 'tools': [{'type': 'function', 'function': {'name': 'AgentAction', 'description': 'Correctly extracted `AgentAction` with all the required parameters with correct types', 'parameters': {'properties': {'action': {'description': 'Action to be performed by the agent', 'title': 'Action', 'type': 'string'}, 'parameters': {'additionalProperties': {'type': 'string'}, 'description': 'Parameters for the action', 'title': 'Parameters', 'type': 'object'}}, 'required': ['action', 'parameters'], 'type': 'object'}}}]}}
2024-10-14 15:01:33,185 - DEBUG - Sending HTTP Request: POST https://api.openai.com/v1/chat/completions
2024-10-14 15:01:33,185 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-10-14 15:01:33,186 - DEBUG - send_request_headers.complete
2024-10-14 15:01:33,186 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-10-14 15:01:33,186 - DEBUG - send_request_body.complete
2024-10-14 15:01:33,186 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-10-14 15:01:34,004 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Mon, 14 Oct 2024 12:01:34 GMT'), (b'Content-Type', b'application/json'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'user-kzzh9hik9ryjiou4ftvhondh'), (b'openai-processing-ms', b'665'), (b'openai-version', b'2020-10-01'), (b'x-ratelimit-limit-requests', b'10000'), (b'x-ratelimit-limit-tokens', b'10000'), (b'x-ratelimit-remaining-requests', b'9997'), (b'x-ratelimit-remaining-tokens', b'9821'), (b'x-ratelimit-reset-requests', b'21.11s'), (b'x-ratelimit-reset-tokens', b'1.074s'), (b'x-request-id', b'req_5ff77b095760cff0f654df758665e30c'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8d276a586d5cc9ed-OTP'), (b'Content-Encoding', b'gzip'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-10-14 15:01:34,005 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2024-10-14 15:01:34,006 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-10-14 15:01:34,006 - DEBUG - receive_response_body.complete
2024-10-14 15:01:34,007 - DEBUG - response_closed.started
2024-10-14 15:01:34,007 - DEBUG - response_closed.complete
2024-10-14 15:01:34,007 - DEBUG - HTTP Response: POST https://api.openai.com/v1/chat/completions "200 OK" Headers({'date': 'Mon, 14 Oct 2024 12:01:34 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-expose-headers': 'X-Request-ID', 'openai-organization': 'user-kzzh9hik9ryjiou4ftvhondh', 'openai-processing-ms': '665', 'openai-version': '2020-10-01', 'x-ratelimit-limit-requests': '10000', 'x-ratelimit-limit-tokens': '10000', 'x-ratelimit-remaining-requests': '9997', 'x-ratelimit-remaining-tokens': '9821', 'x-ratelimit-reset-requests': '21.11s', 'x-ratelimit-reset-tokens': '1.074s', 'x-request-id': 'req_5ff77b095760cff0f654df758665e30c', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8d276a586d5cc9ed-OTP', 'content-encoding': 'gzip', 'alt-svc': 'h3=":443"; ma=86400'})
2024-10-14 15:01:34,007 - DEBUG - request_id: req_5ff77b095760cff0f654df758665e30c
2024-10-14 15:01:34,008 - DEBUG - Instructor Raw Response: ChatCompletion(id='chatcmpl-AIE3RZADzu8ycJyzlUNG46n5bEwgS', choices=[Choice(finish_reason='stop', index=0, logprobs=None, message=ChatCompletionMessage(content=None, refusal=None, role='assistant', function_call=None, tool_calls=[ChatCompletionMessageToolCall(id='call_WUELmfJ3k3sKuOFzMqxTDa2t', function=Function(arguments='\n{\n"action": "identify_parties"\n}', name='AgentAction'), type='function')]))], created=1728907293, model='gpt-4-0613', object='chat.completion', service_tier=None, system_fingerprint=None, usage=CompletionUsage(completion_tokens=11, prompt_tokens=207, total_tokens=218, completion_tokens_details=None, prompt_tokens_details=None))
2024-10-14 15:01:34,009 - DEBUG - Instructor Request: mode.value='tool_call', response_model=<class 'models.ContractParties'>, new_kwargs={'model': 'gpt-4', 'messages': [{'role': 'system', 'content': '\nYou are an AI agent specializing in contract creation and personal information extraction. \n\nYour role is:\n 1. Guide the process of extracting information from documents..\n 2. Verifying the extracted information with human input.\n 3. Identifying parties. \n 4. Constructing a contract. \n\n\nFollow the workflow precisely and ask for human input when needed.\n\n'}, {'role': 'user', 'content': 'Identify the buyer and seller from the given information:\n\nName: ISPILANTE SENTIMENT BRUSLI, Address: Videle Jud: Teleorman Sos. Giurgiului nr.1 695 TR\nName: VASILESCU ELENA, Address: Mun. Bucuresti Sec. 5 Str Nicolae Iorga nr.3'}], 'tools': [{'type': 'function', 'function': {'name': 'ContractParties', 'description': 'Correctly extracted `ContractParties` with all the required parameters with correct types', 'parameters': {'properties': {'buyer': {'description': 'Name of the buyer', 'title': 'Buyer', 'type': 'string'}, 'seller': {'description': 'Name of the seller', 'title': 'Seller', 'type': 'string'}}, 'required': ['buyer', 'seller'], 'type': 'object'}}}], 'tool_choice': {'type': 'function', 'function': {'name': 'ContractParties'}}}
2024-10-14 15:01:34,009 - DEBUG - max_retries: 1
2024-10-14 15:01:34,012 - DEBUG - Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'json_data': {'messages': [{'role': 'system', 'content': '\nYou are an AI agent specializing in contract creation and personal information extraction. \n\nYour role is:\n 1. Guide the process of extracting information from documents..\n 2. Verifying the extracted information with human input.\n 3. Identifying parties. \n 4. Constructing a contract. \n\n\nFollow the workflow precisely and ask for human input when needed.\n\n'}, {'role': 'user', 'content': 'Identify the buyer and seller from the given information:\n\nName: ISPILANTE SENTIMENT BRUSLI, Address: Videle Jud: Teleorman Sos. Giurgiului nr.1 695 TR\nName: VASILESCU ELENA, Address: Mun. Bucuresti Sec. 5 Str Nicolae Iorga nr.3'}], 'model': 'gpt-4', 'tool_choice': {'type': 'function', 'function': {'name': 'ContractParties'}}, 'tools': [{'type': 'function', 'function': {'name': 'ContractParties', 'description': 'Correctly extracted `ContractParties` with all the required parameters with correct types', 'parameters': {'properties': {'buyer': {'description': 'Name of the buyer', 'title': 'Buyer', 'type': 'string'}, 'seller': {'description': 'Name of the seller', 'title': 'Seller', 'type': 'string'}}, 'required': ['buyer', 'seller'], 'type': 'object'}}}]}}
2024-10-14 15:01:34,012 - DEBUG - Sending HTTP Request: POST https://api.openai.com/v1/chat/completions
2024-10-14 15:01:34,012 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-10-14 15:01:34,013 - DEBUG - send_request_headers.complete
2024-10-14 15:01:34,013 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-10-14 15:01:34,013 - DEBUG - send_request_body.complete
2024-10-14 15:01:34,013 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-10-14 15:01:35,906 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Mon, 14 Oct 2024 12:01:36 GMT'), (b'Content-Type', b'application/json'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'user-kzzh9hik9ryjiou4ftvhondh'), (b'openai-processing-ms', b'1738'), (b'openai-version', b'2020-10-01'), (b'x-ratelimit-limit-requests', b'10000'), (b'x-ratelimit-limit-tokens', b'10000'), (b'x-ratelimit-remaining-requests', b'9996'), (b'x-ratelimit-remaining-tokens', b'9754'), (b'x-ratelimit-reset-requests', b'28.926s'), (b'x-ratelimit-reset-tokens', b'1.473s'), (b'x-request-id', b'req_a7c3c7eaa651e26baed039ef99d03e71'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8d276a5d9d15c9ed-OTP'), (b'Content-Encoding', b'gzip'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-10-14 15:01:35,906 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2024-10-14 15:01:35,906 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-10-14 15:01:35,906 - DEBUG - receive_response_body.complete
2024-10-14 15:01:35,906 - DEBUG - response_closed.started
2024-10-14 15:01:35,906 - DEBUG - response_closed.complete
2024-10-14 15:01:35,906 - DEBUG - HTTP Response: POST https://api.openai.com/v1/chat/completions "200 OK" Headers({'date': 'Mon, 14 Oct 2024 12:01:36 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-expose-headers': 'X-Request-ID', 'openai-organization': 'user-kzzh9hik9ryjiou4ftvhondh', 'openai-processing-ms': '1738', 'openai-version': '2020-10-01', 'x-ratelimit-limit-requests': '10000', 'x-ratelimit-limit-tokens': '10000', 'x-ratelimit-remaining-requests': '9996', 'x-ratelimit-remaining-tokens': '9754', 'x-ratelimit-reset-requests': '28.926s', 'x-ratelimit-reset-tokens': '1.473s', 'x-request-id': 'req_a7c3c7eaa651e26baed039ef99d03e71', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8d276a5d9d15c9ed-OTP', 'content-encoding': 'gzip', 'alt-svc': 'h3=":443"; ma=86400'})
2024-10-14 15:01:35,906 - DEBUG - request_id: req_a7c3c7eaa651e26baed039ef99d03e71
2024-10-14 15:01:35,906 - DEBUG - Instructor Raw Response: ChatCompletion(id='chatcmpl-AIE3SyTG7I8zbncuYzELKTXD4HxV5', choices=[Choice(finish_reason='stop', index=0, logprobs=None, message=ChatCompletionMessage(content=None, refusal=None, role='assistant', function_call=None, tool_calls=[ChatCompletionMessageToolCall(id='call_jPlDDHA91TtDQtxQGnKyxtwe', function=Function(arguments='{\n"buyer": "ISPILANTE SENTIMENT BRUSLI",\n"seller": "VASILESCU ELENA"\n}', name='ContractParties'), type='function')]))], created=1728907294, model='gpt-4-0613', object='chat.completion', service_tier=None, system_fingerprint=None, usage=CompletionUsage(completion_tokens=27, prompt_tokens=229, total_tokens=256, completion_tokens_details=None, prompt_tokens_details=None))
2024-10-14 15:01:35,908 - DEBUG - Instructor Request: mode.value='tool_call', response_model=<class 'models.AgentAction'>, new_kwargs={'model': 'gpt-4', 'messages': [{'role': 'system', 'content': '\nYou are an AI agent specializing in contract creation and personal information extraction. \n\nYour role is:\n 1. Guide the process of extracting information from documents..\n 2. Verifying the extracted information with human input.\n 3. Identifying parties. \n 4. Constructing a contract. \n\n\nFollow the workflow precisely and ask for human input when needed.\n\n'}, {'role': 'user', 'content': '\n    Current state:\n    - Verified PII data: 2 entries\n    - Parties identified: Yes\n    - Contract type determined: No\n    - Contract constructed: No\n    \nWhat action should be taken next? Choose from: extract_pii, identify_parties, determine_contract_type, construct_contract, finish'}], 'tools': [{'type': 'function', 'function': {'name': 'AgentAction', 'description': 'Correctly extracted `AgentAction` with all the required parameters with correct types', 'parameters': {'properties': {'action': {'description': 'Action to be performed by the agent', 'title': 'Action', 'type': 'string'}, 'parameters': {'additionalProperties': {'type': 'string'}, 'description': 'Parameters for the action', 'title': 'Parameters', 'type': 'object'}}, 'required': ['action', 'parameters'], 'type': 'object'}}}], 'tool_choice': {'type': 'function', 'function': {'name': 'AgentAction'}}}
2024-10-14 15:01:35,908 - DEBUG - max_retries: 1
2024-10-14 15:01:35,909 - DEBUG - Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'json_data': {'messages': [{'role': 'system', 'content': '\nYou are an AI agent specializing in contract creation and personal information extraction. \n\nYour role is:\n 1. Guide the process of extracting information from documents..\n 2. Verifying the extracted information with human input.\n 3. Identifying parties. \n 4. Constructing a contract. \n\n\nFollow the workflow precisely and ask for human input when needed.\n\n'}, {'role': 'user', 'content': '\n    Current state:\n    - Verified PII data: 2 entries\n    - Parties identified: Yes\n    - Contract type determined: No\n    - Contract constructed: No\n    \nWhat action should be taken next? Choose from: extract_pii, identify_parties, determine_contract_type, construct_contract, finish'}], 'model': 'gpt-4', 'tool_choice': {'type': 'function', 'function': {'name': 'AgentAction'}}, 'tools': [{'type': 'function', 'function': {'name': 'AgentAction', 'description': 'Correctly extracted `AgentAction` with all the required parameters with correct types', 'parameters': {'properties': {'action': {'description': 'Action to be performed by the agent', 'title': 'Action', 'type': 'string'}, 'parameters': {'additionalProperties': {'type': 'string'}, 'description': 'Parameters for the action', 'title': 'Parameters', 'type': 'object'}}, 'required': ['action', 'parameters'], 'type': 'object'}}}]}}
2024-10-14 15:01:35,910 - DEBUG - Sending HTTP Request: POST https://api.openai.com/v1/chat/completions
2024-10-14 15:01:35,910 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-10-14 15:01:35,910 - DEBUG - send_request_headers.complete
2024-10-14 15:01:35,910 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-10-14 15:01:35,910 - DEBUG - send_request_body.complete
2024-10-14 15:01:35,910 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-10-14 15:01:36,840 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Mon, 14 Oct 2024 12:01:37 GMT'), (b'Content-Type', b'application/json'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'user-kzzh9hik9ryjiou4ftvhondh'), (b'openai-processing-ms', b'773'), (b'openai-version', b'2020-10-01'), (b'x-ratelimit-limit-requests', b'10000'), (b'x-ratelimit-limit-tokens', b'10000'), (b'x-ratelimit-remaining-requests', b'9995'), (b'x-ratelimit-remaining-tokens', b'9754'), (b'x-ratelimit-reset-requests', b'35.669s'), (b'x-ratelimit-reset-tokens', b'1.473s'), (b'x-request-id', b'req_975e827cb3c6c338e577fc070ce29fbb'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8d276a696c25c9ed-OTP'), (b'Content-Encoding', b'gzip'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-10-14 15:01:36,840 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2024-10-14 15:01:36,840 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-10-14 15:01:36,840 - DEBUG - receive_response_body.complete
2024-10-14 15:01:36,840 - DEBUG - response_closed.started
2024-10-14 15:01:36,840 - DEBUG - response_closed.complete
2024-10-14 15:01:36,840 - DEBUG - HTTP Response: POST https://api.openai.com/v1/chat/completions "200 OK" Headers({'date': 'Mon, 14 Oct 2024 12:01:37 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-expose-headers': 'X-Request-ID', 'openai-organization': 'user-kzzh9hik9ryjiou4ftvhondh', 'openai-processing-ms': '773', 'openai-version': '2020-10-01', 'x-ratelimit-limit-requests': '10000', 'x-ratelimit-limit-tokens': '10000', 'x-ratelimit-remaining-requests': '9995', 'x-ratelimit-remaining-tokens': '9754', 'x-ratelimit-reset-requests': '35.669s', 'x-ratelimit-reset-tokens': '1.473s', 'x-request-id': 'req_975e827cb3c6c338e577fc070ce29fbb', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8d276a696c25c9ed-OTP', 'content-encoding': 'gzip', 'alt-svc': 'h3=":443"; ma=86400'})
2024-10-14 15:01:36,840 - DEBUG - request_id: req_975e827cb3c6c338e577fc070ce29fbb
2024-10-14 15:01:36,841 - DEBUG - Instructor Raw Response: ChatCompletion(id='chatcmpl-AIE3UewmrfxjYg1iMFOwdfCtbpRl9', choices=[Choice(finish_reason='stop', index=0, logprobs=None, message=ChatCompletionMessage(content=None, refusal=None, role='assistant', function_call=None, tool_calls=[ChatCompletionMessageToolCall(id='call_9jkohtaajErUAF33NcJnE3lJ', function=Function(arguments='\n{\n  "action": "determine_contract_type"\n}', name='AgentAction'), type='function')]))], created=1728907296, model='gpt-4-0613', object='chat.completion', service_tier=None, system_fingerprint=None, usage=CompletionUsage(completion_tokens=13, prompt_tokens=207, total_tokens=220, completion_tokens_details=None, prompt_tokens_details=None))
2024-10-14 15:01:39,460 - DEBUG - Instructor Request: mode.value='tool_call', response_model=<class 'models.ContractDetails'>, new_kwargs={'model': 'gpt-4', 'messages': [{'role': 'system', 'content': '\nYou are an AI agent specializing in contract creation and personal information extraction. \n\nYour role is:\n 1. Guide the process of extracting information from documents..\n 2. Verifying the extracted information with human input.\n 3. Identifying parties. \n 4. Constructing a contract. \n\n\nFollow the workflow precisely and ask for human input when needed.\n\n'}, {'role': 'user', 'content': "Determine the contract details for a airbnb contract between ISPILANTE SENTIMENT BRUSLI and VASILESCU ELENA. Who is the host (property owner) and who is the guest? Please provide the roles in a JSON format with keys 'host' and 'guest' for Airbnb, 'seller' and 'buyer' for buy-sell, or 'consultant' and 'client' for IT consulting."}], 'tools': [{'type': 'function', 'function': {'name': 'ContractDetails', 'description': 'Correctly extracted `ContractDetails` with all the required parameters with correct types', 'parameters': {'properties': {'contract_type': {'description': 'Type of contract (e.g., airbnb, buy-sell, it-consulting)', 'title': 'Contract Type', 'type': 'string'}, 'additional_info': {'additionalProperties': {'type': 'string'}, 'description': 'Additional information specific to the contract type', 'title': 'Additional Info', 'type': 'object'}}, 'required': ['additional_info', 'contract_type'], 'type': 'object'}}}], 'tool_choice': {'type': 'function', 'function': {'name': 'ContractDetails'}}}
2024-10-14 15:01:39,461 - DEBUG - max_retries: 1
2024-10-14 15:01:39,463 - DEBUG - Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'json_data': {'messages': [{'role': 'system', 'content': '\nYou are an AI agent specializing in contract creation and personal information extraction. \n\nYour role is:\n 1. Guide the process of extracting information from documents..\n 2. Verifying the extracted information with human input.\n 3. Identifying parties. \n 4. Constructing a contract. \n\n\nFollow the workflow precisely and ask for human input when needed.\n\n'}, {'role': 'user', 'content': "Determine the contract details for a airbnb contract between ISPILANTE SENTIMENT BRUSLI and VASILESCU ELENA. Who is the host (property owner) and who is the guest? Please provide the roles in a JSON format with keys 'host' and 'guest' for Airbnb, 'seller' and 'buyer' for buy-sell, or 'consultant' and 'client' for IT consulting."}], 'model': 'gpt-4', 'tool_choice': {'type': 'function', 'function': {'name': 'ContractDetails'}}, 'tools': [{'type': 'function', 'function': {'name': 'ContractDetails', 'description': 'Correctly extracted `ContractDetails` with all the required parameters with correct types', 'parameters': {'properties': {'contract_type': {'description': 'Type of contract (e.g., airbnb, buy-sell, it-consulting)', 'title': 'Contract Type', 'type': 'string'}, 'additional_info': {'additionalProperties': {'type': 'string'}, 'description': 'Additional information specific to the contract type', 'title': 'Additional Info', 'type': 'object'}}, 'required': ['additional_info', 'contract_type'], 'type': 'object'}}}]}}
2024-10-14 15:01:39,463 - DEBUG - Sending HTTP Request: POST https://api.openai.com/v1/chat/completions
2024-10-14 15:01:39,463 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-10-14 15:01:39,464 - DEBUG - send_request_headers.complete
2024-10-14 15:01:39,464 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-10-14 15:01:39,464 - DEBUG - send_request_body.complete
2024-10-14 15:01:39,464 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-10-14 15:01:40,327 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Mon, 14 Oct 2024 12:01:40 GMT'), (b'Content-Type', b'application/json'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'user-kzzh9hik9ryjiou4ftvhondh'), (b'openai-processing-ms', b'707'), (b'openai-version', b'2020-10-01'), (b'x-ratelimit-limit-requests', b'10000'), (b'x-ratelimit-limit-tokens', b'10000'), (b'x-ratelimit-remaining-requests', b'9995'), (b'x-ratelimit-remaining-tokens', b'9810'), (b'x-ratelimit-reset-requests', b'40.746s'), (b'x-ratelimit-reset-tokens', b'1.14s'), (b'x-request-id', b'req_3173e2583e3358bff837b00bb80950ca'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8d276a7fadc3c9ed-OTP'), (b'Content-Encoding', b'gzip'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-10-14 15:01:40,328 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2024-10-14 15:01:40,328 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-10-14 15:01:40,328 - DEBUG - receive_response_body.complete
2024-10-14 15:01:40,328 - DEBUG - response_closed.started
2024-10-14 15:01:40,328 - DEBUG - response_closed.complete
2024-10-14 15:01:40,328 - DEBUG - HTTP Response: POST https://api.openai.com/v1/chat/completions "200 OK" Headers({'date': 'Mon, 14 Oct 2024 12:01:40 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-expose-headers': 'X-Request-ID', 'openai-organization': 'user-kzzh9hik9ryjiou4ftvhondh', 'openai-processing-ms': '707', 'openai-version': '2020-10-01', 'x-ratelimit-limit-requests': '10000', 'x-ratelimit-limit-tokens': '10000', 'x-ratelimit-remaining-requests': '9995', 'x-ratelimit-remaining-tokens': '9810', 'x-ratelimit-reset-requests': '40.746s', 'x-ratelimit-reset-tokens': '1.14s', 'x-request-id': 'req_3173e2583e3358bff837b00bb80950ca', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8d276a7fadc3c9ed-OTP', 'content-encoding': 'gzip', 'alt-svc': 'h3=":443"; ma=86400'})
2024-10-14 15:01:40,328 - DEBUG - request_id: req_3173e2583e3358bff837b00bb80950ca
2024-10-14 15:01:40,328 - DEBUG - Instructor Raw Response: ChatCompletion(id='chatcmpl-AIE3YhTmy0kZKhuzHgX0mXuuWjGwv', choices=[Choice(finish_reason='stop', index=0, logprobs=None, message=ChatCompletionMessage(content=None, refusal=None, role='assistant', function_call=None, tool_calls=[ChatCompletionMessageToolCall(id='call_c6ruOAcJ2htz0sT8evaGz7bZ', function=Function(arguments='{\n  "contract_type": "airbnb"\n}', name='ContractDetails'), type='function')]))], created=1728907300, model='gpt-4-0613', object='chat.completion', service_tier=None, system_fingerprint=None, usage=CompletionUsage(completion_tokens=11, prompt_tokens=243, total_tokens=254, completion_tokens_details=None, prompt_tokens_details=None))
2024-10-14 15:05:21,990 - DEBUG - close.started
2024-10-14 15:05:21,990 - DEBUG - close.complete
2024-10-14 15:05:21,991 - ERROR - Task exception was never retrieved
future: <Task finished name='Task-1' coro=<agent_workflow() done, defined at D:\deve\contract_automation\src\main.py:25> exception=KeyboardInterrupt()>
Traceback (most recent call last):
  File "D:\deve\contract_automation\src\main.py", line 105, in <module>
    asyncio.run(agent_workflow())
  File "D:\deve\contract_automation\.venv\Lib\site-packages\nest_asyncio.py", line 30, in run
    return loop.run_until_complete(task)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\deve\contract_automation\.venv\Lib\site-packages\nest_asyncio.py", line 92, in run_until_complete
    self._run_once()
  File "D:\deve\contract_automation\.venv\Lib\site-packages\nest_asyncio.py", line 133, in _run_once
    handle._run()
  File "C:\Users\neuro\.rye\py\cpython@3.12.0\Lib\asyncio\events.py", line 84, in _run
    self._context.run(self._callback, *self._args)
  File "C:\Users\neuro\.rye\py\cpython@3.12.0\Lib\asyncio\tasks.py", line 386, in __wakeup
    self.__step()
  File "C:\Users\neuro\.rye\py\cpython@3.12.0\Lib\asyncio\tasks.py", line 293, in __step
    self.__step_run_and_handle_result(exc)
  File "C:\Users\neuro\.rye\py\cpython@3.12.0\Lib\asyncio\tasks.py", line 304, in __step_run_and_handle_result
    result = coro.send(None)
             ^^^^^^^^^^^^^^^
  File "D:\deve\contract_automation\src\main.py", line 66, in agent_workflow
    confirmation = input("Is this role assignment correct? (yes/no): ").lower()
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
KeyboardInterrupt
2024-10-14 19:33:44,925 - WARNING - Neither CUDA nor MPS are available - defaulting to CPU. Note: This module is much faster with a GPU.
2024-10-14 19:33:46,200 - DEBUG - load_ssl_context verify=True cert=None trust_env=True http2=False
2024-10-14 19:33:46,201 - DEBUG - load_verify_locations cafile='D:\\deve\\contract_automation\\.venv\\Lib\\site-packages\\certifi\\cacert.pem'
2024-10-14 19:33:46,528 - DEBUG - Patching `client.chat.completions.create` with mode=<Mode.TOOLS: 'tool_call'>
2024-10-14 19:33:46,529 - DEBUG - Using proactor: IocpProactor
2024-10-14 19:33:46,555 - DEBUG - STREAM b'IHDR' 16 13
2024-10-14 19:33:46,555 - DEBUG - STREAM b'iCCP' 41 3152
2024-10-14 19:33:46,555 - DEBUG - iCCP profile name b'ICC Profile'
2024-10-14 19:33:46,555 - DEBUG - Compression method 0
2024-10-14 19:33:46,555 - DEBUG - STREAM b'eXIf' 3205 138
2024-10-14 19:33:46,555 - DEBUG - STREAM b'pHYs' 3355 9
2024-10-14 19:33:46,555 - DEBUG - STREAM b'iTXt' 3376 470
2024-10-14 19:33:46,555 - DEBUG - STREAM b'iDOT' 3858 28
2024-10-14 19:33:46,555 - DEBUG - b'iDOT' 3858 28 (unknown)
2024-10-14 19:33:46,555 - DEBUG - STREAM b'IDAT' 3898 16384
2024-10-14 19:33:46,555 - DEBUG - STREAM b'IHDR' 16 13
2024-10-14 19:33:46,555 - DEBUG - STREAM b'iCCP' 41 3152
2024-10-14 19:33:46,555 - DEBUG - iCCP profile name b'ICC Profile'
2024-10-14 19:33:46,555 - DEBUG - Compression method 0
2024-10-14 19:33:46,555 - DEBUG - STREAM b'eXIf' 3205 138
2024-10-14 19:33:46,555 - DEBUG - STREAM b'pHYs' 3355 9
2024-10-14 19:33:46,555 - DEBUG - STREAM b'iTXt' 3376 470
2024-10-14 19:33:46,555 - DEBUG - STREAM b'iDOT' 3858 28
2024-10-14 19:33:46,555 - DEBUG - b'iDOT' 3858 28 (unknown)
2024-10-14 19:33:46,555 - DEBUG - STREAM b'IDAT' 3898 16384
2024-10-14 19:33:46,565 - DEBUG - tag: XResolution (282) - type: rational (5) Tag Location: 22 - Data Location: 62 - value: b'\x00\x00\x00\x90\x00\x00\x00\x01'
2024-10-14 19:33:46,565 - DEBUG - tag: YResolution (283) - type: rational (5) Tag Location: 34 - Data Location: 70 - value: b'\x00\x00\x00\x90\x00\x00\x00\x01'
2024-10-14 19:33:46,565 - DEBUG - tag: ResolutionUnit (296) - type: short (3) - value: b'\x00\x02'
2024-10-14 19:33:46,565 - DEBUG - tag: ExifIFD (34665) - type: long (4) - value: b'\x00\x00\x00N'
2024-10-14 19:33:46,565 - DEBUG - Error closing: Operation on closed image
2024-10-14 19:33:48,511 - DEBUG - STREAM b'IHDR' 16 13
2024-10-14 19:33:48,511 - DEBUG - STREAM b'iCCP' 41 3152
2024-10-14 19:33:48,511 - DEBUG - iCCP profile name b'ICC Profile'
2024-10-14 19:33:48,511 - DEBUG - Compression method 0
2024-10-14 19:33:48,511 - DEBUG - STREAM b'eXIf' 3205 138
2024-10-14 19:33:48,511 - DEBUG - STREAM b'pHYs' 3355 9
2024-10-14 19:33:48,512 - DEBUG - STREAM b'iTXt' 3376 471
2024-10-14 19:33:48,512 - DEBUG - STREAM b'iDOT' 3859 28
2024-10-14 19:33:48,512 - DEBUG - b'iDOT' 3859 28 (unknown)
2024-10-14 19:33:48,512 - DEBUG - STREAM b'IDAT' 3899 16384
2024-10-14 19:33:48,512 - DEBUG - STREAM b'IHDR' 16 13
2024-10-14 19:33:48,512 - DEBUG - STREAM b'iCCP' 41 3152
2024-10-14 19:33:48,512 - DEBUG - iCCP profile name b'ICC Profile'
2024-10-14 19:33:48,512 - DEBUG - Compression method 0
2024-10-14 19:33:48,512 - DEBUG - STREAM b'eXIf' 3205 138
2024-10-14 19:33:48,512 - DEBUG - STREAM b'pHYs' 3355 9
2024-10-14 19:33:48,512 - DEBUG - STREAM b'iTXt' 3376 471
2024-10-14 19:33:48,512 - DEBUG - STREAM b'iDOT' 3859 28
2024-10-14 19:33:48,512 - DEBUG - b'iDOT' 3859 28 (unknown)
2024-10-14 19:33:48,512 - DEBUG - STREAM b'IDAT' 3899 16384
2024-10-14 19:33:48,529 - DEBUG - tag: XResolution (282) - type: rational (5) Tag Location: 22 - Data Location: 62 - value: b'\x00\x00\x00\x90\x00\x00\x00\x01'
2024-10-14 19:33:48,529 - DEBUG - tag: YResolution (283) - type: rational (5) Tag Location: 34 - Data Location: 70 - value: b'\x00\x00\x00\x90\x00\x00\x00\x01'
2024-10-14 19:33:48,529 - DEBUG - tag: ResolutionUnit (296) - type: short (3) - value: b'\x00\x02'
2024-10-14 19:33:48,529 - DEBUG - tag: ExifIFD (34665) - type: long (4) - value: b'\x00\x00\x00N'
2024-10-14 19:33:48,530 - DEBUG - Error closing: Operation on closed image
2024-10-14 19:33:51,005 - DEBUG - Instructor Request: mode.value='tool_call', response_model=<class 'models.AgentAction'>, new_kwargs={'model': 'gpt-4', 'messages': [{'role': 'system', 'content': '\nYou are an AI agent specializing in contract creation and personal information extraction. \n\nYour role is:\n 1. Guide the process of extracting information from documents..\n 2. Verifying the extracted information with human input.\n 3. Identifying parties. \n 4. Constructing a contract. \n\n\nFollow the workflow precisely and ask for human input when needed.\n\n'}, {'role': 'user', 'content': '\n    Current state:\n    - Verified PII data: 0 entries\n    - Parties identified: No\n    - Contract type determined: No\n    - Contract constructed: No\n    \nWhat action should be taken next? Choose from: extract_pii, identify_parties, determine_contract_type, construct_contract, finish'}], 'tools': [{'type': 'function', 'function': {'name': 'AgentAction', 'description': 'Correctly extracted `AgentAction` with all the required parameters with correct types', 'parameters': {'properties': {'action': {'description': 'Action to be performed by the agent', 'title': 'Action', 'type': 'string'}, 'parameters': {'additionalProperties': {'type': 'string'}, 'description': 'Parameters for the action', 'title': 'Parameters', 'type': 'object'}}, 'required': ['action', 'parameters'], 'type': 'object'}}}], 'tool_choice': {'type': 'function', 'function': {'name': 'AgentAction'}}}
2024-10-14 19:33:51,006 - DEBUG - max_retries: 1
2024-10-14 19:33:51,008 - DEBUG - Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'json_data': {'messages': [{'role': 'system', 'content': '\nYou are an AI agent specializing in contract creation and personal information extraction. \n\nYour role is:\n 1. Guide the process of extracting information from documents..\n 2. Verifying the extracted information with human input.\n 3. Identifying parties. \n 4. Constructing a contract. \n\n\nFollow the workflow precisely and ask for human input when needed.\n\n'}, {'role': 'user', 'content': '\n    Current state:\n    - Verified PII data: 0 entries\n    - Parties identified: No\n    - Contract type determined: No\n    - Contract constructed: No\n    \nWhat action should be taken next? Choose from: extract_pii, identify_parties, determine_contract_type, construct_contract, finish'}], 'model': 'gpt-4', 'tool_choice': {'type': 'function', 'function': {'name': 'AgentAction'}}, 'tools': [{'type': 'function', 'function': {'name': 'AgentAction', 'description': 'Correctly extracted `AgentAction` with all the required parameters with correct types', 'parameters': {'properties': {'action': {'description': 'Action to be performed by the agent', 'title': 'Action', 'type': 'string'}, 'parameters': {'additionalProperties': {'type': 'string'}, 'description': 'Parameters for the action', 'title': 'Parameters', 'type': 'object'}}, 'required': ['action', 'parameters'], 'type': 'object'}}}]}}
2024-10-14 19:33:51,046 - DEBUG - Sending HTTP Request: POST https://api.openai.com/v1/chat/completions
2024-10-14 19:33:51,046 - DEBUG - connect_tcp.started host='api.openai.com' port=443 local_address=None timeout=5.0 socket_options=None
2024-10-14 19:33:51,078 - DEBUG - connect_tcp.complete return_value=<httpcore._backends.sync.SyncStream object at 0x00000183AF4C6F60>
2024-10-14 19:33:51,078 - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x00000183AF3CEBD0> server_hostname='api.openai.com' timeout=5.0
2024-10-14 19:33:51,085 - DEBUG - start_tls.complete return_value=<httpcore._backends.sync.SyncStream object at 0x00000183AF563A70>
2024-10-14 19:33:51,086 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-10-14 19:33:51,086 - DEBUG - send_request_headers.complete
2024-10-14 19:33:51,086 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-10-14 19:33:51,086 - DEBUG - send_request_body.complete
2024-10-14 19:33:51,086 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-10-14 19:33:52,408 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Mon, 14 Oct 2024 16:33:53 GMT'), (b'Content-Type', b'application/json'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'user-kzzh9hik9ryjiou4ftvhondh'), (b'openai-processing-ms', b'1155'), (b'openai-version', b'2020-10-01'), (b'x-ratelimit-limit-requests', b'10000'), (b'x-ratelimit-limit-tokens', b'10000'), (b'x-ratelimit-remaining-requests', b'9999'), (b'x-ratelimit-remaining-tokens', b'9821'), (b'x-ratelimit-reset-requests', b'8.64s'), (b'x-ratelimit-reset-tokens', b'1.074s'), (b'x-request-id', b'req_c8c568ca824d3b8da4e3d165927a63fb'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'CF-Cache-Status', b'DYNAMIC'), (b'Set-Cookie', b'__cf_bm=61L3ph7fE0ca2l0asRFEseoVCECF4mU68SxMY2Dz540-1728923633-1.0.1.1-WVBeRuxx6N1ox.NLnsULqp0ArUgCNIJWSX30alVPkHf2J9Hf4teac3uQPt6g4p_EsYN8IVl7Zdubl7p3lgBvgw; path=/; expires=Mon, 14-Oct-24 17:03:53 GMT; domain=.api.openai.com; HttpOnly; Secure; SameSite=None'), (b'X-Content-Type-Options', b'nosniff'), (b'Set-Cookie', b'_cfuvid=qct0kpH1N4VGGLA56Q5xbIzdHprlmy8sRPycFKe8JCQ-1728923633411-0.0.1.1-604800000; path=/; domain=.api.openai.com; HttpOnly; Secure; SameSite=None'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8d28f93c9ff8c9e9-OTP'), (b'Content-Encoding', b'gzip'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-10-14 19:33:52,409 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2024-10-14 19:33:52,409 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-10-14 19:33:52,409 - DEBUG - receive_response_body.complete
2024-10-14 19:33:52,409 - DEBUG - response_closed.started
2024-10-14 19:33:52,409 - DEBUG - response_closed.complete
2024-10-14 19:33:52,409 - DEBUG - HTTP Response: POST https://api.openai.com/v1/chat/completions "200 OK" Headers([('date', 'Mon, 14 Oct 2024 16:33:53 GMT'), ('content-type', 'application/json'), ('transfer-encoding', 'chunked'), ('connection', 'keep-alive'), ('access-control-expose-headers', 'X-Request-ID'), ('openai-organization', 'user-kzzh9hik9ryjiou4ftvhondh'), ('openai-processing-ms', '1155'), ('openai-version', '2020-10-01'), ('x-ratelimit-limit-requests', '10000'), ('x-ratelimit-limit-tokens', '10000'), ('x-ratelimit-remaining-requests', '9999'), ('x-ratelimit-remaining-tokens', '9821'), ('x-ratelimit-reset-requests', '8.64s'), ('x-ratelimit-reset-tokens', '1.074s'), ('x-request-id', 'req_c8c568ca824d3b8da4e3d165927a63fb'), ('strict-transport-security', 'max-age=31536000; includeSubDomains; preload'), ('cf-cache-status', 'DYNAMIC'), ('set-cookie', '__cf_bm=61L3ph7fE0ca2l0asRFEseoVCECF4mU68SxMY2Dz540-1728923633-1.0.1.1-WVBeRuxx6N1ox.NLnsULqp0ArUgCNIJWSX30alVPkHf2J9Hf4teac3uQPt6g4p_EsYN8IVl7Zdubl7p3lgBvgw; path=/; expires=Mon, 14-Oct-24 17:03:53 GMT; domain=.api.openai.com; HttpOnly; Secure; SameSite=None'), ('x-content-type-options', 'nosniff'), ('set-cookie', '_cfuvid=qct0kpH1N4VGGLA56Q5xbIzdHprlmy8sRPycFKe8JCQ-1728923633411-0.0.1.1-604800000; path=/; domain=.api.openai.com; HttpOnly; Secure; SameSite=None'), ('server', 'cloudflare'), ('cf-ray', '8d28f93c9ff8c9e9-OTP'), ('content-encoding', 'gzip'), ('alt-svc', 'h3=":443"; ma=86400')])
2024-10-14 19:33:52,409 - DEBUG - request_id: req_c8c568ca824d3b8da4e3d165927a63fb
2024-10-14 19:33:52,411 - DEBUG - Instructor Raw Response: ChatCompletion(id='chatcmpl-AIIIyohFxb260Ofai5icydfMsmL6W', choices=[Choice(finish_reason='stop', index=0, logprobs=None, message=ChatCompletionMessage(content=None, refusal=None, role='assistant', function_call=None, tool_calls=[ChatCompletionMessageToolCall(id='call_nt8EYOi6OKtI2STZNdqrWdNi', function=Function(arguments='\n{\n  "action": "extract_pii"\n}', name='AgentAction'), type='function')]))], created=1728923632, model='gpt-4-0613', object='chat.completion', service_tier=None, system_fingerprint=None, usage=CompletionUsage(completion_tokens=12, prompt_tokens=207, total_tokens=219, completion_tokens_details=None, prompt_tokens_details=None))
2024-10-14 19:33:52,412 - DEBUG - Instructor Request: mode.value='tool_call', response_model=<class 'models.PIIData'>, new_kwargs={'model': 'gpt-4', 'messages': [{'role': 'system', 'content': '\nYou are an AI agent specializing in contract creation and personal information extraction. \n\nYour role is:\n 1. Guide the process of extracting information from documents..\n 2. Verifying the extracted information with human input.\n 3. Identifying parties. \n 4. Constructing a contract. \n\n\nFollow the workflow precisely and ask for human input when needed.\n\n'}, {'role': 'user', 'content': "Extract the name and address from the given text:\n\nROUMANIE ROMAWI ROMANIA Carte CARTE De |Dentitate IDEnTITY D'iDENTITE seria TR Na 409131 CarD cNP 1891113341181 Nume/Nom/Last name T525M ISPILANTE Prenume/Prenom/First namo SENTIMENT BRUSLI Cetatenle/Nallonallte/Nallonallly Sox SexeiSox Romn\u0103 ROU M Loc nastere/Liou do naissancelPlace ol birth Or\u0219. Videle Jud.Teleorman Dom IlulAdresse/Addrass Videle Jud: Teleorman Sos. Giurgiului nr.1 695 TR Emisa dolDelivree parlIssuad by ValabilltatelValldlte Valldlty SPCLEP Videle 04.11.11-13.11.2018 IDROUISPILANTE<<SENTIMENT <BRUSLI<<<< TR409131<0R0u8911137M181113513411813 Or\u0219:"}], 'tools': [{'type': 'function', 'function': {'name': 'PIIData', 'description': 'Correctly extracted `PIIData` with all the required parameters with correct types', 'parameters': {'properties': {'name': {'description': 'Full name of the person', 'title': 'Name', 'type': 'string'}, 'address': {'description': 'Residential address of the person', 'title': 'Address', 'type': 'string'}}, 'required': ['address', 'name'], 'type': 'object'}}}], 'tool_choice': {'type': 'function', 'function': {'name': 'PIIData'}}}
2024-10-14 19:33:52,412 - DEBUG - max_retries: 1
2024-10-14 19:33:52,413 - DEBUG - Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'json_data': {'messages': [{'role': 'system', 'content': '\nYou are an AI agent specializing in contract creation and personal information extraction. \n\nYour role is:\n 1. Guide the process of extracting information from documents..\n 2. Verifying the extracted information with human input.\n 3. Identifying parties. \n 4. Constructing a contract. \n\n\nFollow the workflow precisely and ask for human input when needed.\n\n'}, {'role': 'user', 'content': "Extract the name and address from the given text:\n\nROUMANIE ROMAWI ROMANIA Carte CARTE De |Dentitate IDEnTITY D'iDENTITE seria TR Na 409131 CarD cNP 1891113341181 Nume/Nom/Last name T525M ISPILANTE Prenume/Prenom/First namo SENTIMENT BRUSLI Cetatenle/Nallonallte/Nallonallly Sox SexeiSox Romn\u0103 ROU M Loc nastere/Liou do naissancelPlace ol birth Or\u0219. Videle Jud.Teleorman Dom IlulAdresse/Addrass Videle Jud: Teleorman Sos. Giurgiului nr.1 695 TR Emisa dolDelivree parlIssuad by ValabilltatelValldlte Valldlty SPCLEP Videle 04.11.11-13.11.2018 IDROUISPILANTE<<SENTIMENT <BRUSLI<<<< TR409131<0R0u8911137M181113513411813 Or\u0219:"}], 'model': 'gpt-4', 'tool_choice': {'type': 'function', 'function': {'name': 'PIIData'}}, 'tools': [{'type': 'function', 'function': {'name': 'PIIData', 'description': 'Correctly extracted `PIIData` with all the required parameters with correct types', 'parameters': {'properties': {'name': {'description': 'Full name of the person', 'title': 'Name', 'type': 'string'}, 'address': {'description': 'Residential address of the person', 'title': 'Address', 'type': 'string'}}, 'required': ['address', 'name'], 'type': 'object'}}}]}}
2024-10-14 19:33:52,414 - DEBUG - Sending HTTP Request: POST https://api.openai.com/v1/chat/completions
2024-10-14 19:33:52,414 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-10-14 19:33:52,414 - DEBUG - send_request_headers.complete
2024-10-14 19:33:52,414 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-10-14 19:33:52,414 - DEBUG - send_request_body.complete
2024-10-14 19:33:52,414 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-10-14 19:33:54,536 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Mon, 14 Oct 2024 16:33:55 GMT'), (b'Content-Type', b'application/json'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'user-kzzh9hik9ryjiou4ftvhondh'), (b'openai-processing-ms', b'1966'), (b'openai-version', b'2020-10-01'), (b'x-ratelimit-limit-requests', b'10000'), (b'x-ratelimit-limit-tokens', b'10000'), (b'x-ratelimit-remaining-requests', b'9998'), (b'x-ratelimit-remaining-tokens', b'9720'), (b'x-ratelimit-reset-requests', b'15.962s'), (b'x-ratelimit-reset-tokens', b'1.675s'), (b'x-request-id', b'req_a5493fd3e21a418e9fcd15a29dab3de5'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8d28f944e9aec9e9-OTP'), (b'Content-Encoding', b'gzip'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-10-14 19:33:54,536 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2024-10-14 19:33:54,536 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-10-14 19:33:54,537 - DEBUG - receive_response_body.complete
2024-10-14 19:33:54,537 - DEBUG - response_closed.started
2024-10-14 19:33:54,537 - DEBUG - response_closed.complete
2024-10-14 19:33:54,537 - DEBUG - HTTP Response: POST https://api.openai.com/v1/chat/completions "200 OK" Headers({'date': 'Mon, 14 Oct 2024 16:33:55 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-expose-headers': 'X-Request-ID', 'openai-organization': 'user-kzzh9hik9ryjiou4ftvhondh', 'openai-processing-ms': '1966', 'openai-version': '2020-10-01', 'x-ratelimit-limit-requests': '10000', 'x-ratelimit-limit-tokens': '10000', 'x-ratelimit-remaining-requests': '9998', 'x-ratelimit-remaining-tokens': '9720', 'x-ratelimit-reset-requests': '15.962s', 'x-ratelimit-reset-tokens': '1.675s', 'x-request-id': 'req_a5493fd3e21a418e9fcd15a29dab3de5', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8d28f944e9aec9e9-OTP', 'content-encoding': 'gzip', 'alt-svc': 'h3=":443"; ma=86400'})
2024-10-14 19:33:54,537 - DEBUG - request_id: req_a5493fd3e21a418e9fcd15a29dab3de5
2024-10-14 19:33:54,537 - DEBUG - Instructor Raw Response: ChatCompletion(id='chatcmpl-AIIIzJQDKOZDE080BuRixhBc2l8bM', choices=[Choice(finish_reason='stop', index=0, logprobs=None, message=ChatCompletionMessage(content=None, refusal=None, role='assistant', function_call=None, tool_calls=[ChatCompletionMessageToolCall(id='call_qAnrsv92lTLReYcxF18tiB6g', function=Function(arguments='{\n"name": "ISPILANTE SENTIMENT BRUSLI",\n"address": "Videle Jud: Teleorman Sos. Giurgiului nr.1 695 TR"\n}', name='PIIData'), type='function')]))], created=1728923633, model='gpt-4-0613', object='chat.completion', service_tier=None, system_fingerprint=None, usage=CompletionUsage(completion_tokens=39, prompt_tokens=377, total_tokens=416, completion_tokens_details=None, prompt_tokens_details=None))
2024-10-14 19:33:57,991 - DEBUG - Instructor Request: mode.value='tool_call', response_model=<class 'models.PIIData'>, new_kwargs={'model': 'gpt-4', 'messages': [{'role': 'system', 'content': '\nYou are an AI agent specializing in contract creation and personal information extraction. \n\nYour role is:\n 1. Guide the process of extracting information from documents..\n 2. Verifying the extracted information with human input.\n 3. Identifying parties. \n 4. Constructing a contract. \n\n\nFollow the workflow precisely and ask for human input when needed.\n\n'}, {'role': 'user', 'content': "Extract the name and address from the given text:\n\nROUMANIE ROVIAINIA ROMANIA Carte Carte DE iDentitate IdEnTITY Didentite seala SS Nr 099994 Card CNP 2410415400542 93coQ Nume/NomiLast name VASILESCU Pronume/Prenom/Flrst name ELENA < CetatenielNatlonallte/Natlonalily M Sex SexelSer Romn\u0103 ROU Loc nastore/Licu de naissancolF 'ar0 ol birth Mun: Dej Jud. Cluj Domiciliu/Adresse A ess Mun. Bucuresti Sec. 5 Str Nicolae Iorga nr.3 900 B Emisa delDelivree parllssued by Valabilitate/Vahidile Valiouy D.EPAB.D- 06.01.17-15.04.2077 IDROUVASILESCU<<ELENA<<<<<<<<<<<<<<< SS099994<0R0u4104151F770415824003421"}], 'tools': [{'type': 'function', 'function': {'name': 'PIIData', 'description': 'Correctly extracted `PIIData` with all the required parameters with correct types', 'parameters': {'properties': {'name': {'description': 'Full name of the person', 'title': 'Name', 'type': 'string'}, 'address': {'description': 'Residential address of the person', 'title': 'Address', 'type': 'string'}}, 'required': ['address', 'name'], 'type': 'object'}}}], 'tool_choice': {'type': 'function', 'function': {'name': 'PIIData'}}}
2024-10-14 19:33:57,991 - DEBUG - max_retries: 1
2024-10-14 19:33:57,992 - DEBUG - Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'json_data': {'messages': [{'role': 'system', 'content': '\nYou are an AI agent specializing in contract creation and personal information extraction. \n\nYour role is:\n 1. Guide the process of extracting information from documents..\n 2. Verifying the extracted information with human input.\n 3. Identifying parties. \n 4. Constructing a contract. \n\n\nFollow the workflow precisely and ask for human input when needed.\n\n'}, {'role': 'user', 'content': "Extract the name and address from the given text:\n\nROUMANIE ROVIAINIA ROMANIA Carte Carte DE iDentitate IdEnTITY Didentite seala SS Nr 099994 Card CNP 2410415400542 93coQ Nume/NomiLast name VASILESCU Pronume/Prenom/Flrst name ELENA < CetatenielNatlonallte/Natlonalily M Sex SexelSer Romn\u0103 ROU Loc nastore/Licu de naissancolF 'ar0 ol birth Mun: Dej Jud. Cluj Domiciliu/Adresse A ess Mun. Bucuresti Sec. 5 Str Nicolae Iorga nr.3 900 B Emisa delDelivree parllssued by Valabilitate/Vahidile Valiouy D.EPAB.D- 06.01.17-15.04.2077 IDROUVASILESCU<<ELENA<<<<<<<<<<<<<<< SS099994<0R0u4104151F770415824003421"}], 'model': 'gpt-4', 'tool_choice': {'type': 'function', 'function': {'name': 'PIIData'}}, 'tools': [{'type': 'function', 'function': {'name': 'PIIData', 'description': 'Correctly extracted `PIIData` with all the required parameters with correct types', 'parameters': {'properties': {'name': {'description': 'Full name of the person', 'title': 'Name', 'type': 'string'}, 'address': {'description': 'Residential address of the person', 'title': 'Address', 'type': 'string'}}, 'required': ['address', 'name'], 'type': 'object'}}}]}}
2024-10-14 19:33:57,993 - DEBUG - Sending HTTP Request: POST https://api.openai.com/v1/chat/completions
2024-10-14 19:33:57,993 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-10-14 19:33:57,993 - DEBUG - send_request_headers.complete
2024-10-14 19:33:57,993 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-10-14 19:33:57,993 - DEBUG - send_request_body.complete
2024-10-14 19:33:57,993 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-10-14 19:34:03,875 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Mon, 14 Oct 2024 16:34:04 GMT'), (b'Content-Type', b'application/json'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'user-kzzh9hik9ryjiou4ftvhondh'), (b'openai-processing-ms', b'5725'), (b'openai-version', b'2020-10-01'), (b'x-ratelimit-limit-requests', b'10000'), (b'x-ratelimit-limit-tokens', b'10000'), (b'x-ratelimit-remaining-requests', b'9997'), (b'x-ratelimit-remaining-tokens', b'9742'), (b'x-ratelimit-reset-requests', b'19.022s'), (b'x-ratelimit-reset-tokens', b'1.548s'), (b'x-request-id', b'req_2a3ad4d7be3588f8ad0b308999488ba5'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8d28f967cbe9c9e9-OTP'), (b'Content-Encoding', b'gzip'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-10-14 19:34:03,876 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2024-10-14 19:34:03,876 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-10-14 19:34:03,876 - DEBUG - receive_response_body.complete
2024-10-14 19:34:03,876 - DEBUG - response_closed.started
2024-10-14 19:34:03,876 - DEBUG - response_closed.complete
2024-10-14 19:34:03,876 - DEBUG - HTTP Response: POST https://api.openai.com/v1/chat/completions "200 OK" Headers({'date': 'Mon, 14 Oct 2024 16:34:04 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-expose-headers': 'X-Request-ID', 'openai-organization': 'user-kzzh9hik9ryjiou4ftvhondh', 'openai-processing-ms': '5725', 'openai-version': '2020-10-01', 'x-ratelimit-limit-requests': '10000', 'x-ratelimit-limit-tokens': '10000', 'x-ratelimit-remaining-requests': '9997', 'x-ratelimit-remaining-tokens': '9742', 'x-ratelimit-reset-requests': '19.022s', 'x-ratelimit-reset-tokens': '1.548s', 'x-request-id': 'req_2a3ad4d7be3588f8ad0b308999488ba5', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8d28f967cbe9c9e9-OTP', 'content-encoding': 'gzip', 'alt-svc': 'h3=":443"; ma=86400'})
2024-10-14 19:34:03,876 - DEBUG - request_id: req_2a3ad4d7be3588f8ad0b308999488ba5
2024-10-14 19:34:03,877 - DEBUG - Instructor Raw Response: ChatCompletion(id='chatcmpl-AIIJ5POSNFPJZCmwHL9qImxtMldGz', choices=[Choice(finish_reason='stop', index=0, logprobs=None, message=ChatCompletionMessage(content=None, refusal=None, role='assistant', function_call=None, tool_calls=[ChatCompletionMessageToolCall(id='call_459jewx1l27RV8fQKmAnovvr', function=Function(arguments='{\n"name": "VASILESCU ELENA",\n"address": "Mun. Bucuresti Sec. 5 Str Nicolae Iorga nr.3"\n}', name='PIIData'), type='function')]))], created=1728923639, model='gpt-4-0613', object='chat.completion', service_tier=None, system_fingerprint=None, usage=CompletionUsage(completion_tokens=38, prompt_tokens=380, total_tokens=418, completion_tokens_details=None, prompt_tokens_details=None))
2024-10-14 19:34:06,915 - DEBUG - Instructor Request: mode.value='tool_call', response_model=<class 'models.AgentAction'>, new_kwargs={'model': 'gpt-4', 'messages': [{'role': 'system', 'content': '\nYou are an AI agent specializing in contract creation and personal information extraction. \n\nYour role is:\n 1. Guide the process of extracting information from documents..\n 2. Verifying the extracted information with human input.\n 3. Identifying parties. \n 4. Constructing a contract. \n\n\nFollow the workflow precisely and ask for human input when needed.\n\n'}, {'role': 'user', 'content': '\n    Current state:\n    - Verified PII data: 2 entries\n    - Parties identified: No\n    - Contract type determined: No\n    - Contract constructed: No\n    \nWhat action should be taken next? Choose from: extract_pii, identify_parties, determine_contract_type, construct_contract, finish'}], 'tools': [{'type': 'function', 'function': {'name': 'AgentAction', 'description': 'Correctly extracted `AgentAction` with all the required parameters with correct types', 'parameters': {'properties': {'action': {'description': 'Action to be performed by the agent', 'title': 'Action', 'type': 'string'}, 'parameters': {'additionalProperties': {'type': 'string'}, 'description': 'Parameters for the action', 'title': 'Parameters', 'type': 'object'}}, 'required': ['action', 'parameters'], 'type': 'object'}}}], 'tool_choice': {'type': 'function', 'function': {'name': 'AgentAction'}}}
2024-10-14 19:34:06,916 - DEBUG - max_retries: 1
2024-10-14 19:34:06,917 - DEBUG - Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'json_data': {'messages': [{'role': 'system', 'content': '\nYou are an AI agent specializing in contract creation and personal information extraction. \n\nYour role is:\n 1. Guide the process of extracting information from documents..\n 2. Verifying the extracted information with human input.\n 3. Identifying parties. \n 4. Constructing a contract. \n\n\nFollow the workflow precisely and ask for human input when needed.\n\n'}, {'role': 'user', 'content': '\n    Current state:\n    - Verified PII data: 2 entries\n    - Parties identified: No\n    - Contract type determined: No\n    - Contract constructed: No\n    \nWhat action should be taken next? Choose from: extract_pii, identify_parties, determine_contract_type, construct_contract, finish'}], 'model': 'gpt-4', 'tool_choice': {'type': 'function', 'function': {'name': 'AgentAction'}}, 'tools': [{'type': 'function', 'function': {'name': 'AgentAction', 'description': 'Correctly extracted `AgentAction` with all the required parameters with correct types', 'parameters': {'properties': {'action': {'description': 'Action to be performed by the agent', 'title': 'Action', 'type': 'string'}, 'parameters': {'additionalProperties': {'type': 'string'}, 'description': 'Parameters for the action', 'title': 'Parameters', 'type': 'object'}}, 'required': ['action', 'parameters'], 'type': 'object'}}}]}}
2024-10-14 19:34:06,917 - DEBUG - Sending HTTP Request: POST https://api.openai.com/v1/chat/completions
2024-10-14 19:34:06,917 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-10-14 19:34:06,918 - DEBUG - send_request_headers.complete
2024-10-14 19:34:06,918 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-10-14 19:34:06,918 - DEBUG - send_request_body.complete
2024-10-14 19:34:06,918 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-10-14 19:34:08,335 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Mon, 14 Oct 2024 16:34:09 GMT'), (b'Content-Type', b'application/json'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'user-kzzh9hik9ryjiou4ftvhondh'), (b'openai-processing-ms', b'1263'), (b'openai-version', b'2020-10-01'), (b'x-ratelimit-limit-requests', b'10000'), (b'x-ratelimit-limit-tokens', b'10000'), (b'x-ratelimit-remaining-requests', b'9997'), (b'x-ratelimit-remaining-tokens', b'9821'), (b'x-ratelimit-reset-requests', b'18.739s'), (b'x-ratelimit-reset-tokens', b'1.074s'), (b'x-request-id', b'req_9285ec825a07d0cfaaf099832355f82a'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8d28f99f891bc9e9-OTP'), (b'Content-Encoding', b'gzip'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-10-14 19:34:08,336 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2024-10-14 19:34:08,337 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-10-14 19:34:08,337 - DEBUG - receive_response_body.complete
2024-10-14 19:34:08,338 - DEBUG - response_closed.started
2024-10-14 19:34:08,338 - DEBUG - response_closed.complete
2024-10-14 19:34:08,338 - DEBUG - HTTP Response: POST https://api.openai.com/v1/chat/completions "200 OK" Headers({'date': 'Mon, 14 Oct 2024 16:34:09 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-expose-headers': 'X-Request-ID', 'openai-organization': 'user-kzzh9hik9ryjiou4ftvhondh', 'openai-processing-ms': '1263', 'openai-version': '2020-10-01', 'x-ratelimit-limit-requests': '10000', 'x-ratelimit-limit-tokens': '10000', 'x-ratelimit-remaining-requests': '9997', 'x-ratelimit-remaining-tokens': '9821', 'x-ratelimit-reset-requests': '18.739s', 'x-ratelimit-reset-tokens': '1.074s', 'x-request-id': 'req_9285ec825a07d0cfaaf099832355f82a', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8d28f99f891bc9e9-OTP', 'content-encoding': 'gzip', 'alt-svc': 'h3=":443"; ma=86400'})
2024-10-14 19:34:08,338 - DEBUG - request_id: req_9285ec825a07d0cfaaf099832355f82a
2024-10-14 19:34:08,339 - DEBUG - Instructor Raw Response: ChatCompletion(id='chatcmpl-AIIJEBP3KWDNGemzX7Sz8lVYobO8K', choices=[Choice(finish_reason='stop', index=0, logprobs=None, message=ChatCompletionMessage(content=None, refusal=None, role='assistant', function_call=None, tool_calls=[ChatCompletionMessageToolCall(id='call_0khp6IPec4efAAsMpquLrkMe', function=Function(arguments='\n{\n"action": "identify_parties"\n}', name='AgentAction'), type='function')]))], created=1728923648, model='gpt-4-0613', object='chat.completion', service_tier=None, system_fingerprint=None, usage=CompletionUsage(completion_tokens=11, prompt_tokens=207, total_tokens=218, completion_tokens_details=None, prompt_tokens_details=None))
2024-10-14 19:34:08,342 - DEBUG - Instructor Request: mode.value='tool_call', response_model=<class 'models.ContractParties'>, new_kwargs={'model': 'gpt-4', 'messages': [{'role': 'system', 'content': '\nYou are an AI agent specializing in contract creation and personal information extraction. \n\nYour role is:\n 1. Guide the process of extracting information from documents..\n 2. Verifying the extracted information with human input.\n 3. Identifying parties. \n 4. Constructing a contract. \n\n\nFollow the workflow precisely and ask for human input when needed.\n\n'}, {'role': 'user', 'content': 'Identify the buyer and seller from the given information:\n\nName: ISPILANTE SENTIMENT BRUSLI, Address: Videle Jud: Teleorman Sos. Giurgiului nr.1 695 TR\nName: VASILESCU ELENA, Address: Mun. Bucuresti Sec. 5 Str Nicolae Iorga nr.3'}], 'tools': [{'type': 'function', 'function': {'name': 'ContractParties', 'description': 'Correctly extracted `ContractParties` with all the required parameters with correct types', 'parameters': {'properties': {'buyer': {'description': 'Name of the buyer', 'title': 'Buyer', 'type': 'string'}, 'seller': {'description': 'Name of the seller', 'title': 'Seller', 'type': 'string'}}, 'required': ['buyer', 'seller'], 'type': 'object'}}}], 'tool_choice': {'type': 'function', 'function': {'name': 'ContractParties'}}}
2024-10-14 19:34:08,342 - DEBUG - max_retries: 1
2024-10-14 19:34:08,343 - DEBUG - Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'json_data': {'messages': [{'role': 'system', 'content': '\nYou are an AI agent specializing in contract creation and personal information extraction. \n\nYour role is:\n 1. Guide the process of extracting information from documents..\n 2. Verifying the extracted information with human input.\n 3. Identifying parties. \n 4. Constructing a contract. \n\n\nFollow the workflow precisely and ask for human input when needed.\n\n'}, {'role': 'user', 'content': 'Identify the buyer and seller from the given information:\n\nName: ISPILANTE SENTIMENT BRUSLI, Address: Videle Jud: Teleorman Sos. Giurgiului nr.1 695 TR\nName: VASILESCU ELENA, Address: Mun. Bucuresti Sec. 5 Str Nicolae Iorga nr.3'}], 'model': 'gpt-4', 'tool_choice': {'type': 'function', 'function': {'name': 'ContractParties'}}, 'tools': [{'type': 'function', 'function': {'name': 'ContractParties', 'description': 'Correctly extracted `ContractParties` with all the required parameters with correct types', 'parameters': {'properties': {'buyer': {'description': 'Name of the buyer', 'title': 'Buyer', 'type': 'string'}, 'seller': {'description': 'Name of the seller', 'title': 'Seller', 'type': 'string'}}, 'required': ['buyer', 'seller'], 'type': 'object'}}}]}}
2024-10-14 19:34:08,344 - DEBUG - Sending HTTP Request: POST https://api.openai.com/v1/chat/completions
2024-10-14 19:34:08,344 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-10-14 19:34:08,344 - DEBUG - send_request_headers.complete
2024-10-14 19:34:08,344 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-10-14 19:34:08,344 - DEBUG - send_request_body.complete
2024-10-14 19:34:08,344 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-10-14 19:34:10,034 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Mon, 14 Oct 2024 16:34:11 GMT'), (b'Content-Type', b'application/json'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'user-kzzh9hik9ryjiou4ftvhondh'), (b'openai-processing-ms', b'1536'), (b'openai-version', b'2020-10-01'), (b'x-ratelimit-limit-requests', b'10000'), (b'x-ratelimit-limit-tokens', b'10000'), (b'x-ratelimit-remaining-requests', b'9996'), (b'x-ratelimit-remaining-tokens', b'9820'), (b'x-ratelimit-reset-requests', b'25.954s'), (b'x-ratelimit-reset-tokens', b'1.077s'), (b'x-request-id', b'req_ad5f9887804e60aca6c0dd3e21172170'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8d28f9a87a72c9e9-OTP'), (b'Content-Encoding', b'gzip'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-10-14 19:34:10,034 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2024-10-14 19:34:10,035 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-10-14 19:34:10,035 - DEBUG - receive_response_body.complete
2024-10-14 19:34:10,035 - DEBUG - response_closed.started
2024-10-14 19:34:10,035 - DEBUG - response_closed.complete
2024-10-14 19:34:10,035 - DEBUG - HTTP Response: POST https://api.openai.com/v1/chat/completions "200 OK" Headers({'date': 'Mon, 14 Oct 2024 16:34:11 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-expose-headers': 'X-Request-ID', 'openai-organization': 'user-kzzh9hik9ryjiou4ftvhondh', 'openai-processing-ms': '1536', 'openai-version': '2020-10-01', 'x-ratelimit-limit-requests': '10000', 'x-ratelimit-limit-tokens': '10000', 'x-ratelimit-remaining-requests': '9996', 'x-ratelimit-remaining-tokens': '9820', 'x-ratelimit-reset-requests': '25.954s', 'x-ratelimit-reset-tokens': '1.077s', 'x-request-id': 'req_ad5f9887804e60aca6c0dd3e21172170', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8d28f9a87a72c9e9-OTP', 'content-encoding': 'gzip', 'alt-svc': 'h3=":443"; ma=86400'})
2024-10-14 19:34:10,035 - DEBUG - request_id: req_ad5f9887804e60aca6c0dd3e21172170
2024-10-14 19:34:10,035 - DEBUG - Instructor Raw Response: ChatCompletion(id='chatcmpl-AIIJFjxY8cNsHqihgeO4HVer9gsP4', choices=[Choice(finish_reason='stop', index=0, logprobs=None, message=ChatCompletionMessage(content=None, refusal=None, role='assistant', function_call=None, tool_calls=[ChatCompletionMessageToolCall(id='call_jsDnQaVSvU7l7ThFmeYUdDpP', function=Function(arguments='{\n"buyer": "ISPILANTE SENTIMENT BRUSLI",\n"seller": "VASILESCU ELENA"\n}', name='ContractParties'), type='function')]))], created=1728923649, model='gpt-4-0613', object='chat.completion', service_tier=None, system_fingerprint=None, usage=CompletionUsage(completion_tokens=27, prompt_tokens=229, total_tokens=256, completion_tokens_details=None, prompt_tokens_details=None))
2024-10-14 19:34:10,036 - DEBUG - Instructor Request: mode.value='tool_call', response_model=<class 'models.AgentAction'>, new_kwargs={'model': 'gpt-4', 'messages': [{'role': 'system', 'content': '\nYou are an AI agent specializing in contract creation and personal information extraction. \n\nYour role is:\n 1. Guide the process of extracting information from documents..\n 2. Verifying the extracted information with human input.\n 3. Identifying parties. \n 4. Constructing a contract. \n\n\nFollow the workflow precisely and ask for human input when needed.\n\n'}, {'role': 'user', 'content': '\n    Current state:\n    - Verified PII data: 2 entries\n    - Parties identified: Yes\n    - Contract type determined: No\n    - Contract constructed: No\n    \nWhat action should be taken next? Choose from: extract_pii, identify_parties, determine_contract_type, construct_contract, finish'}], 'tools': [{'type': 'function', 'function': {'name': 'AgentAction', 'description': 'Correctly extracted `AgentAction` with all the required parameters with correct types', 'parameters': {'properties': {'action': {'description': 'Action to be performed by the agent', 'title': 'Action', 'type': 'string'}, 'parameters': {'additionalProperties': {'type': 'string'}, 'description': 'Parameters for the action', 'title': 'Parameters', 'type': 'object'}}, 'required': ['action', 'parameters'], 'type': 'object'}}}], 'tool_choice': {'type': 'function', 'function': {'name': 'AgentAction'}}}
2024-10-14 19:34:10,036 - DEBUG - max_retries: 1
2024-10-14 19:34:10,038 - DEBUG - Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'json_data': {'messages': [{'role': 'system', 'content': '\nYou are an AI agent specializing in contract creation and personal information extraction. \n\nYour role is:\n 1. Guide the process of extracting information from documents..\n 2. Verifying the extracted information with human input.\n 3. Identifying parties. \n 4. Constructing a contract. \n\n\nFollow the workflow precisely and ask for human input when needed.\n\n'}, {'role': 'user', 'content': '\n    Current state:\n    - Verified PII data: 2 entries\n    - Parties identified: Yes\n    - Contract type determined: No\n    - Contract constructed: No\n    \nWhat action should be taken next? Choose from: extract_pii, identify_parties, determine_contract_type, construct_contract, finish'}], 'model': 'gpt-4', 'tool_choice': {'type': 'function', 'function': {'name': 'AgentAction'}}, 'tools': [{'type': 'function', 'function': {'name': 'AgentAction', 'description': 'Correctly extracted `AgentAction` with all the required parameters with correct types', 'parameters': {'properties': {'action': {'description': 'Action to be performed by the agent', 'title': 'Action', 'type': 'string'}, 'parameters': {'additionalProperties': {'type': 'string'}, 'description': 'Parameters for the action', 'title': 'Parameters', 'type': 'object'}}, 'required': ['action', 'parameters'], 'type': 'object'}}}]}}
2024-10-14 19:34:10,038 - DEBUG - Sending HTTP Request: POST https://api.openai.com/v1/chat/completions
2024-10-14 19:34:10,038 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-10-14 19:34:10,038 - DEBUG - send_request_headers.complete
2024-10-14 19:34:10,038 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-10-14 19:34:10,038 - DEBUG - send_request_body.complete
2024-10-14 19:34:10,038 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-10-14 19:34:11,167 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Mon, 14 Oct 2024 16:34:12 GMT'), (b'Content-Type', b'application/json'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'user-kzzh9hik9ryjiou4ftvhondh'), (b'openai-processing-ms', b'980'), (b'openai-version', b'2020-10-01'), (b'x-ratelimit-limit-requests', b'10000'), (b'x-ratelimit-limit-tokens', b'10000'), (b'x-ratelimit-remaining-requests', b'9996'), (b'x-ratelimit-remaining-tokens', b'9753'), (b'x-ratelimit-reset-requests', b'32.902s'), (b'x-ratelimit-reset-tokens', b'1.479s'), (b'x-request-id', b'req_be5c4d8d1e44662792b8e06a5f5e0088'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8d28f9b308dfc9e9-OTP'), (b'Content-Encoding', b'gzip'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-10-14 19:34:11,168 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2024-10-14 19:34:11,168 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-10-14 19:34:11,169 - DEBUG - receive_response_body.complete
2024-10-14 19:34:11,169 - DEBUG - response_closed.started
2024-10-14 19:34:11,169 - DEBUG - response_closed.complete
2024-10-14 19:34:11,169 - DEBUG - HTTP Response: POST https://api.openai.com/v1/chat/completions "200 OK" Headers({'date': 'Mon, 14 Oct 2024 16:34:12 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-expose-headers': 'X-Request-ID', 'openai-organization': 'user-kzzh9hik9ryjiou4ftvhondh', 'openai-processing-ms': '980', 'openai-version': '2020-10-01', 'x-ratelimit-limit-requests': '10000', 'x-ratelimit-limit-tokens': '10000', 'x-ratelimit-remaining-requests': '9996', 'x-ratelimit-remaining-tokens': '9753', 'x-ratelimit-reset-requests': '32.902s', 'x-ratelimit-reset-tokens': '1.479s', 'x-request-id': 'req_be5c4d8d1e44662792b8e06a5f5e0088', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8d28f9b308dfc9e9-OTP', 'content-encoding': 'gzip', 'alt-svc': 'h3=":443"; ma=86400'})
2024-10-14 19:34:11,170 - DEBUG - request_id: req_be5c4d8d1e44662792b8e06a5f5e0088
2024-10-14 19:34:11,171 - DEBUG - Instructor Raw Response: ChatCompletion(id='chatcmpl-AIIJHl81SHi9JEFti9d5HFJgkqi4V', choices=[Choice(finish_reason='stop', index=0, logprobs=None, message=ChatCompletionMessage(content=None, refusal=None, role='assistant', function_call=None, tool_calls=[ChatCompletionMessageToolCall(id='call_kP6qbzN1ZExoatR4q5W6TFbr', function=Function(arguments='\n{\n  "action": "determine_contract_type"\n}', name='AgentAction'), type='function')]))], created=1728923651, model='gpt-4-0613', object='chat.completion', service_tier=None, system_fingerprint=None, usage=CompletionUsage(completion_tokens=13, prompt_tokens=207, total_tokens=220, completion_tokens_details=None, prompt_tokens_details=None))
2024-10-14 19:34:15,434 - DEBUG - close.started
2024-10-14 19:34:15,435 - DEBUG - close.complete
2024-10-14 19:34:15,435 - ERROR - Task exception was never retrieved
future: <Task finished name='Task-1' coro=<agent_workflow() done, defined at D:\deve\contract_automation\src\main.py:25> exception=KeyboardInterrupt()>
Traceback (most recent call last):
  File "D:\deve\contract_automation\src\main.py", line 105, in <module>
    asyncio.run(agent_workflow())
  File "D:\deve\contract_automation\.venv\Lib\site-packages\nest_asyncio.py", line 30, in run
    return loop.run_until_complete(task)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\deve\contract_automation\.venv\Lib\site-packages\nest_asyncio.py", line 92, in run_until_complete
    self._run_once()
  File "D:\deve\contract_automation\.venv\Lib\site-packages\nest_asyncio.py", line 133, in _run_once
    handle._run()
  File "C:\Users\neuro\.rye\py\cpython@3.12.0\Lib\asyncio\events.py", line 84, in _run
    self._context.run(self._callback, *self._args)
  File "C:\Users\neuro\.rye\py\cpython@3.12.0\Lib\asyncio\tasks.py", line 386, in __wakeup
    self.__step()
  File "C:\Users\neuro\.rye\py\cpython@3.12.0\Lib\asyncio\tasks.py", line 293, in __step
    self.__step_run_and_handle_result(exc)
  File "C:\Users\neuro\.rye\py\cpython@3.12.0\Lib\asyncio\tasks.py", line 304, in __step_run_and_handle_result
    result = coro.send(None)
             ^^^^^^^^^^^^^^^
  File "D:\deve\contract_automation\src\main.py", line 55, in agent_workflow
    contract_type = input("Enter contract type (airbnb, buy-sell, it-consulting): ").lower().replace(" ", "-")
                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
KeyboardInterrupt
