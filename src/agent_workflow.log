2024-10-14 13:40:47,819 - WARNING - Neither CUDA nor MPS are available - defaulting to CPU. Note: This module is much faster with a GPU.
2024-10-14 13:41:10,056 - WARNING - Neither CUDA nor MPS are available - defaulting to CPU. Note: This module is much faster with a GPU.
2024-10-14 13:41:36,318 - WARNING - Neither CUDA nor MPS are available - defaulting to CPU. Note: This module is much faster with a GPU.
2024-10-14 13:42:09,589 - WARNING - Neither CUDA nor MPS are available - defaulting to CPU. Note: This module is much faster with a GPU.
2024-10-14 13:42:18,562 - WARNING - Neither CUDA nor MPS are available - defaulting to CPU. Note: This module is much faster with a GPU.
2024-10-14 13:42:50,299 - WARNING - Neither CUDA nor MPS are available - defaulting to CPU. Note: This module is much faster with a GPU.
2024-10-14 13:42:58,339 - WARNING - Neither CUDA nor MPS are available - defaulting to CPU. Note: This module is much faster with a GPU.
2024-10-14 13:42:59,599 - DEBUG - load_ssl_context verify=True cert=None trust_env=True http2=False
2024-10-14 13:42:59,599 - DEBUG - load_verify_locations cafile='D:\\deve\\contract_automation\\.venv\\Lib\\site-packages\\certifi\\cacert.pem'
2024-10-14 13:42:59,922 - DEBUG - Patching `client.chat.completions.create` with mode=<Mode.TOOLS: 'tool_call'>
2024-10-14 13:43:19,660 - WARNING - Neither CUDA nor MPS are available - defaulting to CPU. Note: This module is much faster with a GPU.
2024-10-14 13:43:20,939 - DEBUG - load_ssl_context verify=True cert=None trust_env=True http2=False
2024-10-14 13:43:20,940 - DEBUG - load_verify_locations cafile='D:\\deve\\contract_automation\\.venv\\Lib\\site-packages\\certifi\\cacert.pem'
2024-10-14 13:43:21,274 - DEBUG - Patching `client.chat.completions.create` with mode=<Mode.TOOLS: 'tool_call'>
2024-10-14 13:43:21,278 - DEBUG - Using proactor: IocpProactor
2024-10-14 13:44:39,462 - WARNING - Neither CUDA nor MPS are available - defaulting to CPU. Note: This module is much faster with a GPU.
2024-10-14 13:44:40,741 - DEBUG - load_ssl_context verify=True cert=None trust_env=True http2=False
2024-10-14 13:44:40,742 - DEBUG - load_verify_locations cafile='D:\\deve\\contract_automation\\.venv\\Lib\\site-packages\\certifi\\cacert.pem'
2024-10-14 13:44:41,067 - DEBUG - Patching `client.chat.completions.create` with mode=<Mode.TOOLS: 'tool_call'>
2024-10-14 13:44:41,067 - DEBUG - Using proactor: IocpProactor
2024-10-14 13:44:48,782 - WARNING - Neither CUDA nor MPS are available - defaulting to CPU. Note: This module is much faster with a GPU.
2024-10-14 13:44:50,044 - DEBUG - load_ssl_context verify=True cert=None trust_env=True http2=False
2024-10-14 13:44:50,044 - DEBUG - load_verify_locations cafile='D:\\deve\\contract_automation\\.venv\\Lib\\site-packages\\certifi\\cacert.pem'
2024-10-14 13:44:50,368 - DEBUG - Patching `client.chat.completions.create` with mode=<Mode.TOOLS: 'tool_call'>
2024-10-14 13:44:50,368 - DEBUG - Using proactor: IocpProactor
2024-10-14 13:44:50,372 - INFO - Template selected based on metadata: airbnb.txt
2024-10-14 13:44:50,423 - DEBUG - STREAM b'IHDR' 16 13
2024-10-14 13:44:50,423 - DEBUG - STREAM b'iCCP' 41 3152
2024-10-14 13:44:50,423 - DEBUG - iCCP profile name b'ICC Profile'
2024-10-14 13:44:50,423 - DEBUG - Compression method 0
2024-10-14 13:44:50,423 - DEBUG - STREAM b'eXIf' 3205 138
2024-10-14 13:44:50,423 - DEBUG - STREAM b'pHYs' 3355 9
2024-10-14 13:44:50,423 - DEBUG - STREAM b'iTXt' 3376 470
2024-10-14 13:44:50,423 - DEBUG - STREAM b'iDOT' 3858 28
2024-10-14 13:44:50,423 - DEBUG - b'iDOT' 3858 28 (unknown)
2024-10-14 13:44:50,423 - DEBUG - STREAM b'IDAT' 3898 16384
2024-10-14 13:44:50,423 - DEBUG - STREAM b'IHDR' 16 13
2024-10-14 13:44:50,423 - DEBUG - STREAM b'iCCP' 41 3152
2024-10-14 13:44:50,423 - DEBUG - iCCP profile name b'ICC Profile'
2024-10-14 13:44:50,424 - DEBUG - Compression method 0
2024-10-14 13:44:50,424 - DEBUG - STREAM b'eXIf' 3205 138
2024-10-14 13:44:50,424 - DEBUG - STREAM b'pHYs' 3355 9
2024-10-14 13:44:50,424 - DEBUG - STREAM b'iTXt' 3376 470
2024-10-14 13:44:50,424 - DEBUG - STREAM b'iDOT' 3858 28
2024-10-14 13:44:50,424 - DEBUG - b'iDOT' 3858 28 (unknown)
2024-10-14 13:44:50,424 - DEBUG - STREAM b'IDAT' 3898 16384
2024-10-14 13:44:50,435 - DEBUG - tag: XResolution (282) - type: rational (5) Tag Location: 22 - Data Location: 62 - value: b'\x00\x00\x00\x90\x00\x00\x00\x01'
2024-10-14 13:44:50,435 - DEBUG - tag: YResolution (283) - type: rational (5) Tag Location: 34 - Data Location: 70 - value: b'\x00\x00\x00\x90\x00\x00\x00\x01'
2024-10-14 13:44:50,435 - DEBUG - tag: ResolutionUnit (296) - type: short (3) - value: b'\x00\x02'
2024-10-14 13:44:50,435 - DEBUG - tag: ExifIFD (34665) - type: long (4) - value: b'\x00\x00\x00N'
2024-10-14 13:44:50,436 - DEBUG - Error closing: Operation on closed image
2024-10-14 13:44:52,427 - DEBUG - STREAM b'IHDR' 16 13
2024-10-14 13:44:52,427 - DEBUG - STREAM b'iCCP' 41 3152
2024-10-14 13:44:52,427 - DEBUG - iCCP profile name b'ICC Profile'
2024-10-14 13:44:52,427 - DEBUG - Compression method 0
2024-10-14 13:44:52,427 - DEBUG - STREAM b'eXIf' 3205 138
2024-10-14 13:44:52,427 - DEBUG - STREAM b'pHYs' 3355 9
2024-10-14 13:44:52,427 - DEBUG - STREAM b'iTXt' 3376 471
2024-10-14 13:44:52,427 - DEBUG - STREAM b'iDOT' 3859 28
2024-10-14 13:44:52,427 - DEBUG - b'iDOT' 3859 28 (unknown)
2024-10-14 13:44:52,427 - DEBUG - STREAM b'IDAT' 3899 16384
2024-10-14 13:44:52,427 - DEBUG - STREAM b'IHDR' 16 13
2024-10-14 13:44:52,427 - DEBUG - STREAM b'iCCP' 41 3152
2024-10-14 13:44:52,427 - DEBUG - iCCP profile name b'ICC Profile'
2024-10-14 13:44:52,427 - DEBUG - Compression method 0
2024-10-14 13:44:52,427 - DEBUG - STREAM b'eXIf' 3205 138
2024-10-14 13:44:52,427 - DEBUG - STREAM b'pHYs' 3355 9
2024-10-14 13:44:52,427 - DEBUG - STREAM b'iTXt' 3376 471
2024-10-14 13:44:52,427 - DEBUG - STREAM b'iDOT' 3859 28
2024-10-14 13:44:52,427 - DEBUG - b'iDOT' 3859 28 (unknown)
2024-10-14 13:44:52,427 - DEBUG - STREAM b'IDAT' 3899 16384
2024-10-14 13:44:52,445 - DEBUG - tag: XResolution (282) - type: rational (5) Tag Location: 22 - Data Location: 62 - value: b'\x00\x00\x00\x90\x00\x00\x00\x01'
2024-10-14 13:44:52,445 - DEBUG - tag: YResolution (283) - type: rational (5) Tag Location: 34 - Data Location: 70 - value: b'\x00\x00\x00\x90\x00\x00\x00\x01'
2024-10-14 13:44:52,445 - DEBUG - tag: ResolutionUnit (296) - type: short (3) - value: b'\x00\x02'
2024-10-14 13:44:52,445 - DEBUG - tag: ExifIFD (34665) - type: long (4) - value: b'\x00\x00\x00N'
2024-10-14 13:44:52,446 - DEBUG - Error closing: Operation on closed image
2024-10-14 13:46:10,517 - WARNING - Neither CUDA nor MPS are available - defaulting to CPU. Note: This module is much faster with a GPU.
2024-10-14 13:46:11,788 - DEBUG - load_ssl_context verify=True cert=None trust_env=True http2=False
2024-10-14 13:46:11,789 - DEBUG - load_verify_locations cafile='D:\\deve\\contract_automation\\.venv\\Lib\\site-packages\\certifi\\cacert.pem'
2024-10-14 13:46:12,113 - DEBUG - Patching `client.chat.completions.create` with mode=<Mode.TOOLS: 'tool_call'>
2024-10-14 13:46:12,114 - DEBUG - Using proactor: IocpProactor
2024-10-14 13:46:12,119 - INFO - Template selected based on metadata: airbnb.txt
2024-10-14 13:46:12,134 - DEBUG - STREAM b'IHDR' 16 13
2024-10-14 13:46:12,135 - DEBUG - STREAM b'iCCP' 41 3152
2024-10-14 13:46:12,135 - DEBUG - iCCP profile name b'ICC Profile'
2024-10-14 13:46:12,135 - DEBUG - Compression method 0
2024-10-14 13:46:12,135 - DEBUG - STREAM b'eXIf' 3205 138
2024-10-14 13:46:12,135 - DEBUG - STREAM b'pHYs' 3355 9
2024-10-14 13:46:12,135 - DEBUG - STREAM b'iTXt' 3376 470
2024-10-14 13:46:12,135 - DEBUG - STREAM b'iDOT' 3858 28
2024-10-14 13:46:12,135 - DEBUG - b'iDOT' 3858 28 (unknown)
2024-10-14 13:46:12,135 - DEBUG - STREAM b'IDAT' 3898 16384
2024-10-14 13:46:12,135 - DEBUG - STREAM b'IHDR' 16 13
2024-10-14 13:46:12,135 - DEBUG - STREAM b'iCCP' 41 3152
2024-10-14 13:46:12,135 - DEBUG - iCCP profile name b'ICC Profile'
2024-10-14 13:46:12,135 - DEBUG - Compression method 0
2024-10-14 13:46:12,135 - DEBUG - STREAM b'eXIf' 3205 138
2024-10-14 13:46:12,135 - DEBUG - STREAM b'pHYs' 3355 9
2024-10-14 13:46:12,135 - DEBUG - STREAM b'iTXt' 3376 470
2024-10-14 13:46:12,135 - DEBUG - STREAM b'iDOT' 3858 28
2024-10-14 13:46:12,135 - DEBUG - b'iDOT' 3858 28 (unknown)
2024-10-14 13:46:12,135 - DEBUG - STREAM b'IDAT' 3898 16384
2024-10-14 13:46:12,145 - DEBUG - tag: XResolution (282) - type: rational (5) Tag Location: 22 - Data Location: 62 - value: b'\x00\x00\x00\x90\x00\x00\x00\x01'
2024-10-14 13:46:12,145 - DEBUG - tag: YResolution (283) - type: rational (5) Tag Location: 34 - Data Location: 70 - value: b'\x00\x00\x00\x90\x00\x00\x00\x01'
2024-10-14 13:46:12,145 - DEBUG - tag: ResolutionUnit (296) - type: short (3) - value: b'\x00\x02'
2024-10-14 13:46:12,145 - DEBUG - tag: ExifIFD (34665) - type: long (4) - value: b'\x00\x00\x00N'
2024-10-14 13:46:12,146 - DEBUG - Error closing: Operation on closed image
2024-10-14 13:46:14,129 - DEBUG - STREAM b'IHDR' 16 13
2024-10-14 13:46:14,129 - DEBUG - STREAM b'iCCP' 41 3152
2024-10-14 13:46:14,129 - DEBUG - iCCP profile name b'ICC Profile'
2024-10-14 13:46:14,129 - DEBUG - Compression method 0
2024-10-14 13:46:14,129 - DEBUG - STREAM b'eXIf' 3205 138
2024-10-14 13:46:14,129 - DEBUG - STREAM b'pHYs' 3355 9
2024-10-14 13:46:14,129 - DEBUG - STREAM b'iTXt' 3376 471
2024-10-14 13:46:14,129 - DEBUG - STREAM b'iDOT' 3859 28
2024-10-14 13:46:14,129 - DEBUG - b'iDOT' 3859 28 (unknown)
2024-10-14 13:46:14,129 - DEBUG - STREAM b'IDAT' 3899 16384
2024-10-14 13:46:14,129 - DEBUG - STREAM b'IHDR' 16 13
2024-10-14 13:46:14,129 - DEBUG - STREAM b'iCCP' 41 3152
2024-10-14 13:46:14,129 - DEBUG - iCCP profile name b'ICC Profile'
2024-10-14 13:46:14,129 - DEBUG - Compression method 0
2024-10-14 13:46:14,129 - DEBUG - STREAM b'eXIf' 3205 138
2024-10-14 13:46:14,129 - DEBUG - STREAM b'pHYs' 3355 9
2024-10-14 13:46:14,129 - DEBUG - STREAM b'iTXt' 3376 471
2024-10-14 13:46:14,129 - DEBUG - STREAM b'iDOT' 3859 28
2024-10-14 13:46:14,129 - DEBUG - b'iDOT' 3859 28 (unknown)
2024-10-14 13:46:14,129 - DEBUG - STREAM b'IDAT' 3899 16384
2024-10-14 13:46:14,146 - DEBUG - tag: XResolution (282) - type: rational (5) Tag Location: 22 - Data Location: 62 - value: b'\x00\x00\x00\x90\x00\x00\x00\x01'
2024-10-14 13:46:14,146 - DEBUG - tag: YResolution (283) - type: rational (5) Tag Location: 34 - Data Location: 70 - value: b'\x00\x00\x00\x90\x00\x00\x00\x01'
2024-10-14 13:46:14,146 - DEBUG - tag: ResolutionUnit (296) - type: short (3) - value: b'\x00\x02'
2024-10-14 13:46:14,146 - DEBUG - tag: ExifIFD (34665) - type: long (4) - value: b'\x00\x00\x00N'
2024-10-14 13:46:14,147 - DEBUG - Error closing: Operation on closed image
2024-10-14 13:46:26,165 - WARNING - Neither CUDA nor MPS are available - defaulting to CPU. Note: This module is much faster with a GPU.
2024-10-14 13:46:27,417 - DEBUG - load_ssl_context verify=True cert=None trust_env=True http2=False
2024-10-14 13:46:27,417 - DEBUG - load_verify_locations cafile='D:\\deve\\contract_automation\\.venv\\Lib\\site-packages\\certifi\\cacert.pem'
2024-10-14 13:46:27,732 - DEBUG - Patching `client.chat.completions.create` with mode=<Mode.TOOLS: 'tool_call'>
2024-10-14 13:46:27,733 - DEBUG - Using proactor: IocpProactor
2024-10-14 13:46:27,737 - INFO - Template selected based on metadata: airbnb.txt
2024-10-14 13:46:27,753 - DEBUG - STREAM b'IHDR' 16 13
2024-10-14 13:46:27,753 - DEBUG - STREAM b'iCCP' 41 3152
2024-10-14 13:46:27,753 - DEBUG - iCCP profile name b'ICC Profile'
2024-10-14 13:46:27,753 - DEBUG - Compression method 0
2024-10-14 13:46:27,753 - DEBUG - STREAM b'eXIf' 3205 138
2024-10-14 13:46:27,753 - DEBUG - STREAM b'pHYs' 3355 9
2024-10-14 13:46:27,753 - DEBUG - STREAM b'iTXt' 3376 470
2024-10-14 13:46:27,753 - DEBUG - STREAM b'iDOT' 3858 28
2024-10-14 13:46:27,753 - DEBUG - b'iDOT' 3858 28 (unknown)
2024-10-14 13:46:27,753 - DEBUG - STREAM b'IDAT' 3898 16384
2024-10-14 13:46:27,753 - DEBUG - STREAM b'IHDR' 16 13
2024-10-14 13:46:27,753 - DEBUG - STREAM b'iCCP' 41 3152
2024-10-14 13:46:27,753 - DEBUG - iCCP profile name b'ICC Profile'
2024-10-14 13:46:27,753 - DEBUG - Compression method 0
2024-10-14 13:46:27,754 - DEBUG - STREAM b'eXIf' 3205 138
2024-10-14 13:46:27,754 - DEBUG - STREAM b'pHYs' 3355 9
2024-10-14 13:46:27,754 - DEBUG - STREAM b'iTXt' 3376 470
2024-10-14 13:46:27,754 - DEBUG - STREAM b'iDOT' 3858 28
2024-10-14 13:46:27,754 - DEBUG - b'iDOT' 3858 28 (unknown)
2024-10-14 13:46:27,754 - DEBUG - STREAM b'IDAT' 3898 16384
2024-10-14 13:46:27,763 - DEBUG - tag: XResolution (282) - type: rational (5) Tag Location: 22 - Data Location: 62 - value: b'\x00\x00\x00\x90\x00\x00\x00\x01'
2024-10-14 13:46:27,763 - DEBUG - tag: YResolution (283) - type: rational (5) Tag Location: 34 - Data Location: 70 - value: b'\x00\x00\x00\x90\x00\x00\x00\x01'
2024-10-14 13:46:27,763 - DEBUG - tag: ResolutionUnit (296) - type: short (3) - value: b'\x00\x02'
2024-10-14 13:46:27,763 - DEBUG - tag: ExifIFD (34665) - type: long (4) - value: b'\x00\x00\x00N'
2024-10-14 13:46:27,764 - DEBUG - Error closing: Operation on closed image
2024-10-14 13:46:29,758 - DEBUG - STREAM b'IHDR' 16 13
2024-10-14 13:46:29,758 - DEBUG - STREAM b'iCCP' 41 3152
2024-10-14 13:46:29,758 - DEBUG - iCCP profile name b'ICC Profile'
2024-10-14 13:46:29,758 - DEBUG - Compression method 0
2024-10-14 13:46:29,758 - DEBUG - STREAM b'eXIf' 3205 138
2024-10-14 13:46:29,758 - DEBUG - STREAM b'pHYs' 3355 9
2024-10-14 13:46:29,758 - DEBUG - STREAM b'iTXt' 3376 471
2024-10-14 13:46:29,758 - DEBUG - STREAM b'iDOT' 3859 28
2024-10-14 13:46:29,758 - DEBUG - b'iDOT' 3859 28 (unknown)
2024-10-14 13:46:29,758 - DEBUG - STREAM b'IDAT' 3899 16384
2024-10-14 13:46:29,759 - DEBUG - STREAM b'IHDR' 16 13
2024-10-14 13:46:29,759 - DEBUG - STREAM b'iCCP' 41 3152
2024-10-14 13:46:29,759 - DEBUG - iCCP profile name b'ICC Profile'
2024-10-14 13:46:29,759 - DEBUG - Compression method 0
2024-10-14 13:46:29,759 - DEBUG - STREAM b'eXIf' 3205 138
2024-10-14 13:46:29,759 - DEBUG - STREAM b'pHYs' 3355 9
2024-10-14 13:46:29,759 - DEBUG - STREAM b'iTXt' 3376 471
2024-10-14 13:46:29,759 - DEBUG - STREAM b'iDOT' 3859 28
2024-10-14 13:46:29,759 - DEBUG - b'iDOT' 3859 28 (unknown)
2024-10-14 13:46:29,759 - DEBUG - STREAM b'IDAT' 3899 16384
2024-10-14 13:46:29,776 - DEBUG - tag: XResolution (282) - type: rational (5) Tag Location: 22 - Data Location: 62 - value: b'\x00\x00\x00\x90\x00\x00\x00\x01'
2024-10-14 13:46:29,776 - DEBUG - tag: YResolution (283) - type: rational (5) Tag Location: 34 - Data Location: 70 - value: b'\x00\x00\x00\x90\x00\x00\x00\x01'
2024-10-14 13:46:29,776 - DEBUG - tag: ResolutionUnit (296) - type: short (3) - value: b'\x00\x02'
2024-10-14 13:46:29,776 - DEBUG - tag: ExifIFD (34665) - type: long (4) - value: b'\x00\x00\x00N'
2024-10-14 13:46:29,777 - DEBUG - Error closing: Operation on closed image
2024-10-14 13:47:02,877 - WARNING - Neither CUDA nor MPS are available - defaulting to CPU. Note: This module is much faster with a GPU.
2024-10-14 13:47:04,164 - DEBUG - load_ssl_context verify=True cert=None trust_env=True http2=False
2024-10-14 13:47:04,165 - DEBUG - load_verify_locations cafile='D:\\deve\\contract_automation\\.venv\\Lib\\site-packages\\certifi\\cacert.pem'
2024-10-14 13:47:04,489 - DEBUG - Patching `client.chat.completions.create` with mode=<Mode.TOOLS: 'tool_call'>
2024-10-14 13:47:04,489 - DEBUG - Using proactor: IocpProactor
2024-10-14 13:47:04,494 - INFO - Template selected based on metadata: airbnb.txt
2024-10-14 13:47:04,508 - DEBUG - STREAM b'IHDR' 16 13
2024-10-14 13:47:04,509 - DEBUG - STREAM b'iCCP' 41 3152
2024-10-14 13:47:04,509 - DEBUG - iCCP profile name b'ICC Profile'
2024-10-14 13:47:04,509 - DEBUG - Compression method 0
2024-10-14 13:47:04,509 - DEBUG - STREAM b'eXIf' 3205 138
2024-10-14 13:47:04,509 - DEBUG - STREAM b'pHYs' 3355 9
2024-10-14 13:47:04,509 - DEBUG - STREAM b'iTXt' 3376 470
2024-10-14 13:47:04,509 - DEBUG - STREAM b'iDOT' 3858 28
2024-10-14 13:47:04,509 - DEBUG - b'iDOT' 3858 28 (unknown)
2024-10-14 13:47:04,509 - DEBUG - STREAM b'IDAT' 3898 16384
2024-10-14 13:47:04,509 - DEBUG - STREAM b'IHDR' 16 13
2024-10-14 13:47:04,509 - DEBUG - STREAM b'iCCP' 41 3152
2024-10-14 13:47:04,509 - DEBUG - iCCP profile name b'ICC Profile'
2024-10-14 13:47:04,509 - DEBUG - Compression method 0
2024-10-14 13:47:04,510 - DEBUG - STREAM b'eXIf' 3205 138
2024-10-14 13:47:04,510 - DEBUG - STREAM b'pHYs' 3355 9
2024-10-14 13:47:04,510 - DEBUG - STREAM b'iTXt' 3376 470
2024-10-14 13:47:04,510 - DEBUG - STREAM b'iDOT' 3858 28
2024-10-14 13:47:04,510 - DEBUG - b'iDOT' 3858 28 (unknown)
2024-10-14 13:47:04,510 - DEBUG - STREAM b'IDAT' 3898 16384
2024-10-14 13:47:04,520 - DEBUG - tag: XResolution (282) - type: rational (5) Tag Location: 22 - Data Location: 62 - value: b'\x00\x00\x00\x90\x00\x00\x00\x01'
2024-10-14 13:47:04,520 - DEBUG - tag: YResolution (283) - type: rational (5) Tag Location: 34 - Data Location: 70 - value: b'\x00\x00\x00\x90\x00\x00\x00\x01'
2024-10-14 13:47:04,520 - DEBUG - tag: ResolutionUnit (296) - type: short (3) - value: b'\x00\x02'
2024-10-14 13:47:04,520 - DEBUG - tag: ExifIFD (34665) - type: long (4) - value: b'\x00\x00\x00N'
2024-10-14 13:47:04,520 - DEBUG - Error closing: Operation on closed image
2024-10-14 13:47:06,501 - DEBUG - STREAM b'IHDR' 16 13
2024-10-14 13:47:06,501 - DEBUG - STREAM b'iCCP' 41 3152
2024-10-14 13:47:06,501 - DEBUG - iCCP profile name b'ICC Profile'
2024-10-14 13:47:06,501 - DEBUG - Compression method 0
2024-10-14 13:47:06,501 - DEBUG - STREAM b'eXIf' 3205 138
2024-10-14 13:47:06,501 - DEBUG - STREAM b'pHYs' 3355 9
2024-10-14 13:47:06,501 - DEBUG - STREAM b'iTXt' 3376 471
2024-10-14 13:47:06,501 - DEBUG - STREAM b'iDOT' 3859 28
2024-10-14 13:47:06,501 - DEBUG - b'iDOT' 3859 28 (unknown)
2024-10-14 13:47:06,501 - DEBUG - STREAM b'IDAT' 3899 16384
2024-10-14 13:47:06,501 - DEBUG - STREAM b'IHDR' 16 13
2024-10-14 13:47:06,501 - DEBUG - STREAM b'iCCP' 41 3152
2024-10-14 13:47:06,501 - DEBUG - iCCP profile name b'ICC Profile'
2024-10-14 13:47:06,501 - DEBUG - Compression method 0
2024-10-14 13:47:06,501 - DEBUG - STREAM b'eXIf' 3205 138
2024-10-14 13:47:06,501 - DEBUG - STREAM b'pHYs' 3355 9
2024-10-14 13:47:06,501 - DEBUG - STREAM b'iTXt' 3376 471
2024-10-14 13:47:06,501 - DEBUG - STREAM b'iDOT' 3859 28
2024-10-14 13:47:06,501 - DEBUG - b'iDOT' 3859 28 (unknown)
2024-10-14 13:47:06,501 - DEBUG - STREAM b'IDAT' 3899 16384
2024-10-14 13:47:06,519 - DEBUG - tag: XResolution (282) - type: rational (5) Tag Location: 22 - Data Location: 62 - value: b'\x00\x00\x00\x90\x00\x00\x00\x01'
2024-10-14 13:47:06,519 - DEBUG - tag: YResolution (283) - type: rational (5) Tag Location: 34 - Data Location: 70 - value: b'\x00\x00\x00\x90\x00\x00\x00\x01'
2024-10-14 13:47:06,519 - DEBUG - tag: ResolutionUnit (296) - type: short (3) - value: b'\x00\x02'
2024-10-14 13:47:06,519 - DEBUG - tag: ExifIFD (34665) - type: long (4) - value: b'\x00\x00\x00N'
2024-10-14 13:47:06,520 - DEBUG - Error closing: Operation on closed image
2024-10-14 13:47:20,942 - WARNING - Neither CUDA nor MPS are available - defaulting to CPU. Note: This module is much faster with a GPU.
2024-10-14 13:47:22,209 - DEBUG - load_ssl_context verify=True cert=None trust_env=True http2=False
2024-10-14 13:47:22,209 - DEBUG - load_verify_locations cafile='D:\\deve\\contract_automation\\.venv\\Lib\\site-packages\\certifi\\cacert.pem'
2024-10-14 13:47:22,533 - DEBUG - Patching `client.chat.completions.create` with mode=<Mode.TOOLS: 'tool_call'>
2024-10-14 13:47:22,534 - DEBUG - Using proactor: IocpProactor
2024-10-14 13:47:22,540 - INFO - Template selected based on metadata: airbnb.txt
2024-10-14 13:47:22,556 - DEBUG - STREAM b'IHDR' 16 13
2024-10-14 13:47:22,557 - DEBUG - STREAM b'iCCP' 41 3152
2024-10-14 13:47:22,557 - DEBUG - iCCP profile name b'ICC Profile'
2024-10-14 13:47:22,557 - DEBUG - Compression method 0
2024-10-14 13:47:22,557 - DEBUG - STREAM b'eXIf' 3205 138
2024-10-14 13:47:22,557 - DEBUG - STREAM b'pHYs' 3355 9
2024-10-14 13:47:22,557 - DEBUG - STREAM b'iTXt' 3376 470
2024-10-14 13:47:22,557 - DEBUG - STREAM b'iDOT' 3858 28
2024-10-14 13:47:22,557 - DEBUG - b'iDOT' 3858 28 (unknown)
2024-10-14 13:47:22,557 - DEBUG - STREAM b'IDAT' 3898 16384
2024-10-14 13:47:22,557 - DEBUG - STREAM b'IHDR' 16 13
2024-10-14 13:47:22,557 - DEBUG - STREAM b'iCCP' 41 3152
2024-10-14 13:47:22,557 - DEBUG - iCCP profile name b'ICC Profile'
2024-10-14 13:47:22,557 - DEBUG - Compression method 0
2024-10-14 13:47:22,557 - DEBUG - STREAM b'eXIf' 3205 138
2024-10-14 13:47:22,557 - DEBUG - STREAM b'pHYs' 3355 9
2024-10-14 13:47:22,557 - DEBUG - STREAM b'iTXt' 3376 470
2024-10-14 13:47:22,557 - DEBUG - STREAM b'iDOT' 3858 28
2024-10-14 13:47:22,557 - DEBUG - b'iDOT' 3858 28 (unknown)
2024-10-14 13:47:22,557 - DEBUG - STREAM b'IDAT' 3898 16384
2024-10-14 13:47:22,567 - DEBUG - tag: XResolution (282) - type: rational (5) Tag Location: 22 - Data Location: 62 - value: b'\x00\x00\x00\x90\x00\x00\x00\x01'
2024-10-14 13:47:22,567 - DEBUG - tag: YResolution (283) - type: rational (5) Tag Location: 34 - Data Location: 70 - value: b'\x00\x00\x00\x90\x00\x00\x00\x01'
2024-10-14 13:47:22,567 - DEBUG - tag: ResolutionUnit (296) - type: short (3) - value: b'\x00\x02'
2024-10-14 13:47:22,567 - DEBUG - tag: ExifIFD (34665) - type: long (4) - value: b'\x00\x00\x00N'
2024-10-14 13:47:22,567 - DEBUG - Error closing: Operation on closed image
2024-10-14 13:47:24,615 - DEBUG - STREAM b'IHDR' 16 13
2024-10-14 13:47:24,615 - DEBUG - STREAM b'iCCP' 41 3152
2024-10-14 13:47:24,615 - DEBUG - iCCP profile name b'ICC Profile'
2024-10-14 13:47:24,615 - DEBUG - Compression method 0
2024-10-14 13:47:24,615 - DEBUG - STREAM b'eXIf' 3205 138
2024-10-14 13:47:24,615 - DEBUG - STREAM b'pHYs' 3355 9
2024-10-14 13:47:24,615 - DEBUG - STREAM b'iTXt' 3376 471
2024-10-14 13:47:24,615 - DEBUG - STREAM b'iDOT' 3859 28
2024-10-14 13:47:24,615 - DEBUG - b'iDOT' 3859 28 (unknown)
2024-10-14 13:47:24,615 - DEBUG - STREAM b'IDAT' 3899 16384
2024-10-14 13:47:24,615 - DEBUG - STREAM b'IHDR' 16 13
2024-10-14 13:47:24,615 - DEBUG - STREAM b'iCCP' 41 3152
2024-10-14 13:47:24,615 - DEBUG - iCCP profile name b'ICC Profile'
2024-10-14 13:47:24,615 - DEBUG - Compression method 0
2024-10-14 13:47:24,615 - DEBUG - STREAM b'eXIf' 3205 138
2024-10-14 13:47:24,616 - DEBUG - STREAM b'pHYs' 3355 9
2024-10-14 13:47:24,616 - DEBUG - STREAM b'iTXt' 3376 471
2024-10-14 13:47:24,616 - DEBUG - STREAM b'iDOT' 3859 28
2024-10-14 13:47:24,616 - DEBUG - b'iDOT' 3859 28 (unknown)
2024-10-14 13:47:24,616 - DEBUG - STREAM b'IDAT' 3899 16384
2024-10-14 13:47:24,633 - DEBUG - tag: XResolution (282) - type: rational (5) Tag Location: 22 - Data Location: 62 - value: b'\x00\x00\x00\x90\x00\x00\x00\x01'
2024-10-14 13:47:24,633 - DEBUG - tag: YResolution (283) - type: rational (5) Tag Location: 34 - Data Location: 70 - value: b'\x00\x00\x00\x90\x00\x00\x00\x01'
2024-10-14 13:47:24,633 - DEBUG - tag: ResolutionUnit (296) - type: short (3) - value: b'\x00\x02'
2024-10-14 13:47:24,633 - DEBUG - tag: ExifIFD (34665) - type: long (4) - value: b'\x00\x00\x00N'
2024-10-14 13:47:24,634 - DEBUG - Error closing: Operation on closed image
2024-10-14 13:48:57,860 - WARNING - Neither CUDA nor MPS are available - defaulting to CPU. Note: This module is much faster with a GPU.
2024-10-14 13:48:59,124 - DEBUG - load_ssl_context verify=True cert=None trust_env=True http2=False
2024-10-14 13:48:59,125 - DEBUG - load_verify_locations cafile='D:\\deve\\contract_automation\\.venv\\Lib\\site-packages\\certifi\\cacert.pem'
2024-10-14 13:48:59,452 - DEBUG - Patching `client.chat.completions.create` with mode=<Mode.TOOLS: 'tool_call'>
2024-10-14 13:48:59,453 - DEBUG - Using proactor: IocpProactor
2024-10-14 13:48:59,458 - INFO - Template selected based on metadata: airbnb.txt
2024-10-14 13:48:59,472 - DEBUG - STREAM b'IHDR' 16 13
2024-10-14 13:48:59,472 - DEBUG - STREAM b'iCCP' 41 3152
2024-10-14 13:48:59,472 - DEBUG - iCCP profile name b'ICC Profile'
2024-10-14 13:48:59,472 - DEBUG - Compression method 0
2024-10-14 13:48:59,472 - DEBUG - STREAM b'eXIf' 3205 138
2024-10-14 13:48:59,472 - DEBUG - STREAM b'pHYs' 3355 9
2024-10-14 13:48:59,472 - DEBUG - STREAM b'iTXt' 3376 470
2024-10-14 13:48:59,472 - DEBUG - STREAM b'iDOT' 3858 28
2024-10-14 13:48:59,472 - DEBUG - b'iDOT' 3858 28 (unknown)
2024-10-14 13:48:59,472 - DEBUG - STREAM b'IDAT' 3898 16384
2024-10-14 13:48:59,473 - DEBUG - STREAM b'IHDR' 16 13
2024-10-14 13:48:59,473 - DEBUG - STREAM b'iCCP' 41 3152
2024-10-14 13:48:59,473 - DEBUG - iCCP profile name b'ICC Profile'
2024-10-14 13:48:59,473 - DEBUG - Compression method 0
2024-10-14 13:48:59,473 - DEBUG - STREAM b'eXIf' 3205 138
2024-10-14 13:48:59,473 - DEBUG - STREAM b'pHYs' 3355 9
2024-10-14 13:48:59,473 - DEBUG - STREAM b'iTXt' 3376 470
2024-10-14 13:48:59,473 - DEBUG - STREAM b'iDOT' 3858 28
2024-10-14 13:48:59,473 - DEBUG - b'iDOT' 3858 28 (unknown)
2024-10-14 13:48:59,473 - DEBUG - STREAM b'IDAT' 3898 16384
2024-10-14 13:48:59,482 - DEBUG - tag: XResolution (282) - type: rational (5) Tag Location: 22 - Data Location: 62 - value: b'\x00\x00\x00\x90\x00\x00\x00\x01'
2024-10-14 13:48:59,482 - DEBUG - tag: YResolution (283) - type: rational (5) Tag Location: 34 - Data Location: 70 - value: b'\x00\x00\x00\x90\x00\x00\x00\x01'
2024-10-14 13:48:59,482 - DEBUG - tag: ResolutionUnit (296) - type: short (3) - value: b'\x00\x02'
2024-10-14 13:48:59,483 - DEBUG - tag: ExifIFD (34665) - type: long (4) - value: b'\x00\x00\x00N'
2024-10-14 13:48:59,483 - DEBUG - Error closing: Operation on closed image
2024-10-14 13:49:01,481 - DEBUG - STREAM b'IHDR' 16 13
2024-10-14 13:49:01,481 - DEBUG - STREAM b'iCCP' 41 3152
2024-10-14 13:49:01,481 - DEBUG - iCCP profile name b'ICC Profile'
2024-10-14 13:49:01,481 - DEBUG - Compression method 0
2024-10-14 13:49:01,481 - DEBUG - STREAM b'eXIf' 3205 138
2024-10-14 13:49:01,481 - DEBUG - STREAM b'pHYs' 3355 9
2024-10-14 13:49:01,481 - DEBUG - STREAM b'iTXt' 3376 471
2024-10-14 13:49:01,481 - DEBUG - STREAM b'iDOT' 3859 28
2024-10-14 13:49:01,481 - DEBUG - b'iDOT' 3859 28 (unknown)
2024-10-14 13:49:01,481 - DEBUG - STREAM b'IDAT' 3899 16384
2024-10-14 13:49:01,481 - DEBUG - STREAM b'IHDR' 16 13
2024-10-14 13:49:01,481 - DEBUG - STREAM b'iCCP' 41 3152
2024-10-14 13:49:01,481 - DEBUG - iCCP profile name b'ICC Profile'
2024-10-14 13:49:01,481 - DEBUG - Compression method 0
2024-10-14 13:49:01,482 - DEBUG - STREAM b'eXIf' 3205 138
2024-10-14 13:49:01,482 - DEBUG - STREAM b'pHYs' 3355 9
2024-10-14 13:49:01,482 - DEBUG - STREAM b'iTXt' 3376 471
2024-10-14 13:49:01,482 - DEBUG - STREAM b'iDOT' 3859 28
2024-10-14 13:49:01,482 - DEBUG - b'iDOT' 3859 28 (unknown)
2024-10-14 13:49:01,482 - DEBUG - STREAM b'IDAT' 3899 16384
2024-10-14 13:49:01,499 - DEBUG - tag: XResolution (282) - type: rational (5) Tag Location: 22 - Data Location: 62 - value: b'\x00\x00\x00\x90\x00\x00\x00\x01'
2024-10-14 13:49:01,499 - DEBUG - tag: YResolution (283) - type: rational (5) Tag Location: 34 - Data Location: 70 - value: b'\x00\x00\x00\x90\x00\x00\x00\x01'
2024-10-14 13:49:01,499 - DEBUG - tag: ResolutionUnit (296) - type: short (3) - value: b'\x00\x02'
2024-10-14 13:49:01,499 - DEBUG - tag: ExifIFD (34665) - type: long (4) - value: b'\x00\x00\x00N'
2024-10-14 13:49:01,500 - DEBUG - Error closing: Operation on closed image
2024-10-14 13:49:04,037 - DEBUG - Document content: ROUMANIE ROMAWI ROMANIA Carte CARTE De |Dentitate IDEnTITY D'iDENTITE seria TR Na 409131 CarD cNP 18...
2024-10-14 13:49:04,037 - ERROR - PII extraction error: name 'ChatCompletion' is not defined
2024-10-14 13:49:04,037 - DEBUG - Document content: ROUMANIE ROVIAINIA ROMANIA Carte Carte DE iDentitate IdEnTITY Didentite seala SS Nr 099994 Card CNP ...
2024-10-14 13:49:04,037 - ERROR - PII extraction error: name 'ChatCompletion' is not defined
2024-10-14 13:50:37,123 - WARNING - Neither CUDA nor MPS are available - defaulting to CPU. Note: This module is much faster with a GPU.
2024-10-14 13:50:38,379 - DEBUG - load_ssl_context verify=True cert=None trust_env=True http2=False
2024-10-14 13:50:38,380 - DEBUG - load_verify_locations cafile='D:\\deve\\contract_automation\\.venv\\Lib\\site-packages\\certifi\\cacert.pem'
2024-10-14 13:50:38,702 - DEBUG - Patching `client.chat.completions.create` with mode=<Mode.TOOLS: 'tool_call'>
2024-10-14 13:50:38,703 - DEBUG - Using proactor: IocpProactor
2024-10-14 13:50:38,709 - INFO - Template selected based on metadata: airbnb.txt
2024-10-14 13:50:38,725 - DEBUG - STREAM b'IHDR' 16 13
2024-10-14 13:50:38,725 - DEBUG - STREAM b'iCCP' 41 3152
2024-10-14 13:50:38,725 - DEBUG - iCCP profile name b'ICC Profile'
2024-10-14 13:50:38,725 - DEBUG - Compression method 0
2024-10-14 13:50:38,725 - DEBUG - STREAM b'eXIf' 3205 138
2024-10-14 13:50:38,725 - DEBUG - STREAM b'pHYs' 3355 9
2024-10-14 13:50:38,725 - DEBUG - STREAM b'iTXt' 3376 470
2024-10-14 13:50:38,725 - DEBUG - STREAM b'iDOT' 3858 28
2024-10-14 13:50:38,725 - DEBUG - b'iDOT' 3858 28 (unknown)
2024-10-14 13:50:38,725 - DEBUG - STREAM b'IDAT' 3898 16384
2024-10-14 13:50:38,726 - DEBUG - STREAM b'IHDR' 16 13
2024-10-14 13:50:38,726 - DEBUG - STREAM b'iCCP' 41 3152
2024-10-14 13:50:38,726 - DEBUG - iCCP profile name b'ICC Profile'
2024-10-14 13:50:38,726 - DEBUG - Compression method 0
2024-10-14 13:50:38,726 - DEBUG - STREAM b'eXIf' 3205 138
2024-10-14 13:50:38,726 - DEBUG - STREAM b'pHYs' 3355 9
2024-10-14 13:50:38,726 - DEBUG - STREAM b'iTXt' 3376 470
2024-10-14 13:50:38,726 - DEBUG - STREAM b'iDOT' 3858 28
2024-10-14 13:50:38,726 - DEBUG - b'iDOT' 3858 28 (unknown)
2024-10-14 13:50:38,726 - DEBUG - STREAM b'IDAT' 3898 16384
2024-10-14 13:50:38,735 - DEBUG - tag: XResolution (282) - type: rational (5) Tag Location: 22 - Data Location: 62 - value: b'\x00\x00\x00\x90\x00\x00\x00\x01'
2024-10-14 13:50:38,735 - DEBUG - tag: YResolution (283) - type: rational (5) Tag Location: 34 - Data Location: 70 - value: b'\x00\x00\x00\x90\x00\x00\x00\x01'
2024-10-14 13:50:38,735 - DEBUG - tag: ResolutionUnit (296) - type: short (3) - value: b'\x00\x02'
2024-10-14 13:50:38,735 - DEBUG - tag: ExifIFD (34665) - type: long (4) - value: b'\x00\x00\x00N'
2024-10-14 13:50:38,736 - DEBUG - Error closing: Operation on closed image
2024-10-14 13:50:40,725 - DEBUG - STREAM b'IHDR' 16 13
2024-10-14 13:50:40,726 - DEBUG - STREAM b'iCCP' 41 3152
2024-10-14 13:50:40,726 - DEBUG - iCCP profile name b'ICC Profile'
2024-10-14 13:50:40,726 - DEBUG - Compression method 0
2024-10-14 13:50:40,726 - DEBUG - STREAM b'eXIf' 3205 138
2024-10-14 13:50:40,726 - DEBUG - STREAM b'pHYs' 3355 9
2024-10-14 13:50:40,726 - DEBUG - STREAM b'iTXt' 3376 471
2024-10-14 13:50:40,726 - DEBUG - STREAM b'iDOT' 3859 28
2024-10-14 13:50:40,726 - DEBUG - b'iDOT' 3859 28 (unknown)
2024-10-14 13:50:40,726 - DEBUG - STREAM b'IDAT' 3899 16384
2024-10-14 13:50:40,726 - DEBUG - STREAM b'IHDR' 16 13
2024-10-14 13:50:40,726 - DEBUG - STREAM b'iCCP' 41 3152
2024-10-14 13:50:40,726 - DEBUG - iCCP profile name b'ICC Profile'
2024-10-14 13:50:40,726 - DEBUG - Compression method 0
2024-10-14 13:50:40,726 - DEBUG - STREAM b'eXIf' 3205 138
2024-10-14 13:50:40,726 - DEBUG - STREAM b'pHYs' 3355 9
2024-10-14 13:50:40,726 - DEBUG - STREAM b'iTXt' 3376 471
2024-10-14 13:50:40,726 - DEBUG - STREAM b'iDOT' 3859 28
2024-10-14 13:50:40,726 - DEBUG - b'iDOT' 3859 28 (unknown)
2024-10-14 13:50:40,726 - DEBUG - STREAM b'IDAT' 3899 16384
2024-10-14 13:50:40,743 - DEBUG - tag: XResolution (282) - type: rational (5) Tag Location: 22 - Data Location: 62 - value: b'\x00\x00\x00\x90\x00\x00\x00\x01'
2024-10-14 13:50:40,743 - DEBUG - tag: YResolution (283) - type: rational (5) Tag Location: 34 - Data Location: 70 - value: b'\x00\x00\x00\x90\x00\x00\x00\x01'
2024-10-14 13:50:40,743 - DEBUG - tag: ResolutionUnit (296) - type: short (3) - value: b'\x00\x02'
2024-10-14 13:50:40,743 - DEBUG - tag: ExifIFD (34665) - type: long (4) - value: b'\x00\x00\x00N'
2024-10-14 13:50:40,744 - DEBUG - Error closing: Operation on closed image
2024-10-14 13:50:43,238 - DEBUG - Document content: ROUMANIE ROMAWI ROMANIA Carte CARTE De |Dentitate IDEnTITY D'iDENTITE seria TR Na 409131 CarD cNP 18...
2024-10-14 13:50:43,239 - ERROR - PII extraction error: name 'ChatCompletion' is not defined
2024-10-14 13:50:43,239 - DEBUG - Document content: ROUMANIE ROVIAINIA ROMANIA Carte Carte DE iDentitate IdEnTITY Didentite seala SS Nr 099994 Card CNP ...
2024-10-14 13:50:43,240 - ERROR - PII extraction error: name 'ChatCompletion' is not defined
2024-10-14 13:52:20,852 - WARNING - Neither CUDA nor MPS are available - defaulting to CPU. Note: This module is much faster with a GPU.
2024-10-14 13:52:22,118 - DEBUG - load_ssl_context verify=True cert=None trust_env=True http2=False
2024-10-14 13:52:22,118 - DEBUG - load_verify_locations cafile='D:\\deve\\contract_automation\\.venv\\Lib\\site-packages\\certifi\\cacert.pem'
2024-10-14 13:52:22,439 - DEBUG - Patching `client.chat.completions.create` with mode=<Mode.TOOLS: 'tool_call'>
2024-10-14 13:52:22,439 - DEBUG - Using proactor: IocpProactor
2024-10-14 13:52:22,444 - INFO - Template selected based on metadata: airbnb.txt
2024-10-14 13:52:22,460 - DEBUG - STREAM b'IHDR' 16 13
2024-10-14 13:52:22,460 - DEBUG - STREAM b'iCCP' 41 3152
2024-10-14 13:52:22,460 - DEBUG - iCCP profile name b'ICC Profile'
2024-10-14 13:52:22,460 - DEBUG - Compression method 0
2024-10-14 13:52:22,461 - DEBUG - STREAM b'eXIf' 3205 138
2024-10-14 13:52:22,461 - DEBUG - STREAM b'pHYs' 3355 9
2024-10-14 13:52:22,461 - DEBUG - STREAM b'iTXt' 3376 470
2024-10-14 13:52:22,461 - DEBUG - STREAM b'iDOT' 3858 28
2024-10-14 13:52:22,461 - DEBUG - b'iDOT' 3858 28 (unknown)
2024-10-14 13:52:22,461 - DEBUG - STREAM b'IDAT' 3898 16384
2024-10-14 13:52:22,461 - DEBUG - STREAM b'IHDR' 16 13
2024-10-14 13:52:22,461 - DEBUG - STREAM b'iCCP' 41 3152
2024-10-14 13:52:22,461 - DEBUG - iCCP profile name b'ICC Profile'
2024-10-14 13:52:22,461 - DEBUG - Compression method 0
2024-10-14 13:52:22,462 - DEBUG - STREAM b'eXIf' 3205 138
2024-10-14 13:52:22,462 - DEBUG - STREAM b'pHYs' 3355 9
2024-10-14 13:52:22,462 - DEBUG - STREAM b'iTXt' 3376 470
2024-10-14 13:52:22,462 - DEBUG - STREAM b'iDOT' 3858 28
2024-10-14 13:52:22,462 - DEBUG - b'iDOT' 3858 28 (unknown)
2024-10-14 13:52:22,462 - DEBUG - STREAM b'IDAT' 3898 16384
2024-10-14 13:52:22,476 - DEBUG - tag: XResolution (282) - type: rational (5) Tag Location: 22 - Data Location: 62 - value: b'\x00\x00\x00\x90\x00\x00\x00\x01'
2024-10-14 13:52:22,476 - DEBUG - tag: YResolution (283) - type: rational (5) Tag Location: 34 - Data Location: 70 - value: b'\x00\x00\x00\x90\x00\x00\x00\x01'
2024-10-14 13:52:22,476 - DEBUG - tag: ResolutionUnit (296) - type: short (3) - value: b'\x00\x02'
2024-10-14 13:52:22,476 - DEBUG - tag: ExifIFD (34665) - type: long (4) - value: b'\x00\x00\x00N'
2024-10-14 13:52:22,477 - DEBUG - Error closing: Operation on closed image
2024-10-14 13:52:24,462 - DEBUG - STREAM b'IHDR' 16 13
2024-10-14 13:52:24,462 - DEBUG - STREAM b'iCCP' 41 3152
2024-10-14 13:52:24,462 - DEBUG - iCCP profile name b'ICC Profile'
2024-10-14 13:52:24,462 - DEBUG - Compression method 0
2024-10-14 13:52:24,462 - DEBUG - STREAM b'eXIf' 3205 138
2024-10-14 13:52:24,463 - DEBUG - STREAM b'pHYs' 3355 9
2024-10-14 13:52:24,463 - DEBUG - STREAM b'iTXt' 3376 471
2024-10-14 13:52:24,463 - DEBUG - STREAM b'iDOT' 3859 28
2024-10-14 13:52:24,463 - DEBUG - b'iDOT' 3859 28 (unknown)
2024-10-14 13:52:24,463 - DEBUG - STREAM b'IDAT' 3899 16384
2024-10-14 13:52:24,463 - DEBUG - STREAM b'IHDR' 16 13
2024-10-14 13:52:24,463 - DEBUG - STREAM b'iCCP' 41 3152
2024-10-14 13:52:24,463 - DEBUG - iCCP profile name b'ICC Profile'
2024-10-14 13:52:24,463 - DEBUG - Compression method 0
2024-10-14 13:52:24,463 - DEBUG - STREAM b'eXIf' 3205 138
2024-10-14 13:52:24,463 - DEBUG - STREAM b'pHYs' 3355 9
2024-10-14 13:52:24,463 - DEBUG - STREAM b'iTXt' 3376 471
2024-10-14 13:52:24,463 - DEBUG - STREAM b'iDOT' 3859 28
2024-10-14 13:52:24,463 - DEBUG - b'iDOT' 3859 28 (unknown)
2024-10-14 13:52:24,463 - DEBUG - STREAM b'IDAT' 3899 16384
2024-10-14 13:52:24,480 - DEBUG - tag: XResolution (282) - type: rational (5) Tag Location: 22 - Data Location: 62 - value: b'\x00\x00\x00\x90\x00\x00\x00\x01'
2024-10-14 13:52:24,481 - DEBUG - tag: YResolution (283) - type: rational (5) Tag Location: 34 - Data Location: 70 - value: b'\x00\x00\x00\x90\x00\x00\x00\x01'
2024-10-14 13:52:24,481 - DEBUG - tag: ResolutionUnit (296) - type: short (3) - value: b'\x00\x02'
2024-10-14 13:52:24,481 - DEBUG - tag: ExifIFD (34665) - type: long (4) - value: b'\x00\x00\x00N'
2024-10-14 13:52:24,481 - DEBUG - Error closing: Operation on closed image
2024-10-14 13:52:26,940 - DEBUG - Document content: ROUMANIE ROMAWI ROMANIA Carte CARTE De |Dentitate IDEnTITY D'iDENTITE seria TR Na 409131 CarD cNP 18...
2024-10-14 13:52:26,940 - ERROR - PII extraction error: name 'ChatCompletion' is not defined
2024-10-14 13:52:26,940 - DEBUG - Document content: ROUMANIE ROVIAINIA ROMANIA Carte Carte DE iDentitate IdEnTITY Didentite seala SS Nr 099994 Card CNP ...
2024-10-14 13:52:26,940 - ERROR - PII extraction error: name 'ChatCompletion' is not defined
2024-10-14 13:53:53,059 - WARNING - Neither CUDA nor MPS are available - defaulting to CPU. Note: This module is much faster with a GPU.
2024-10-14 13:53:54,339 - DEBUG - load_ssl_context verify=True cert=None trust_env=True http2=False
2024-10-14 13:53:54,339 - DEBUG - load_verify_locations cafile='D:\\deve\\contract_automation\\.venv\\Lib\\site-packages\\certifi\\cacert.pem'
2024-10-14 13:53:54,666 - DEBUG - Patching `client.chat.completions.create` with mode=<Mode.TOOLS: 'tool_call'>
2024-10-14 13:53:54,667 - DEBUG - Using proactor: IocpProactor
2024-10-14 13:53:54,671 - INFO - Template selected based on metadata: airbnb.txt
2024-10-14 13:53:54,686 - DEBUG - STREAM b'IHDR' 16 13
2024-10-14 13:53:54,686 - DEBUG - STREAM b'iCCP' 41 3152
2024-10-14 13:53:54,686 - DEBUG - iCCP profile name b'ICC Profile'
2024-10-14 13:53:54,686 - DEBUG - Compression method 0
2024-10-14 13:53:54,687 - DEBUG - STREAM b'eXIf' 3205 138
2024-10-14 13:53:54,687 - DEBUG - STREAM b'pHYs' 3355 9
2024-10-14 13:53:54,687 - DEBUG - STREAM b'iTXt' 3376 470
2024-10-14 13:53:54,687 - DEBUG - STREAM b'iDOT' 3858 28
2024-10-14 13:53:54,687 - DEBUG - b'iDOT' 3858 28 (unknown)
2024-10-14 13:53:54,687 - DEBUG - STREAM b'IDAT' 3898 16384
2024-10-14 13:53:54,687 - DEBUG - STREAM b'IHDR' 16 13
2024-10-14 13:53:54,687 - DEBUG - STREAM b'iCCP' 41 3152
2024-10-14 13:53:54,687 - DEBUG - iCCP profile name b'ICC Profile'
2024-10-14 13:53:54,687 - DEBUG - Compression method 0
2024-10-14 13:53:54,687 - DEBUG - STREAM b'eXIf' 3205 138
2024-10-14 13:53:54,687 - DEBUG - STREAM b'pHYs' 3355 9
2024-10-14 13:53:54,687 - DEBUG - STREAM b'iTXt' 3376 470
2024-10-14 13:53:54,687 - DEBUG - STREAM b'iDOT' 3858 28
2024-10-14 13:53:54,687 - DEBUG - b'iDOT' 3858 28 (unknown)
2024-10-14 13:53:54,687 - DEBUG - STREAM b'IDAT' 3898 16384
2024-10-14 13:53:54,697 - DEBUG - tag: XResolution (282) - type: rational (5) Tag Location: 22 - Data Location: 62 - value: b'\x00\x00\x00\x90\x00\x00\x00\x01'
2024-10-14 13:53:54,697 - DEBUG - tag: YResolution (283) - type: rational (5) Tag Location: 34 - Data Location: 70 - value: b'\x00\x00\x00\x90\x00\x00\x00\x01'
2024-10-14 13:53:54,697 - DEBUG - tag: ResolutionUnit (296) - type: short (3) - value: b'\x00\x02'
2024-10-14 13:53:54,697 - DEBUG - tag: ExifIFD (34665) - type: long (4) - value: b'\x00\x00\x00N'
2024-10-14 13:53:54,698 - DEBUG - Error closing: Operation on closed image
2024-10-14 13:53:56,715 - DEBUG - STREAM b'IHDR' 16 13
2024-10-14 13:53:56,715 - DEBUG - STREAM b'iCCP' 41 3152
2024-10-14 13:53:56,715 - DEBUG - iCCP profile name b'ICC Profile'
2024-10-14 13:53:56,715 - DEBUG - Compression method 0
2024-10-14 13:53:56,715 - DEBUG - STREAM b'eXIf' 3205 138
2024-10-14 13:53:56,715 - DEBUG - STREAM b'pHYs' 3355 9
2024-10-14 13:53:56,715 - DEBUG - STREAM b'iTXt' 3376 471
2024-10-14 13:53:56,715 - DEBUG - STREAM b'iDOT' 3859 28
2024-10-14 13:53:56,715 - DEBUG - b'iDOT' 3859 28 (unknown)
2024-10-14 13:53:56,716 - DEBUG - STREAM b'IDAT' 3899 16384
2024-10-14 13:53:56,716 - DEBUG - STREAM b'IHDR' 16 13
2024-10-14 13:53:56,716 - DEBUG - STREAM b'iCCP' 41 3152
2024-10-14 13:53:56,716 - DEBUG - iCCP profile name b'ICC Profile'
2024-10-14 13:53:56,716 - DEBUG - Compression method 0
2024-10-14 13:53:56,716 - DEBUG - STREAM b'eXIf' 3205 138
2024-10-14 13:53:56,716 - DEBUG - STREAM b'pHYs' 3355 9
2024-10-14 13:53:56,716 - DEBUG - STREAM b'iTXt' 3376 471
2024-10-14 13:53:56,716 - DEBUG - STREAM b'iDOT' 3859 28
2024-10-14 13:53:56,716 - DEBUG - b'iDOT' 3859 28 (unknown)
2024-10-14 13:53:56,716 - DEBUG - STREAM b'IDAT' 3899 16384
2024-10-14 13:53:56,733 - DEBUG - tag: XResolution (282) - type: rational (5) Tag Location: 22 - Data Location: 62 - value: b'\x00\x00\x00\x90\x00\x00\x00\x01'
2024-10-14 13:53:56,733 - DEBUG - tag: YResolution (283) - type: rational (5) Tag Location: 34 - Data Location: 70 - value: b'\x00\x00\x00\x90\x00\x00\x00\x01'
2024-10-14 13:53:56,733 - DEBUG - tag: ResolutionUnit (296) - type: short (3) - value: b'\x00\x02'
2024-10-14 13:53:56,733 - DEBUG - tag: ExifIFD (34665) - type: long (4) - value: b'\x00\x00\x00N'
2024-10-14 13:53:56,734 - DEBUG - Error closing: Operation on closed image
2024-10-14 13:53:59,300 - DEBUG - Document content: ROUMANIE ROMAWI ROMANIA Carte CARTE De |Dentitate IDEnTITY D'iDENTITE seria TR Na 409131 CarD cNP 18...
2024-10-14 13:53:59,300 - ERROR - PII extraction error: name 'ChatCompletion' is not defined
2024-10-14 13:53:59,300 - DEBUG - Document content: ROUMANIE ROVIAINIA ROMANIA Carte Carte DE iDentitate IdEnTITY Didentite seala SS Nr 099994 Card CNP ...
2024-10-14 13:53:59,300 - ERROR - PII extraction error: name 'ChatCompletion' is not defined
2024-10-14 13:54:42,629 - WARNING - Neither CUDA nor MPS are available - defaulting to CPU. Note: This module is much faster with a GPU.
2024-10-14 13:54:43,884 - DEBUG - load_ssl_context verify=True cert=None trust_env=True http2=False
2024-10-14 13:54:43,885 - DEBUG - load_verify_locations cafile='D:\\deve\\contract_automation\\.venv\\Lib\\site-packages\\certifi\\cacert.pem'
2024-10-14 13:54:44,206 - DEBUG - Patching `client.chat.completions.create` with mode=<Mode.TOOLS: 'tool_call'>
2024-10-14 13:54:44,207 - DEBUG - Using proactor: IocpProactor
2024-10-14 13:54:44,211 - INFO - Template selected based on metadata: airbnb.txt
2024-10-14 13:54:44,227 - DEBUG - STREAM b'IHDR' 16 13
2024-10-14 13:54:44,227 - DEBUG - STREAM b'iCCP' 41 3152
2024-10-14 13:54:44,227 - DEBUG - iCCP profile name b'ICC Profile'
2024-10-14 13:54:44,227 - DEBUG - Compression method 0
2024-10-14 13:54:44,227 - DEBUG - STREAM b'eXIf' 3205 138
2024-10-14 13:54:44,227 - DEBUG - STREAM b'pHYs' 3355 9
2024-10-14 13:54:44,227 - DEBUG - STREAM b'iTXt' 3376 470
2024-10-14 13:54:44,227 - DEBUG - STREAM b'iDOT' 3858 28
2024-10-14 13:54:44,227 - DEBUG - b'iDOT' 3858 28 (unknown)
2024-10-14 13:54:44,227 - DEBUG - STREAM b'IDAT' 3898 16384
2024-10-14 13:54:44,227 - DEBUG - STREAM b'IHDR' 16 13
2024-10-14 13:54:44,227 - DEBUG - STREAM b'iCCP' 41 3152
2024-10-14 13:54:44,227 - DEBUG - iCCP profile name b'ICC Profile'
2024-10-14 13:54:44,227 - DEBUG - Compression method 0
2024-10-14 13:54:44,227 - DEBUG - STREAM b'eXIf' 3205 138
2024-10-14 13:54:44,228 - DEBUG - STREAM b'pHYs' 3355 9
2024-10-14 13:54:44,228 - DEBUG - STREAM b'iTXt' 3376 470
2024-10-14 13:54:44,228 - DEBUG - STREAM b'iDOT' 3858 28
2024-10-14 13:54:44,228 - DEBUG - b'iDOT' 3858 28 (unknown)
2024-10-14 13:54:44,228 - DEBUG - STREAM b'IDAT' 3898 16384
2024-10-14 13:54:44,239 - DEBUG - tag: XResolution (282) - type: rational (5) Tag Location: 22 - Data Location: 62 - value: b'\x00\x00\x00\x90\x00\x00\x00\x01'
2024-10-14 13:54:44,239 - DEBUG - tag: YResolution (283) - type: rational (5) Tag Location: 34 - Data Location: 70 - value: b'\x00\x00\x00\x90\x00\x00\x00\x01'
2024-10-14 13:54:44,239 - DEBUG - tag: ResolutionUnit (296) - type: short (3) - value: b'\x00\x02'
2024-10-14 13:54:44,239 - DEBUG - tag: ExifIFD (34665) - type: long (4) - value: b'\x00\x00\x00N'
2024-10-14 13:54:44,240 - DEBUG - Error closing: Operation on closed image
2024-10-14 13:54:46,263 - DEBUG - STREAM b'IHDR' 16 13
2024-10-14 13:54:46,264 - DEBUG - STREAM b'iCCP' 41 3152
2024-10-14 13:54:46,264 - DEBUG - iCCP profile name b'ICC Profile'
2024-10-14 13:54:46,264 - DEBUG - Compression method 0
2024-10-14 13:54:46,264 - DEBUG - STREAM b'eXIf' 3205 138
2024-10-14 13:54:46,264 - DEBUG - STREAM b'pHYs' 3355 9
2024-10-14 13:54:46,264 - DEBUG - STREAM b'iTXt' 3376 471
2024-10-14 13:54:46,264 - DEBUG - STREAM b'iDOT' 3859 28
2024-10-14 13:54:46,264 - DEBUG - b'iDOT' 3859 28 (unknown)
2024-10-14 13:54:46,264 - DEBUG - STREAM b'IDAT' 3899 16384
2024-10-14 13:54:46,264 - DEBUG - STREAM b'IHDR' 16 13
2024-10-14 13:54:46,264 - DEBUG - STREAM b'iCCP' 41 3152
2024-10-14 13:54:46,264 - DEBUG - iCCP profile name b'ICC Profile'
2024-10-14 13:54:46,264 - DEBUG - Compression method 0
2024-10-14 13:54:46,264 - DEBUG - STREAM b'eXIf' 3205 138
2024-10-14 13:54:46,264 - DEBUG - STREAM b'pHYs' 3355 9
2024-10-14 13:54:46,264 - DEBUG - STREAM b'iTXt' 3376 471
2024-10-14 13:54:46,264 - DEBUG - STREAM b'iDOT' 3859 28
2024-10-14 13:54:46,264 - DEBUG - b'iDOT' 3859 28 (unknown)
2024-10-14 13:54:46,264 - DEBUG - STREAM b'IDAT' 3899 16384
2024-10-14 13:54:46,281 - DEBUG - tag: XResolution (282) - type: rational (5) Tag Location: 22 - Data Location: 62 - value: b'\x00\x00\x00\x90\x00\x00\x00\x01'
2024-10-14 13:54:46,281 - DEBUG - tag: YResolution (283) - type: rational (5) Tag Location: 34 - Data Location: 70 - value: b'\x00\x00\x00\x90\x00\x00\x00\x01'
2024-10-14 13:54:46,281 - DEBUG - tag: ResolutionUnit (296) - type: short (3) - value: b'\x00\x02'
2024-10-14 13:54:46,282 - DEBUG - tag: ExifIFD (34665) - type: long (4) - value: b'\x00\x00\x00N'
2024-10-14 13:54:46,282 - DEBUG - Error closing: Operation on closed image
2024-10-14 13:54:48,819 - DEBUG - Document content: ROUMANIE ROMAWI ROMANIA Carte CARTE De |Dentitate IDEnTITY D'iDENTITE seria TR Na 409131 CarD cNP 18...
2024-10-14 13:54:48,819 - ERROR - PII extraction error: name 'ChatCompletion' is not defined
2024-10-14 13:54:48,819 - DEBUG - Document content: ROUMANIE ROVIAINIA ROMANIA Carte Carte DE iDentitate IdEnTITY Didentite seala SS Nr 099994 Card CNP ...
2024-10-14 13:54:48,819 - ERROR - PII extraction error: name 'ChatCompletion' is not defined
2024-10-14 13:56:16,555 - WARNING - Neither CUDA nor MPS are available - defaulting to CPU. Note: This module is much faster with a GPU.
2024-10-14 13:56:17,811 - DEBUG - load_ssl_context verify=True cert=None trust_env=True http2=False
2024-10-14 13:56:17,811 - DEBUG - load_verify_locations cafile='D:\\deve\\contract_automation\\.venv\\Lib\\site-packages\\certifi\\cacert.pem'
2024-10-14 13:56:18,141 - DEBUG - Patching `client.chat.completions.create` with mode=<Mode.TOOLS: 'tool_call'>
2024-10-14 13:56:18,142 - DEBUG - Using proactor: IocpProactor
2024-10-14 13:56:18,162 - DEBUG - STREAM b'IHDR' 16 13
2024-10-14 13:56:18,163 - DEBUG - STREAM b'iCCP' 41 3152
2024-10-14 13:56:18,163 - DEBUG - iCCP profile name b'ICC Profile'
2024-10-14 13:56:18,163 - DEBUG - Compression method 0
2024-10-14 13:56:18,163 - DEBUG - STREAM b'eXIf' 3205 138
2024-10-14 13:56:18,163 - DEBUG - STREAM b'pHYs' 3355 9
2024-10-14 13:56:18,163 - DEBUG - STREAM b'iTXt' 3376 470
2024-10-14 13:56:18,163 - DEBUG - STREAM b'iDOT' 3858 28
2024-10-14 13:56:18,163 - DEBUG - b'iDOT' 3858 28 (unknown)
2024-10-14 13:56:18,163 - DEBUG - STREAM b'IDAT' 3898 16384
2024-10-14 13:56:18,163 - DEBUG - STREAM b'IHDR' 16 13
2024-10-14 13:56:18,163 - DEBUG - STREAM b'iCCP' 41 3152
2024-10-14 13:56:18,163 - DEBUG - iCCP profile name b'ICC Profile'
2024-10-14 13:56:18,163 - DEBUG - Compression method 0
2024-10-14 13:56:18,163 - DEBUG - STREAM b'eXIf' 3205 138
2024-10-14 13:56:18,163 - DEBUG - STREAM b'pHYs' 3355 9
2024-10-14 13:56:18,163 - DEBUG - STREAM b'iTXt' 3376 470
2024-10-14 13:56:18,163 - DEBUG - STREAM b'iDOT' 3858 28
2024-10-14 13:56:18,163 - DEBUG - b'iDOT' 3858 28 (unknown)
2024-10-14 13:56:18,163 - DEBUG - STREAM b'IDAT' 3898 16384
2024-10-14 13:56:18,174 - DEBUG - tag: XResolution (282) - type: rational (5) Tag Location: 22 - Data Location: 62 - value: b'\x00\x00\x00\x90\x00\x00\x00\x01'
2024-10-14 13:56:18,174 - DEBUG - tag: YResolution (283) - type: rational (5) Tag Location: 34 - Data Location: 70 - value: b'\x00\x00\x00\x90\x00\x00\x00\x01'
2024-10-14 13:56:18,174 - DEBUG - tag: ResolutionUnit (296) - type: short (3) - value: b'\x00\x02'
2024-10-14 13:56:18,174 - DEBUG - tag: ExifIFD (34665) - type: long (4) - value: b'\x00\x00\x00N'
2024-10-14 13:56:18,174 - DEBUG - Error closing: Operation on closed image
2024-10-14 13:56:20,211 - DEBUG - STREAM b'IHDR' 16 13
2024-10-14 13:56:20,211 - DEBUG - STREAM b'iCCP' 41 3152
2024-10-14 13:56:20,211 - DEBUG - iCCP profile name b'ICC Profile'
2024-10-14 13:56:20,211 - DEBUG - Compression method 0
2024-10-14 13:56:20,211 - DEBUG - STREAM b'eXIf' 3205 138
2024-10-14 13:56:20,211 - DEBUG - STREAM b'pHYs' 3355 9
2024-10-14 13:56:20,211 - DEBUG - STREAM b'iTXt' 3376 471
2024-10-14 13:56:20,211 - DEBUG - STREAM b'iDOT' 3859 28
2024-10-14 13:56:20,211 - DEBUG - b'iDOT' 3859 28 (unknown)
2024-10-14 13:56:20,211 - DEBUG - STREAM b'IDAT' 3899 16384
2024-10-14 13:56:20,211 - DEBUG - STREAM b'IHDR' 16 13
2024-10-14 13:56:20,211 - DEBUG - STREAM b'iCCP' 41 3152
2024-10-14 13:56:20,211 - DEBUG - iCCP profile name b'ICC Profile'
2024-10-14 13:56:20,211 - DEBUG - Compression method 0
2024-10-14 13:56:20,211 - DEBUG - STREAM b'eXIf' 3205 138
2024-10-14 13:56:20,212 - DEBUG - STREAM b'pHYs' 3355 9
2024-10-14 13:56:20,212 - DEBUG - STREAM b'iTXt' 3376 471
2024-10-14 13:56:20,212 - DEBUG - STREAM b'iDOT' 3859 28
2024-10-14 13:56:20,212 - DEBUG - b'iDOT' 3859 28 (unknown)
2024-10-14 13:56:20,212 - DEBUG - STREAM b'IDAT' 3899 16384
2024-10-14 13:56:20,229 - DEBUG - tag: XResolution (282) - type: rational (5) Tag Location: 22 - Data Location: 62 - value: b'\x00\x00\x00\x90\x00\x00\x00\x01'
2024-10-14 13:56:20,229 - DEBUG - tag: YResolution (283) - type: rational (5) Tag Location: 34 - Data Location: 70 - value: b'\x00\x00\x00\x90\x00\x00\x00\x01'
2024-10-14 13:56:20,229 - DEBUG - tag: ResolutionUnit (296) - type: short (3) - value: b'\x00\x02'
2024-10-14 13:56:20,229 - DEBUG - tag: ExifIFD (34665) - type: long (4) - value: b'\x00\x00\x00N'
2024-10-14 13:56:20,230 - DEBUG - Error closing: Operation on closed image
2024-10-14 13:56:22,762 - DEBUG - Document content: ROUMANIE ROMAWI ROMANIA Carte CARTE De |Dentitate IDEnTITY D'iDENTITE seria TR Na 409131 CarD cNP 18...
2024-10-14 13:56:22,769 - DEBUG - Instructor Request: mode.value='tool_call', response_model=<class 'models.PIIData'>, new_kwargs={'model': 'gpt-4', 'messages': [{'role': 'system', 'content': '\nYou are an AI agent specializing in contract creation and personal information extraction. \n\nYour role is:\n 1. Guide the process of extracting information from documents..\n 2. Verifying the extracted information with human input.\n 3. Identifying parties. \n 4. Constructing a contract. \n\n\nFollow the workflow precisely and ask for human input when needed.\n\n'}, {'role': 'user', 'content': "Extract the name and address from the given text:\n\nROUMANIE ROMAWI ROMANIA Carte CARTE De |Dentitate IDEnTITY D'iDENTITE seria TR Na 409131 CarD cNP 1891113341181 Nume/Nom/Last name T525M ISPILANTE Prenume/Prenom/First namo SENTIMENT BRUSLI Cetatenle/Nallonallte/Nallonallly Sox SexeiSox Romn\u0103 ROU M Loc nastere/Liou do naissancelPlace ol birth Or\u0219. Videle Jud.Teleorman Dom IlulAdresse/Addrass Videle Jud: Teleorman Sos. Giurgiului nr.1 695 TR Emisa dolDelivree parlIssuad by ValabilltatelValldlte Valldlty SPCLEP Videle 04.11.11-13.11.2018 IDROUISPILANTE<<SENTIMENT <BRUSLI<<<< TR409131<0R0u8911137M181113513411813 Or\u0219:"}], 'tools': [{'type': 'function', 'function': {'name': 'PIIData', 'description': 'Correctly extracted `PIIData` with all the required parameters with correct types', 'parameters': {'properties': {'name': {'description': 'Full name of the person', 'title': 'Name', 'type': 'string'}, 'address': {'description': 'Residential address of the person', 'title': 'Address', 'type': 'string'}}, 'required': ['address', 'name'], 'type': 'object'}}}], 'tool_choice': {'type': 'function', 'function': {'name': 'PIIData'}}}
2024-10-14 13:56:22,770 - DEBUG - max_retries: 1
2024-10-14 13:56:22,773 - DEBUG - Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'json_data': {'messages': [{'role': 'system', 'content': '\nYou are an AI agent specializing in contract creation and personal information extraction. \n\nYour role is:\n 1. Guide the process of extracting information from documents..\n 2. Verifying the extracted information with human input.\n 3. Identifying parties. \n 4. Constructing a contract. \n\n\nFollow the workflow precisely and ask for human input when needed.\n\n'}, {'role': 'user', 'content': "Extract the name and address from the given text:\n\nROUMANIE ROMAWI ROMANIA Carte CARTE De |Dentitate IDEnTITY D'iDENTITE seria TR Na 409131 CarD cNP 1891113341181 Nume/Nom/Last name T525M ISPILANTE Prenume/Prenom/First namo SENTIMENT BRUSLI Cetatenle/Nallonallte/Nallonallly Sox SexeiSox Romn\u0103 ROU M Loc nastere/Liou do naissancelPlace ol birth Or\u0219. Videle Jud.Teleorman Dom IlulAdresse/Addrass Videle Jud: Teleorman Sos. Giurgiului nr.1 695 TR Emisa dolDelivree parlIssuad by ValabilltatelValldlte Valldlty SPCLEP Videle 04.11.11-13.11.2018 IDROUISPILANTE<<SENTIMENT <BRUSLI<<<< TR409131<0R0u8911137M181113513411813 Or\u0219:"}], 'model': 'gpt-4', 'tool_choice': {'type': 'function', 'function': {'name': 'PIIData'}}, 'tools': [{'type': 'function', 'function': {'name': 'PIIData', 'description': 'Correctly extracted `PIIData` with all the required parameters with correct types', 'parameters': {'properties': {'name': {'description': 'Full name of the person', 'title': 'Name', 'type': 'string'}, 'address': {'description': 'Residential address of the person', 'title': 'Address', 'type': 'string'}}, 'required': ['address', 'name'], 'type': 'object'}}}]}}
2024-10-14 13:56:22,812 - DEBUG - Sending HTTP Request: POST https://api.openai.com/v1/chat/completions
2024-10-14 13:56:22,812 - DEBUG - connect_tcp.started host='api.openai.com' port=443 local_address=None timeout=5.0 socket_options=None
2024-10-14 13:56:22,828 - DEBUG - connect_tcp.complete return_value=<httpcore._backends.sync.SyncStream object at 0x000002059C29E510>
2024-10-14 13:56:22,828 - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x000002059C0F1BD0> server_hostname='api.openai.com' timeout=5.0
2024-10-14 13:56:22,840 - DEBUG - start_tls.complete return_value=<httpcore._backends.sync.SyncStream object at 0x000002059C29E240>
2024-10-14 13:56:22,840 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-10-14 13:56:22,840 - DEBUG - send_request_headers.complete
2024-10-14 13:56:22,840 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-10-14 13:56:22,840 - DEBUG - send_request_body.complete
2024-10-14 13:56:22,840 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-10-14 13:56:25,264 - DEBUG - receive_response_headers.failed exception=KeyboardInterrupt()
2024-10-14 13:56:25,265 - DEBUG - response_closed.started
2024-10-14 13:56:25,265 - DEBUG - response_closed.complete
2024-10-14 13:56:25,478 - ERROR - Task exception was never retrieved
future: <Task finished name='Task-1' coro=<agent_workflow() done, defined at D:\deve\contract_automation\src\main.py:25> exception=KeyboardInterrupt()>
Traceback (most recent call last):
  File "D:\deve\contract_automation\src\main.py", line 107, in <module>
    asyncio.run(agent_workflow())
  File "D:\deve\contract_automation\.venv\Lib\site-packages\nest_asyncio.py", line 30, in run
    return loop.run_until_complete(task)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\deve\contract_automation\.venv\Lib\site-packages\nest_asyncio.py", line 92, in run_until_complete
    self._run_once()
  File "D:\deve\contract_automation\.venv\Lib\site-packages\nest_asyncio.py", line 133, in _run_once
    handle._run()
  File "C:\Users\neuro\.rye\py\cpython@3.12.0\Lib\asyncio\events.py", line 84, in _run
    self._context.run(self._callback, *self._args)
  File "C:\Users\neuro\.rye\py\cpython@3.12.0\Lib\asyncio\tasks.py", line 386, in __wakeup
    self.__step()
  File "C:\Users\neuro\.rye\py\cpython@3.12.0\Lib\asyncio\tasks.py", line 293, in __step
    self.__step_run_and_handle_result(exc)
  File "C:\Users\neuro\.rye\py\cpython@3.12.0\Lib\asyncio\tasks.py", line 304, in __step_run_and_handle_result
    result = coro.send(None)
             ^^^^^^^^^^^^^^^
  File "D:\deve\contract_automation\src\main.py", line 42, in agent_workflow
    pii = extract_pii(text)
          ^^^^^^^^^^^^^^^^^
  File "D:\deve\contract_automation\src\ai_functions.py", line 109, in extract_pii
    return client.chat.completions.create(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\deve\contract_automation\.venv\Lib\site-packages\instructor\patch.py", line 291, in new_create_sync
    response = retry_sync(
               ^^^^^^^^^^^
  File "D:\deve\contract_automation\.venv\Lib\site-packages\instructor\retry.py", line 189, in retry_sync
    for attempt in max_retries:
  File "D:\deve\contract_automation\.venv\Lib\site-packages\tenacity\__init__.py", line 443, in __iter__
    do = self.iter(retry_state=retry_state)
         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\deve\contract_automation\.venv\Lib\site-packages\tenacity\__init__.py", line 376, in iter
    result = action(retry_state)
             ^^^^^^^^^^^^^^^^^^^
  File "D:\deve\contract_automation\.venv\Lib\site-packages\tenacity\__init__.py", line 398, in <lambda>
    self._add_action_func(lambda rs: rs.outcome.result())
                                     ^^^^^^^^^^^^^^^^^^^
  File "C:\Users\neuro\.rye\py\cpython@3.12.0\Lib\concurrent\futures\_base.py", line 449, in result
    return self.__get_result()
           ^^^^^^^^^^^^^^^^^^^
  File "C:\Users\neuro\.rye\py\cpython@3.12.0\Lib\concurrent\futures\_base.py", line 401, in __get_result
    raise self._exception
  File "D:\deve\contract_automation\.venv\Lib\site-packages\instructor\retry.py", line 192, in retry_sync
    response = func(*args, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^
  File "D:\deve\contract_automation\.venv\Lib\site-packages\openai\_utils\_utils.py", line 274, in wrapper
    return func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^
  File "D:\deve\contract_automation\.venv\Lib\site-packages\openai\resources\chat\completions.py", line 742, in create
    return self._post(
           ^^^^^^^^^^^
  File "D:\deve\contract_automation\.venv\Lib\site-packages\openai\_base_client.py", line 1270, in post
    return cast(ResponseT, self.request(cast_to, opts, stream=stream, stream_cls=stream_cls))
                           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\deve\contract_automation\.venv\Lib\site-packages\openai\_base_client.py", line 947, in request
    return self._request(
           ^^^^^^^^^^^^^^
  File "D:\deve\contract_automation\.venv\Lib\site-packages\openai\_base_client.py", line 983, in _request
    response = self._client.send(
               ^^^^^^^^^^^^^^^^^^
  File "D:\deve\contract_automation\.venv\Lib\site-packages\httpx\_client.py", line 926, in send
    response = self._send_handling_auth(
               ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\deve\contract_automation\.venv\Lib\site-packages\httpx\_client.py", line 954, in _send_handling_auth
    response = self._send_handling_redirects(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\deve\contract_automation\.venv\Lib\site-packages\httpx\_client.py", line 991, in _send_handling_redirects
    response = self._send_single_request(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\deve\contract_automation\.venv\Lib\site-packages\httpx\_client.py", line 1027, in _send_single_request
    response = transport.handle_request(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\deve\contract_automation\.venv\Lib\site-packages\httpx\_transports\default.py", line 236, in handle_request
    resp = self._pool.handle_request(req)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\deve\contract_automation\.venv\Lib\site-packages\httpcore\_sync\connection_pool.py", line 216, in handle_request
    raise exc from None
  File "D:\deve\contract_automation\.venv\Lib\site-packages\httpcore\_sync\connection_pool.py", line 196, in handle_request
    response = connection.handle_request(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\deve\contract_automation\.venv\Lib\site-packages\httpcore\_sync\connection.py", line 101, in handle_request
    return self._connection.handle_request(request)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\deve\contract_automation\.venv\Lib\site-packages\httpcore\_sync\http11.py", line 143, in handle_request
    raise exc
  File "D:\deve\contract_automation\.venv\Lib\site-packages\httpcore\_sync\http11.py", line 113, in handle_request
    ) = self._receive_response_headers(**kwargs)
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\deve\contract_automation\.venv\Lib\site-packages\httpcore\_sync\http11.py", line 186, in _receive_response_headers
    event = self._receive_event(timeout=timeout)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\deve\contract_automation\.venv\Lib\site-packages\httpcore\_sync\http11.py", line 224, in _receive_event
    data = self._network_stream.read(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\deve\contract_automation\.venv\Lib\site-packages\httpcore\_backends\sync.py", line 126, in read
    return self._sock.recv(max_bytes)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\neuro\.rye\py\cpython@3.12.0\Lib\ssl.py", line 1234, in recv
    return self.read(buflen)
           ^^^^^^^^^^^^^^^^^
  File "C:\Users\neuro\.rye\py\cpython@3.12.0\Lib\ssl.py", line 1107, in read
    return self._sslobj.read(len)
           ^^^^^^^^^^^^^^^^^^^^^^
KeyboardInterrupt
2024-10-14 13:57:55,787 - WARNING - Neither CUDA nor MPS are available - defaulting to CPU. Note: This module is much faster with a GPU.
2024-10-14 13:57:57,051 - DEBUG - load_ssl_context verify=True cert=None trust_env=True http2=False
2024-10-14 13:57:57,051 - DEBUG - load_verify_locations cafile='D:\\deve\\contract_automation\\.venv\\Lib\\site-packages\\certifi\\cacert.pem'
2024-10-14 13:57:57,370 - DEBUG - Patching `client.chat.completions.create` with mode=<Mode.TOOLS: 'tool_call'>
2024-10-14 13:59:58,776 - WARNING - Neither CUDA nor MPS are available - defaulting to CPU. Note: This module is much faster with a GPU.
2024-10-14 14:00:00,038 - DEBUG - load_ssl_context verify=True cert=None trust_env=True http2=False
2024-10-14 14:00:00,039 - DEBUG - load_verify_locations cafile='D:\\deve\\contract_automation\\.venv\\Lib\\site-packages\\certifi\\cacert.pem'
2024-10-14 14:00:00,362 - DEBUG - Patching `client.chat.completions.create` with mode=<Mode.TOOLS: 'tool_call'>
2024-10-14 14:01:57,404 - WARNING - Neither CUDA nor MPS are available - defaulting to CPU. Note: This module is much faster with a GPU.
2024-10-14 14:01:58,665 - DEBUG - load_ssl_context verify=True cert=None trust_env=True http2=False
2024-10-14 14:01:58,666 - DEBUG - load_verify_locations cafile='D:\\deve\\contract_automation\\.venv\\Lib\\site-packages\\certifi\\cacert.pem'
2024-10-14 14:01:58,984 - DEBUG - Patching `client.chat.completions.create` with mode=<Mode.TOOLS: 'tool_call'>
2024-10-14 14:03:20,198 - WARNING - Neither CUDA nor MPS are available - defaulting to CPU. Note: This module is much faster with a GPU.
2024-10-14 14:03:21,461 - DEBUG - load_ssl_context verify=True cert=None trust_env=True http2=False
2024-10-14 14:03:21,461 - DEBUG - load_verify_locations cafile='D:\\deve\\contract_automation\\.venv\\Lib\\site-packages\\certifi\\cacert.pem'
2024-10-14 14:03:21,777 - DEBUG - Patching `client.chat.completions.create` with mode=<Mode.TOOLS: 'tool_call'>
2024-10-14 14:03:21,777 - DEBUG - Using proactor: IocpProactor
2024-10-14 14:03:21,796 - DEBUG - STREAM b'IHDR' 16 13
2024-10-14 14:03:21,797 - DEBUG - STREAM b'iCCP' 41 3152
2024-10-14 14:03:21,797 - DEBUG - iCCP profile name b'ICC Profile'
2024-10-14 14:03:21,797 - DEBUG - Compression method 0
2024-10-14 14:03:21,797 - DEBUG - STREAM b'eXIf' 3205 138
2024-10-14 14:03:21,797 - DEBUG - STREAM b'pHYs' 3355 9
2024-10-14 14:03:21,797 - DEBUG - STREAM b'iTXt' 3376 470
2024-10-14 14:03:21,797 - DEBUG - STREAM b'iDOT' 3858 28
2024-10-14 14:03:21,797 - DEBUG - b'iDOT' 3858 28 (unknown)
2024-10-14 14:03:21,797 - DEBUG - STREAM b'IDAT' 3898 16384
2024-10-14 14:03:21,797 - DEBUG - STREAM b'IHDR' 16 13
2024-10-14 14:03:21,797 - DEBUG - STREAM b'iCCP' 41 3152
2024-10-14 14:03:21,797 - DEBUG - iCCP profile name b'ICC Profile'
2024-10-14 14:03:21,797 - DEBUG - Compression method 0
2024-10-14 14:03:21,797 - DEBUG - STREAM b'eXIf' 3205 138
2024-10-14 14:03:21,797 - DEBUG - STREAM b'pHYs' 3355 9
2024-10-14 14:03:21,797 - DEBUG - STREAM b'iTXt' 3376 470
2024-10-14 14:03:21,797 - DEBUG - STREAM b'iDOT' 3858 28
2024-10-14 14:03:21,797 - DEBUG - b'iDOT' 3858 28 (unknown)
2024-10-14 14:03:21,797 - DEBUG - STREAM b'IDAT' 3898 16384
2024-10-14 14:03:21,807 - DEBUG - tag: XResolution (282) - type: rational (5) Tag Location: 22 - Data Location: 62 - value: b'\x00\x00\x00\x90\x00\x00\x00\x01'
2024-10-14 14:03:21,807 - DEBUG - tag: YResolution (283) - type: rational (5) Tag Location: 34 - Data Location: 70 - value: b'\x00\x00\x00\x90\x00\x00\x00\x01'
2024-10-14 14:03:21,807 - DEBUG - tag: ResolutionUnit (296) - type: short (3) - value: b'\x00\x02'
2024-10-14 14:03:21,807 - DEBUG - tag: ExifIFD (34665) - type: long (4) - value: b'\x00\x00\x00N'
2024-10-14 14:03:21,808 - DEBUG - Error closing: Operation on closed image
2024-10-14 14:03:23,870 - DEBUG - STREAM b'IHDR' 16 13
2024-10-14 14:03:23,870 - DEBUG - STREAM b'iCCP' 41 3152
2024-10-14 14:03:23,870 - DEBUG - iCCP profile name b'ICC Profile'
2024-10-14 14:03:23,870 - DEBUG - Compression method 0
2024-10-14 14:03:23,870 - DEBUG - STREAM b'eXIf' 3205 138
2024-10-14 14:03:23,870 - DEBUG - STREAM b'pHYs' 3355 9
2024-10-14 14:03:23,870 - DEBUG - STREAM b'iTXt' 3376 471
2024-10-14 14:03:23,870 - DEBUG - STREAM b'iDOT' 3859 28
2024-10-14 14:03:23,870 - DEBUG - b'iDOT' 3859 28 (unknown)
2024-10-14 14:03:23,870 - DEBUG - STREAM b'IDAT' 3899 16384
2024-10-14 14:03:23,870 - DEBUG - STREAM b'IHDR' 16 13
2024-10-14 14:03:23,870 - DEBUG - STREAM b'iCCP' 41 3152
2024-10-14 14:03:23,870 - DEBUG - iCCP profile name b'ICC Profile'
2024-10-14 14:03:23,870 - DEBUG - Compression method 0
2024-10-14 14:03:23,870 - DEBUG - STREAM b'eXIf' 3205 138
2024-10-14 14:03:23,870 - DEBUG - STREAM b'pHYs' 3355 9
2024-10-14 14:03:23,870 - DEBUG - STREAM b'iTXt' 3376 471
2024-10-14 14:03:23,870 - DEBUG - STREAM b'iDOT' 3859 28
2024-10-14 14:03:23,871 - DEBUG - b'iDOT' 3859 28 (unknown)
2024-10-14 14:03:23,871 - DEBUG - STREAM b'IDAT' 3899 16384
2024-10-14 14:03:23,888 - DEBUG - tag: XResolution (282) - type: rational (5) Tag Location: 22 - Data Location: 62 - value: b'\x00\x00\x00\x90\x00\x00\x00\x01'
2024-10-14 14:03:23,888 - DEBUG - tag: YResolution (283) - type: rational (5) Tag Location: 34 - Data Location: 70 - value: b'\x00\x00\x00\x90\x00\x00\x00\x01'
2024-10-14 14:03:23,888 - DEBUG - tag: ResolutionUnit (296) - type: short (3) - value: b'\x00\x02'
2024-10-14 14:03:23,888 - DEBUG - tag: ExifIFD (34665) - type: long (4) - value: b'\x00\x00\x00N'
2024-10-14 14:03:23,889 - DEBUG - Error closing: Operation on closed image
2024-10-14 14:03:26,368 - DEBUG - Document content: ROUMANIE ROMAWI ROMANIA Carte CARTE De |Dentitate IDEnTITY D'iDENTITE seria TR Na 409131 CarD cNP 18...
2024-10-14 14:03:26,371 - DEBUG - Instructor Request: mode.value='tool_call', response_model=<class 'models.PIIData'>, new_kwargs={'model': 'gpt-4', 'messages': [{'role': 'system', 'content': '\nYou are an AI agent specializing in contract creation and personal information extraction. \n\nYour role is:\n 1. Guide the process of extracting information from documents..\n 2. Verifying the extracted information with human input.\n 3. Identifying parties. \n 4. Constructing a contract. \n\n\nFollow the workflow precisely and ask for human input when needed.\n\n'}, {'role': 'user', 'content': "Extract the name and address from the given text:\n\nROUMANIE ROMAWI ROMANIA Carte CARTE De |Dentitate IDEnTITY D'iDENTITE seria TR Na 409131 CarD cNP 1891113341181 Nume/Nom/Last name T525M ISPILANTE Prenume/Prenom/First namo SENTIMENT BRUSLI Cetatenle/Nallonallte/Nallonallly Sox SexeiSox Romn\u0103 ROU M Loc nastere/Liou do naissancelPlace ol birth Or\u0219. Videle Jud.Teleorman Dom IlulAdresse/Addrass Videle Jud: Teleorman Sos. Giurgiului nr.1 695 TR Emisa dolDelivree parlIssuad by ValabilltatelValldlte Valldlty SPCLEP Videle 04.11.11-13.11.2018 IDROUISPILANTE<<SENTIMENT <BRUSLI<<<< TR409131<0R0u8911137M181113513411813 Or\u0219:"}], 'tools': [{'type': 'function', 'function': {'name': 'PIIData', 'description': 'Correctly extracted `PIIData` with all the required parameters with correct types', 'parameters': {'properties': {'name': {'description': 'Full name of the person', 'title': 'Name', 'type': 'string'}, 'address': {'description': 'Residential address of the person', 'title': 'Address', 'type': 'string'}}, 'required': ['address', 'name'], 'type': 'object'}}}], 'tool_choice': {'type': 'function', 'function': {'name': 'PIIData'}}}
2024-10-14 14:03:26,372 - DEBUG - max_retries: 1
2024-10-14 14:03:26,374 - DEBUG - Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'json_data': {'messages': [{'role': 'system', 'content': '\nYou are an AI agent specializing in contract creation and personal information extraction. \n\nYour role is:\n 1. Guide the process of extracting information from documents..\n 2. Verifying the extracted information with human input.\n 3. Identifying parties. \n 4. Constructing a contract. \n\n\nFollow the workflow precisely and ask for human input when needed.\n\n'}, {'role': 'user', 'content': "Extract the name and address from the given text:\n\nROUMANIE ROMAWI ROMANIA Carte CARTE De |Dentitate IDEnTITY D'iDENTITE seria TR Na 409131 CarD cNP 1891113341181 Nume/Nom/Last name T525M ISPILANTE Prenume/Prenom/First namo SENTIMENT BRUSLI Cetatenle/Nallonallte/Nallonallly Sox SexeiSox Romn\u0103 ROU M Loc nastere/Liou do naissancelPlace ol birth Or\u0219. Videle Jud.Teleorman Dom IlulAdresse/Addrass Videle Jud: Teleorman Sos. Giurgiului nr.1 695 TR Emisa dolDelivree parlIssuad by ValabilltatelValldlte Valldlty SPCLEP Videle 04.11.11-13.11.2018 IDROUISPILANTE<<SENTIMENT <BRUSLI<<<< TR409131<0R0u8911137M181113513411813 Or\u0219:"}], 'model': 'gpt-4', 'tool_choice': {'type': 'function', 'function': {'name': 'PIIData'}}, 'tools': [{'type': 'function', 'function': {'name': 'PIIData', 'description': 'Correctly extracted `PIIData` with all the required parameters with correct types', 'parameters': {'properties': {'name': {'description': 'Full name of the person', 'title': 'Name', 'type': 'string'}, 'address': {'description': 'Residential address of the person', 'title': 'Address', 'type': 'string'}}, 'required': ['address', 'name'], 'type': 'object'}}}]}}
2024-10-14 14:03:26,410 - DEBUG - Sending HTTP Request: POST https://api.openai.com/v1/chat/completions
2024-10-14 14:03:26,410 - DEBUG - connect_tcp.started host='api.openai.com' port=443 local_address=None timeout=5.0 socket_options=None
2024-10-14 14:03:26,427 - DEBUG - connect_tcp.complete return_value=<httpcore._backends.sync.SyncStream object at 0x000002390F36E360>
2024-10-14 14:03:26,427 - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x000002390F1C1D50> server_hostname='api.openai.com' timeout=5.0
2024-10-14 14:03:26,434 - DEBUG - start_tls.complete return_value=<httpcore._backends.sync.SyncStream object at 0x000002390F36E0C0>
2024-10-14 14:03:26,435 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-10-14 14:03:26,435 - DEBUG - send_request_headers.complete
2024-10-14 14:03:26,435 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-10-14 14:03:26,435 - DEBUG - send_request_body.complete
2024-10-14 14:03:26,435 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-10-14 14:03:28,775 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Mon, 14 Oct 2024 11:03:28 GMT'), (b'Content-Type', b'application/json'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'user-kzzh9hik9ryjiou4ftvhondh'), (b'openai-processing-ms', b'2184'), (b'openai-version', b'2020-10-01'), (b'x-ratelimit-limit-requests', b'10000'), (b'x-ratelimit-limit-tokens', b'10000'), (b'x-ratelimit-remaining-requests', b'9999'), (b'x-ratelimit-remaining-tokens', b'9736'), (b'x-ratelimit-reset-requests', b'8.64s'), (b'x-ratelimit-reset-tokens', b'1.584s'), (b'x-request-id', b'req_1d948bd2d9d9ea78e60a50f8ca011790'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'CF-Cache-Status', b'DYNAMIC'), (b'Set-Cookie', b'__cf_bm=d3BsNPYy7uG8CDittWj6WyiengmePrvoT6qBEcFlsW0-1728903808-1.0.1.1-Not.R_TP5ScsE5mKKL6lf25c4LE3WhXiryTs._EUrvKcu5Z52OsEV8T8nAWek_Tn3g_7PffVf82S.qFoxBjkXg; path=/; expires=Mon, 14-Oct-24 11:33:28 GMT; domain=.api.openai.com; HttpOnly; Secure; SameSite=None'), (b'X-Content-Type-Options', b'nosniff'), (b'Set-Cookie', b'_cfuvid=rg_QDH9IX3BBj8N2y4XhUMs.YKRErilaj_hoo9N23iE-1728903808942-0.0.1.1-604800000; path=/; domain=.api.openai.com; HttpOnly; Secure; SameSite=None'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8d2715374a1f0531-OTP'), (b'Content-Encoding', b'gzip'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-10-14 14:03:28,777 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2024-10-14 14:03:28,777 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-10-14 14:03:28,778 - DEBUG - receive_response_body.complete
2024-10-14 14:03:28,778 - DEBUG - response_closed.started
2024-10-14 14:03:28,778 - DEBUG - response_closed.complete
2024-10-14 14:03:28,778 - DEBUG - HTTP Response: POST https://api.openai.com/v1/chat/completions "200 OK" Headers([('date', 'Mon, 14 Oct 2024 11:03:28 GMT'), ('content-type', 'application/json'), ('transfer-encoding', 'chunked'), ('connection', 'keep-alive'), ('access-control-expose-headers', 'X-Request-ID'), ('openai-organization', 'user-kzzh9hik9ryjiou4ftvhondh'), ('openai-processing-ms', '2184'), ('openai-version', '2020-10-01'), ('x-ratelimit-limit-requests', '10000'), ('x-ratelimit-limit-tokens', '10000'), ('x-ratelimit-remaining-requests', '9999'), ('x-ratelimit-remaining-tokens', '9736'), ('x-ratelimit-reset-requests', '8.64s'), ('x-ratelimit-reset-tokens', '1.584s'), ('x-request-id', 'req_1d948bd2d9d9ea78e60a50f8ca011790'), ('strict-transport-security', 'max-age=31536000; includeSubDomains; preload'), ('cf-cache-status', 'DYNAMIC'), ('set-cookie', '__cf_bm=d3BsNPYy7uG8CDittWj6WyiengmePrvoT6qBEcFlsW0-1728903808-1.0.1.1-Not.R_TP5ScsE5mKKL6lf25c4LE3WhXiryTs._EUrvKcu5Z52OsEV8T8nAWek_Tn3g_7PffVf82S.qFoxBjkXg; path=/; expires=Mon, 14-Oct-24 11:33:28 GMT; domain=.api.openai.com; HttpOnly; Secure; SameSite=None'), ('x-content-type-options', 'nosniff'), ('set-cookie', '_cfuvid=rg_QDH9IX3BBj8N2y4XhUMs.YKRErilaj_hoo9N23iE-1728903808942-0.0.1.1-604800000; path=/; domain=.api.openai.com; HttpOnly; Secure; SameSite=None'), ('server', 'cloudflare'), ('cf-ray', '8d2715374a1f0531-OTP'), ('content-encoding', 'gzip'), ('alt-svc', 'h3=":443"; ma=86400')])
2024-10-14 14:03:28,778 - DEBUG - request_id: req_1d948bd2d9d9ea78e60a50f8ca011790
2024-10-14 14:03:28,781 - DEBUG - Instructor Raw Response: ChatCompletion(id='chatcmpl-AID9CqL7QV94VziNFlkFTXeYz3Vlz', choices=[Choice(finish_reason='stop', index=0, logprobs=None, message=ChatCompletionMessage(content=None, refusal=None, role='assistant', function_call=None, tool_calls=[ChatCompletionMessageToolCall(id='call_DlITVvtxncOLcJ7QmNFUdBfT', function=Function(arguments='{\n"name": "ISPILANTE SENTIMENT BRUSLI",\n"address": "Videle Jud: Teleorman Sos. Giurgiului nr.1 695 TR"\n}', name='PIIData'), type='function')]))], created=1728903806, model='gpt-4-0613', object='chat.completion', service_tier=None, system_fingerprint=None, usage=CompletionUsage(completion_tokens=39, prompt_tokens=377, total_tokens=416, completion_tokens_details=None, prompt_tokens_details=None))
2024-10-14 14:03:28,782 - DEBUG - Extracted PII: name='ISPILANTE SENTIMENT BRUSLI' address='Videle Jud: Teleorman Sos. Giurgiului nr.1 695 TR'
2024-10-14 14:03:31,751 - DEBUG - Document content: ROUMANIE ROVIAINIA ROMANIA Carte Carte DE iDentitate IdEnTITY Didentite seala SS Nr 099994 Card CNP ...
2024-10-14 14:03:31,753 - DEBUG - Instructor Request: mode.value='tool_call', response_model=<class 'models.PIIData'>, new_kwargs={'model': 'gpt-4', 'messages': [{'role': 'system', 'content': '\nYou are an AI agent specializing in contract creation and personal information extraction. \n\nYour role is:\n 1. Guide the process of extracting information from documents..\n 2. Verifying the extracted information with human input.\n 3. Identifying parties. \n 4. Constructing a contract. \n\n\nFollow the workflow precisely and ask for human input when needed.\n\n'}, {'role': 'user', 'content': "Extract the name and address from the given text:\n\nROUMANIE ROVIAINIA ROMANIA Carte Carte DE iDentitate IdEnTITY Didentite seala SS Nr 099994 Card CNP 2410415400542 93coQ Nume/NomiLast name VASILESCU Pronume/Prenom/Flrst name ELENA < CetatenielNatlonallte/Natlonalily M Sex SexelSer Romn\u0103 ROU Loc nastore/Licu de naissancolF 'ar0 ol birth Mun: Dej Jud. Cluj Domiciliu/Adresse A ess Mun. Bucuresti Sec. 5 Str Nicolae Iorga nr.3 900 B Emisa delDelivree parllssued by Valabilitate/Vahidile Valiouy D.EPAB.D- 06.01.17-15.04.2077 IDROUVASILESCU<<ELENA<<<<<<<<<<<<<<< SS099994<0R0u4104151F770415824003421"}], 'tools': [{'type': 'function', 'function': {'name': 'PIIData', 'description': 'Correctly extracted `PIIData` with all the required parameters with correct types', 'parameters': {'properties': {'name': {'description': 'Full name of the person', 'title': 'Name', 'type': 'string'}, 'address': {'description': 'Residential address of the person', 'title': 'Address', 'type': 'string'}}, 'required': ['address', 'name'], 'type': 'object'}}}], 'tool_choice': {'type': 'function', 'function': {'name': 'PIIData'}}}
2024-10-14 14:03:31,753 - DEBUG - max_retries: 1
2024-10-14 14:03:31,755 - DEBUG - Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'json_data': {'messages': [{'role': 'system', 'content': '\nYou are an AI agent specializing in contract creation and personal information extraction. \n\nYour role is:\n 1. Guide the process of extracting information from documents..\n 2. Verifying the extracted information with human input.\n 3. Identifying parties. \n 4. Constructing a contract. \n\n\nFollow the workflow precisely and ask for human input when needed.\n\n'}, {'role': 'user', 'content': "Extract the name and address from the given text:\n\nROUMANIE ROVIAINIA ROMANIA Carte Carte DE iDentitate IdEnTITY Didentite seala SS Nr 099994 Card CNP 2410415400542 93coQ Nume/NomiLast name VASILESCU Pronume/Prenom/Flrst name ELENA < CetatenielNatlonallte/Natlonalily M Sex SexelSer Romn\u0103 ROU Loc nastore/Licu de naissancolF 'ar0 ol birth Mun: Dej Jud. Cluj Domiciliu/Adresse A ess Mun. Bucuresti Sec. 5 Str Nicolae Iorga nr.3 900 B Emisa delDelivree parllssued by Valabilitate/Vahidile Valiouy D.EPAB.D- 06.01.17-15.04.2077 IDROUVASILESCU<<ELENA<<<<<<<<<<<<<<< SS099994<0R0u4104151F770415824003421"}], 'model': 'gpt-4', 'tool_choice': {'type': 'function', 'function': {'name': 'PIIData'}}, 'tools': [{'type': 'function', 'function': {'name': 'PIIData', 'description': 'Correctly extracted `PIIData` with all the required parameters with correct types', 'parameters': {'properties': {'name': {'description': 'Full name of the person', 'title': 'Name', 'type': 'string'}, 'address': {'description': 'Residential address of the person', 'title': 'Address', 'type': 'string'}}, 'required': ['address', 'name'], 'type': 'object'}}}]}}
2024-10-14 14:03:31,756 - DEBUG - Sending HTTP Request: POST https://api.openai.com/v1/chat/completions
2024-10-14 14:03:31,756 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-10-14 14:03:31,756 - DEBUG - send_request_headers.complete
2024-10-14 14:03:31,756 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-10-14 14:03:31,757 - DEBUG - send_request_body.complete
2024-10-14 14:03:31,757 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-10-14 14:03:34,190 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Mon, 14 Oct 2024 11:03:34 GMT'), (b'Content-Type', b'application/json'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'user-kzzh9hik9ryjiou4ftvhondh'), (b'openai-processing-ms', b'2272'), (b'openai-version', b'2020-10-01'), (b'x-ratelimit-limit-requests', b'10000'), (b'x-ratelimit-limit-tokens', b'10000'), (b'x-ratelimit-remaining-requests', b'9998'), (b'x-ratelimit-remaining-tokens', b'9742'), (b'x-ratelimit-reset-requests', b'11.956s'), (b'x-ratelimit-reset-tokens', b'1.548s'), (b'x-request-id', b'req_c215570a43084e59fbf49ad8cf6b0480'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8d2715588d6f0531-OTP'), (b'Content-Encoding', b'gzip'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-10-14 14:03:34,190 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2024-10-14 14:03:34,190 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-10-14 14:03:34,190 - DEBUG - receive_response_body.complete
2024-10-14 14:03:34,190 - DEBUG - response_closed.started
2024-10-14 14:03:34,190 - DEBUG - response_closed.complete
2024-10-14 14:03:34,190 - DEBUG - HTTP Response: POST https://api.openai.com/v1/chat/completions "200 OK" Headers({'date': 'Mon, 14 Oct 2024 11:03:34 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-expose-headers': 'X-Request-ID', 'openai-organization': 'user-kzzh9hik9ryjiou4ftvhondh', 'openai-processing-ms': '2272', 'openai-version': '2020-10-01', 'x-ratelimit-limit-requests': '10000', 'x-ratelimit-limit-tokens': '10000', 'x-ratelimit-remaining-requests': '9998', 'x-ratelimit-remaining-tokens': '9742', 'x-ratelimit-reset-requests': '11.956s', 'x-ratelimit-reset-tokens': '1.548s', 'x-request-id': 'req_c215570a43084e59fbf49ad8cf6b0480', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8d2715588d6f0531-OTP', 'content-encoding': 'gzip', 'alt-svc': 'h3=":443"; ma=86400'})
2024-10-14 14:03:34,190 - DEBUG - request_id: req_c215570a43084e59fbf49ad8cf6b0480
2024-10-14 14:03:34,191 - DEBUG - Instructor Raw Response: ChatCompletion(id='chatcmpl-AID9IwE6ciw7d8WswDpWnsGhhb2A1', choices=[Choice(finish_reason='stop', index=0, logprobs=None, message=ChatCompletionMessage(content=None, refusal=None, role='assistant', function_call=None, tool_calls=[ChatCompletionMessageToolCall(id='call_bP8UTHJTjWqjF1s4YQUu7bmS', function=Function(arguments='{\n"name": "ELENA VASILESCU",\n"address": "Mun. Bucuresti Sec. 5 Str Nicolae Iorga nr.3 900 B"\n}', name='PIIData'), type='function')]))], created=1728903812, model='gpt-4-0613', object='chat.completion', service_tier=None, system_fingerprint=None, usage=CompletionUsage(completion_tokens=42, prompt_tokens=380, total_tokens=422, completion_tokens_details=None, prompt_tokens_details=None))
2024-10-14 14:03:34,191 - DEBUG - Extracted PII: name='ELENA VASILESCU' address='Mun. Bucuresti Sec. 5 Str Nicolae Iorga nr.3 900 B'
2024-10-14 14:03:35,678 - DEBUG - Instructor Request: mode.value='tool_call', response_model=<class 'models.ContractParties'>, new_kwargs={'model': 'gpt-4', 'messages': [{'role': 'system', 'content': '\nYou are an AI agent specializing in contract creation and personal information extraction. \n\nYour role is:\n 1. Guide the process of extracting information from documents..\n 2. Verifying the extracted information with human input.\n 3. Identifying parties. \n 4. Constructing a contract. \n\n\nFollow the workflow precisely and ask for human input when needed.\n\n'}, {'role': 'user', 'content': 'Identify the buyer and seller from the given information:\n\nName: ISPILANTE SENTIMENT BRUSLI, Address: Videle Jud: Teleorman Sos. Giurgiului nr.1 695 TR\nName: ELENA VASILESCU, Address: Mun. Bucuresti Sec. 5 Str Nicolae Iorga nr.3 900 B'}], 'tools': [{'type': 'function', 'function': {'name': 'ContractParties', 'description': 'Correctly extracted `ContractParties` with all the required parameters with correct types', 'parameters': {'properties': {'buyer': {'description': 'Name of the buyer', 'title': 'Buyer', 'type': 'string'}, 'seller': {'description': 'Name of the seller', 'title': 'Seller', 'type': 'string'}}, 'required': ['buyer', 'seller'], 'type': 'object'}}}], 'tool_choice': {'type': 'function', 'function': {'name': 'ContractParties'}}}
2024-10-14 14:03:35,679 - DEBUG - max_retries: 1
2024-10-14 14:03:35,681 - DEBUG - Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'json_data': {'messages': [{'role': 'system', 'content': '\nYou are an AI agent specializing in contract creation and personal information extraction. \n\nYour role is:\n 1. Guide the process of extracting information from documents..\n 2. Verifying the extracted information with human input.\n 3. Identifying parties. \n 4. Constructing a contract. \n\n\nFollow the workflow precisely and ask for human input when needed.\n\n'}, {'role': 'user', 'content': 'Identify the buyer and seller from the given information:\n\nName: ISPILANTE SENTIMENT BRUSLI, Address: Videle Jud: Teleorman Sos. Giurgiului nr.1 695 TR\nName: ELENA VASILESCU, Address: Mun. Bucuresti Sec. 5 Str Nicolae Iorga nr.3 900 B'}], 'model': 'gpt-4', 'tool_choice': {'type': 'function', 'function': {'name': 'ContractParties'}}, 'tools': [{'type': 'function', 'function': {'name': 'ContractParties', 'description': 'Correctly extracted `ContractParties` with all the required parameters with correct types', 'parameters': {'properties': {'buyer': {'description': 'Name of the buyer', 'title': 'Buyer', 'type': 'string'}, 'seller': {'description': 'Name of the seller', 'title': 'Seller', 'type': 'string'}}, 'required': ['buyer', 'seller'], 'type': 'object'}}}]}}
2024-10-14 14:03:35,681 - DEBUG - Sending HTTP Request: POST https://api.openai.com/v1/chat/completions
2024-10-14 14:03:35,681 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-10-14 14:03:35,682 - DEBUG - send_request_headers.complete
2024-10-14 14:03:35,682 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-10-14 14:03:35,682 - DEBUG - send_request_body.complete
2024-10-14 14:03:35,682 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-10-14 14:03:37,334 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Mon, 14 Oct 2024 11:03:37 GMT'), (b'Content-Type', b'application/json'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'user-kzzh9hik9ryjiou4ftvhondh'), (b'openai-processing-ms', b'1493'), (b'openai-version', b'2020-10-01'), (b'x-ratelimit-limit-requests', b'10000'), (b'x-ratelimit-limit-tokens', b'10000'), (b'x-ratelimit-remaining-requests', b'9998'), (b'x-ratelimit-remaining-tokens', b'9834'), (b'x-ratelimit-reset-requests', b'16.674s'), (b'x-ratelimit-reset-tokens', b'996ms'), (b'x-request-id', b'req_209478d7aa30fb2b35ddc2dc1704e2a5'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8d2715711e260531-OTP'), (b'Content-Encoding', b'gzip'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-10-14 14:03:37,334 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2024-10-14 14:03:37,334 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-10-14 14:03:37,334 - DEBUG - receive_response_body.complete
2024-10-14 14:03:37,334 - DEBUG - response_closed.started
2024-10-14 14:03:37,334 - DEBUG - response_closed.complete
2024-10-14 14:03:37,334 - DEBUG - HTTP Response: POST https://api.openai.com/v1/chat/completions "200 OK" Headers({'date': 'Mon, 14 Oct 2024 11:03:37 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-expose-headers': 'X-Request-ID', 'openai-organization': 'user-kzzh9hik9ryjiou4ftvhondh', 'openai-processing-ms': '1493', 'openai-version': '2020-10-01', 'x-ratelimit-limit-requests': '10000', 'x-ratelimit-limit-tokens': '10000', 'x-ratelimit-remaining-requests': '9998', 'x-ratelimit-remaining-tokens': '9834', 'x-ratelimit-reset-requests': '16.674s', 'x-ratelimit-reset-tokens': '996ms', 'x-request-id': 'req_209478d7aa30fb2b35ddc2dc1704e2a5', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8d2715711e260531-OTP', 'content-encoding': 'gzip', 'alt-svc': 'h3=":443"; ma=86400'})
2024-10-14 14:03:37,335 - DEBUG - request_id: req_209478d7aa30fb2b35ddc2dc1704e2a5
2024-10-14 14:03:37,335 - DEBUG - Instructor Raw Response: ChatCompletion(id='chatcmpl-AID9MgipJ3j9g9P4lKMCTdSj3rE2N', choices=[Choice(finish_reason='stop', index=0, logprobs=None, message=ChatCompletionMessage(content=None, refusal=None, role='assistant', function_call=None, tool_calls=[ChatCompletionMessageToolCall(id='call_Qhdb6IEiyd11pjbSJ6UthZC5', function=Function(arguments='{\n"buyer": "ISPILANTE SENTIMENT BRUSLI",\n"seller": "ELENA VASILESCU"\n}', name='ContractParties'), type='function')]))], created=1728903816, model='gpt-4-0613', object='chat.completion', service_tier=None, system_fingerprint=None, usage=CompletionUsage(completion_tokens=28, prompt_tokens=232, total_tokens=260, completion_tokens_details=None, prompt_tokens_details=None))
2024-10-14 14:03:50,046 - DEBUG - close.started
2024-10-14 14:03:50,047 - DEBUG - close.complete
2024-10-14 14:28:21,896 - WARNING - Neither CUDA nor MPS are available - defaulting to CPU. Note: This module is much faster with a GPU.
2024-10-14 14:28:23,171 - DEBUG - load_ssl_context verify=True cert=None trust_env=True http2=False
2024-10-14 14:28:23,171 - DEBUG - load_verify_locations cafile='D:\\deve\\contract_automation\\.venv\\Lib\\site-packages\\certifi\\cacert.pem'
2024-10-14 14:28:23,490 - DEBUG - Patching `client.chat.completions.create` with mode=<Mode.TOOLS: 'tool_call'>
2024-10-14 14:28:23,491 - DEBUG - Using proactor: IocpProactor
2024-10-14 14:28:23,510 - DEBUG - STREAM b'IHDR' 16 13
2024-10-14 14:28:23,510 - DEBUG - STREAM b'iCCP' 41 3152
2024-10-14 14:28:23,511 - DEBUG - iCCP profile name b'ICC Profile'
2024-10-14 14:28:23,511 - DEBUG - Compression method 0
2024-10-14 14:28:23,511 - DEBUG - STREAM b'eXIf' 3205 138
2024-10-14 14:28:23,511 - DEBUG - STREAM b'pHYs' 3355 9
2024-10-14 14:28:23,511 - DEBUG - STREAM b'iTXt' 3376 470
2024-10-14 14:28:23,511 - DEBUG - STREAM b'iDOT' 3858 28
2024-10-14 14:28:23,511 - DEBUG - b'iDOT' 3858 28 (unknown)
2024-10-14 14:28:23,511 - DEBUG - STREAM b'IDAT' 3898 16384
2024-10-14 14:28:23,511 - DEBUG - STREAM b'IHDR' 16 13
2024-10-14 14:28:23,511 - DEBUG - STREAM b'iCCP' 41 3152
2024-10-14 14:28:23,511 - DEBUG - iCCP profile name b'ICC Profile'
2024-10-14 14:28:23,511 - DEBUG - Compression method 0
2024-10-14 14:28:23,511 - DEBUG - STREAM b'eXIf' 3205 138
2024-10-14 14:28:23,511 - DEBUG - STREAM b'pHYs' 3355 9
2024-10-14 14:28:23,511 - DEBUG - STREAM b'iTXt' 3376 470
2024-10-14 14:28:23,511 - DEBUG - STREAM b'iDOT' 3858 28
2024-10-14 14:28:23,511 - DEBUG - b'iDOT' 3858 28 (unknown)
2024-10-14 14:28:23,511 - DEBUG - STREAM b'IDAT' 3898 16384
2024-10-14 14:28:23,521 - DEBUG - tag: XResolution (282) - type: rational (5) Tag Location: 22 - Data Location: 62 - value: b'\x00\x00\x00\x90\x00\x00\x00\x01'
2024-10-14 14:28:23,522 - DEBUG - tag: YResolution (283) - type: rational (5) Tag Location: 34 - Data Location: 70 - value: b'\x00\x00\x00\x90\x00\x00\x00\x01'
2024-10-14 14:28:23,522 - DEBUG - tag: ResolutionUnit (296) - type: short (3) - value: b'\x00\x02'
2024-10-14 14:28:23,522 - DEBUG - tag: ExifIFD (34665) - type: long (4) - value: b'\x00\x00\x00N'
2024-10-14 14:28:23,522 - DEBUG - Error closing: Operation on closed image
2024-10-14 14:28:25,542 - DEBUG - STREAM b'IHDR' 16 13
2024-10-14 14:28:25,542 - DEBUG - STREAM b'iCCP' 41 3152
2024-10-14 14:28:25,542 - DEBUG - iCCP profile name b'ICC Profile'
2024-10-14 14:28:25,542 - DEBUG - Compression method 0
2024-10-14 14:28:25,542 - DEBUG - STREAM b'eXIf' 3205 138
2024-10-14 14:28:25,542 - DEBUG - STREAM b'pHYs' 3355 9
2024-10-14 14:28:25,542 - DEBUG - STREAM b'iTXt' 3376 471
2024-10-14 14:28:25,542 - DEBUG - STREAM b'iDOT' 3859 28
2024-10-14 14:28:25,542 - DEBUG - b'iDOT' 3859 28 (unknown)
2024-10-14 14:28:25,542 - DEBUG - STREAM b'IDAT' 3899 16384
2024-10-14 14:28:25,542 - DEBUG - STREAM b'IHDR' 16 13
2024-10-14 14:28:25,542 - DEBUG - STREAM b'iCCP' 41 3152
2024-10-14 14:28:25,542 - DEBUG - iCCP profile name b'ICC Profile'
2024-10-14 14:28:25,542 - DEBUG - Compression method 0
2024-10-14 14:28:25,542 - DEBUG - STREAM b'eXIf' 3205 138
2024-10-14 14:28:25,542 - DEBUG - STREAM b'pHYs' 3355 9
2024-10-14 14:28:25,542 - DEBUG - STREAM b'iTXt' 3376 471
2024-10-14 14:28:25,542 - DEBUG - STREAM b'iDOT' 3859 28
2024-10-14 14:28:25,542 - DEBUG - b'iDOT' 3859 28 (unknown)
2024-10-14 14:28:25,542 - DEBUG - STREAM b'IDAT' 3899 16384
2024-10-14 14:28:25,559 - DEBUG - tag: XResolution (282) - type: rational (5) Tag Location: 22 - Data Location: 62 - value: b'\x00\x00\x00\x90\x00\x00\x00\x01'
2024-10-14 14:28:25,560 - DEBUG - tag: YResolution (283) - type: rational (5) Tag Location: 34 - Data Location: 70 - value: b'\x00\x00\x00\x90\x00\x00\x00\x01'
2024-10-14 14:28:25,560 - DEBUG - tag: ResolutionUnit (296) - type: short (3) - value: b'\x00\x02'
2024-10-14 14:28:25,560 - DEBUG - tag: ExifIFD (34665) - type: long (4) - value: b'\x00\x00\x00N'
2024-10-14 14:28:25,560 - DEBUG - Error closing: Operation on closed image
2024-10-14 14:28:28,028 - DEBUG - Document content: ROUMANIE ROMAWI ROMANIA Carte CARTE De |Dentitate IDEnTITY D'iDENTITE seria TR Na 409131 CarD cNP 18...
2024-10-14 14:28:28,030 - DEBUG - Instructor Request: mode.value='tool_call', response_model=<class 'models.PIIData'>, new_kwargs={'model': 'gpt-4', 'messages': [{'role': 'system', 'content': '\nYou are an AI agent specializing in contract creation and personal information extraction. \n\nYour role is:\n 1. Guide the process of extracting information from documents..\n 2. Verifying the extracted information with human input.\n 3. Identifying parties. \n 4. Constructing a contract. \n\n\nFollow the workflow precisely and ask for human input when needed.\n\n'}, {'role': 'user', 'content': "Extract the name and address from the given text:\n\nROUMANIE ROMAWI ROMANIA Carte CARTE De |Dentitate IDEnTITY D'iDENTITE seria TR Na 409131 CarD cNP 1891113341181 Nume/Nom/Last name T525M ISPILANTE Prenume/Prenom/First namo SENTIMENT BRUSLI Cetatenle/Nallonallte/Nallonallly Sox SexeiSox Romn\u0103 ROU M Loc nastere/Liou do naissancelPlace ol birth Or\u0219. Videle Jud.Teleorman Dom IlulAdresse/Addrass Videle Jud: Teleorman Sos. Giurgiului nr.1 695 TR Emisa dolDelivree parlIssuad by ValabilltatelValldlte Valldlty SPCLEP Videle 04.11.11-13.11.2018 IDROUISPILANTE<<SENTIMENT <BRUSLI<<<< TR409131<0R0u8911137M181113513411813 Or\u0219:"}], 'tools': [{'type': 'function', 'function': {'name': 'PIIData', 'description': 'Correctly extracted `PIIData` with all the required parameters with correct types', 'parameters': {'properties': {'name': {'description': 'Full name of the person', 'title': 'Name', 'type': 'string'}, 'address': {'description': 'Residential address of the person', 'title': 'Address', 'type': 'string'}}, 'required': ['address', 'name'], 'type': 'object'}}}], 'tool_choice': {'type': 'function', 'function': {'name': 'PIIData'}}}
2024-10-14 14:28:28,031 - DEBUG - max_retries: 1
2024-10-14 14:28:28,033 - DEBUG - Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'json_data': {'messages': [{'role': 'system', 'content': '\nYou are an AI agent specializing in contract creation and personal information extraction. \n\nYour role is:\n 1. Guide the process of extracting information from documents..\n 2. Verifying the extracted information with human input.\n 3. Identifying parties. \n 4. Constructing a contract. \n\n\nFollow the workflow precisely and ask for human input when needed.\n\n'}, {'role': 'user', 'content': "Extract the name and address from the given text:\n\nROUMANIE ROMAWI ROMANIA Carte CARTE De |Dentitate IDEnTITY D'iDENTITE seria TR Na 409131 CarD cNP 1891113341181 Nume/Nom/Last name T525M ISPILANTE Prenume/Prenom/First namo SENTIMENT BRUSLI Cetatenle/Nallonallte/Nallonallly Sox SexeiSox Romn\u0103 ROU M Loc nastere/Liou do naissancelPlace ol birth Or\u0219. Videle Jud.Teleorman Dom IlulAdresse/Addrass Videle Jud: Teleorman Sos. Giurgiului nr.1 695 TR Emisa dolDelivree parlIssuad by ValabilltatelValldlte Valldlty SPCLEP Videle 04.11.11-13.11.2018 IDROUISPILANTE<<SENTIMENT <BRUSLI<<<< TR409131<0R0u8911137M181113513411813 Or\u0219:"}], 'model': 'gpt-4', 'tool_choice': {'type': 'function', 'function': {'name': 'PIIData'}}, 'tools': [{'type': 'function', 'function': {'name': 'PIIData', 'description': 'Correctly extracted `PIIData` with all the required parameters with correct types', 'parameters': {'properties': {'name': {'description': 'Full name of the person', 'title': 'Name', 'type': 'string'}, 'address': {'description': 'Residential address of the person', 'title': 'Address', 'type': 'string'}}, 'required': ['address', 'name'], 'type': 'object'}}}]}}
2024-10-14 14:28:28,070 - DEBUG - Sending HTTP Request: POST https://api.openai.com/v1/chat/completions
2024-10-14 14:28:28,070 - DEBUG - connect_tcp.started host='api.openai.com' port=443 local_address=None timeout=5.0 socket_options=None
2024-10-14 14:28:28,082 - DEBUG - connect_tcp.complete return_value=<httpcore._backends.sync.SyncStream object at 0x0000015967F7E450>
2024-10-14 14:28:28,082 - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x0000015967DD1CD0> server_hostname='api.openai.com' timeout=5.0
2024-10-14 14:28:28,089 - DEBUG - start_tls.complete return_value=<httpcore._backends.sync.SyncStream object at 0x0000015967F7E390>
2024-10-14 14:28:28,090 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-10-14 14:28:28,090 - DEBUG - send_request_headers.complete
2024-10-14 14:28:28,090 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-10-14 14:28:28,090 - DEBUG - send_request_body.complete
2024-10-14 14:28:28,090 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-10-14 14:28:30,218 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Mon, 14 Oct 2024 11:28:30 GMT'), (b'Content-Type', b'application/json'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'user-kzzh9hik9ryjiou4ftvhondh'), (b'openai-processing-ms', b'1972'), (b'openai-version', b'2020-10-01'), (b'x-ratelimit-limit-requests', b'10000'), (b'x-ratelimit-limit-tokens', b'10000'), (b'x-ratelimit-remaining-requests', b'9999'), (b'x-ratelimit-remaining-tokens', b'9736'), (b'x-ratelimit-reset-requests', b'8.64s'), (b'x-ratelimit-reset-tokens', b'1.584s'), (b'x-request-id', b'req_a2a0d2446ae4b72e8cd8d2d3c0449f00'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'CF-Cache-Status', b'DYNAMIC'), (b'Set-Cookie', b'__cf_bm=HFLwQwNLiSRFlNbMTV2n9otohFsfmLtoh5BZCLX9fFs-1728905310-1.0.1.1-h5iBirqEjnpMe8U_do678ZFyKIVDz9OfG_FRmFrdRQWhUjzMawnADR2HPjYF.9T4Dap.AFXg019gnwbCgm5CYw; path=/; expires=Mon, 14-Oct-24 11:58:30 GMT; domain=.api.openai.com; HttpOnly; Secure; SameSite=None'), (b'X-Content-Type-Options', b'nosniff'), (b'Set-Cookie', b'_cfuvid=Kcjo4yNqyrmsPbjeNvAUAuYSeXI51aYyJ63XZuYrVbM-1728905310447-0.0.1.1-604800000; path=/; domain=.api.openai.com; HttpOnly; Secure; SameSite=None'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8d2739e10a9fca1c-OTP'), (b'Content-Encoding', b'gzip'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-10-14 14:28:30,220 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2024-10-14 14:28:30,220 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-10-14 14:28:30,220 - DEBUG - receive_response_body.complete
2024-10-14 14:28:30,221 - DEBUG - response_closed.started
2024-10-14 14:28:30,221 - DEBUG - response_closed.complete
2024-10-14 14:28:30,221 - DEBUG - HTTP Response: POST https://api.openai.com/v1/chat/completions "200 OK" Headers([('date', 'Mon, 14 Oct 2024 11:28:30 GMT'), ('content-type', 'application/json'), ('transfer-encoding', 'chunked'), ('connection', 'keep-alive'), ('access-control-expose-headers', 'X-Request-ID'), ('openai-organization', 'user-kzzh9hik9ryjiou4ftvhondh'), ('openai-processing-ms', '1972'), ('openai-version', '2020-10-01'), ('x-ratelimit-limit-requests', '10000'), ('x-ratelimit-limit-tokens', '10000'), ('x-ratelimit-remaining-requests', '9999'), ('x-ratelimit-remaining-tokens', '9736'), ('x-ratelimit-reset-requests', '8.64s'), ('x-ratelimit-reset-tokens', '1.584s'), ('x-request-id', 'req_a2a0d2446ae4b72e8cd8d2d3c0449f00'), ('strict-transport-security', 'max-age=31536000; includeSubDomains; preload'), ('cf-cache-status', 'DYNAMIC'), ('set-cookie', '__cf_bm=HFLwQwNLiSRFlNbMTV2n9otohFsfmLtoh5BZCLX9fFs-1728905310-1.0.1.1-h5iBirqEjnpMe8U_do678ZFyKIVDz9OfG_FRmFrdRQWhUjzMawnADR2HPjYF.9T4Dap.AFXg019gnwbCgm5CYw; path=/; expires=Mon, 14-Oct-24 11:58:30 GMT; domain=.api.openai.com; HttpOnly; Secure; SameSite=None'), ('x-content-type-options', 'nosniff'), ('set-cookie', '_cfuvid=Kcjo4yNqyrmsPbjeNvAUAuYSeXI51aYyJ63XZuYrVbM-1728905310447-0.0.1.1-604800000; path=/; domain=.api.openai.com; HttpOnly; Secure; SameSite=None'), ('server', 'cloudflare'), ('cf-ray', '8d2739e10a9fca1c-OTP'), ('content-encoding', 'gzip'), ('alt-svc', 'h3=":443"; ma=86400')])
2024-10-14 14:28:30,221 - DEBUG - request_id: req_a2a0d2446ae4b72e8cd8d2d3c0449f00
2024-10-14 14:28:30,224 - DEBUG - Instructor Raw Response: ChatCompletion(id='chatcmpl-AIDXQxKhyg0oCHeQrqBcSxIxEYl04', choices=[Choice(finish_reason='stop', index=0, logprobs=None, message=ChatCompletionMessage(content=None, refusal=None, role='assistant', function_call=None, tool_calls=[ChatCompletionMessageToolCall(id='call_UNU6lwYOCGcL2CVbK7VbuSyi', function=Function(arguments='{\n"name": "ISPILANTE SENTIMENT BRUSLI",\n"address": "Videle Jud: Teleorman Sos. Giurgiului nr.1 695 TR"\n}', name='PIIData'), type='function')]))], created=1728905308, model='gpt-4-0613', object='chat.completion', service_tier=None, system_fingerprint=None, usage=CompletionUsage(completion_tokens=39, prompt_tokens=377, total_tokens=416, completion_tokens_details=None, prompt_tokens_details=None))
2024-10-14 14:28:30,225 - DEBUG - Extracted PII: name='ISPILANTE SENTIMENT BRUSLI' address='Videle Jud: Teleorman Sos. Giurgiului nr.1 695 TR'
2024-10-14 14:28:33,603 - DEBUG - Document content: ROUMANIE ROVIAINIA ROMANIA Carte Carte DE iDentitate IdEnTITY Didentite seala SS Nr 099994 Card CNP ...
2024-10-14 14:28:33,605 - DEBUG - Instructor Request: mode.value='tool_call', response_model=<class 'models.PIIData'>, new_kwargs={'model': 'gpt-4', 'messages': [{'role': 'system', 'content': '\nYou are an AI agent specializing in contract creation and personal information extraction. \n\nYour role is:\n 1. Guide the process of extracting information from documents..\n 2. Verifying the extracted information with human input.\n 3. Identifying parties. \n 4. Constructing a contract. \n\n\nFollow the workflow precisely and ask for human input when needed.\n\n'}, {'role': 'user', 'content': "Extract the name and address from the given text:\n\nROUMANIE ROVIAINIA ROMANIA Carte Carte DE iDentitate IdEnTITY Didentite seala SS Nr 099994 Card CNP 2410415400542 93coQ Nume/NomiLast name VASILESCU Pronume/Prenom/Flrst name ELENA < CetatenielNatlonallte/Natlonalily M Sex SexelSer Romn\u0103 ROU Loc nastore/Licu de naissancolF 'ar0 ol birth Mun: Dej Jud. Cluj Domiciliu/Adresse A ess Mun. Bucuresti Sec. 5 Str Nicolae Iorga nr.3 900 B Emisa delDelivree parllssued by Valabilitate/Vahidile Valiouy D.EPAB.D- 06.01.17-15.04.2077 IDROUVASILESCU<<ELENA<<<<<<<<<<<<<<< SS099994<0R0u4104151F770415824003421"}], 'tools': [{'type': 'function', 'function': {'name': 'PIIData', 'description': 'Correctly extracted `PIIData` with all the required parameters with correct types', 'parameters': {'properties': {'name': {'description': 'Full name of the person', 'title': 'Name', 'type': 'string'}, 'address': {'description': 'Residential address of the person', 'title': 'Address', 'type': 'string'}}, 'required': ['address', 'name'], 'type': 'object'}}}], 'tool_choice': {'type': 'function', 'function': {'name': 'PIIData'}}}
2024-10-14 14:28:33,605 - DEBUG - max_retries: 1
2024-10-14 14:28:33,607 - DEBUG - Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'json_data': {'messages': [{'role': 'system', 'content': '\nYou are an AI agent specializing in contract creation and personal information extraction. \n\nYour role is:\n 1. Guide the process of extracting information from documents..\n 2. Verifying the extracted information with human input.\n 3. Identifying parties. \n 4. Constructing a contract. \n\n\nFollow the workflow precisely and ask for human input when needed.\n\n'}, {'role': 'user', 'content': "Extract the name and address from the given text:\n\nROUMANIE ROVIAINIA ROMANIA Carte Carte DE iDentitate IdEnTITY Didentite seala SS Nr 099994 Card CNP 2410415400542 93coQ Nume/NomiLast name VASILESCU Pronume/Prenom/Flrst name ELENA < CetatenielNatlonallte/Natlonalily M Sex SexelSer Romn\u0103 ROU Loc nastore/Licu de naissancolF 'ar0 ol birth Mun: Dej Jud. Cluj Domiciliu/Adresse A ess Mun. Bucuresti Sec. 5 Str Nicolae Iorga nr.3 900 B Emisa delDelivree parllssued by Valabilitate/Vahidile Valiouy D.EPAB.D- 06.01.17-15.04.2077 IDROUVASILESCU<<ELENA<<<<<<<<<<<<<<< SS099994<0R0u4104151F770415824003421"}], 'model': 'gpt-4', 'tool_choice': {'type': 'function', 'function': {'name': 'PIIData'}}, 'tools': [{'type': 'function', 'function': {'name': 'PIIData', 'description': 'Correctly extracted `PIIData` with all the required parameters with correct types', 'parameters': {'properties': {'name': {'description': 'Full name of the person', 'title': 'Name', 'type': 'string'}, 'address': {'description': 'Residential address of the person', 'title': 'Address', 'type': 'string'}}, 'required': ['address', 'name'], 'type': 'object'}}}]}}
2024-10-14 14:28:33,608 - DEBUG - Sending HTTP Request: POST https://api.openai.com/v1/chat/completions
2024-10-14 14:28:33,608 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-10-14 14:28:33,608 - DEBUG - send_request_headers.complete
2024-10-14 14:28:33,608 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-10-14 14:28:33,608 - DEBUG - send_request_body.complete
2024-10-14 14:28:33,608 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-10-14 14:28:36,106 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Mon, 14 Oct 2024 11:28:36 GMT'), (b'Content-Type', b'application/json'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'user-kzzh9hik9ryjiou4ftvhondh'), (b'openai-processing-ms', b'2329'), (b'openai-version', b'2020-10-01'), (b'x-ratelimit-limit-requests', b'10000'), (b'x-ratelimit-limit-tokens', b'10000'), (b'x-ratelimit-remaining-requests', b'9998'), (b'x-ratelimit-remaining-tokens', b'9742'), (b'x-ratelimit-reset-requests', b'11.753s'), (b'x-ratelimit-reset-tokens', b'1.548s'), (b'x-request-id', b'req_81092538ef30a5d6eed26a8cf88ab104'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8d273a038df5ca1c-OTP'), (b'Content-Encoding', b'gzip'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-10-14 14:28:36,107 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2024-10-14 14:28:36,107 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-10-14 14:28:36,107 - DEBUG - receive_response_body.complete
2024-10-14 14:28:36,108 - DEBUG - response_closed.started
2024-10-14 14:28:36,108 - DEBUG - response_closed.complete
2024-10-14 14:28:36,108 - DEBUG - HTTP Response: POST https://api.openai.com/v1/chat/completions "200 OK" Headers({'date': 'Mon, 14 Oct 2024 11:28:36 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-expose-headers': 'X-Request-ID', 'openai-organization': 'user-kzzh9hik9ryjiou4ftvhondh', 'openai-processing-ms': '2329', 'openai-version': '2020-10-01', 'x-ratelimit-limit-requests': '10000', 'x-ratelimit-limit-tokens': '10000', 'x-ratelimit-remaining-requests': '9998', 'x-ratelimit-remaining-tokens': '9742', 'x-ratelimit-reset-requests': '11.753s', 'x-ratelimit-reset-tokens': '1.548s', 'x-request-id': 'req_81092538ef30a5d6eed26a8cf88ab104', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8d273a038df5ca1c-OTP', 'content-encoding': 'gzip', 'alt-svc': 'h3=":443"; ma=86400'})
2024-10-14 14:28:36,108 - DEBUG - request_id: req_81092538ef30a5d6eed26a8cf88ab104
2024-10-14 14:28:36,109 - DEBUG - Instructor Raw Response: ChatCompletion(id='chatcmpl-AIDXWkcQOz3Q62D8kCJyrUr1mXIRn', choices=[Choice(finish_reason='stop', index=0, logprobs=None, message=ChatCompletionMessage(content=None, refusal=None, role='assistant', function_call=None, tool_calls=[ChatCompletionMessageToolCall(id='call_eMu5UoUcluX6KVnCI7dKfafI', function=Function(arguments='{\n"name": "ELENA VASILESCU",\n"address": "Mun. Bucuresti Sec. 5 Str Nicolae Iorga nr.3 900 B"\n}', name='PIIData'), type='function')]))], created=1728905314, model='gpt-4-0613', object='chat.completion', service_tier=None, system_fingerprint=None, usage=CompletionUsage(completion_tokens=42, prompt_tokens=380, total_tokens=422, completion_tokens_details=None, prompt_tokens_details=None))
2024-10-14 14:28:36,110 - DEBUG - Extracted PII: name='ELENA VASILESCU' address='Mun. Bucuresti Sec. 5 Str Nicolae Iorga nr.3 900 B'
2024-10-14 14:28:37,301 - DEBUG - Instructor Request: mode.value='tool_call', response_model=<class 'models.ContractParties'>, new_kwargs={'model': 'gpt-4', 'messages': [{'role': 'system', 'content': '\nYou are an AI agent specializing in contract creation and personal information extraction. \n\nYour role is:\n 1. Guide the process of extracting information from documents..\n 2. Verifying the extracted information with human input.\n 3. Identifying parties. \n 4. Constructing a contract. \n\n\nFollow the workflow precisely and ask for human input when needed.\n\n'}, {'role': 'user', 'content': 'Identify the buyer and seller from the given information:\n\nName: ISPILANTE SENTIMENT BRUSLI, Address: Videle Jud: Teleorman Sos. Giurgiului nr.1 695 TR\nName: ELENA VASILESCU, Address: Mun. Bucuresti Sec. 5 Str Nicolae Iorga nr.3 900 B'}], 'tools': [{'type': 'function', 'function': {'name': 'ContractParties', 'description': 'Correctly extracted `ContractParties` with all the required parameters with correct types', 'parameters': {'properties': {'buyer': {'description': 'Name of the buyer', 'title': 'Buyer', 'type': 'string'}, 'seller': {'description': 'Name of the seller', 'title': 'Seller', 'type': 'string'}}, 'required': ['buyer', 'seller'], 'type': 'object'}}}], 'tool_choice': {'type': 'function', 'function': {'name': 'ContractParties'}}}
2024-10-14 14:28:37,301 - DEBUG - max_retries: 1
2024-10-14 14:28:37,303 - DEBUG - Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'json_data': {'messages': [{'role': 'system', 'content': '\nYou are an AI agent specializing in contract creation and personal information extraction. \n\nYour role is:\n 1. Guide the process of extracting information from documents..\n 2. Verifying the extracted information with human input.\n 3. Identifying parties. \n 4. Constructing a contract. \n\n\nFollow the workflow precisely and ask for human input when needed.\n\n'}, {'role': 'user', 'content': 'Identify the buyer and seller from the given information:\n\nName: ISPILANTE SENTIMENT BRUSLI, Address: Videle Jud: Teleorman Sos. Giurgiului nr.1 695 TR\nName: ELENA VASILESCU, Address: Mun. Bucuresti Sec. 5 Str Nicolae Iorga nr.3 900 B'}], 'model': 'gpt-4', 'tool_choice': {'type': 'function', 'function': {'name': 'ContractParties'}}, 'tools': [{'type': 'function', 'function': {'name': 'ContractParties', 'description': 'Correctly extracted `ContractParties` with all the required parameters with correct types', 'parameters': {'properties': {'buyer': {'description': 'Name of the buyer', 'title': 'Buyer', 'type': 'string'}, 'seller': {'description': 'Name of the seller', 'title': 'Seller', 'type': 'string'}}, 'required': ['buyer', 'seller'], 'type': 'object'}}}]}}
2024-10-14 14:28:37,303 - DEBUG - Sending HTTP Request: POST https://api.openai.com/v1/chat/completions
2024-10-14 14:28:37,304 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-10-14 14:28:37,304 - DEBUG - send_request_headers.complete
2024-10-14 14:28:37,304 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-10-14 14:28:37,304 - DEBUG - send_request_body.complete
2024-10-14 14:28:37,304 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-10-14 14:28:39,423 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Mon, 14 Oct 2024 11:28:39 GMT'), (b'Content-Type', b'application/json'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'user-kzzh9hik9ryjiou4ftvhondh'), (b'openai-processing-ms', b'1927'), (b'openai-version', b'2020-10-01'), (b'x-ratelimit-limit-requests', b'10000'), (b'x-ratelimit-limit-tokens', b'10000'), (b'x-ratelimit-remaining-requests', b'9998'), (b'x-ratelimit-remaining-tokens', b'9834'), (b'x-ratelimit-reset-requests', b'16.709s'), (b'x-ratelimit-reset-tokens', b'996ms'), (b'x-request-id', b'req_59aa0a0b19f37bd29118360ada6ddf16'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8d273a1a9c49ca1c-OTP'), (b'Content-Encoding', b'gzip'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-10-14 14:28:39,423 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2024-10-14 14:28:39,424 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-10-14 14:28:39,424 - DEBUG - receive_response_body.complete
2024-10-14 14:28:39,424 - DEBUG - response_closed.started
2024-10-14 14:28:39,424 - DEBUG - response_closed.complete
2024-10-14 14:28:39,424 - DEBUG - HTTP Response: POST https://api.openai.com/v1/chat/completions "200 OK" Headers({'date': 'Mon, 14 Oct 2024 11:28:39 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-expose-headers': 'X-Request-ID', 'openai-organization': 'user-kzzh9hik9ryjiou4ftvhondh', 'openai-processing-ms': '1927', 'openai-version': '2020-10-01', 'x-ratelimit-limit-requests': '10000', 'x-ratelimit-limit-tokens': '10000', 'x-ratelimit-remaining-requests': '9998', 'x-ratelimit-remaining-tokens': '9834', 'x-ratelimit-reset-requests': '16.709s', 'x-ratelimit-reset-tokens': '996ms', 'x-request-id': 'req_59aa0a0b19f37bd29118360ada6ddf16', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8d273a1a9c49ca1c-OTP', 'content-encoding': 'gzip', 'alt-svc': 'h3=":443"; ma=86400'})
2024-10-14 14:28:39,424 - DEBUG - request_id: req_59aa0a0b19f37bd29118360ada6ddf16
2024-10-14 14:28:39,425 - DEBUG - Instructor Raw Response: ChatCompletion(id='chatcmpl-AIDXZ0nF5Nc5oQE0hDVzNCRXsnl91', choices=[Choice(finish_reason='stop', index=0, logprobs=None, message=ChatCompletionMessage(content=None, refusal=None, role='assistant', function_call=None, tool_calls=[ChatCompletionMessageToolCall(id='call_VKrl6Wq93glcGxuBmYf3gC06', function=Function(arguments='{\n"buyer": "ISPILANTE SENTIMENT BRUSLI",\n"seller": "ELENA VASILESCU"\n}', name='ContractParties'), type='function')]))], created=1728905317, model='gpt-4-0613', object='chat.completion', service_tier=None, system_fingerprint=None, usage=CompletionUsage(completion_tokens=28, prompt_tokens=232, total_tokens=260, completion_tokens_details=None, prompt_tokens_details=None))
2024-10-14 14:28:44,237 - DEBUG - close.started
2024-10-14 14:28:44,237 - DEBUG - close.complete
2024-10-14 14:40:09,752 - WARNING - Neither CUDA nor MPS are available - defaulting to CPU. Note: This module is much faster with a GPU.
2024-10-14 14:40:11,035 - DEBUG - load_ssl_context verify=True cert=None trust_env=True http2=False
2024-10-14 14:40:11,036 - DEBUG - load_verify_locations cafile='D:\\deve\\contract_automation\\.venv\\Lib\\site-packages\\certifi\\cacert.pem'
2024-10-14 14:40:11,357 - DEBUG - Patching `client.chat.completions.create` with mode=<Mode.TOOLS: 'tool_call'>
2024-10-14 14:42:36,063 - WARNING - Neither CUDA nor MPS are available - defaulting to CPU. Note: This module is much faster with a GPU.
2024-10-14 14:42:37,334 - DEBUG - load_ssl_context verify=True cert=None trust_env=True http2=False
2024-10-14 14:42:37,335 - DEBUG - load_verify_locations cafile='D:\\deve\\contract_automation\\.venv\\Lib\\site-packages\\certifi\\cacert.pem'
2024-10-14 14:42:37,657 - DEBUG - Patching `client.chat.completions.create` with mode=<Mode.TOOLS: 'tool_call'>
2024-10-14 14:43:17,583 - WARNING - Neither CUDA nor MPS are available - defaulting to CPU. Note: This module is much faster with a GPU.
2024-10-14 14:43:18,840 - DEBUG - load_ssl_context verify=True cert=None trust_env=True http2=False
2024-10-14 14:43:18,840 - DEBUG - load_verify_locations cafile='D:\\deve\\contract_automation\\.venv\\Lib\\site-packages\\certifi\\cacert.pem'
2024-10-14 14:43:19,164 - DEBUG - Patching `client.chat.completions.create` with mode=<Mode.TOOLS: 'tool_call'>
2024-10-14 14:43:40,026 - WARNING - Neither CUDA nor MPS are available - defaulting to CPU. Note: This module is much faster with a GPU.
2024-10-14 14:43:41,292 - DEBUG - load_ssl_context verify=True cert=None trust_env=True http2=False
2024-10-14 14:43:41,293 - DEBUG - load_verify_locations cafile='D:\\deve\\contract_automation\\.venv\\Lib\\site-packages\\certifi\\cacert.pem'
2024-10-14 14:43:41,619 - DEBUG - Patching `client.chat.completions.create` with mode=<Mode.TOOLS: 'tool_call'>
2024-10-14 14:43:41,623 - DEBUG - Using proactor: IocpProactor
2024-10-14 14:43:41,641 - DEBUG - STREAM b'IHDR' 16 13
2024-10-14 14:43:41,641 - DEBUG - STREAM b'iCCP' 41 3152
2024-10-14 14:43:41,641 - DEBUG - iCCP profile name b'ICC Profile'
2024-10-14 14:43:41,641 - DEBUG - Compression method 0
2024-10-14 14:43:41,641 - DEBUG - STREAM b'eXIf' 3205 138
2024-10-14 14:43:41,641 - DEBUG - STREAM b'pHYs' 3355 9
2024-10-14 14:43:41,642 - DEBUG - STREAM b'iTXt' 3376 470
2024-10-14 14:43:41,642 - DEBUG - STREAM b'iDOT' 3858 28
2024-10-14 14:43:41,642 - DEBUG - b'iDOT' 3858 28 (unknown)
2024-10-14 14:43:41,642 - DEBUG - STREAM b'IDAT' 3898 16384
2024-10-14 14:43:41,642 - DEBUG - STREAM b'IHDR' 16 13
2024-10-14 14:43:41,642 - DEBUG - STREAM b'iCCP' 41 3152
2024-10-14 14:43:41,642 - DEBUG - iCCP profile name b'ICC Profile'
2024-10-14 14:43:41,642 - DEBUG - Compression method 0
2024-10-14 14:43:41,642 - DEBUG - STREAM b'eXIf' 3205 138
2024-10-14 14:43:41,642 - DEBUG - STREAM b'pHYs' 3355 9
2024-10-14 14:43:41,642 - DEBUG - STREAM b'iTXt' 3376 470
2024-10-14 14:43:41,642 - DEBUG - STREAM b'iDOT' 3858 28
2024-10-14 14:43:41,642 - DEBUG - b'iDOT' 3858 28 (unknown)
2024-10-14 14:43:41,642 - DEBUG - STREAM b'IDAT' 3898 16384
2024-10-14 14:43:41,652 - DEBUG - tag: XResolution (282) - type: rational (5) Tag Location: 22 - Data Location: 62 - value: b'\x00\x00\x00\x90\x00\x00\x00\x01'
2024-10-14 14:43:41,652 - DEBUG - tag: YResolution (283) - type: rational (5) Tag Location: 34 - Data Location: 70 - value: b'\x00\x00\x00\x90\x00\x00\x00\x01'
2024-10-14 14:43:41,652 - DEBUG - tag: ResolutionUnit (296) - type: short (3) - value: b'\x00\x02'
2024-10-14 14:43:41,652 - DEBUG - tag: ExifIFD (34665) - type: long (4) - value: b'\x00\x00\x00N'
2024-10-14 14:43:41,652 - DEBUG - Error closing: Operation on closed image
2024-10-14 14:43:43,714 - DEBUG - STREAM b'IHDR' 16 13
2024-10-14 14:43:43,714 - DEBUG - STREAM b'iCCP' 41 3152
2024-10-14 14:43:43,714 - DEBUG - iCCP profile name b'ICC Profile'
2024-10-14 14:43:43,714 - DEBUG - Compression method 0
2024-10-14 14:43:43,714 - DEBUG - STREAM b'eXIf' 3205 138
2024-10-14 14:43:43,714 - DEBUG - STREAM b'pHYs' 3355 9
2024-10-14 14:43:43,714 - DEBUG - STREAM b'iTXt' 3376 471
2024-10-14 14:43:43,714 - DEBUG - STREAM b'iDOT' 3859 28
2024-10-14 14:43:43,714 - DEBUG - b'iDOT' 3859 28 (unknown)
2024-10-14 14:43:43,714 - DEBUG - STREAM b'IDAT' 3899 16384
2024-10-14 14:43:43,714 - DEBUG - STREAM b'IHDR' 16 13
2024-10-14 14:43:43,714 - DEBUG - STREAM b'iCCP' 41 3152
2024-10-14 14:43:43,714 - DEBUG - iCCP profile name b'ICC Profile'
2024-10-14 14:43:43,714 - DEBUG - Compression method 0
2024-10-14 14:43:43,714 - DEBUG - STREAM b'eXIf' 3205 138
2024-10-14 14:43:43,714 - DEBUG - STREAM b'pHYs' 3355 9
2024-10-14 14:43:43,714 - DEBUG - STREAM b'iTXt' 3376 471
2024-10-14 14:43:43,714 - DEBUG - STREAM b'iDOT' 3859 28
2024-10-14 14:43:43,714 - DEBUG - b'iDOT' 3859 28 (unknown)
2024-10-14 14:43:43,714 - DEBUG - STREAM b'IDAT' 3899 16384
2024-10-14 14:43:43,731 - DEBUG - tag: XResolution (282) - type: rational (5) Tag Location: 22 - Data Location: 62 - value: b'\x00\x00\x00\x90\x00\x00\x00\x01'
2024-10-14 14:43:43,731 - DEBUG - tag: YResolution (283) - type: rational (5) Tag Location: 34 - Data Location: 70 - value: b'\x00\x00\x00\x90\x00\x00\x00\x01'
2024-10-14 14:43:43,731 - DEBUG - tag: ResolutionUnit (296) - type: short (3) - value: b'\x00\x02'
2024-10-14 14:43:43,731 - DEBUG - tag: ExifIFD (34665) - type: long (4) - value: b'\x00\x00\x00N'
2024-10-14 14:43:43,732 - DEBUG - Error closing: Operation on closed image
2024-10-14 14:43:46,244 - DEBUG - Instructor Request: mode.value='tool_call', response_model=<class 'models.AgentAction'>, new_kwargs={'model': 'gpt-4', 'messages': [{'role': 'system', 'content': '\nYou are an AI agent specializing in contract creation and personal information extraction. \n\nYour role is:\n 1. Guide the process of extracting information from documents..\n 2. Verifying the extracted information with human input.\n 3. Identifying parties. \n 4. Constructing a contract. \n\n\nFollow the workflow precisely and ask for human input when needed.\n\n'}, {'role': 'user', 'content': "Current state: {'verified_pii_data': [], 'parties': None, 'contract_details': None, 'contract': None, 'current_action': None}\nWhat action should be taken next?"}], 'tools': [{'type': 'function', 'function': {'name': 'AgentAction', 'description': 'Correctly extracted `AgentAction` with all the required parameters with correct types', 'parameters': {'properties': {'action': {'description': 'Action to be performed by the agent', 'title': 'Action', 'type': 'string'}, 'parameters': {'additionalProperties': {'type': 'string'}, 'description': 'Parameters for the action', 'title': 'Parameters', 'type': 'object'}}, 'required': ['action', 'parameters'], 'type': 'object'}}}], 'tool_choice': {'type': 'function', 'function': {'name': 'AgentAction'}}}
2024-10-14 14:43:46,245 - DEBUG - max_retries: 1
2024-10-14 14:43:46,247 - DEBUG - Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'json_data': {'messages': [{'role': 'system', 'content': '\nYou are an AI agent specializing in contract creation and personal information extraction. \n\nYour role is:\n 1. Guide the process of extracting information from documents..\n 2. Verifying the extracted information with human input.\n 3. Identifying parties. \n 4. Constructing a contract. \n\n\nFollow the workflow precisely and ask for human input when needed.\n\n'}, {'role': 'user', 'content': "Current state: {'verified_pii_data': [], 'parties': None, 'contract_details': None, 'contract': None, 'current_action': None}\nWhat action should be taken next?"}], 'model': 'gpt-4', 'tool_choice': {'type': 'function', 'function': {'name': 'AgentAction'}}, 'tools': [{'type': 'function', 'function': {'name': 'AgentAction', 'description': 'Correctly extracted `AgentAction` with all the required parameters with correct types', 'parameters': {'properties': {'action': {'description': 'Action to be performed by the agent', 'title': 'Action', 'type': 'string'}, 'parameters': {'additionalProperties': {'type': 'string'}, 'description': 'Parameters for the action', 'title': 'Parameters', 'type': 'object'}}, 'required': ['action', 'parameters'], 'type': 'object'}}}]}}
2024-10-14 14:43:46,284 - DEBUG - Sending HTTP Request: POST https://api.openai.com/v1/chat/completions
2024-10-14 14:43:46,285 - DEBUG - connect_tcp.started host='api.openai.com' port=443 local_address=None timeout=5.0 socket_options=None
2024-10-14 14:43:46,357 - DEBUG - connect_tcp.complete return_value=<httpcore._backends.sync.SyncStream object at 0x00000179F6C0E8A0>
2024-10-14 14:43:46,357 - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x00000179F6A55AD0> server_hostname='api.openai.com' timeout=5.0
2024-10-14 14:43:46,365 - DEBUG - start_tls.complete return_value=<httpcore._backends.sync.SyncStream object at 0x00000179F6C0E7E0>
2024-10-14 14:43:46,365 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-10-14 14:43:46,366 - DEBUG - send_request_headers.complete
2024-10-14 14:43:46,366 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-10-14 14:43:46,366 - DEBUG - send_request_body.complete
2024-10-14 14:43:46,366 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-10-14 14:43:47,450 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Mon, 14 Oct 2024 11:43:47 GMT'), (b'Content-Type', b'application/json'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'user-kzzh9hik9ryjiou4ftvhondh'), (b'openai-processing-ms', b'920'), (b'openai-version', b'2020-10-01'), (b'x-ratelimit-limit-requests', b'10000'), (b'x-ratelimit-limit-tokens', b'10000'), (b'x-ratelimit-remaining-requests', b'9999'), (b'x-ratelimit-remaining-tokens', b'9853'), (b'x-ratelimit-reset-requests', b'8.64s'), (b'x-ratelimit-reset-tokens', b'882ms'), (b'x-request-id', b'req_08cc0f66c425559d8883528b8233f852'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'CF-Cache-Status', b'DYNAMIC'), (b'Set-Cookie', b'__cf_bm=XRMOKo5.EtsiOalsH7ZgPtwGq0rXl2n1.pKPnnWBrBU-1728906227-1.0.1.1-o8IE5bkoD6XTvCfXYgDGXoRPnuY9dWD8eeaGcnafaGNs.HOvTwOnSWc.f3lFTm9CNzMPotxhH.wL8SsjzC2VFw; path=/; expires=Mon, 14-Oct-24 12:13:47 GMT; domain=.api.openai.com; HttpOnly; Secure; SameSite=None'), (b'X-Content-Type-Options', b'nosniff'), (b'Set-Cookie', b'_cfuvid=n1Xv2J8tnMx5fiQiXqXWRT605w5WaUKTS0bggaiIgiM-1728906227719-0.0.1.1-604800000; path=/; domain=.api.openai.com; HttpOnly; Secure; SameSite=None'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8d27504c79d070d0-OTP'), (b'Content-Encoding', b'gzip'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-10-14 14:43:47,451 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2024-10-14 14:43:47,451 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-10-14 14:43:47,451 - DEBUG - receive_response_body.complete
2024-10-14 14:43:47,451 - DEBUG - response_closed.started
2024-10-14 14:43:47,451 - DEBUG - response_closed.complete
2024-10-14 14:43:47,451 - DEBUG - HTTP Response: POST https://api.openai.com/v1/chat/completions "200 OK" Headers([('date', 'Mon, 14 Oct 2024 11:43:47 GMT'), ('content-type', 'application/json'), ('transfer-encoding', 'chunked'), ('connection', 'keep-alive'), ('access-control-expose-headers', 'X-Request-ID'), ('openai-organization', 'user-kzzh9hik9ryjiou4ftvhondh'), ('openai-processing-ms', '920'), ('openai-version', '2020-10-01'), ('x-ratelimit-limit-requests', '10000'), ('x-ratelimit-limit-tokens', '10000'), ('x-ratelimit-remaining-requests', '9999'), ('x-ratelimit-remaining-tokens', '9853'), ('x-ratelimit-reset-requests', '8.64s'), ('x-ratelimit-reset-tokens', '882ms'), ('x-request-id', 'req_08cc0f66c425559d8883528b8233f852'), ('strict-transport-security', 'max-age=31536000; includeSubDomains; preload'), ('cf-cache-status', 'DYNAMIC'), ('set-cookie', '__cf_bm=XRMOKo5.EtsiOalsH7ZgPtwGq0rXl2n1.pKPnnWBrBU-1728906227-1.0.1.1-o8IE5bkoD6XTvCfXYgDGXoRPnuY9dWD8eeaGcnafaGNs.HOvTwOnSWc.f3lFTm9CNzMPotxhH.wL8SsjzC2VFw; path=/; expires=Mon, 14-Oct-24 12:13:47 GMT; domain=.api.openai.com; HttpOnly; Secure; SameSite=None'), ('x-content-type-options', 'nosniff'), ('set-cookie', '_cfuvid=n1Xv2J8tnMx5fiQiXqXWRT605w5WaUKTS0bggaiIgiM-1728906227719-0.0.1.1-604800000; path=/; domain=.api.openai.com; HttpOnly; Secure; SameSite=None'), ('server', 'cloudflare'), ('cf-ray', '8d27504c79d070d0-OTP'), ('content-encoding', 'gzip'), ('alt-svc', 'h3=":443"; ma=86400')])
2024-10-14 14:43:47,451 - DEBUG - request_id: req_08cc0f66c425559d8883528b8233f852
2024-10-14 14:43:47,453 - DEBUG - Instructor Raw Response: ChatCompletion(id='chatcmpl-AIDmEKbKYNw2frrLgAfYoL7kx31sJ', choices=[Choice(finish_reason='stop', index=0, logprobs=None, message=ChatCompletionMessage(content=None, refusal=None, role='assistant', function_call=None, tool_calls=[ChatCompletionMessageToolCall(id='call_MPRDU4RaUbRsclQAklB9u9OH', function=Function(arguments='{\n"action": "extract_information_from_documents"\n}', name='AgentAction'), type='function')]))], created=1728906226, model='gpt-4-0613', object='chat.completion', service_tier=None, system_fingerprint=None, usage=CompletionUsage(completion_tokens=11, prompt_tokens=183, total_tokens=194, completion_tokens_details=None, prompt_tokens_details=None))
2024-10-14 14:43:47,454 - DEBUG - Instructor Request: mode.value='tool_call', response_model=<class 'models.AgentAction'>, new_kwargs={'model': 'gpt-4', 'messages': [{'role': 'system', 'content': '\nYou are an AI agent specializing in contract creation and personal information extraction. \n\nYour role is:\n 1. Guide the process of extracting information from documents..\n 2. Verifying the extracted information with human input.\n 3. Identifying parties. \n 4. Constructing a contract. \n\n\nFollow the workflow precisely and ask for human input when needed.\n\n'}, {'role': 'user', 'content': "Current state: {'verified_pii_data': [], 'parties': None, 'contract_details': None, 'contract': None, 'current_action': None}\nWhat action should be taken next?"}], 'tools': [{'type': 'function', 'function': {'name': 'AgentAction', 'description': 'Correctly extracted `AgentAction` with all the required parameters with correct types', 'parameters': {'properties': {'action': {'description': 'Action to be performed by the agent', 'title': 'Action', 'type': 'string'}, 'parameters': {'additionalProperties': {'type': 'string'}, 'description': 'Parameters for the action', 'title': 'Parameters', 'type': 'object'}}, 'required': ['action', 'parameters'], 'type': 'object'}}}], 'tool_choice': {'type': 'function', 'function': {'name': 'AgentAction'}}}
2024-10-14 14:43:47,454 - DEBUG - max_retries: 1
2024-10-14 14:43:47,456 - DEBUG - Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'json_data': {'messages': [{'role': 'system', 'content': '\nYou are an AI agent specializing in contract creation and personal information extraction. \n\nYour role is:\n 1. Guide the process of extracting information from documents..\n 2. Verifying the extracted information with human input.\n 3. Identifying parties. \n 4. Constructing a contract. \n\n\nFollow the workflow precisely and ask for human input when needed.\n\n'}, {'role': 'user', 'content': "Current state: {'verified_pii_data': [], 'parties': None, 'contract_details': None, 'contract': None, 'current_action': None}\nWhat action should be taken next?"}], 'model': 'gpt-4', 'tool_choice': {'type': 'function', 'function': {'name': 'AgentAction'}}, 'tools': [{'type': 'function', 'function': {'name': 'AgentAction', 'description': 'Correctly extracted `AgentAction` with all the required parameters with correct types', 'parameters': {'properties': {'action': {'description': 'Action to be performed by the agent', 'title': 'Action', 'type': 'string'}, 'parameters': {'additionalProperties': {'type': 'string'}, 'description': 'Parameters for the action', 'title': 'Parameters', 'type': 'object'}}, 'required': ['action', 'parameters'], 'type': 'object'}}}]}}
2024-10-14 14:43:47,456 - DEBUG - Sending HTTP Request: POST https://api.openai.com/v1/chat/completions
2024-10-14 14:43:47,456 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-10-14 14:43:47,456 - DEBUG - send_request_headers.complete
2024-10-14 14:43:47,456 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-10-14 14:43:47,457 - DEBUG - send_request_body.complete
2024-10-14 14:43:47,457 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-10-14 14:43:48,327 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Mon, 14 Oct 2024 11:43:48 GMT'), (b'Content-Type', b'application/json'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'user-kzzh9hik9ryjiou4ftvhondh'), (b'openai-processing-ms', b'718'), (b'openai-version', b'2020-10-01'), (b'x-ratelimit-limit-requests', b'10000'), (b'x-ratelimit-limit-tokens', b'10000'), (b'x-ratelimit-remaining-requests', b'9998'), (b'x-ratelimit-remaining-tokens', b'9829'), (b'x-ratelimit-reset-requests', b'16.205s'), (b'x-ratelimit-reset-tokens', b'1.02s'), (b'x-request-id', b'req_e62d153f53ed56ee2a51d67d8b898651'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8d27505348dd70d0-OTP'), (b'Content-Encoding', b'gzip'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-10-14 14:43:48,327 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2024-10-14 14:43:48,328 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-10-14 14:43:48,328 - DEBUG - receive_response_body.complete
2024-10-14 14:43:48,328 - DEBUG - response_closed.started
2024-10-14 14:43:48,328 - DEBUG - response_closed.complete
2024-10-14 14:43:48,328 - DEBUG - HTTP Response: POST https://api.openai.com/v1/chat/completions "200 OK" Headers({'date': 'Mon, 14 Oct 2024 11:43:48 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-expose-headers': 'X-Request-ID', 'openai-organization': 'user-kzzh9hik9ryjiou4ftvhondh', 'openai-processing-ms': '718', 'openai-version': '2020-10-01', 'x-ratelimit-limit-requests': '10000', 'x-ratelimit-limit-tokens': '10000', 'x-ratelimit-remaining-requests': '9998', 'x-ratelimit-remaining-tokens': '9829', 'x-ratelimit-reset-requests': '16.205s', 'x-ratelimit-reset-tokens': '1.02s', 'x-request-id': 'req_e62d153f53ed56ee2a51d67d8b898651', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8d27505348dd70d0-OTP', 'content-encoding': 'gzip', 'alt-svc': 'h3=":443"; ma=86400'})
2024-10-14 14:43:48,328 - DEBUG - request_id: req_e62d153f53ed56ee2a51d67d8b898651
2024-10-14 14:43:48,329 - DEBUG - Instructor Raw Response: ChatCompletion(id='chatcmpl-AIDmFbQMN3cQHNyAmTakK5TC9Ap9K', choices=[Choice(finish_reason='stop', index=0, logprobs=None, message=ChatCompletionMessage(content=None, refusal=None, role='assistant', function_call=None, tool_calls=[ChatCompletionMessageToolCall(id='call_aZ0AFQouthYw9gNILVThhP4w', function=Function(arguments='{\n"action": "extract_information"\n}', name='AgentAction'), type='function')]))], created=1728906227, model='gpt-4-0613', object='chat.completion', service_tier=None, system_fingerprint=None, usage=CompletionUsage(completion_tokens=9, prompt_tokens=183, total_tokens=192, completion_tokens_details=None, prompt_tokens_details=None))
2024-10-14 14:43:48,331 - DEBUG - Instructor Request: mode.value='tool_call', response_model=<class 'models.AgentAction'>, new_kwargs={'model': 'gpt-4', 'messages': [{'role': 'system', 'content': '\nYou are an AI agent specializing in contract creation and personal information extraction. \n\nYour role is:\n 1. Guide the process of extracting information from documents..\n 2. Verifying the extracted information with human input.\n 3. Identifying parties. \n 4. Constructing a contract. \n\n\nFollow the workflow precisely and ask for human input when needed.\n\n'}, {'role': 'user', 'content': "Current state: {'verified_pii_data': [], 'parties': None, 'contract_details': None, 'contract': None, 'current_action': None}\nWhat action should be taken next?"}], 'tools': [{'type': 'function', 'function': {'name': 'AgentAction', 'description': 'Correctly extracted `AgentAction` with all the required parameters with correct types', 'parameters': {'properties': {'action': {'description': 'Action to be performed by the agent', 'title': 'Action', 'type': 'string'}, 'parameters': {'additionalProperties': {'type': 'string'}, 'description': 'Parameters for the action', 'title': 'Parameters', 'type': 'object'}}, 'required': ['action', 'parameters'], 'type': 'object'}}}], 'tool_choice': {'type': 'function', 'function': {'name': 'AgentAction'}}}
2024-10-14 14:43:48,331 - DEBUG - max_retries: 1
2024-10-14 14:43:48,335 - DEBUG - Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'json_data': {'messages': [{'role': 'system', 'content': '\nYou are an AI agent specializing in contract creation and personal information extraction. \n\nYour role is:\n 1. Guide the process of extracting information from documents..\n 2. Verifying the extracted information with human input.\n 3. Identifying parties. \n 4. Constructing a contract. \n\n\nFollow the workflow precisely and ask for human input when needed.\n\n'}, {'role': 'user', 'content': "Current state: {'verified_pii_data': [], 'parties': None, 'contract_details': None, 'contract': None, 'current_action': None}\nWhat action should be taken next?"}], 'model': 'gpt-4', 'tool_choice': {'type': 'function', 'function': {'name': 'AgentAction'}}, 'tools': [{'type': 'function', 'function': {'name': 'AgentAction', 'description': 'Correctly extracted `AgentAction` with all the required parameters with correct types', 'parameters': {'properties': {'action': {'description': 'Action to be performed by the agent', 'title': 'Action', 'type': 'string'}, 'parameters': {'additionalProperties': {'type': 'string'}, 'description': 'Parameters for the action', 'title': 'Parameters', 'type': 'object'}}, 'required': ['action', 'parameters'], 'type': 'object'}}}]}}
2024-10-14 14:43:48,336 - DEBUG - Sending HTTP Request: POST https://api.openai.com/v1/chat/completions
2024-10-14 14:43:48,336 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-10-14 14:43:48,336 - DEBUG - send_request_headers.complete
2024-10-14 14:43:48,337 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-10-14 14:43:48,337 - DEBUG - send_request_body.complete
2024-10-14 14:43:48,337 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-10-14 14:43:49,342 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Mon, 14 Oct 2024 11:43:49 GMT'), (b'Content-Type', b'application/json'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'user-kzzh9hik9ryjiou4ftvhondh'), (b'openai-processing-ms', b'846'), (b'openai-version', b'2020-10-01'), (b'x-ratelimit-limit-requests', b'10000'), (b'x-ratelimit-limit-tokens', b'10000'), (b'x-ratelimit-remaining-requests', b'9997'), (b'x-ratelimit-remaining-tokens', b'9786'), (b'x-ratelimit-reset-requests', b'23.954s'), (b'x-ratelimit-reset-tokens', b'1.281s'), (b'x-request-id', b'req_0517191513286132336df77cba315d41'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8d275058ce8c70d0-OTP'), (b'Content-Encoding', b'gzip'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-10-14 14:43:49,343 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2024-10-14 14:43:49,343 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-10-14 14:43:49,343 - DEBUG - receive_response_body.complete
2024-10-14 14:43:49,344 - DEBUG - response_closed.started
2024-10-14 14:43:49,344 - DEBUG - response_closed.complete
2024-10-14 14:43:49,344 - DEBUG - HTTP Response: POST https://api.openai.com/v1/chat/completions "200 OK" Headers({'date': 'Mon, 14 Oct 2024 11:43:49 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-expose-headers': 'X-Request-ID', 'openai-organization': 'user-kzzh9hik9ryjiou4ftvhondh', 'openai-processing-ms': '846', 'openai-version': '2020-10-01', 'x-ratelimit-limit-requests': '10000', 'x-ratelimit-limit-tokens': '10000', 'x-ratelimit-remaining-requests': '9997', 'x-ratelimit-remaining-tokens': '9786', 'x-ratelimit-reset-requests': '23.954s', 'x-ratelimit-reset-tokens': '1.281s', 'x-request-id': 'req_0517191513286132336df77cba315d41', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8d275058ce8c70d0-OTP', 'content-encoding': 'gzip', 'alt-svc': 'h3=":443"; ma=86400'})
2024-10-14 14:43:49,344 - DEBUG - request_id: req_0517191513286132336df77cba315d41
2024-10-14 14:43:49,344 - DEBUG - Instructor Raw Response: ChatCompletion(id='chatcmpl-AIDmGXsZVzZZT9aB26dVQChHDXHm8', choices=[Choice(finish_reason='stop', index=0, logprobs=None, message=ChatCompletionMessage(content=None, refusal=None, role='assistant', function_call=None, tool_calls=[ChatCompletionMessageToolCall(id='call_kyLFogkrUvVtjRl5mhLtaWvu', function=Function(arguments='{\n"action": "extract_parts_from_documents"\n}', name='AgentAction'), type='function')]))], created=1728906228, model='gpt-4-0613', object='chat.completion', service_tier=None, system_fingerprint=None, usage=CompletionUsage(completion_tokens=11, prompt_tokens=183, total_tokens=194, completion_tokens_details=None, prompt_tokens_details=None))
2024-10-14 14:43:49,346 - DEBUG - Instructor Request: mode.value='tool_call', response_model=<class 'models.AgentAction'>, new_kwargs={'model': 'gpt-4', 'messages': [{'role': 'system', 'content': '\nYou are an AI agent specializing in contract creation and personal information extraction. \n\nYour role is:\n 1. Guide the process of extracting information from documents..\n 2. Verifying the extracted information with human input.\n 3. Identifying parties. \n 4. Constructing a contract. \n\n\nFollow the workflow precisely and ask for human input when needed.\n\n'}, {'role': 'user', 'content': "Current state: {'verified_pii_data': [], 'parties': None, 'contract_details': None, 'contract': None, 'current_action': None}\nWhat action should be taken next?"}], 'tools': [{'type': 'function', 'function': {'name': 'AgentAction', 'description': 'Correctly extracted `AgentAction` with all the required parameters with correct types', 'parameters': {'properties': {'action': {'description': 'Action to be performed by the agent', 'title': 'Action', 'type': 'string'}, 'parameters': {'additionalProperties': {'type': 'string'}, 'description': 'Parameters for the action', 'title': 'Parameters', 'type': 'object'}}, 'required': ['action', 'parameters'], 'type': 'object'}}}], 'tool_choice': {'type': 'function', 'function': {'name': 'AgentAction'}}}
2024-10-14 14:43:49,346 - DEBUG - max_retries: 1
2024-10-14 14:43:49,348 - DEBUG - Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'json_data': {'messages': [{'role': 'system', 'content': '\nYou are an AI agent specializing in contract creation and personal information extraction. \n\nYour role is:\n 1. Guide the process of extracting information from documents..\n 2. Verifying the extracted information with human input.\n 3. Identifying parties. \n 4. Constructing a contract. \n\n\nFollow the workflow precisely and ask for human input when needed.\n\n'}, {'role': 'user', 'content': "Current state: {'verified_pii_data': [], 'parties': None, 'contract_details': None, 'contract': None, 'current_action': None}\nWhat action should be taken next?"}], 'model': 'gpt-4', 'tool_choice': {'type': 'function', 'function': {'name': 'AgentAction'}}, 'tools': [{'type': 'function', 'function': {'name': 'AgentAction', 'description': 'Correctly extracted `AgentAction` with all the required parameters with correct types', 'parameters': {'properties': {'action': {'description': 'Action to be performed by the agent', 'title': 'Action', 'type': 'string'}, 'parameters': {'additionalProperties': {'type': 'string'}, 'description': 'Parameters for the action', 'title': 'Parameters', 'type': 'object'}}, 'required': ['action', 'parameters'], 'type': 'object'}}}]}}
2024-10-14 14:43:49,349 - DEBUG - Sending HTTP Request: POST https://api.openai.com/v1/chat/completions
2024-10-14 14:43:49,349 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-10-14 14:43:49,349 - DEBUG - send_request_headers.complete
2024-10-14 14:43:49,349 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-10-14 14:43:49,349 - DEBUG - send_request_body.complete
2024-10-14 14:43:49,349 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-10-14 14:43:50,007 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Mon, 14 Oct 2024 11:43:50 GMT'), (b'Content-Type', b'application/json'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'user-kzzh9hik9ryjiou4ftvhondh'), (b'openai-processing-ms', b'503'), (b'openai-version', b'2020-10-01'), (b'x-ratelimit-limit-requests', b'10000'), (b'x-ratelimit-limit-tokens', b'10000'), (b'x-ratelimit-remaining-requests', b'9996'), (b'x-ratelimit-remaining-tokens', b'9757'), (b'x-ratelimit-reset-requests', b'31.606s'), (b'x-ratelimit-reset-tokens', b'1.456s'), (b'x-request-id', b'req_417952a65ed87c3cb237ed68369f9133'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8d27505f2cb370d0-OTP'), (b'Content-Encoding', b'gzip'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-10-14 14:43:50,008 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2024-10-14 14:43:50,009 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-10-14 14:43:50,009 - DEBUG - receive_response_body.complete
2024-10-14 14:43:50,009 - DEBUG - response_closed.started
2024-10-14 14:43:50,009 - DEBUG - response_closed.complete
2024-10-14 14:43:50,010 - DEBUG - HTTP Response: POST https://api.openai.com/v1/chat/completions "200 OK" Headers({'date': 'Mon, 14 Oct 2024 11:43:50 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-expose-headers': 'X-Request-ID', 'openai-organization': 'user-kzzh9hik9ryjiou4ftvhondh', 'openai-processing-ms': '503', 'openai-version': '2020-10-01', 'x-ratelimit-limit-requests': '10000', 'x-ratelimit-limit-tokens': '10000', 'x-ratelimit-remaining-requests': '9996', 'x-ratelimit-remaining-tokens': '9757', 'x-ratelimit-reset-requests': '31.606s', 'x-ratelimit-reset-tokens': '1.456s', 'x-request-id': 'req_417952a65ed87c3cb237ed68369f9133', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8d27505f2cb370d0-OTP', 'content-encoding': 'gzip', 'alt-svc': 'h3=":443"; ma=86400'})
2024-10-14 14:43:50,010 - DEBUG - request_id: req_417952a65ed87c3cb237ed68369f9133
2024-10-14 14:43:50,010 - DEBUG - Instructor Raw Response: ChatCompletion(id='chatcmpl-AIDmHJDOw4um1dAOjrt21Eg788F1Q', choices=[Choice(finish_reason='stop', index=0, logprobs=None, message=ChatCompletionMessage(content=None, refusal=None, role='assistant', function_call=None, tool_calls=[ChatCompletionMessageToolCall(id='call_y0OCLqDnbOGlGkllwAFfx2kp', function=Function(arguments='{\n"action": "extract_information"\n}', name='AgentAction'), type='function')]))], created=1728906229, model='gpt-4-0613', object='chat.completion', service_tier=None, system_fingerprint=None, usage=CompletionUsage(completion_tokens=9, prompt_tokens=183, total_tokens=192, completion_tokens_details=None, prompt_tokens_details=None))
2024-10-14 14:43:50,012 - DEBUG - Instructor Request: mode.value='tool_call', response_model=<class 'models.AgentAction'>, new_kwargs={'model': 'gpt-4', 'messages': [{'role': 'system', 'content': '\nYou are an AI agent specializing in contract creation and personal information extraction. \n\nYour role is:\n 1. Guide the process of extracting information from documents..\n 2. Verifying the extracted information with human input.\n 3. Identifying parties. \n 4. Constructing a contract. \n\n\nFollow the workflow precisely and ask for human input when needed.\n\n'}, {'role': 'user', 'content': "Current state: {'verified_pii_data': [], 'parties': None, 'contract_details': None, 'contract': None, 'current_action': None}\nWhat action should be taken next?"}], 'tools': [{'type': 'function', 'function': {'name': 'AgentAction', 'description': 'Correctly extracted `AgentAction` with all the required parameters with correct types', 'parameters': {'properties': {'action': {'description': 'Action to be performed by the agent', 'title': 'Action', 'type': 'string'}, 'parameters': {'additionalProperties': {'type': 'string'}, 'description': 'Parameters for the action', 'title': 'Parameters', 'type': 'object'}}, 'required': ['action', 'parameters'], 'type': 'object'}}}], 'tool_choice': {'type': 'function', 'function': {'name': 'AgentAction'}}}
2024-10-14 14:43:50,012 - DEBUG - max_retries: 1
2024-10-14 14:43:50,015 - DEBUG - Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'json_data': {'messages': [{'role': 'system', 'content': '\nYou are an AI agent specializing in contract creation and personal information extraction. \n\nYour role is:\n 1. Guide the process of extracting information from documents..\n 2. Verifying the extracted information with human input.\n 3. Identifying parties. \n 4. Constructing a contract. \n\n\nFollow the workflow precisely and ask for human input when needed.\n\n'}, {'role': 'user', 'content': "Current state: {'verified_pii_data': [], 'parties': None, 'contract_details': None, 'contract': None, 'current_action': None}\nWhat action should be taken next?"}], 'model': 'gpt-4', 'tool_choice': {'type': 'function', 'function': {'name': 'AgentAction'}}, 'tools': [{'type': 'function', 'function': {'name': 'AgentAction', 'description': 'Correctly extracted `AgentAction` with all the required parameters with correct types', 'parameters': {'properties': {'action': {'description': 'Action to be performed by the agent', 'title': 'Action', 'type': 'string'}, 'parameters': {'additionalProperties': {'type': 'string'}, 'description': 'Parameters for the action', 'title': 'Parameters', 'type': 'object'}}, 'required': ['action', 'parameters'], 'type': 'object'}}}]}}
2024-10-14 14:43:50,015 - DEBUG - Sending HTTP Request: POST https://api.openai.com/v1/chat/completions
2024-10-14 14:43:50,015 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-10-14 14:43:50,016 - DEBUG - send_request_headers.complete
2024-10-14 14:43:50,016 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-10-14 14:43:50,016 - DEBUG - send_request_body.complete
2024-10-14 14:43:50,016 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-10-14 14:43:51,094 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Mon, 14 Oct 2024 11:43:51 GMT'), (b'Content-Type', b'application/json'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'user-kzzh9hik9ryjiou4ftvhondh'), (b'openai-processing-ms', b'900'), (b'openai-version', b'2020-10-01'), (b'x-ratelimit-limit-requests', b'10000'), (b'x-ratelimit-limit-tokens', b'10000'), (b'x-ratelimit-remaining-requests', b'9995'), (b'x-ratelimit-remaining-tokens', b'9679'), (b'x-ratelimit-reset-requests', b'39.558s'), (b'x-ratelimit-reset-tokens', b'1.92s'), (b'x-request-id', b'req_8de554ee4bff4598fea40341b4226e26'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8d27506348d570d0-OTP'), (b'Content-Encoding', b'gzip'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-10-14 14:43:51,094 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2024-10-14 14:43:51,095 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-10-14 14:43:51,095 - DEBUG - receive_response_body.complete
2024-10-14 14:43:51,095 - DEBUG - response_closed.started
2024-10-14 14:43:51,095 - DEBUG - response_closed.complete
2024-10-14 14:43:51,095 - DEBUG - HTTP Response: POST https://api.openai.com/v1/chat/completions "200 OK" Headers({'date': 'Mon, 14 Oct 2024 11:43:51 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-expose-headers': 'X-Request-ID', 'openai-organization': 'user-kzzh9hik9ryjiou4ftvhondh', 'openai-processing-ms': '900', 'openai-version': '2020-10-01', 'x-ratelimit-limit-requests': '10000', 'x-ratelimit-limit-tokens': '10000', 'x-ratelimit-remaining-requests': '9995', 'x-ratelimit-remaining-tokens': '9679', 'x-ratelimit-reset-requests': '39.558s', 'x-ratelimit-reset-tokens': '1.92s', 'x-request-id': 'req_8de554ee4bff4598fea40341b4226e26', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8d27506348d570d0-OTP', 'content-encoding': 'gzip', 'alt-svc': 'h3=":443"; ma=86400'})
2024-10-14 14:43:51,095 - DEBUG - request_id: req_8de554ee4bff4598fea40341b4226e26
2024-10-14 14:43:51,096 - DEBUG - Instructor Raw Response: ChatCompletion(id='chatcmpl-AIDmI3mNLRjODJ8MeFZGkBkNwrrFq', choices=[Choice(finish_reason='stop', index=0, logprobs=None, message=ChatCompletionMessage(content=None, refusal=None, role='assistant', function_call=None, tool_calls=[ChatCompletionMessageToolCall(id='call_jcXG7ljnPv5kraoaim6G8PFx', function=Function(arguments='{\n"action": "extract_personal_information"\n}', name='AgentAction'), type='function')]))], created=1728906230, model='gpt-4-0613', object='chat.completion', service_tier=None, system_fingerprint=None, usage=CompletionUsage(completion_tokens=10, prompt_tokens=183, total_tokens=193, completion_tokens_details=None, prompt_tokens_details=None))
2024-10-14 14:43:51,098 - DEBUG - Instructor Request: mode.value='tool_call', response_model=<class 'models.AgentAction'>, new_kwargs={'model': 'gpt-4', 'messages': [{'role': 'system', 'content': '\nYou are an AI agent specializing in contract creation and personal information extraction. \n\nYour role is:\n 1. Guide the process of extracting information from documents..\n 2. Verifying the extracted information with human input.\n 3. Identifying parties. \n 4. Constructing a contract. \n\n\nFollow the workflow precisely and ask for human input when needed.\n\n'}, {'role': 'user', 'content': "Current state: {'verified_pii_data': [], 'parties': None, 'contract_details': None, 'contract': None, 'current_action': None}\nWhat action should be taken next?"}], 'tools': [{'type': 'function', 'function': {'name': 'AgentAction', 'description': 'Correctly extracted `AgentAction` with all the required parameters with correct types', 'parameters': {'properties': {'action': {'description': 'Action to be performed by the agent', 'title': 'Action', 'type': 'string'}, 'parameters': {'additionalProperties': {'type': 'string'}, 'description': 'Parameters for the action', 'title': 'Parameters', 'type': 'object'}}, 'required': ['action', 'parameters'], 'type': 'object'}}}], 'tool_choice': {'type': 'function', 'function': {'name': 'AgentAction'}}}
2024-10-14 14:43:51,099 - DEBUG - max_retries: 1
2024-10-14 14:43:51,103 - DEBUG - Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'json_data': {'messages': [{'role': 'system', 'content': '\nYou are an AI agent specializing in contract creation and personal information extraction. \n\nYour role is:\n 1. Guide the process of extracting information from documents..\n 2. Verifying the extracted information with human input.\n 3. Identifying parties. \n 4. Constructing a contract. \n\n\nFollow the workflow precisely and ask for human input when needed.\n\n'}, {'role': 'user', 'content': "Current state: {'verified_pii_data': [], 'parties': None, 'contract_details': None, 'contract': None, 'current_action': None}\nWhat action should be taken next?"}], 'model': 'gpt-4', 'tool_choice': {'type': 'function', 'function': {'name': 'AgentAction'}}, 'tools': [{'type': 'function', 'function': {'name': 'AgentAction', 'description': 'Correctly extracted `AgentAction` with all the required parameters with correct types', 'parameters': {'properties': {'action': {'description': 'Action to be performed by the agent', 'title': 'Action', 'type': 'string'}, 'parameters': {'additionalProperties': {'type': 'string'}, 'description': 'Parameters for the action', 'title': 'Parameters', 'type': 'object'}}, 'required': ['action', 'parameters'], 'type': 'object'}}}]}}
2024-10-14 14:43:51,104 - DEBUG - Sending HTTP Request: POST https://api.openai.com/v1/chat/completions
2024-10-14 14:43:51,104 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-10-14 14:43:51,104 - DEBUG - send_request_headers.complete
2024-10-14 14:43:51,105 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-10-14 14:43:51,105 - DEBUG - send_request_body.complete
2024-10-14 14:43:51,105 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-10-14 14:43:52,106 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Mon, 14 Oct 2024 11:43:52 GMT'), (b'Content-Type', b'application/json'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'user-kzzh9hik9ryjiou4ftvhondh'), (b'openai-processing-ms', b'836'), (b'openai-version', b'2020-10-01'), (b'x-ratelimit-limit-requests', b'10000'), (b'x-ratelimit-limit-tokens', b'10000'), (b'x-ratelimit-remaining-requests', b'9994'), (b'x-ratelimit-remaining-tokens', b'9667'), (b'x-ratelimit-reset-requests', b'47.113s'), (b'x-ratelimit-reset-tokens', b'1.994s'), (b'x-request-id', b'req_3ccdd4d88459d4ffd945e5a271e3df36'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8d27506a186570d0-OTP'), (b'Content-Encoding', b'gzip'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-10-14 14:43:52,107 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2024-10-14 14:43:52,107 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-10-14 14:43:52,107 - DEBUG - receive_response_body.complete
2024-10-14 14:43:52,107 - DEBUG - response_closed.started
2024-10-14 14:43:52,107 - DEBUG - response_closed.complete
2024-10-14 14:43:52,107 - DEBUG - HTTP Response: POST https://api.openai.com/v1/chat/completions "200 OK" Headers({'date': 'Mon, 14 Oct 2024 11:43:52 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-expose-headers': 'X-Request-ID', 'openai-organization': 'user-kzzh9hik9ryjiou4ftvhondh', 'openai-processing-ms': '836', 'openai-version': '2020-10-01', 'x-ratelimit-limit-requests': '10000', 'x-ratelimit-limit-tokens': '10000', 'x-ratelimit-remaining-requests': '9994', 'x-ratelimit-remaining-tokens': '9667', 'x-ratelimit-reset-requests': '47.113s', 'x-ratelimit-reset-tokens': '1.994s', 'x-request-id': 'req_3ccdd4d88459d4ffd945e5a271e3df36', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8d27506a186570d0-OTP', 'content-encoding': 'gzip', 'alt-svc': 'h3=":443"; ma=86400'})
2024-10-14 14:43:52,108 - DEBUG - request_id: req_3ccdd4d88459d4ffd945e5a271e3df36
2024-10-14 14:43:52,108 - DEBUG - Instructor Raw Response: ChatCompletion(id='chatcmpl-AIDmJRy6dK7SMSbb56Fpxhvzt8ygG', choices=[Choice(finish_reason='stop', index=0, logprobs=None, message=ChatCompletionMessage(content=None, refusal=None, role='assistant', function_call=None, tool_calls=[ChatCompletionMessageToolCall(id='call_bP8UTHJTjWqjF1s4YQUu7bmS', function=Function(arguments='{\n  "action": "extract_information"\n}', name='AgentAction'), type='function')]))], created=1728906231, model='gpt-4-0613', object='chat.completion', service_tier=None, system_fingerprint=None, usage=CompletionUsage(completion_tokens=10, prompt_tokens=183, total_tokens=193, completion_tokens_details=None, prompt_tokens_details=None))
2024-10-14 14:43:52,110 - DEBUG - Instructor Request: mode.value='tool_call', response_model=<class 'models.AgentAction'>, new_kwargs={'model': 'gpt-4', 'messages': [{'role': 'system', 'content': '\nYou are an AI agent specializing in contract creation and personal information extraction. \n\nYour role is:\n 1. Guide the process of extracting information from documents..\n 2. Verifying the extracted information with human input.\n 3. Identifying parties. \n 4. Constructing a contract. \n\n\nFollow the workflow precisely and ask for human input when needed.\n\n'}, {'role': 'user', 'content': "Current state: {'verified_pii_data': [], 'parties': None, 'contract_details': None, 'contract': None, 'current_action': None}\nWhat action should be taken next?"}], 'tools': [{'type': 'function', 'function': {'name': 'AgentAction', 'description': 'Correctly extracted `AgentAction` with all the required parameters with correct types', 'parameters': {'properties': {'action': {'description': 'Action to be performed by the agent', 'title': 'Action', 'type': 'string'}, 'parameters': {'additionalProperties': {'type': 'string'}, 'description': 'Parameters for the action', 'title': 'Parameters', 'type': 'object'}}, 'required': ['action', 'parameters'], 'type': 'object'}}}], 'tool_choice': {'type': 'function', 'function': {'name': 'AgentAction'}}}
2024-10-14 14:43:52,110 - DEBUG - max_retries: 1
2024-10-14 14:43:52,112 - DEBUG - Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'json_data': {'messages': [{'role': 'system', 'content': '\nYou are an AI agent specializing in contract creation and personal information extraction. \n\nYour role is:\n 1. Guide the process of extracting information from documents..\n 2. Verifying the extracted information with human input.\n 3. Identifying parties. \n 4. Constructing a contract. \n\n\nFollow the workflow precisely and ask for human input when needed.\n\n'}, {'role': 'user', 'content': "Current state: {'verified_pii_data': [], 'parties': None, 'contract_details': None, 'contract': None, 'current_action': None}\nWhat action should be taken next?"}], 'model': 'gpt-4', 'tool_choice': {'type': 'function', 'function': {'name': 'AgentAction'}}, 'tools': [{'type': 'function', 'function': {'name': 'AgentAction', 'description': 'Correctly extracted `AgentAction` with all the required parameters with correct types', 'parameters': {'properties': {'action': {'description': 'Action to be performed by the agent', 'title': 'Action', 'type': 'string'}, 'parameters': {'additionalProperties': {'type': 'string'}, 'description': 'Parameters for the action', 'title': 'Parameters', 'type': 'object'}}, 'required': ['action', 'parameters'], 'type': 'object'}}}]}}
2024-10-14 14:43:52,113 - DEBUG - Sending HTTP Request: POST https://api.openai.com/v1/chat/completions
2024-10-14 14:43:52,113 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-10-14 14:43:52,113 - DEBUG - send_request_headers.complete
2024-10-14 14:43:52,113 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-10-14 14:43:52,113 - DEBUG - send_request_body.complete
2024-10-14 14:43:52,113 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-10-14 14:43:53,382 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Mon, 14 Oct 2024 11:43:53 GMT'), (b'Content-Type', b'application/json'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'user-kzzh9hik9ryjiou4ftvhondh'), (b'openai-processing-ms', b'894'), (b'openai-version', b'2020-10-01'), (b'x-ratelimit-limit-requests', b'10000'), (b'x-ratelimit-limit-tokens', b'10000'), (b'x-ratelimit-remaining-requests', b'9993'), (b'x-ratelimit-remaining-tokens', b'9644'), (b'x-ratelimit-reset-requests', b'54.733s'), (b'x-ratelimit-reset-tokens', b'2.132s'), (b'x-request-id', b'req_4943357b5558974f1c94260e0a1fb4c4'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8d275070681f70d0-OTP'), (b'Content-Encoding', b'gzip'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-10-14 14:43:53,383 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2024-10-14 14:43:53,383 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-10-14 14:43:53,384 - DEBUG - receive_response_body.complete
2024-10-14 14:43:53,384 - DEBUG - response_closed.started
2024-10-14 14:43:53,384 - DEBUG - response_closed.complete
2024-10-14 14:43:53,384 - DEBUG - HTTP Response: POST https://api.openai.com/v1/chat/completions "200 OK" Headers({'date': 'Mon, 14 Oct 2024 11:43:53 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-expose-headers': 'X-Request-ID', 'openai-organization': 'user-kzzh9hik9ryjiou4ftvhondh', 'openai-processing-ms': '894', 'openai-version': '2020-10-01', 'x-ratelimit-limit-requests': '10000', 'x-ratelimit-limit-tokens': '10000', 'x-ratelimit-remaining-requests': '9993', 'x-ratelimit-remaining-tokens': '9644', 'x-ratelimit-reset-requests': '54.733s', 'x-ratelimit-reset-tokens': '2.132s', 'x-request-id': 'req_4943357b5558974f1c94260e0a1fb4c4', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8d275070681f70d0-OTP', 'content-encoding': 'gzip', 'alt-svc': 'h3=":443"; ma=86400'})
2024-10-14 14:43:53,385 - DEBUG - request_id: req_4943357b5558974f1c94260e0a1fb4c4
2024-10-14 14:43:53,385 - DEBUG - Instructor Raw Response: ChatCompletion(id='chatcmpl-AIDmKHape0DdOigE1yC8KmdJMNnF0', choices=[Choice(finish_reason='stop', index=0, logprobs=None, message=ChatCompletionMessage(content=None, refusal=None, role='assistant', function_call=None, tool_calls=[ChatCompletionMessageToolCall(id='call_esdOeYcUtJwYN3JSmEHmmrgV', function=Function(arguments='{\n"action": "extract_personal_information"\n}', name='AgentAction'), type='function')]))], created=1728906232, model='gpt-4-0613', object='chat.completion', service_tier=None, system_fingerprint=None, usage=CompletionUsage(completion_tokens=10, prompt_tokens=183, total_tokens=193, completion_tokens_details=None, prompt_tokens_details=None))
2024-10-14 14:43:53,388 - DEBUG - Instructor Request: mode.value='tool_call', response_model=<class 'models.AgentAction'>, new_kwargs={'model': 'gpt-4', 'messages': [{'role': 'system', 'content': '\nYou are an AI agent specializing in contract creation and personal information extraction. \n\nYour role is:\n 1. Guide the process of extracting information from documents..\n 2. Verifying the extracted information with human input.\n 3. Identifying parties. \n 4. Constructing a contract. \n\n\nFollow the workflow precisely and ask for human input when needed.\n\n'}, {'role': 'user', 'content': "Current state: {'verified_pii_data': [], 'parties': None, 'contract_details': None, 'contract': None, 'current_action': None}\nWhat action should be taken next?"}], 'tools': [{'type': 'function', 'function': {'name': 'AgentAction', 'description': 'Correctly extracted `AgentAction` with all the required parameters with correct types', 'parameters': {'properties': {'action': {'description': 'Action to be performed by the agent', 'title': 'Action', 'type': 'string'}, 'parameters': {'additionalProperties': {'type': 'string'}, 'description': 'Parameters for the action', 'title': 'Parameters', 'type': 'object'}}, 'required': ['action', 'parameters'], 'type': 'object'}}}], 'tool_choice': {'type': 'function', 'function': {'name': 'AgentAction'}}}
2024-10-14 14:43:53,388 - DEBUG - max_retries: 1
2024-10-14 14:43:53,391 - DEBUG - Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'json_data': {'messages': [{'role': 'system', 'content': '\nYou are an AI agent specializing in contract creation and personal information extraction. \n\nYour role is:\n 1. Guide the process of extracting information from documents..\n 2. Verifying the extracted information with human input.\n 3. Identifying parties. \n 4. Constructing a contract. \n\n\nFollow the workflow precisely and ask for human input when needed.\n\n'}, {'role': 'user', 'content': "Current state: {'verified_pii_data': [], 'parties': None, 'contract_details': None, 'contract': None, 'current_action': None}\nWhat action should be taken next?"}], 'model': 'gpt-4', 'tool_choice': {'type': 'function', 'function': {'name': 'AgentAction'}}, 'tools': [{'type': 'function', 'function': {'name': 'AgentAction', 'description': 'Correctly extracted `AgentAction` with all the required parameters with correct types', 'parameters': {'properties': {'action': {'description': 'Action to be performed by the agent', 'title': 'Action', 'type': 'string'}, 'parameters': {'additionalProperties': {'type': 'string'}, 'description': 'Parameters for the action', 'title': 'Parameters', 'type': 'object'}}, 'required': ['action', 'parameters'], 'type': 'object'}}}]}}
2024-10-14 14:43:53,391 - DEBUG - Sending HTTP Request: POST https://api.openai.com/v1/chat/completions
2024-10-14 14:43:53,392 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-10-14 14:43:53,392 - DEBUG - send_request_headers.complete
2024-10-14 14:43:53,392 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-10-14 14:43:53,392 - DEBUG - send_request_body.complete
2024-10-14 14:43:53,392 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-10-14 14:43:54,328 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Mon, 14 Oct 2024 11:43:54 GMT'), (b'Content-Type', b'application/json'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'user-kzzh9hik9ryjiou4ftvhondh'), (b'openai-processing-ms', b'786'), (b'openai-version', b'2020-10-01'), (b'x-ratelimit-limit-requests', b'10000'), (b'x-ratelimit-limit-tokens', b'10000'), (b'x-ratelimit-remaining-requests', b'9992'), (b'x-ratelimit-remaining-tokens', b'9662'), (b'x-ratelimit-reset-requests', b'1m2.108s'), (b'x-ratelimit-reset-tokens', b'2.024s'), (b'x-request-id', b'req_d2509aab2716d03dba5b6f18610b9018'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8d2750786a5270d0-OTP'), (b'Content-Encoding', b'gzip'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-10-14 14:43:54,329 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2024-10-14 14:43:54,329 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-10-14 14:43:54,330 - DEBUG - receive_response_body.complete
2024-10-14 14:43:54,330 - DEBUG - response_closed.started
2024-10-14 14:43:54,330 - DEBUG - response_closed.complete
2024-10-14 14:43:54,330 - DEBUG - HTTP Response: POST https://api.openai.com/v1/chat/completions "200 OK" Headers({'date': 'Mon, 14 Oct 2024 11:43:54 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-expose-headers': 'X-Request-ID', 'openai-organization': 'user-kzzh9hik9ryjiou4ftvhondh', 'openai-processing-ms': '786', 'openai-version': '2020-10-01', 'x-ratelimit-limit-requests': '10000', 'x-ratelimit-limit-tokens': '10000', 'x-ratelimit-remaining-requests': '9992', 'x-ratelimit-remaining-tokens': '9662', 'x-ratelimit-reset-requests': '1m2.108s', 'x-ratelimit-reset-tokens': '2.024s', 'x-request-id': 'req_d2509aab2716d03dba5b6f18610b9018', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8d2750786a5270d0-OTP', 'content-encoding': 'gzip', 'alt-svc': 'h3=":443"; ma=86400'})
2024-10-14 14:43:54,330 - DEBUG - request_id: req_d2509aab2716d03dba5b6f18610b9018
2024-10-14 14:43:54,331 - DEBUG - Instructor Raw Response: ChatCompletion(id='chatcmpl-AIDmLajyi1YECVWq1SEOzXpAf3Dan', choices=[Choice(finish_reason='stop', index=0, logprobs=None, message=ChatCompletionMessage(content=None, refusal=None, role='assistant', function_call=None, tool_calls=[ChatCompletionMessageToolCall(id='call_BjiFhST8R7TlMcMeaXTzUvg3', function=Function(arguments='{\n"action": "extract_pii"\n}', name='AgentAction'), type='function')]))], created=1728906233, model='gpt-4-0613', object='chat.completion', service_tier=None, system_fingerprint=None, usage=CompletionUsage(completion_tokens=10, prompt_tokens=183, total_tokens=193, completion_tokens_details=None, prompt_tokens_details=None))
2024-10-14 14:43:54,333 - DEBUG - Instructor Request: mode.value='tool_call', response_model=<class 'models.PIIData'>, new_kwargs={'model': 'gpt-4', 'messages': [{'role': 'system', 'content': '\nYou are an AI agent specializing in contract creation and personal information extraction. \n\nYour role is:\n 1. Guide the process of extracting information from documents..\n 2. Verifying the extracted information with human input.\n 3. Identifying parties. \n 4. Constructing a contract. \n\n\nFollow the workflow precisely and ask for human input when needed.\n\n'}, {'role': 'user', 'content': "Extract the name and address from the given text:\n\nROUMANIE ROMAWI ROMANIA Carte CARTE De |Dentitate IDEnTITY D'iDENTITE seria TR Na 409131 CarD cNP 1891113341181 Nume/Nom/Last name T525M ISPILANTE Prenume/Prenom/First namo SENTIMENT BRUSLI Cetatenle/Nallonallte/Nallonallly Sox SexeiSox Romn\u0103 ROU M Loc nastere/Liou do naissancelPlace ol birth Or\u0219. Videle Jud.Teleorman Dom IlulAdresse/Addrass Videle Jud: Teleorman Sos. Giurgiului nr.1 695 TR Emisa dolDelivree parlIssuad by ValabilltatelValldlte Valldlty SPCLEP Videle 04.11.11-13.11.2018 IDROUISPILANTE<<SENTIMENT <BRUSLI<<<< TR409131<0R0u8911137M181113513411813 Or\u0219:"}], 'tools': [{'type': 'function', 'function': {'name': 'PIIData', 'description': 'Correctly extracted `PIIData` with all the required parameters with correct types', 'parameters': {'properties': {'name': {'description': 'Full name of the person', 'title': 'Name', 'type': 'string'}, 'address': {'description': 'Residential address of the person', 'title': 'Address', 'type': 'string'}}, 'required': ['address', 'name'], 'type': 'object'}}}], 'tool_choice': {'type': 'function', 'function': {'name': 'PIIData'}}}
2024-10-14 14:43:54,334 - DEBUG - max_retries: 1
2024-10-14 14:43:54,337 - DEBUG - Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'json_data': {'messages': [{'role': 'system', 'content': '\nYou are an AI agent specializing in contract creation and personal information extraction. \n\nYour role is:\n 1. Guide the process of extracting information from documents..\n 2. Verifying the extracted information with human input.\n 3. Identifying parties. \n 4. Constructing a contract. \n\n\nFollow the workflow precisely and ask for human input when needed.\n\n'}, {'role': 'user', 'content': "Extract the name and address from the given text:\n\nROUMANIE ROMAWI ROMANIA Carte CARTE De |Dentitate IDEnTITY D'iDENTITE seria TR Na 409131 CarD cNP 1891113341181 Nume/Nom/Last name T525M ISPILANTE Prenume/Prenom/First namo SENTIMENT BRUSLI Cetatenle/Nallonallte/Nallonallly Sox SexeiSox Romn\u0103 ROU M Loc nastere/Liou do naissancelPlace ol birth Or\u0219. Videle Jud.Teleorman Dom IlulAdresse/Addrass Videle Jud: Teleorman Sos. Giurgiului nr.1 695 TR Emisa dolDelivree parlIssuad by ValabilltatelValldlte Valldlty SPCLEP Videle 04.11.11-13.11.2018 IDROUISPILANTE<<SENTIMENT <BRUSLI<<<< TR409131<0R0u8911137M181113513411813 Or\u0219:"}], 'model': 'gpt-4', 'tool_choice': {'type': 'function', 'function': {'name': 'PIIData'}}, 'tools': [{'type': 'function', 'function': {'name': 'PIIData', 'description': 'Correctly extracted `PIIData` with all the required parameters with correct types', 'parameters': {'properties': {'name': {'description': 'Full name of the person', 'title': 'Name', 'type': 'string'}, 'address': {'description': 'Residential address of the person', 'title': 'Address', 'type': 'string'}}, 'required': ['address', 'name'], 'type': 'object'}}}]}}
2024-10-14 14:43:54,338 - DEBUG - Sending HTTP Request: POST https://api.openai.com/v1/chat/completions
2024-10-14 14:43:54,338 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-10-14 14:43:54,338 - DEBUG - send_request_headers.complete
2024-10-14 14:43:54,338 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-10-14 14:43:54,338 - DEBUG - send_request_body.complete
2024-10-14 14:43:54,338 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-10-14 14:43:56,114 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Mon, 14 Oct 2024 11:43:56 GMT'), (b'Content-Type', b'application/json'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'user-kzzh9hik9ryjiou4ftvhondh'), (b'openai-processing-ms', b'1602'), (b'openai-version', b'2020-10-01'), (b'x-ratelimit-limit-requests', b'10000'), (b'x-ratelimit-limit-tokens', b'10000'), (b'x-ratelimit-remaining-requests', b'9991'), (b'x-ratelimit-remaining-tokens', b'9512'), (b'x-ratelimit-reset-requests', b'1m9.791s'), (b'x-ratelimit-reset-tokens', b'2.927s'), (b'x-request-id', b'req_09b4069fdc5d6bd8f3aa7321a1d566a9'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8d27507e59d970d0-OTP'), (b'Content-Encoding', b'gzip'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-10-14 14:43:56,115 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2024-10-14 14:43:56,115 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-10-14 14:43:56,116 - DEBUG - receive_response_body.complete
2024-10-14 14:43:56,116 - DEBUG - response_closed.started
2024-10-14 14:43:56,116 - DEBUG - response_closed.complete
2024-10-14 14:43:56,116 - DEBUG - HTTP Response: POST https://api.openai.com/v1/chat/completions "200 OK" Headers({'date': 'Mon, 14 Oct 2024 11:43:56 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-expose-headers': 'X-Request-ID', 'openai-organization': 'user-kzzh9hik9ryjiou4ftvhondh', 'openai-processing-ms': '1602', 'openai-version': '2020-10-01', 'x-ratelimit-limit-requests': '10000', 'x-ratelimit-limit-tokens': '10000', 'x-ratelimit-remaining-requests': '9991', 'x-ratelimit-remaining-tokens': '9512', 'x-ratelimit-reset-requests': '1m9.791s', 'x-ratelimit-reset-tokens': '2.927s', 'x-request-id': 'req_09b4069fdc5d6bd8f3aa7321a1d566a9', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8d27507e59d970d0-OTP', 'content-encoding': 'gzip', 'alt-svc': 'h3=":443"; ma=86400'})
2024-10-14 14:43:56,117 - DEBUG - request_id: req_09b4069fdc5d6bd8f3aa7321a1d566a9
2024-10-14 14:43:56,118 - DEBUG - Instructor Raw Response: ChatCompletion(id='chatcmpl-AIDmMuaGgZU5EvRAnvZkJ9hwLZ5KN', choices=[Choice(finish_reason='stop', index=0, logprobs=None, message=ChatCompletionMessage(content=None, refusal=None, role='assistant', function_call=None, tool_calls=[ChatCompletionMessageToolCall(id='call_CFjNSkmUHSwr1TJ4b5h7wSSV', function=Function(arguments='{\n"name": "ISPILANTE SENTIMENT BRUSLI",\n"address": "Videle Jud: Teleorman Sos. Giurgiului nr.1 695 TR"\n}', name='PIIData'), type='function')]))], created=1728906234, model='gpt-4-0613', object='chat.completion', service_tier=None, system_fingerprint=None, usage=CompletionUsage(completion_tokens=39, prompt_tokens=377, total_tokens=416, completion_tokens_details=None, prompt_tokens_details=None))
2024-10-14 14:44:03,463 - DEBUG - Instructor Request: mode.value='tool_call', response_model=<class 'models.PIIData'>, new_kwargs={'model': 'gpt-4', 'messages': [{'role': 'system', 'content': '\nYou are an AI agent specializing in contract creation and personal information extraction. \n\nYour role is:\n 1. Guide the process of extracting information from documents..\n 2. Verifying the extracted information with human input.\n 3. Identifying parties. \n 4. Constructing a contract. \n\n\nFollow the workflow precisely and ask for human input when needed.\n\n'}, {'role': 'user', 'content': "Extract the name and address from the given text:\n\nROUMANIE ROVIAINIA ROMANIA Carte Carte DE iDentitate IdEnTITY Didentite seala SS Nr 099994 Card CNP 2410415400542 93coQ Nume/NomiLast name VASILESCU Pronume/Prenom/Flrst name ELENA < CetatenielNatlonallte/Natlonalily M Sex SexelSer Romn\u0103 ROU Loc nastore/Licu de naissancolF 'ar0 ol birth Mun: Dej Jud. Cluj Domiciliu/Adresse A ess Mun. Bucuresti Sec. 5 Str Nicolae Iorga nr.3 900 B Emisa delDelivree parllssued by Valabilitate/Vahidile Valiouy D.EPAB.D- 06.01.17-15.04.2077 IDROUVASILESCU<<ELENA<<<<<<<<<<<<<<< SS099994<0R0u4104151F770415824003421"}], 'tools': [{'type': 'function', 'function': {'name': 'PIIData', 'description': 'Correctly extracted `PIIData` with all the required parameters with correct types', 'parameters': {'properties': {'name': {'description': 'Full name of the person', 'title': 'Name', 'type': 'string'}, 'address': {'description': 'Residential address of the person', 'title': 'Address', 'type': 'string'}}, 'required': ['address', 'name'], 'type': 'object'}}}], 'tool_choice': {'type': 'function', 'function': {'name': 'PIIData'}}}
2024-10-14 14:44:03,463 - DEBUG - max_retries: 1
2024-10-14 14:44:03,465 - DEBUG - Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'json_data': {'messages': [{'role': 'system', 'content': '\nYou are an AI agent specializing in contract creation and personal information extraction. \n\nYour role is:\n 1. Guide the process of extracting information from documents..\n 2. Verifying the extracted information with human input.\n 3. Identifying parties. \n 4. Constructing a contract. \n\n\nFollow the workflow precisely and ask for human input when needed.\n\n'}, {'role': 'user', 'content': "Extract the name and address from the given text:\n\nROUMANIE ROVIAINIA ROMANIA Carte Carte DE iDentitate IdEnTITY Didentite seala SS Nr 099994 Card CNP 2410415400542 93coQ Nume/NomiLast name VASILESCU Pronume/Prenom/Flrst name ELENA < CetatenielNatlonallte/Natlonalily M Sex SexelSer Romn\u0103 ROU Loc nastore/Licu de naissancolF 'ar0 ol birth Mun: Dej Jud. Cluj Domiciliu/Adresse A ess Mun. Bucuresti Sec. 5 Str Nicolae Iorga nr.3 900 B Emisa delDelivree parllssued by Valabilitate/Vahidile Valiouy D.EPAB.D- 06.01.17-15.04.2077 IDROUVASILESCU<<ELENA<<<<<<<<<<<<<<< SS099994<0R0u4104151F770415824003421"}], 'model': 'gpt-4', 'tool_choice': {'type': 'function', 'function': {'name': 'PIIData'}}, 'tools': [{'type': 'function', 'function': {'name': 'PIIData', 'description': 'Correctly extracted `PIIData` with all the required parameters with correct types', 'parameters': {'properties': {'name': {'description': 'Full name of the person', 'title': 'Name', 'type': 'string'}, 'address': {'description': 'Residential address of the person', 'title': 'Address', 'type': 'string'}}, 'required': ['address', 'name'], 'type': 'object'}}}]}}
2024-10-14 14:44:03,465 - DEBUG - Sending HTTP Request: POST https://api.openai.com/v1/chat/completions
2024-10-14 14:44:03,466 - DEBUG - close.started
2024-10-14 14:44:03,466 - DEBUG - close.complete
2024-10-14 14:44:03,466 - DEBUG - connect_tcp.started host='api.openai.com' port=443 local_address=None timeout=5.0 socket_options=None
2024-10-14 14:44:03,471 - DEBUG - connect_tcp.complete return_value=<httpcore._backends.sync.SyncStream object at 0x00000179F6C4A8D0>
2024-10-14 14:44:03,471 - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x00000179F6A55AD0> server_hostname='api.openai.com' timeout=5.0
2024-10-14 14:44:03,478 - DEBUG - start_tls.complete return_value=<httpcore._backends.sync.SyncStream object at 0x00000179F6C3D160>
2024-10-14 14:44:03,478 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-10-14 14:44:03,478 - DEBUG - send_request_headers.complete
2024-10-14 14:44:03,478 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-10-14 14:44:03,478 - DEBUG - send_request_body.complete
2024-10-14 14:44:03,478 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-10-14 14:44:05,878 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Mon, 14 Oct 2024 11:44:06 GMT'), (b'Content-Type', b'application/json'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'user-kzzh9hik9ryjiou4ftvhondh'), (b'openai-processing-ms', b'2252'), (b'openai-version', b'2020-10-01'), (b'x-ratelimit-limit-requests', b'10000'), (b'x-ratelimit-limit-tokens', b'10000'), (b'x-ratelimit-remaining-requests', b'9991'), (b'x-ratelimit-remaining-tokens', b'9742'), (b'x-ratelimit-reset-requests', b'1m9.303s'), (b'x-ratelimit-reset-tokens', b'1.548s'), (b'x-request-id', b'req_198c15ef061ca52fe113ca042f2db01f'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8d2750b77c6dca1d-OTP'), (b'Content-Encoding', b'gzip'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-10-14 14:44:05,878 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2024-10-14 14:44:05,878 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-10-14 14:44:05,878 - DEBUG - receive_response_body.complete
2024-10-14 14:44:05,878 - DEBUG - response_closed.started
2024-10-14 14:44:05,878 - DEBUG - response_closed.complete
2024-10-14 14:44:05,878 - DEBUG - HTTP Response: POST https://api.openai.com/v1/chat/completions "200 OK" Headers({'date': 'Mon, 14 Oct 2024 11:44:06 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-expose-headers': 'X-Request-ID', 'openai-organization': 'user-kzzh9hik9ryjiou4ftvhondh', 'openai-processing-ms': '2252', 'openai-version': '2020-10-01', 'x-ratelimit-limit-requests': '10000', 'x-ratelimit-limit-tokens': '10000', 'x-ratelimit-remaining-requests': '9991', 'x-ratelimit-remaining-tokens': '9742', 'x-ratelimit-reset-requests': '1m9.303s', 'x-ratelimit-reset-tokens': '1.548s', 'x-request-id': 'req_198c15ef061ca52fe113ca042f2db01f', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8d2750b77c6dca1d-OTP', 'content-encoding': 'gzip', 'alt-svc': 'h3=":443"; ma=86400'})
2024-10-14 14:44:05,878 - DEBUG - request_id: req_198c15ef061ca52fe113ca042f2db01f
2024-10-14 14:44:05,879 - DEBUG - Instructor Raw Response: ChatCompletion(id='chatcmpl-AIDmVRPTjl3G3fRcOpGtGSjb832Fa', choices=[Choice(finish_reason='stop', index=0, logprobs=None, message=ChatCompletionMessage(content=None, refusal=None, role='assistant', function_call=None, tool_calls=[ChatCompletionMessageToolCall(id='call_N3uZ3291VnyiyXxQBprRpCSQ', function=Function(arguments='{\n"name": "ELENA VASILESCU",\n"address": "Mun. Bucuresti Sec. 5 Str Nicolae Iorga nr.3 900 B"\n}', name='PIIData'), type='function')]))], created=1728906243, model='gpt-4-0613', object='chat.completion', service_tier=None, system_fingerprint=None, usage=CompletionUsage(completion_tokens=42, prompt_tokens=380, total_tokens=422, completion_tokens_details=None, prompt_tokens_details=None))
2024-10-14 14:44:08,055 - DEBUG - Instructor Request: mode.value='tool_call', response_model=<class 'models.AgentAction'>, new_kwargs={'model': 'gpt-4', 'messages': [{'role': 'system', 'content': '\nYou are an AI agent specializing in contract creation and personal information extraction. \n\nYour role is:\n 1. Guide the process of extracting information from documents..\n 2. Verifying the extracted information with human input.\n 3. Identifying parties. \n 4. Constructing a contract. \n\n\nFollow the workflow precisely and ask for human input when needed.\n\n'}, {'role': 'user', 'content': "Current state: {'verified_pii_data': [{'name': 'ELENA VASILESCU', 'address': 'Mun. Bucuresti Sec. 5 Str Nicolae Iorga nr.3 900 B'}], 'parties': None, 'contract_details': None, 'contract': None, 'current_action': None}\nWhat action should be taken next?"}], 'tools': [{'type': 'function', 'function': {'name': 'AgentAction', 'description': 'Correctly extracted `AgentAction` with all the required parameters with correct types', 'parameters': {'properties': {'action': {'description': 'Action to be performed by the agent', 'title': 'Action', 'type': 'string'}, 'parameters': {'additionalProperties': {'type': 'string'}, 'description': 'Parameters for the action', 'title': 'Parameters', 'type': 'object'}}, 'required': ['action', 'parameters'], 'type': 'object'}}}], 'tool_choice': {'type': 'function', 'function': {'name': 'AgentAction'}}}
2024-10-14 14:44:08,056 - DEBUG - max_retries: 1
2024-10-14 14:44:08,058 - DEBUG - Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'json_data': {'messages': [{'role': 'system', 'content': '\nYou are an AI agent specializing in contract creation and personal information extraction. \n\nYour role is:\n 1. Guide the process of extracting information from documents..\n 2. Verifying the extracted information with human input.\n 3. Identifying parties. \n 4. Constructing a contract. \n\n\nFollow the workflow precisely and ask for human input when needed.\n\n'}, {'role': 'user', 'content': "Current state: {'verified_pii_data': [{'name': 'ELENA VASILESCU', 'address': 'Mun. Bucuresti Sec. 5 Str Nicolae Iorga nr.3 900 B'}], 'parties': None, 'contract_details': None, 'contract': None, 'current_action': None}\nWhat action should be taken next?"}], 'model': 'gpt-4', 'tool_choice': {'type': 'function', 'function': {'name': 'AgentAction'}}, 'tools': [{'type': 'function', 'function': {'name': 'AgentAction', 'description': 'Correctly extracted `AgentAction` with all the required parameters with correct types', 'parameters': {'properties': {'action': {'description': 'Action to be performed by the agent', 'title': 'Action', 'type': 'string'}, 'parameters': {'additionalProperties': {'type': 'string'}, 'description': 'Parameters for the action', 'title': 'Parameters', 'type': 'object'}}, 'required': ['action', 'parameters'], 'type': 'object'}}}]}}
2024-10-14 14:44:08,058 - DEBUG - Sending HTTP Request: POST https://api.openai.com/v1/chat/completions
2024-10-14 14:44:08,058 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-10-14 14:44:08,059 - DEBUG - send_request_headers.complete
2024-10-14 14:44:08,059 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-10-14 14:44:08,059 - DEBUG - send_request_body.complete
2024-10-14 14:44:08,059 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-10-14 14:44:08,878 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Mon, 14 Oct 2024 11:44:09 GMT'), (b'Content-Type', b'application/json'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'user-kzzh9hik9ryjiou4ftvhondh'), (b'openai-processing-ms', b'662'), (b'openai-version', b'2020-10-01'), (b'x-ratelimit-limit-requests', b'10000'), (b'x-ratelimit-limit-tokens', b'10000'), (b'x-ratelimit-remaining-requests', b'9991'), (b'x-ratelimit-remaining-tokens', b'9830'), (b'x-ratelimit-reset-requests', b'1m13.361s'), (b'x-ratelimit-reset-tokens', b'1.02s'), (b'x-request-id', b'req_26c1777521e723f33051bd5784b133a7'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8d2750d41a02ca1d-OTP'), (b'Content-Encoding', b'gzip'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-10-14 14:44:08,878 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2024-10-14 14:44:08,878 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-10-14 14:44:08,879 - DEBUG - receive_response_body.complete
2024-10-14 14:44:08,879 - DEBUG - response_closed.started
2024-10-14 14:44:08,879 - DEBUG - response_closed.complete
2024-10-14 14:44:08,879 - DEBUG - HTTP Response: POST https://api.openai.com/v1/chat/completions "200 OK" Headers({'date': 'Mon, 14 Oct 2024 11:44:09 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-expose-headers': 'X-Request-ID', 'openai-organization': 'user-kzzh9hik9ryjiou4ftvhondh', 'openai-processing-ms': '662', 'openai-version': '2020-10-01', 'x-ratelimit-limit-requests': '10000', 'x-ratelimit-limit-tokens': '10000', 'x-ratelimit-remaining-requests': '9991', 'x-ratelimit-remaining-tokens': '9830', 'x-ratelimit-reset-requests': '1m13.361s', 'x-ratelimit-reset-tokens': '1.02s', 'x-request-id': 'req_26c1777521e723f33051bd5784b133a7', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8d2750d41a02ca1d-OTP', 'content-encoding': 'gzip', 'alt-svc': 'h3=":443"; ma=86400'})
2024-10-14 14:44:08,879 - DEBUG - request_id: req_26c1777521e723f33051bd5784b133a7
2024-10-14 14:44:08,879 - DEBUG - Instructor Raw Response: ChatCompletion(id='chatcmpl-AIDma5y7TShp4yLhr8XcWw4DHzqg3', choices=[Choice(finish_reason='stop', index=0, logprobs=None, message=ChatCompletionMessage(content=None, refusal=None, role='assistant', function_call=None, tool_calls=[ChatCompletionMessageToolCall(id='call_dPiDdxf38JgOyKK33UowQojc', function=Function(arguments='{\n"action": "identify_parties"\n}', name='AgentAction'), type='function')]))], created=1728906248, model='gpt-4-0613', object='chat.completion', service_tier=None, system_fingerprint=None, usage=CompletionUsage(completion_tokens=10, prompt_tokens=224, total_tokens=234, completion_tokens_details=None, prompt_tokens_details=None))
2024-10-14 14:44:08,880 - DEBUG - Instructor Request: mode.value='tool_call', response_model=<class 'models.ContractParties'>, new_kwargs={'model': 'gpt-4', 'messages': [{'role': 'system', 'content': '\nYou are an AI agent specializing in contract creation and personal information extraction. \n\nYour role is:\n 1. Guide the process of extracting information from documents..\n 2. Verifying the extracted information with human input.\n 3. Identifying parties. \n 4. Constructing a contract. \n\n\nFollow the workflow precisely and ask for human input when needed.\n\n'}, {'role': 'user', 'content': 'Identify the buyer and seller from the given information:\n\nName: ELENA VASILESCU, Address: Mun. Bucuresti Sec. 5 Str Nicolae Iorga nr.3 900 B'}], 'tools': [{'type': 'function', 'function': {'name': 'ContractParties', 'description': 'Correctly extracted `ContractParties` with all the required parameters with correct types', 'parameters': {'properties': {'buyer': {'description': 'Name of the buyer', 'title': 'Buyer', 'type': 'string'}, 'seller': {'description': 'Name of the seller', 'title': 'Seller', 'type': 'string'}}, 'required': ['buyer', 'seller'], 'type': 'object'}}}], 'tool_choice': {'type': 'function', 'function': {'name': 'ContractParties'}}}
2024-10-14 14:44:08,880 - DEBUG - max_retries: 1
2024-10-14 14:44:08,882 - DEBUG - Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'json_data': {'messages': [{'role': 'system', 'content': '\nYou are an AI agent specializing in contract creation and personal information extraction. \n\nYour role is:\n 1. Guide the process of extracting information from documents..\n 2. Verifying the extracted information with human input.\n 3. Identifying parties. \n 4. Constructing a contract. \n\n\nFollow the workflow precisely and ask for human input when needed.\n\n'}, {'role': 'user', 'content': 'Identify the buyer and seller from the given information:\n\nName: ELENA VASILESCU, Address: Mun. Bucuresti Sec. 5 Str Nicolae Iorga nr.3 900 B'}], 'model': 'gpt-4', 'tool_choice': {'type': 'function', 'function': {'name': 'ContractParties'}}, 'tools': [{'type': 'function', 'function': {'name': 'ContractParties', 'description': 'Correctly extracted `ContractParties` with all the required parameters with correct types', 'parameters': {'properties': {'buyer': {'description': 'Name of the buyer', 'title': 'Buyer', 'type': 'string'}, 'seller': {'description': 'Name of the seller', 'title': 'Seller', 'type': 'string'}}, 'required': ['buyer', 'seller'], 'type': 'object'}}}]}}
2024-10-14 14:44:08,882 - DEBUG - Sending HTTP Request: POST https://api.openai.com/v1/chat/completions
2024-10-14 14:44:08,882 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-10-14 14:44:08,882 - DEBUG - send_request_headers.complete
2024-10-14 14:44:08,882 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-10-14 14:44:08,882 - DEBUG - send_request_body.complete
2024-10-14 14:44:08,882 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-10-14 14:44:10,134 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Mon, 14 Oct 2024 11:44:10 GMT'), (b'Content-Type', b'application/json'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'user-kzzh9hik9ryjiou4ftvhondh'), (b'openai-processing-ms', b'1103'), (b'openai-version', b'2020-10-01'), (b'x-ratelimit-limit-requests', b'10000'), (b'x-ratelimit-limit-tokens', b'10000'), (b'x-ratelimit-remaining-requests', b'9990'), (b'x-ratelimit-remaining-tokens', b'9759'), (b'x-ratelimit-reset-requests', b'1m21.181s'), (b'x-ratelimit-reset-tokens', b'1.442s'), (b'x-request-id', b'req_a8a4b8d54e9b5728567669ed8dcba3c8'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8d2750d93ffdca1d-OTP'), (b'Content-Encoding', b'gzip'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-10-14 14:44:10,134 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2024-10-14 14:44:10,134 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-10-14 14:44:10,135 - DEBUG - receive_response_body.complete
2024-10-14 14:44:10,135 - DEBUG - response_closed.started
2024-10-14 14:44:10,135 - DEBUG - response_closed.complete
2024-10-14 14:44:10,135 - DEBUG - HTTP Response: POST https://api.openai.com/v1/chat/completions "200 OK" Headers({'date': 'Mon, 14 Oct 2024 11:44:10 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-expose-headers': 'X-Request-ID', 'openai-organization': 'user-kzzh9hik9ryjiou4ftvhondh', 'openai-processing-ms': '1103', 'openai-version': '2020-10-01', 'x-ratelimit-limit-requests': '10000', 'x-ratelimit-limit-tokens': '10000', 'x-ratelimit-remaining-requests': '9990', 'x-ratelimit-remaining-tokens': '9759', 'x-ratelimit-reset-requests': '1m21.181s', 'x-ratelimit-reset-tokens': '1.442s', 'x-request-id': 'req_a8a4b8d54e9b5728567669ed8dcba3c8', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8d2750d93ffdca1d-OTP', 'content-encoding': 'gzip', 'alt-svc': 'h3=":443"; ma=86400'})
2024-10-14 14:44:10,135 - DEBUG - request_id: req_a8a4b8d54e9b5728567669ed8dcba3c8
2024-10-14 14:44:10,136 - DEBUG - Instructor Raw Response: ChatCompletion(id='chatcmpl-AIDmbPCK0SvgTtZH5Hj5qx6NWexc0', choices=[Choice(finish_reason='stop', index=0, logprobs=None, message=ChatCompletionMessage(content=None, refusal=None, role='assistant', function_call=None, tool_calls=[ChatCompletionMessageToolCall(id='call_QEmKdxGPkD5GQ39XqwxYKRhe', function=Function(arguments='{\n  "buyer": "ELENA VASILESCU",\n  "seller": ""\n}', name='ContractParties'), type='function')]))], created=1728906249, model='gpt-4-0613', object='chat.completion', service_tier=None, system_fingerprint=None, usage=CompletionUsage(completion_tokens=21, prompt_tokens=199, total_tokens=220, completion_tokens_details=None, prompt_tokens_details=None))
2024-10-14 14:44:10,137 - DEBUG - Instructor Request: mode.value='tool_call', response_model=<class 'models.AgentAction'>, new_kwargs={'model': 'gpt-4', 'messages': [{'role': 'system', 'content': '\nYou are an AI agent specializing in contract creation and personal information extraction. \n\nYour role is:\n 1. Guide the process of extracting information from documents..\n 2. Verifying the extracted information with human input.\n 3. Identifying parties. \n 4. Constructing a contract. \n\n\nFollow the workflow precisely and ask for human input when needed.\n\n'}, {'role': 'user', 'content': "Current state: {'verified_pii_data': [{'name': 'ELENA VASILESCU', 'address': 'Mun. Bucuresti Sec. 5 Str Nicolae Iorga nr.3 900 B'}], 'parties': {'buyer': 'ELENA VASILESCU', 'seller': ''}, 'contract_details': None, 'contract': None, 'current_action': None}\nWhat action should be taken next?"}], 'tools': [{'type': 'function', 'function': {'name': 'AgentAction', 'description': 'Correctly extracted `AgentAction` with all the required parameters with correct types', 'parameters': {'properties': {'action': {'description': 'Action to be performed by the agent', 'title': 'Action', 'type': 'string'}, 'parameters': {'additionalProperties': {'type': 'string'}, 'description': 'Parameters for the action', 'title': 'Parameters', 'type': 'object'}}, 'required': ['action', 'parameters'], 'type': 'object'}}}], 'tool_choice': {'type': 'function', 'function': {'name': 'AgentAction'}}}
2024-10-14 14:44:10,137 - DEBUG - max_retries: 1
2024-10-14 14:44:10,140 - DEBUG - Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'json_data': {'messages': [{'role': 'system', 'content': '\nYou are an AI agent specializing in contract creation and personal information extraction. \n\nYour role is:\n 1. Guide the process of extracting information from documents..\n 2. Verifying the extracted information with human input.\n 3. Identifying parties. \n 4. Constructing a contract. \n\n\nFollow the workflow precisely and ask for human input when needed.\n\n'}, {'role': 'user', 'content': "Current state: {'verified_pii_data': [{'name': 'ELENA VASILESCU', 'address': 'Mun. Bucuresti Sec. 5 Str Nicolae Iorga nr.3 900 B'}], 'parties': {'buyer': 'ELENA VASILESCU', 'seller': ''}, 'contract_details': None, 'contract': None, 'current_action': None}\nWhat action should be taken next?"}], 'model': 'gpt-4', 'tool_choice': {'type': 'function', 'function': {'name': 'AgentAction'}}, 'tools': [{'type': 'function', 'function': {'name': 'AgentAction', 'description': 'Correctly extracted `AgentAction` with all the required parameters with correct types', 'parameters': {'properties': {'action': {'description': 'Action to be performed by the agent', 'title': 'Action', 'type': 'string'}, 'parameters': {'additionalProperties': {'type': 'string'}, 'description': 'Parameters for the action', 'title': 'Parameters', 'type': 'object'}}, 'required': ['action', 'parameters'], 'type': 'object'}}}]}}
2024-10-14 14:44:10,141 - DEBUG - Sending HTTP Request: POST https://api.openai.com/v1/chat/completions
2024-10-14 14:44:10,141 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-10-14 14:44:10,141 - DEBUG - send_request_headers.complete
2024-10-14 14:44:10,141 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-10-14 14:44:10,141 - DEBUG - send_request_body.complete
2024-10-14 14:44:10,141 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-10-14 14:44:10,939 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Mon, 14 Oct 2024 11:44:11 GMT'), (b'Content-Type', b'application/json'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'user-kzzh9hik9ryjiou4ftvhondh'), (b'openai-processing-ms', b'648'), (b'openai-version', b'2020-10-01'), (b'x-ratelimit-limit-requests', b'10000'), (b'x-ratelimit-limit-tokens', b'10000'), (b'x-ratelimit-remaining-requests', b'9989'), (b'x-ratelimit-remaining-tokens', b'9712'), (b'x-ratelimit-reset-requests', b'1m28.56s'), (b'x-ratelimit-reset-tokens', b'1.722s'), (b'x-request-id', b'req_8c35d04cefe8d7ed367f534d4d19a737'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8d2750e11d8bca1d-OTP'), (b'Content-Encoding', b'gzip'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-10-14 14:44:10,940 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2024-10-14 14:44:10,940 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-10-14 14:44:10,940 - DEBUG - receive_response_body.complete
2024-10-14 14:44:10,940 - DEBUG - response_closed.started
2024-10-14 14:44:10,940 - DEBUG - response_closed.complete
2024-10-14 14:44:10,941 - DEBUG - HTTP Response: POST https://api.openai.com/v1/chat/completions "200 OK" Headers({'date': 'Mon, 14 Oct 2024 11:44:11 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-expose-headers': 'X-Request-ID', 'openai-organization': 'user-kzzh9hik9ryjiou4ftvhondh', 'openai-processing-ms': '648', 'openai-version': '2020-10-01', 'x-ratelimit-limit-requests': '10000', 'x-ratelimit-limit-tokens': '10000', 'x-ratelimit-remaining-requests': '9989', 'x-ratelimit-remaining-tokens': '9712', 'x-ratelimit-reset-requests': '1m28.56s', 'x-ratelimit-reset-tokens': '1.722s', 'x-request-id': 'req_8c35d04cefe8d7ed367f534d4d19a737', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8d2750e11d8bca1d-OTP', 'content-encoding': 'gzip', 'alt-svc': 'h3=":443"; ma=86400'})
2024-10-14 14:44:10,941 - DEBUG - request_id: req_8c35d04cefe8d7ed367f534d4d19a737
2024-10-14 14:44:10,941 - DEBUG - Instructor Raw Response: ChatCompletion(id='chatcmpl-AIDmcEZo7o7uayau5ul1Gel46ix0W', choices=[Choice(finish_reason='stop', index=0, logprobs=None, message=ChatCompletionMessage(content=None, refusal=None, role='assistant', function_call=None, tool_calls=[ChatCompletionMessageToolCall(id='call_sLew7sfo4AJVCbX6Td958zXr', function=Function(arguments='{\n"action": "extract_pii_data"\n}', name='AgentAction'), type='function')]))], created=1728906250, model='gpt-4-0613', object='chat.completion', service_tier=None, system_fingerprint=None, usage=CompletionUsage(completion_tokens=11, prompt_tokens=240, total_tokens=251, completion_tokens_details=None, prompt_tokens_details=None))
2024-10-14 14:44:10,944 - DEBUG - Instructor Request: mode.value='tool_call', response_model=<class 'models.AgentAction'>, new_kwargs={'model': 'gpt-4', 'messages': [{'role': 'system', 'content': '\nYou are an AI agent specializing in contract creation and personal information extraction. \n\nYour role is:\n 1. Guide the process of extracting information from documents..\n 2. Verifying the extracted information with human input.\n 3. Identifying parties. \n 4. Constructing a contract. \n\n\nFollow the workflow precisely and ask for human input when needed.\n\n'}, {'role': 'user', 'content': "Current state: {'verified_pii_data': [{'name': 'ELENA VASILESCU', 'address': 'Mun. Bucuresti Sec. 5 Str Nicolae Iorga nr.3 900 B'}], 'parties': {'buyer': 'ELENA VASILESCU', 'seller': ''}, 'contract_details': None, 'contract': None, 'current_action': None}\nWhat action should be taken next?"}], 'tools': [{'type': 'function', 'function': {'name': 'AgentAction', 'description': 'Correctly extracted `AgentAction` with all the required parameters with correct types', 'parameters': {'properties': {'action': {'description': 'Action to be performed by the agent', 'title': 'Action', 'type': 'string'}, 'parameters': {'additionalProperties': {'type': 'string'}, 'description': 'Parameters for the action', 'title': 'Parameters', 'type': 'object'}}, 'required': ['action', 'parameters'], 'type': 'object'}}}], 'tool_choice': {'type': 'function', 'function': {'name': 'AgentAction'}}}
2024-10-14 14:44:10,944 - DEBUG - max_retries: 1
2024-10-14 14:44:10,946 - DEBUG - Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'json_data': {'messages': [{'role': 'system', 'content': '\nYou are an AI agent specializing in contract creation and personal information extraction. \n\nYour role is:\n 1. Guide the process of extracting information from documents..\n 2. Verifying the extracted information with human input.\n 3. Identifying parties. \n 4. Constructing a contract. \n\n\nFollow the workflow precisely and ask for human input when needed.\n\n'}, {'role': 'user', 'content': "Current state: {'verified_pii_data': [{'name': 'ELENA VASILESCU', 'address': 'Mun. Bucuresti Sec. 5 Str Nicolae Iorga nr.3 900 B'}], 'parties': {'buyer': 'ELENA VASILESCU', 'seller': ''}, 'contract_details': None, 'contract': None, 'current_action': None}\nWhat action should be taken next?"}], 'model': 'gpt-4', 'tool_choice': {'type': 'function', 'function': {'name': 'AgentAction'}}, 'tools': [{'type': 'function', 'function': {'name': 'AgentAction', 'description': 'Correctly extracted `AgentAction` with all the required parameters with correct types', 'parameters': {'properties': {'action': {'description': 'Action to be performed by the agent', 'title': 'Action', 'type': 'string'}, 'parameters': {'additionalProperties': {'type': 'string'}, 'description': 'Parameters for the action', 'title': 'Parameters', 'type': 'object'}}, 'required': ['action', 'parameters'], 'type': 'object'}}}]}}
2024-10-14 14:44:10,946 - DEBUG - Sending HTTP Request: POST https://api.openai.com/v1/chat/completions
2024-10-14 14:44:10,946 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-10-14 14:44:10,946 - DEBUG - send_request_headers.complete
2024-10-14 14:44:10,947 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-10-14 14:44:10,947 - DEBUG - send_request_body.complete
2024-10-14 14:44:10,947 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-10-14 14:44:11,711 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Mon, 14 Oct 2024 11:44:11 GMT'), (b'Content-Type', b'application/json'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'user-kzzh9hik9ryjiou4ftvhondh'), (b'openai-processing-ms', b'618'), (b'openai-version', b'2020-10-01'), (b'x-ratelimit-limit-requests', b'10000'), (b'x-ratelimit-limit-tokens', b'10000'), (b'x-ratelimit-remaining-requests', b'9988'), (b'x-ratelimit-remaining-tokens', b'9595'), (b'x-ratelimit-reset-requests', b'1m36.396s'), (b'x-ratelimit-reset-tokens', b'2.424s'), (b'x-request-id', b'req_7b6ca878ff9c4329ac3166047977c6d1'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8d2750e61bd0ca1d-OTP'), (b'Content-Encoding', b'gzip'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-10-14 14:44:11,711 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2024-10-14 14:44:11,711 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-10-14 14:44:11,711 - DEBUG - receive_response_body.complete
2024-10-14 14:44:11,711 - DEBUG - response_closed.started
2024-10-14 14:44:11,711 - DEBUG - response_closed.complete
2024-10-14 14:44:11,711 - DEBUG - HTTP Response: POST https://api.openai.com/v1/chat/completions "200 OK" Headers({'date': 'Mon, 14 Oct 2024 11:44:11 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-expose-headers': 'X-Request-ID', 'openai-organization': 'user-kzzh9hik9ryjiou4ftvhondh', 'openai-processing-ms': '618', 'openai-version': '2020-10-01', 'x-ratelimit-limit-requests': '10000', 'x-ratelimit-limit-tokens': '10000', 'x-ratelimit-remaining-requests': '9988', 'x-ratelimit-remaining-tokens': '9595', 'x-ratelimit-reset-requests': '1m36.396s', 'x-ratelimit-reset-tokens': '2.424s', 'x-request-id': 'req_7b6ca878ff9c4329ac3166047977c6d1', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8d2750e61bd0ca1d-OTP', 'content-encoding': 'gzip', 'alt-svc': 'h3=":443"; ma=86400'})
2024-10-14 14:44:11,711 - DEBUG - request_id: req_7b6ca878ff9c4329ac3166047977c6d1
2024-10-14 14:44:11,712 - DEBUG - Instructor Raw Response: ChatCompletion(id='chatcmpl-AIDmds87OYiMke4hJQELJvRgRqMhA', choices=[Choice(finish_reason='stop', index=0, logprobs=None, message=ChatCompletionMessage(content=None, refusal=None, role='assistant', function_call=None, tool_calls=[ChatCompletionMessageToolCall(id='call_X0T05VUOFEmaZgJy7o0HAxTg', function=Function(arguments='{\n"action": "verify_pii_data"\n}', name='AgentAction'), type='function')]))], created=1728906251, model='gpt-4-0613', object='chat.completion', service_tier=None, system_fingerprint=None, usage=CompletionUsage(completion_tokens=11, prompt_tokens=240, total_tokens=251, completion_tokens_details=None, prompt_tokens_details=None))
2024-10-14 14:44:11,713 - DEBUG - Instructor Request: mode.value='tool_call', response_model=<class 'models.AgentAction'>, new_kwargs={'model': 'gpt-4', 'messages': [{'role': 'system', 'content': '\nYou are an AI agent specializing in contract creation and personal information extraction. \n\nYour role is:\n 1. Guide the process of extracting information from documents..\n 2. Verifying the extracted information with human input.\n 3. Identifying parties. \n 4. Constructing a contract. \n\n\nFollow the workflow precisely and ask for human input when needed.\n\n'}, {'role': 'user', 'content': "Current state: {'verified_pii_data': [{'name': 'ELENA VASILESCU', 'address': 'Mun. Bucuresti Sec. 5 Str Nicolae Iorga nr.3 900 B'}], 'parties': {'buyer': 'ELENA VASILESCU', 'seller': ''}, 'contract_details': None, 'contract': None, 'current_action': None}\nWhat action should be taken next?"}], 'tools': [{'type': 'function', 'function': {'name': 'AgentAction', 'description': 'Correctly extracted `AgentAction` with all the required parameters with correct types', 'parameters': {'properties': {'action': {'description': 'Action to be performed by the agent', 'title': 'Action', 'type': 'string'}, 'parameters': {'additionalProperties': {'type': 'string'}, 'description': 'Parameters for the action', 'title': 'Parameters', 'type': 'object'}}, 'required': ['action', 'parameters'], 'type': 'object'}}}], 'tool_choice': {'type': 'function', 'function': {'name': 'AgentAction'}}}
2024-10-14 14:44:11,713 - DEBUG - max_retries: 1
2024-10-14 14:44:11,714 - DEBUG - Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'json_data': {'messages': [{'role': 'system', 'content': '\nYou are an AI agent specializing in contract creation and personal information extraction. \n\nYour role is:\n 1. Guide the process of extracting information from documents..\n 2. Verifying the extracted information with human input.\n 3. Identifying parties. \n 4. Constructing a contract. \n\n\nFollow the workflow precisely and ask for human input when needed.\n\n'}, {'role': 'user', 'content': "Current state: {'verified_pii_data': [{'name': 'ELENA VASILESCU', 'address': 'Mun. Bucuresti Sec. 5 Str Nicolae Iorga nr.3 900 B'}], 'parties': {'buyer': 'ELENA VASILESCU', 'seller': ''}, 'contract_details': None, 'contract': None, 'current_action': None}\nWhat action should be taken next?"}], 'model': 'gpt-4', 'tool_choice': {'type': 'function', 'function': {'name': 'AgentAction'}}, 'tools': [{'type': 'function', 'function': {'name': 'AgentAction', 'description': 'Correctly extracted `AgentAction` with all the required parameters with correct types', 'parameters': {'properties': {'action': {'description': 'Action to be performed by the agent', 'title': 'Action', 'type': 'string'}, 'parameters': {'additionalProperties': {'type': 'string'}, 'description': 'Parameters for the action', 'title': 'Parameters', 'type': 'object'}}, 'required': ['action', 'parameters'], 'type': 'object'}}}]}}
2024-10-14 14:44:11,715 - DEBUG - Sending HTTP Request: POST https://api.openai.com/v1/chat/completions
2024-10-14 14:44:11,715 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-10-14 14:44:11,715 - DEBUG - send_request_headers.complete
2024-10-14 14:44:11,715 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-10-14 14:44:11,715 - DEBUG - send_request_body.complete
2024-10-14 14:44:11,715 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-10-14 14:44:12,523 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Mon, 14 Oct 2024 11:44:12 GMT'), (b'Content-Type', b'application/json'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'user-kzzh9hik9ryjiou4ftvhondh'), (b'openai-processing-ms', b'664'), (b'openai-version', b'2020-10-01'), (b'x-ratelimit-limit-requests', b'10000'), (b'x-ratelimit-limit-tokens', b'10000'), (b'x-ratelimit-remaining-requests', b'9987'), (b'x-ratelimit-remaining-tokens', b'9472'), (b'x-ratelimit-reset-requests', b'1m44.267s'), (b'x-ratelimit-reset-tokens', b'3.162s'), (b'x-request-id', b'req_c3d5949969b19696487d975da96ccf19'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8d2750eae8a4ca1d-OTP'), (b'Content-Encoding', b'gzip'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-10-14 14:44:12,524 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2024-10-14 14:44:12,524 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-10-14 14:44:12,525 - DEBUG - receive_response_body.complete
2024-10-14 14:44:12,525 - DEBUG - response_closed.started
2024-10-14 14:44:12,525 - DEBUG - response_closed.complete
2024-10-14 14:44:12,525 - DEBUG - HTTP Response: POST https://api.openai.com/v1/chat/completions "200 OK" Headers({'date': 'Mon, 14 Oct 2024 11:44:12 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-expose-headers': 'X-Request-ID', 'openai-organization': 'user-kzzh9hik9ryjiou4ftvhondh', 'openai-processing-ms': '664', 'openai-version': '2020-10-01', 'x-ratelimit-limit-requests': '10000', 'x-ratelimit-limit-tokens': '10000', 'x-ratelimit-remaining-requests': '9987', 'x-ratelimit-remaining-tokens': '9472', 'x-ratelimit-reset-requests': '1m44.267s', 'x-ratelimit-reset-tokens': '3.162s', 'x-request-id': 'req_c3d5949969b19696487d975da96ccf19', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8d2750eae8a4ca1d-OTP', 'content-encoding': 'gzip', 'alt-svc': 'h3=":443"; ma=86400'})
2024-10-14 14:44:12,526 - DEBUG - request_id: req_c3d5949969b19696487d975da96ccf19
2024-10-14 14:44:12,527 - DEBUG - Instructor Raw Response: ChatCompletion(id='chatcmpl-AIDmem1XEWBTQQtsjc80Lxl5pPexD', choices=[Choice(finish_reason='stop', index=0, logprobs=None, message=ChatCompletionMessage(content=None, refusal=None, role='assistant', function_call=None, tool_calls=[ChatCompletionMessageToolCall(id='call_F35y70aV6S4hPuXhXaibo9Im', function=Function(arguments='{\n"action": "verify_seller_details"\n}', name='AgentAction'), type='function')]))], created=1728906252, model='gpt-4-0613', object='chat.completion', service_tier=None, system_fingerprint=None, usage=CompletionUsage(completion_tokens=11, prompt_tokens=240, total_tokens=251, completion_tokens_details=None, prompt_tokens_details=None))
2024-10-14 14:44:12,529 - DEBUG - Instructor Request: mode.value='tool_call', response_model=<class 'models.AgentAction'>, new_kwargs={'model': 'gpt-4', 'messages': [{'role': 'system', 'content': '\nYou are an AI agent specializing in contract creation and personal information extraction. \n\nYour role is:\n 1. Guide the process of extracting information from documents..\n 2. Verifying the extracted information with human input.\n 3. Identifying parties. \n 4. Constructing a contract. \n\n\nFollow the workflow precisely and ask for human input when needed.\n\n'}, {'role': 'user', 'content': "Current state: {'verified_pii_data': [{'name': 'ELENA VASILESCU', 'address': 'Mun. Bucuresti Sec. 5 Str Nicolae Iorga nr.3 900 B'}], 'parties': {'buyer': 'ELENA VASILESCU', 'seller': ''}, 'contract_details': None, 'contract': None, 'current_action': None}\nWhat action should be taken next?"}], 'tools': [{'type': 'function', 'function': {'name': 'AgentAction', 'description': 'Correctly extracted `AgentAction` with all the required parameters with correct types', 'parameters': {'properties': {'action': {'description': 'Action to be performed by the agent', 'title': 'Action', 'type': 'string'}, 'parameters': {'additionalProperties': {'type': 'string'}, 'description': 'Parameters for the action', 'title': 'Parameters', 'type': 'object'}}, 'required': ['action', 'parameters'], 'type': 'object'}}}], 'tool_choice': {'type': 'function', 'function': {'name': 'AgentAction'}}}
2024-10-14 14:44:12,529 - DEBUG - max_retries: 1
2024-10-14 14:44:12,531 - DEBUG - Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'json_data': {'messages': [{'role': 'system', 'content': '\nYou are an AI agent specializing in contract creation and personal information extraction. \n\nYour role is:\n 1. Guide the process of extracting information from documents..\n 2. Verifying the extracted information with human input.\n 3. Identifying parties. \n 4. Constructing a contract. \n\n\nFollow the workflow precisely and ask for human input when needed.\n\n'}, {'role': 'user', 'content': "Current state: {'verified_pii_data': [{'name': 'ELENA VASILESCU', 'address': 'Mun. Bucuresti Sec. 5 Str Nicolae Iorga nr.3 900 B'}], 'parties': {'buyer': 'ELENA VASILESCU', 'seller': ''}, 'contract_details': None, 'contract': None, 'current_action': None}\nWhat action should be taken next?"}], 'model': 'gpt-4', 'tool_choice': {'type': 'function', 'function': {'name': 'AgentAction'}}, 'tools': [{'type': 'function', 'function': {'name': 'AgentAction', 'description': 'Correctly extracted `AgentAction` with all the required parameters with correct types', 'parameters': {'properties': {'action': {'description': 'Action to be performed by the agent', 'title': 'Action', 'type': 'string'}, 'parameters': {'additionalProperties': {'type': 'string'}, 'description': 'Parameters for the action', 'title': 'Parameters', 'type': 'object'}}, 'required': ['action', 'parameters'], 'type': 'object'}}}]}}
2024-10-14 14:44:12,532 - DEBUG - Sending HTTP Request: POST https://api.openai.com/v1/chat/completions
2024-10-14 14:44:12,532 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-10-14 14:44:12,532 - DEBUG - send_request_headers.complete
2024-10-14 14:44:12,533 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-10-14 14:44:12,533 - DEBUG - send_request_body.complete
2024-10-14 14:44:12,533 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-10-14 14:44:13,454 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Mon, 14 Oct 2024 11:44:13 GMT'), (b'Content-Type', b'application/json'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'user-kzzh9hik9ryjiou4ftvhondh'), (b'openai-processing-ms', b'751'), (b'openai-version', b'2020-10-01'), (b'x-ratelimit-limit-requests', b'10000'), (b'x-ratelimit-limit-tokens', b'10000'), (b'x-ratelimit-remaining-requests', b'9987'), (b'x-ratelimit-remaining-tokens', b'9358'), (b'x-ratelimit-reset-requests', b'1m52.088s'), (b'x-ratelimit-reset-tokens', b'3.848s'), (b'x-request-id', b'req_02850d67f1a2ce7574cbf6c3a336588e'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8d2750f00e66ca1d-OTP'), (b'Content-Encoding', b'gzip'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-10-14 14:44:13,454 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2024-10-14 14:44:13,455 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-10-14 14:44:13,455 - DEBUG - receive_response_body.complete
2024-10-14 14:44:13,455 - DEBUG - response_closed.started
2024-10-14 14:44:13,456 - DEBUG - response_closed.complete
2024-10-14 14:44:13,456 - DEBUG - HTTP Response: POST https://api.openai.com/v1/chat/completions "200 OK" Headers({'date': 'Mon, 14 Oct 2024 11:44:13 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-expose-headers': 'X-Request-ID', 'openai-organization': 'user-kzzh9hik9ryjiou4ftvhondh', 'openai-processing-ms': '751', 'openai-version': '2020-10-01', 'x-ratelimit-limit-requests': '10000', 'x-ratelimit-limit-tokens': '10000', 'x-ratelimit-remaining-requests': '9987', 'x-ratelimit-remaining-tokens': '9358', 'x-ratelimit-reset-requests': '1m52.088s', 'x-ratelimit-reset-tokens': '3.848s', 'x-request-id': 'req_02850d67f1a2ce7574cbf6c3a336588e', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8d2750f00e66ca1d-OTP', 'content-encoding': 'gzip', 'alt-svc': 'h3=":443"; ma=86400'})
2024-10-14 14:44:13,456 - DEBUG - request_id: req_02850d67f1a2ce7574cbf6c3a336588e
2024-10-14 14:44:13,457 - DEBUG - Instructor Raw Response: ChatCompletion(id='chatcmpl-AIDmfzaEdoZ9NGIUNXAe8Ytt5t9fp', choices=[Choice(finish_reason='stop', index=0, logprobs=None, message=ChatCompletionMessage(content=None, refusal=None, role='assistant', function_call=None, tool_calls=[ChatCompletionMessageToolCall(id='call_z7uSrSh9m33dT8m8CcMOvYVd', function=Function(arguments='{\n"action": "verify_seller_information"\n}', name='AgentAction'), type='function')]))], created=1728906253, model='gpt-4-0613', object='chat.completion', service_tier=None, system_fingerprint=None, usage=CompletionUsage(completion_tokens=11, prompt_tokens=240, total_tokens=251, completion_tokens_details=None, prompt_tokens_details=None))
2024-10-14 14:44:13,460 - DEBUG - Instructor Request: mode.value='tool_call', response_model=<class 'models.AgentAction'>, new_kwargs={'model': 'gpt-4', 'messages': [{'role': 'system', 'content': '\nYou are an AI agent specializing in contract creation and personal information extraction. \n\nYour role is:\n 1. Guide the process of extracting information from documents..\n 2. Verifying the extracted information with human input.\n 3. Identifying parties. \n 4. Constructing a contract. \n\n\nFollow the workflow precisely and ask for human input when needed.\n\n'}, {'role': 'user', 'content': "Current state: {'verified_pii_data': [{'name': 'ELENA VASILESCU', 'address': 'Mun. Bucuresti Sec. 5 Str Nicolae Iorga nr.3 900 B'}], 'parties': {'buyer': 'ELENA VASILESCU', 'seller': ''}, 'contract_details': None, 'contract': None, 'current_action': None}\nWhat action should be taken next?"}], 'tools': [{'type': 'function', 'function': {'name': 'AgentAction', 'description': 'Correctly extracted `AgentAction` with all the required parameters with correct types', 'parameters': {'properties': {'action': {'description': 'Action to be performed by the agent', 'title': 'Action', 'type': 'string'}, 'parameters': {'additionalProperties': {'type': 'string'}, 'description': 'Parameters for the action', 'title': 'Parameters', 'type': 'object'}}, 'required': ['action', 'parameters'], 'type': 'object'}}}], 'tool_choice': {'type': 'function', 'function': {'name': 'AgentAction'}}}
2024-10-14 14:44:13,461 - DEBUG - max_retries: 1
2024-10-14 14:44:13,464 - DEBUG - Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'json_data': {'messages': [{'role': 'system', 'content': '\nYou are an AI agent specializing in contract creation and personal information extraction. \n\nYour role is:\n 1. Guide the process of extracting information from documents..\n 2. Verifying the extracted information with human input.\n 3. Identifying parties. \n 4. Constructing a contract. \n\n\nFollow the workflow precisely and ask for human input when needed.\n\n'}, {'role': 'user', 'content': "Current state: {'verified_pii_data': [{'name': 'ELENA VASILESCU', 'address': 'Mun. Bucuresti Sec. 5 Str Nicolae Iorga nr.3 900 B'}], 'parties': {'buyer': 'ELENA VASILESCU', 'seller': ''}, 'contract_details': None, 'contract': None, 'current_action': None}\nWhat action should be taken next?"}], 'model': 'gpt-4', 'tool_choice': {'type': 'function', 'function': {'name': 'AgentAction'}}, 'tools': [{'type': 'function', 'function': {'name': 'AgentAction', 'description': 'Correctly extracted `AgentAction` with all the required parameters with correct types', 'parameters': {'properties': {'action': {'description': 'Action to be performed by the agent', 'title': 'Action', 'type': 'string'}, 'parameters': {'additionalProperties': {'type': 'string'}, 'description': 'Parameters for the action', 'title': 'Parameters', 'type': 'object'}}, 'required': ['action', 'parameters'], 'type': 'object'}}}]}}
2024-10-14 14:44:13,465 - DEBUG - Sending HTTP Request: POST https://api.openai.com/v1/chat/completions
2024-10-14 14:44:13,465 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-10-14 14:44:13,465 - DEBUG - send_request_headers.complete
2024-10-14 14:44:13,465 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-10-14 14:44:13,465 - DEBUG - send_request_body.complete
2024-10-14 14:44:13,465 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-10-14 14:44:14,284 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Mon, 14 Oct 2024 11:44:14 GMT'), (b'Content-Type', b'application/json'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'user-kzzh9hik9ryjiou4ftvhondh'), (b'openai-processing-ms', b'667'), (b'openai-version', b'2020-10-01'), (b'x-ratelimit-limit-requests', b'10000'), (b'x-ratelimit-limit-tokens', b'10000'), (b'x-ratelimit-remaining-requests', b'9986'), (b'x-ratelimit-remaining-tokens', b'9263'), (b'x-ratelimit-reset-requests', b'1m59.79s'), (b'x-ratelimit-reset-tokens', b'4.417s'), (b'x-request-id', b'req_78da532f34381ba9c1643bf3590952dd'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8d2750f5dec5ca1d-OTP'), (b'Content-Encoding', b'gzip'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-10-14 14:44:14,284 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2024-10-14 14:44:14,285 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-10-14 14:44:14,285 - DEBUG - receive_response_body.complete
2024-10-14 14:44:14,285 - DEBUG - response_closed.started
2024-10-14 14:44:14,285 - DEBUG - response_closed.complete
2024-10-14 14:44:14,285 - DEBUG - HTTP Response: POST https://api.openai.com/v1/chat/completions "200 OK" Headers({'date': 'Mon, 14 Oct 2024 11:44:14 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-expose-headers': 'X-Request-ID', 'openai-organization': 'user-kzzh9hik9ryjiou4ftvhondh', 'openai-processing-ms': '667', 'openai-version': '2020-10-01', 'x-ratelimit-limit-requests': '10000', 'x-ratelimit-limit-tokens': '10000', 'x-ratelimit-remaining-requests': '9986', 'x-ratelimit-remaining-tokens': '9263', 'x-ratelimit-reset-requests': '1m59.79s', 'x-ratelimit-reset-tokens': '4.417s', 'x-request-id': 'req_78da532f34381ba9c1643bf3590952dd', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8d2750f5dec5ca1d-OTP', 'content-encoding': 'gzip', 'alt-svc': 'h3=":443"; ma=86400'})
2024-10-14 14:44:14,285 - DEBUG - request_id: req_78da532f34381ba9c1643bf3590952dd
2024-10-14 14:44:14,286 - DEBUG - Instructor Raw Response: ChatCompletion(id='chatcmpl-AIDmf2v6DQZwTzJRzeX9g97gpmybI', choices=[Choice(finish_reason='stop', index=0, logprobs=None, message=ChatCompletionMessage(content=None, refusal=None, role='assistant', function_call=None, tool_calls=[ChatCompletionMessageToolCall(id='call_6YFU67wX99SxfRbOe8qCrRMa', function=Function(arguments='{\n  "action": "extract_info"\n}', name='AgentAction'), type='function')]))], created=1728906253, model='gpt-4-0613', object='chat.completion', service_tier=None, system_fingerprint=None, usage=CompletionUsage(completion_tokens=10, prompt_tokens=240, total_tokens=250, completion_tokens_details=None, prompt_tokens_details=None))
2024-10-14 14:44:14,288 - DEBUG - Instructor Request: mode.value='tool_call', response_model=<class 'models.AgentAction'>, new_kwargs={'model': 'gpt-4', 'messages': [{'role': 'system', 'content': '\nYou are an AI agent specializing in contract creation and personal information extraction. \n\nYour role is:\n 1. Guide the process of extracting information from documents..\n 2. Verifying the extracted information with human input.\n 3. Identifying parties. \n 4. Constructing a contract. \n\n\nFollow the workflow precisely and ask for human input when needed.\n\n'}, {'role': 'user', 'content': "Current state: {'verified_pii_data': [{'name': 'ELENA VASILESCU', 'address': 'Mun. Bucuresti Sec. 5 Str Nicolae Iorga nr.3 900 B'}], 'parties': {'buyer': 'ELENA VASILESCU', 'seller': ''}, 'contract_details': None, 'contract': None, 'current_action': None}\nWhat action should be taken next?"}], 'tools': [{'type': 'function', 'function': {'name': 'AgentAction', 'description': 'Correctly extracted `AgentAction` with all the required parameters with correct types', 'parameters': {'properties': {'action': {'description': 'Action to be performed by the agent', 'title': 'Action', 'type': 'string'}, 'parameters': {'additionalProperties': {'type': 'string'}, 'description': 'Parameters for the action', 'title': 'Parameters', 'type': 'object'}}, 'required': ['action', 'parameters'], 'type': 'object'}}}], 'tool_choice': {'type': 'function', 'function': {'name': 'AgentAction'}}}
2024-10-14 14:44:14,288 - DEBUG - max_retries: 1
2024-10-14 14:44:14,290 - DEBUG - Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'json_data': {'messages': [{'role': 'system', 'content': '\nYou are an AI agent specializing in contract creation and personal information extraction. \n\nYour role is:\n 1. Guide the process of extracting information from documents..\n 2. Verifying the extracted information with human input.\n 3. Identifying parties. \n 4. Constructing a contract. \n\n\nFollow the workflow precisely and ask for human input when needed.\n\n'}, {'role': 'user', 'content': "Current state: {'verified_pii_data': [{'name': 'ELENA VASILESCU', 'address': 'Mun. Bucuresti Sec. 5 Str Nicolae Iorga nr.3 900 B'}], 'parties': {'buyer': 'ELENA VASILESCU', 'seller': ''}, 'contract_details': None, 'contract': None, 'current_action': None}\nWhat action should be taken next?"}], 'model': 'gpt-4', 'tool_choice': {'type': 'function', 'function': {'name': 'AgentAction'}}, 'tools': [{'type': 'function', 'function': {'name': 'AgentAction', 'description': 'Correctly extracted `AgentAction` with all the required parameters with correct types', 'parameters': {'properties': {'action': {'description': 'Action to be performed by the agent', 'title': 'Action', 'type': 'string'}, 'parameters': {'additionalProperties': {'type': 'string'}, 'description': 'Parameters for the action', 'title': 'Parameters', 'type': 'object'}}, 'required': ['action', 'parameters'], 'type': 'object'}}}]}}
2024-10-14 14:44:14,290 - DEBUG - Sending HTTP Request: POST https://api.openai.com/v1/chat/completions
2024-10-14 14:44:14,290 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-10-14 14:44:14,290 - DEBUG - send_request_headers.complete
2024-10-14 14:44:14,290 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-10-14 14:44:14,290 - DEBUG - send_request_body.complete
2024-10-14 14:44:14,290 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-10-14 14:44:15,385 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Mon, 14 Oct 2024 11:44:15 GMT'), (b'Content-Type', b'application/json'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'user-kzzh9hik9ryjiou4ftvhondh'), (b'openai-processing-ms', b'950'), (b'openai-version', b'2020-10-01'), (b'x-ratelimit-limit-requests', b'10000'), (b'x-ratelimit-limit-tokens', b'10000'), (b'x-ratelimit-remaining-requests', b'9985'), (b'x-ratelimit-remaining-tokens', b'9150'), (b'x-ratelimit-reset-requests', b'2m7.612s'), (b'x-ratelimit-reset-tokens', b'5.099s'), (b'x-request-id', b'req_3c9d3fbc28f343b24bd2a470672027a1'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8d2750fb0df1ca1d-OTP'), (b'Content-Encoding', b'gzip'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-10-14 14:44:15,386 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2024-10-14 14:44:15,386 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-10-14 14:44:15,387 - DEBUG - receive_response_body.complete
2024-10-14 14:44:15,387 - DEBUG - response_closed.started
2024-10-14 14:44:15,387 - DEBUG - response_closed.complete
2024-10-14 14:44:15,387 - DEBUG - HTTP Response: POST https://api.openai.com/v1/chat/completions "200 OK" Headers({'date': 'Mon, 14 Oct 2024 11:44:15 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-expose-headers': 'X-Request-ID', 'openai-organization': 'user-kzzh9hik9ryjiou4ftvhondh', 'openai-processing-ms': '950', 'openai-version': '2020-10-01', 'x-ratelimit-limit-requests': '10000', 'x-ratelimit-limit-tokens': '10000', 'x-ratelimit-remaining-requests': '9985', 'x-ratelimit-remaining-tokens': '9150', 'x-ratelimit-reset-requests': '2m7.612s', 'x-ratelimit-reset-tokens': '5.099s', 'x-request-id': 'req_3c9d3fbc28f343b24bd2a470672027a1', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8d2750fb0df1ca1d-OTP', 'content-encoding': 'gzip', 'alt-svc': 'h3=":443"; ma=86400'})
2024-10-14 14:44:15,387 - DEBUG - request_id: req_3c9d3fbc28f343b24bd2a470672027a1
2024-10-14 14:44:15,389 - DEBUG - Instructor Raw Response: ChatCompletion(id='chatcmpl-AIDmgzIn1A9YXYVb3nJr400BlVIhK', choices=[Choice(finish_reason='stop', index=0, logprobs=None, message=ChatCompletionMessage(content=None, refusal=None, role='assistant', function_call=None, tool_calls=[ChatCompletionMessageToolCall(id='call_aIHFpkb3b3JqsG8a6OXjdBtX', function=Function(arguments='{\n"action": "extract_seller_information"\n}', name='AgentAction'), type='function')]))], created=1728906254, model='gpt-4-0613', object='chat.completion', service_tier=None, system_fingerprint=None, usage=CompletionUsage(completion_tokens=11, prompt_tokens=240, total_tokens=251, completion_tokens_details=None, prompt_tokens_details=None))
2024-10-14 14:44:15,391 - DEBUG - Instructor Request: mode.value='tool_call', response_model=<class 'models.AgentAction'>, new_kwargs={'model': 'gpt-4', 'messages': [{'role': 'system', 'content': '\nYou are an AI agent specializing in contract creation and personal information extraction. \n\nYour role is:\n 1. Guide the process of extracting information from documents..\n 2. Verifying the extracted information with human input.\n 3. Identifying parties. \n 4. Constructing a contract. \n\n\nFollow the workflow precisely and ask for human input when needed.\n\n'}, {'role': 'user', 'content': "Current state: {'verified_pii_data': [{'name': 'ELENA VASILESCU', 'address': 'Mun. Bucuresti Sec. 5 Str Nicolae Iorga nr.3 900 B'}], 'parties': {'buyer': 'ELENA VASILESCU', 'seller': ''}, 'contract_details': None, 'contract': None, 'current_action': None}\nWhat action should be taken next?"}], 'tools': [{'type': 'function', 'function': {'name': 'AgentAction', 'description': 'Correctly extracted `AgentAction` with all the required parameters with correct types', 'parameters': {'properties': {'action': {'description': 'Action to be performed by the agent', 'title': 'Action', 'type': 'string'}, 'parameters': {'additionalProperties': {'type': 'string'}, 'description': 'Parameters for the action', 'title': 'Parameters', 'type': 'object'}}, 'required': ['action', 'parameters'], 'type': 'object'}}}], 'tool_choice': {'type': 'function', 'function': {'name': 'AgentAction'}}}
2024-10-14 14:44:15,391 - DEBUG - max_retries: 1
2024-10-14 14:44:15,394 - DEBUG - Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'json_data': {'messages': [{'role': 'system', 'content': '\nYou are an AI agent specializing in contract creation and personal information extraction. \n\nYour role is:\n 1. Guide the process of extracting information from documents..\n 2. Verifying the extracted information with human input.\n 3. Identifying parties. \n 4. Constructing a contract. \n\n\nFollow the workflow precisely and ask for human input when needed.\n\n'}, {'role': 'user', 'content': "Current state: {'verified_pii_data': [{'name': 'ELENA VASILESCU', 'address': 'Mun. Bucuresti Sec. 5 Str Nicolae Iorga nr.3 900 B'}], 'parties': {'buyer': 'ELENA VASILESCU', 'seller': ''}, 'contract_details': None, 'contract': None, 'current_action': None}\nWhat action should be taken next?"}], 'model': 'gpt-4', 'tool_choice': {'type': 'function', 'function': {'name': 'AgentAction'}}, 'tools': [{'type': 'function', 'function': {'name': 'AgentAction', 'description': 'Correctly extracted `AgentAction` with all the required parameters with correct types', 'parameters': {'properties': {'action': {'description': 'Action to be performed by the agent', 'title': 'Action', 'type': 'string'}, 'parameters': {'additionalProperties': {'type': 'string'}, 'description': 'Parameters for the action', 'title': 'Parameters', 'type': 'object'}}, 'required': ['action', 'parameters'], 'type': 'object'}}}]}}
2024-10-14 14:44:15,394 - DEBUG - Sending HTTP Request: POST https://api.openai.com/v1/chat/completions
2024-10-14 14:44:15,395 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-10-14 14:44:15,395 - DEBUG - send_request_headers.complete
2024-10-14 14:44:15,395 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-10-14 14:44:15,395 - DEBUG - send_request_body.complete
2024-10-14 14:44:15,395 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-10-14 14:44:16,182 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Mon, 14 Oct 2024 11:44:16 GMT'), (b'Content-Type', b'application/json'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'user-kzzh9hik9ryjiou4ftvhondh'), (b'openai-processing-ms', b'630'), (b'openai-version', b'2020-10-01'), (b'x-ratelimit-limit-requests', b'10000'), (b'x-ratelimit-limit-tokens', b'10000'), (b'x-ratelimit-remaining-requests', b'9984'), (b'x-ratelimit-remaining-tokens', b'9083'), (b'x-ratelimit-reset-requests', b'2m15.145s'), (b'x-ratelimit-reset-tokens', b'5.497s'), (b'x-request-id', b'req_0acb221bd841c30abb452f9db717fbe1'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8d275101e9bcca1d-OTP'), (b'Content-Encoding', b'gzip'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-10-14 14:44:16,183 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2024-10-14 14:44:16,184 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-10-14 14:44:16,184 - DEBUG - receive_response_body.complete
2024-10-14 14:44:16,185 - DEBUG - response_closed.started
2024-10-14 14:44:16,185 - DEBUG - response_closed.complete
2024-10-14 14:44:16,185 - DEBUG - HTTP Response: POST https://api.openai.com/v1/chat/completions "200 OK" Headers({'date': 'Mon, 14 Oct 2024 11:44:16 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-expose-headers': 'X-Request-ID', 'openai-organization': 'user-kzzh9hik9ryjiou4ftvhondh', 'openai-processing-ms': '630', 'openai-version': '2020-10-01', 'x-ratelimit-limit-requests': '10000', 'x-ratelimit-limit-tokens': '10000', 'x-ratelimit-remaining-requests': '9984', 'x-ratelimit-remaining-tokens': '9083', 'x-ratelimit-reset-requests': '2m15.145s', 'x-ratelimit-reset-tokens': '5.497s', 'x-request-id': 'req_0acb221bd841c30abb452f9db717fbe1', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8d275101e9bcca1d-OTP', 'content-encoding': 'gzip', 'alt-svc': 'h3=":443"; ma=86400'})
2024-10-14 14:44:16,185 - DEBUG - request_id: req_0acb221bd841c30abb452f9db717fbe1
2024-10-14 14:44:16,186 - DEBUG - Instructor Raw Response: ChatCompletion(id='chatcmpl-AIDmhTtDG1SzEmt6Xw3iRPdASMLn8', choices=[Choice(finish_reason='stop', index=0, logprobs=None, message=ChatCompletionMessage(content=None, refusal=None, role='assistant', function_call=None, tool_calls=[ChatCompletionMessageToolCall(id='call_yvXYhlC9Cegzu8IIWXeuVu6x', function=Function(arguments='{\n"action": "extract_info"\n}', name='AgentAction'), type='function')]))], created=1728906255, model='gpt-4-0613', object='chat.completion', service_tier=None, system_fingerprint=None, usage=CompletionUsage(completion_tokens=9, prompt_tokens=240, total_tokens=249, completion_tokens_details=None, prompt_tokens_details=None))
2024-10-14 14:44:16,188 - DEBUG - Instructor Request: mode.value='tool_call', response_model=<class 'models.AgentAction'>, new_kwargs={'model': 'gpt-4', 'messages': [{'role': 'system', 'content': '\nYou are an AI agent specializing in contract creation and personal information extraction. \n\nYour role is:\n 1. Guide the process of extracting information from documents..\n 2. Verifying the extracted information with human input.\n 3. Identifying parties. \n 4. Constructing a contract. \n\n\nFollow the workflow precisely and ask for human input when needed.\n\n'}, {'role': 'user', 'content': "Current state: {'verified_pii_data': [{'name': 'ELENA VASILESCU', 'address': 'Mun. Bucuresti Sec. 5 Str Nicolae Iorga nr.3 900 B'}], 'parties': {'buyer': 'ELENA VASILESCU', 'seller': ''}, 'contract_details': None, 'contract': None, 'current_action': None}\nWhat action should be taken next?"}], 'tools': [{'type': 'function', 'function': {'name': 'AgentAction', 'description': 'Correctly extracted `AgentAction` with all the required parameters with correct types', 'parameters': {'properties': {'action': {'description': 'Action to be performed by the agent', 'title': 'Action', 'type': 'string'}, 'parameters': {'additionalProperties': {'type': 'string'}, 'description': 'Parameters for the action', 'title': 'Parameters', 'type': 'object'}}, 'required': ['action', 'parameters'], 'type': 'object'}}}], 'tool_choice': {'type': 'function', 'function': {'name': 'AgentAction'}}}
2024-10-14 14:44:16,188 - DEBUG - max_retries: 1
2024-10-14 14:44:16,191 - DEBUG - Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'json_data': {'messages': [{'role': 'system', 'content': '\nYou are an AI agent specializing in contract creation and personal information extraction. \n\nYour role is:\n 1. Guide the process of extracting information from documents..\n 2. Verifying the extracted information with human input.\n 3. Identifying parties. \n 4. Constructing a contract. \n\n\nFollow the workflow precisely and ask for human input when needed.\n\n'}, {'role': 'user', 'content': "Current state: {'verified_pii_data': [{'name': 'ELENA VASILESCU', 'address': 'Mun. Bucuresti Sec. 5 Str Nicolae Iorga nr.3 900 B'}], 'parties': {'buyer': 'ELENA VASILESCU', 'seller': ''}, 'contract_details': None, 'contract': None, 'current_action': None}\nWhat action should be taken next?"}], 'model': 'gpt-4', 'tool_choice': {'type': 'function', 'function': {'name': 'AgentAction'}}, 'tools': [{'type': 'function', 'function': {'name': 'AgentAction', 'description': 'Correctly extracted `AgentAction` with all the required parameters with correct types', 'parameters': {'properties': {'action': {'description': 'Action to be performed by the agent', 'title': 'Action', 'type': 'string'}, 'parameters': {'additionalProperties': {'type': 'string'}, 'description': 'Parameters for the action', 'title': 'Parameters', 'type': 'object'}}, 'required': ['action', 'parameters'], 'type': 'object'}}}]}}
2024-10-14 14:44:16,191 - DEBUG - Sending HTTP Request: POST https://api.openai.com/v1/chat/completions
2024-10-14 14:44:16,191 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-10-14 14:44:16,192 - DEBUG - send_request_headers.complete
2024-10-14 14:44:16,192 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-10-14 14:44:16,192 - DEBUG - send_request_body.complete
2024-10-14 14:44:16,192 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-10-14 14:44:17,027 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Mon, 14 Oct 2024 11:44:17 GMT'), (b'Content-Type', b'application/json'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'user-kzzh9hik9ryjiou4ftvhondh'), (b'openai-processing-ms', b'684'), (b'openai-version', b'2020-10-01'), (b'x-ratelimit-limit-requests', b'10000'), (b'x-ratelimit-limit-tokens', b'10000'), (b'x-ratelimit-remaining-requests', b'9983'), (b'x-ratelimit-remaining-tokens', b'8968'), (b'x-ratelimit-reset-requests', b'2m22.983s'), (b'x-ratelimit-reset-tokens', b'6.189s'), (b'x-request-id', b'req_fe9f3cbba64e238f6d9e935f1ace1659'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8d275106eef6ca1d-OTP'), (b'Content-Encoding', b'gzip'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-10-14 14:44:17,028 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2024-10-14 14:44:17,028 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-10-14 14:44:17,028 - DEBUG - receive_response_body.complete
2024-10-14 14:44:17,028 - DEBUG - response_closed.started
2024-10-14 14:44:17,028 - DEBUG - response_closed.complete
2024-10-14 14:44:17,028 - DEBUG - HTTP Response: POST https://api.openai.com/v1/chat/completions "200 OK" Headers({'date': 'Mon, 14 Oct 2024 11:44:17 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-expose-headers': 'X-Request-ID', 'openai-organization': 'user-kzzh9hik9ryjiou4ftvhondh', 'openai-processing-ms': '684', 'openai-version': '2020-10-01', 'x-ratelimit-limit-requests': '10000', 'x-ratelimit-limit-tokens': '10000', 'x-ratelimit-remaining-requests': '9983', 'x-ratelimit-remaining-tokens': '8968', 'x-ratelimit-reset-requests': '2m22.983s', 'x-ratelimit-reset-tokens': '6.189s', 'x-request-id': 'req_fe9f3cbba64e238f6d9e935f1ace1659', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8d275106eef6ca1d-OTP', 'content-encoding': 'gzip', 'alt-svc': 'h3=":443"; ma=86400'})
2024-10-14 14:44:17,028 - DEBUG - request_id: req_fe9f3cbba64e238f6d9e935f1ace1659
2024-10-14 14:44:17,029 - DEBUG - Instructor Raw Response: ChatCompletion(id='chatcmpl-AIDmi6tRTt902HWk9hjgItENvdk6i', choices=[Choice(finish_reason='stop', index=0, logprobs=None, message=ChatCompletionMessage(content=None, refusal=None, role='assistant', function_call=None, tool_calls=[ChatCompletionMessageToolCall(id='call_17Tf7lutJYjEb3WbvhBu0Y0c', function=Function(arguments='{\n"action": "extract_seller_information"\n}', name='AgentAction'), type='function')]))], created=1728906256, model='gpt-4-0613', object='chat.completion', service_tier=None, system_fingerprint=None, usage=CompletionUsage(completion_tokens=11, prompt_tokens=240, total_tokens=251, completion_tokens_details=None, prompt_tokens_details=None))
2024-10-14 14:44:17,031 - DEBUG - Instructor Request: mode.value='tool_call', response_model=<class 'models.AgentAction'>, new_kwargs={'model': 'gpt-4', 'messages': [{'role': 'system', 'content': '\nYou are an AI agent specializing in contract creation and personal information extraction. \n\nYour role is:\n 1. Guide the process of extracting information from documents..\n 2. Verifying the extracted information with human input.\n 3. Identifying parties. \n 4. Constructing a contract. \n\n\nFollow the workflow precisely and ask for human input when needed.\n\n'}, {'role': 'user', 'content': "Current state: {'verified_pii_data': [{'name': 'ELENA VASILESCU', 'address': 'Mun. Bucuresti Sec. 5 Str Nicolae Iorga nr.3 900 B'}], 'parties': {'buyer': 'ELENA VASILESCU', 'seller': ''}, 'contract_details': None, 'contract': None, 'current_action': None}\nWhat action should be taken next?"}], 'tools': [{'type': 'function', 'function': {'name': 'AgentAction', 'description': 'Correctly extracted `AgentAction` with all the required parameters with correct types', 'parameters': {'properties': {'action': {'description': 'Action to be performed by the agent', 'title': 'Action', 'type': 'string'}, 'parameters': {'additionalProperties': {'type': 'string'}, 'description': 'Parameters for the action', 'title': 'Parameters', 'type': 'object'}}, 'required': ['action', 'parameters'], 'type': 'object'}}}], 'tool_choice': {'type': 'function', 'function': {'name': 'AgentAction'}}}
2024-10-14 14:44:17,031 - DEBUG - max_retries: 1
2024-10-14 14:44:17,033 - DEBUG - Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'json_data': {'messages': [{'role': 'system', 'content': '\nYou are an AI agent specializing in contract creation and personal information extraction. \n\nYour role is:\n 1. Guide the process of extracting information from documents..\n 2. Verifying the extracted information with human input.\n 3. Identifying parties. \n 4. Constructing a contract. \n\n\nFollow the workflow precisely and ask for human input when needed.\n\n'}, {'role': 'user', 'content': "Current state: {'verified_pii_data': [{'name': 'ELENA VASILESCU', 'address': 'Mun. Bucuresti Sec. 5 Str Nicolae Iorga nr.3 900 B'}], 'parties': {'buyer': 'ELENA VASILESCU', 'seller': ''}, 'contract_details': None, 'contract': None, 'current_action': None}\nWhat action should be taken next?"}], 'model': 'gpt-4', 'tool_choice': {'type': 'function', 'function': {'name': 'AgentAction'}}, 'tools': [{'type': 'function', 'function': {'name': 'AgentAction', 'description': 'Correctly extracted `AgentAction` with all the required parameters with correct types', 'parameters': {'properties': {'action': {'description': 'Action to be performed by the agent', 'title': 'Action', 'type': 'string'}, 'parameters': {'additionalProperties': {'type': 'string'}, 'description': 'Parameters for the action', 'title': 'Parameters', 'type': 'object'}}, 'required': ['action', 'parameters'], 'type': 'object'}}}]}}
2024-10-14 14:44:17,034 - DEBUG - Sending HTTP Request: POST https://api.openai.com/v1/chat/completions
2024-10-14 14:44:17,034 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-10-14 14:44:17,034 - DEBUG - send_request_headers.complete
2024-10-14 14:44:17,034 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-10-14 14:44:17,034 - DEBUG - send_request_body.complete
2024-10-14 14:44:17,034 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-10-14 14:44:18,102 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Mon, 14 Oct 2024 11:44:18 GMT'), (b'Content-Type', b'application/json'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'user-kzzh9hik9ryjiou4ftvhondh'), (b'openai-processing-ms', b'916'), (b'openai-version', b'2020-10-01'), (b'x-ratelimit-limit-requests', b'10000'), (b'x-ratelimit-limit-tokens', b'10000'), (b'x-ratelimit-remaining-requests', b'9982'), (b'x-ratelimit-remaining-tokens', b'8856'), (b'x-ratelimit-reset-requests', b'2m30.786s'), (b'x-ratelimit-reset-tokens', b'6.859s'), (b'x-request-id', b'req_23c9ce5633d448892c0b67395c599064'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8d27510c2bb0ca1d-OTP'), (b'Content-Encoding', b'gzip'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-10-14 14:44:18,102 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2024-10-14 14:44:18,103 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-10-14 14:44:18,103 - DEBUG - receive_response_body.complete
2024-10-14 14:44:18,103 - DEBUG - response_closed.started
2024-10-14 14:44:18,103 - DEBUG - response_closed.complete
2024-10-14 14:44:18,103 - DEBUG - HTTP Response: POST https://api.openai.com/v1/chat/completions "200 OK" Headers({'date': 'Mon, 14 Oct 2024 11:44:18 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-expose-headers': 'X-Request-ID', 'openai-organization': 'user-kzzh9hik9ryjiou4ftvhondh', 'openai-processing-ms': '916', 'openai-version': '2020-10-01', 'x-ratelimit-limit-requests': '10000', 'x-ratelimit-limit-tokens': '10000', 'x-ratelimit-remaining-requests': '9982', 'x-ratelimit-remaining-tokens': '8856', 'x-ratelimit-reset-requests': '2m30.786s', 'x-ratelimit-reset-tokens': '6.859s', 'x-request-id': 'req_23c9ce5633d448892c0b67395c599064', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8d27510c2bb0ca1d-OTP', 'content-encoding': 'gzip', 'alt-svc': 'h3=":443"; ma=86400'})
2024-10-14 14:44:18,103 - DEBUG - request_id: req_23c9ce5633d448892c0b67395c599064
2024-10-14 14:44:18,104 - DEBUG - Instructor Raw Response: ChatCompletion(id='chatcmpl-AIDmj3nNtmehPaNDT0iXksGodwAgB', choices=[Choice(finish_reason='stop', index=0, logprobs=None, message=ChatCompletionMessage(content=None, refusal=None, role='assistant', function_call=None, tool_calls=[ChatCompletionMessageToolCall(id='call_uqTXTPepAqg8vPUd0NaPLL6M', function=Function(arguments='{\n"action": "extract_seller_details"\n}', name='AgentAction'), type='function')]))], created=1728906257, model='gpt-4-0613', object='chat.completion', service_tier=None, system_fingerprint=None, usage=CompletionUsage(completion_tokens=11, prompt_tokens=240, total_tokens=251, completion_tokens_details=None, prompt_tokens_details=None))
2024-10-14 14:44:18,105 - DEBUG - Instructor Request: mode.value='tool_call', response_model=<class 'models.AgentAction'>, new_kwargs={'model': 'gpt-4', 'messages': [{'role': 'system', 'content': '\nYou are an AI agent specializing in contract creation and personal information extraction. \n\nYour role is:\n 1. Guide the process of extracting information from documents..\n 2. Verifying the extracted information with human input.\n 3. Identifying parties. \n 4. Constructing a contract. \n\n\nFollow the workflow precisely and ask for human input when needed.\n\n'}, {'role': 'user', 'content': "Current state: {'verified_pii_data': [{'name': 'ELENA VASILESCU', 'address': 'Mun. Bucuresti Sec. 5 Str Nicolae Iorga nr.3 900 B'}], 'parties': {'buyer': 'ELENA VASILESCU', 'seller': ''}, 'contract_details': None, 'contract': None, 'current_action': None}\nWhat action should be taken next?"}], 'tools': [{'type': 'function', 'function': {'name': 'AgentAction', 'description': 'Correctly extracted `AgentAction` with all the required parameters with correct types', 'parameters': {'properties': {'action': {'description': 'Action to be performed by the agent', 'title': 'Action', 'type': 'string'}, 'parameters': {'additionalProperties': {'type': 'string'}, 'description': 'Parameters for the action', 'title': 'Parameters', 'type': 'object'}}, 'required': ['action', 'parameters'], 'type': 'object'}}}], 'tool_choice': {'type': 'function', 'function': {'name': 'AgentAction'}}}
2024-10-14 14:44:18,105 - DEBUG - max_retries: 1
2024-10-14 14:44:18,108 - DEBUG - Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'json_data': {'messages': [{'role': 'system', 'content': '\nYou are an AI agent specializing in contract creation and personal information extraction. \n\nYour role is:\n 1. Guide the process of extracting information from documents..\n 2. Verifying the extracted information with human input.\n 3. Identifying parties. \n 4. Constructing a contract. \n\n\nFollow the workflow precisely and ask for human input when needed.\n\n'}, {'role': 'user', 'content': "Current state: {'verified_pii_data': [{'name': 'ELENA VASILESCU', 'address': 'Mun. Bucuresti Sec. 5 Str Nicolae Iorga nr.3 900 B'}], 'parties': {'buyer': 'ELENA VASILESCU', 'seller': ''}, 'contract_details': None, 'contract': None, 'current_action': None}\nWhat action should be taken next?"}], 'model': 'gpt-4', 'tool_choice': {'type': 'function', 'function': {'name': 'AgentAction'}}, 'tools': [{'type': 'function', 'function': {'name': 'AgentAction', 'description': 'Correctly extracted `AgentAction` with all the required parameters with correct types', 'parameters': {'properties': {'action': {'description': 'Action to be performed by the agent', 'title': 'Action', 'type': 'string'}, 'parameters': {'additionalProperties': {'type': 'string'}, 'description': 'Parameters for the action', 'title': 'Parameters', 'type': 'object'}}, 'required': ['action', 'parameters'], 'type': 'object'}}}]}}
2024-10-14 14:44:18,108 - DEBUG - Sending HTTP Request: POST https://api.openai.com/v1/chat/completions
2024-10-14 14:44:18,108 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-10-14 14:44:18,109 - DEBUG - send_request_headers.complete
2024-10-14 14:44:18,109 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-10-14 14:44:18,109 - DEBUG - send_request_body.complete
2024-10-14 14:44:18,109 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-10-14 14:44:19,003 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Mon, 14 Oct 2024 11:44:19 GMT'), (b'Content-Type', b'application/json'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'user-kzzh9hik9ryjiou4ftvhondh'), (b'openai-processing-ms', b'750'), (b'openai-version', b'2020-10-01'), (b'x-ratelimit-limit-requests', b'10000'), (b'x-ratelimit-limit-tokens', b'10000'), (b'x-ratelimit-remaining-requests', b'9981'), (b'x-ratelimit-remaining-tokens', b'8784'), (b'x-ratelimit-reset-requests', b'2m38.353s'), (b'x-ratelimit-reset-tokens', b'7.291s'), (b'x-request-id', b'req_e5711e5d7cf4f1fde182c87affef1955'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8d275112ef53ca1d-OTP'), (b'Content-Encoding', b'gzip'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-10-14 14:44:19,003 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2024-10-14 14:44:19,003 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-10-14 14:44:19,004 - DEBUG - receive_response_body.complete
2024-10-14 14:44:19,004 - DEBUG - response_closed.started
2024-10-14 14:44:19,004 - DEBUG - response_closed.complete
2024-10-14 14:44:19,004 - DEBUG - HTTP Response: POST https://api.openai.com/v1/chat/completions "200 OK" Headers({'date': 'Mon, 14 Oct 2024 11:44:19 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-expose-headers': 'X-Request-ID', 'openai-organization': 'user-kzzh9hik9ryjiou4ftvhondh', 'openai-processing-ms': '750', 'openai-version': '2020-10-01', 'x-ratelimit-limit-requests': '10000', 'x-ratelimit-limit-tokens': '10000', 'x-ratelimit-remaining-requests': '9981', 'x-ratelimit-remaining-tokens': '8784', 'x-ratelimit-reset-requests': '2m38.353s', 'x-ratelimit-reset-tokens': '7.291s', 'x-request-id': 'req_e5711e5d7cf4f1fde182c87affef1955', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8d275112ef53ca1d-OTP', 'content-encoding': 'gzip', 'alt-svc': 'h3=":443"; ma=86400'})
2024-10-14 14:44:19,004 - DEBUG - request_id: req_e5711e5d7cf4f1fde182c87affef1955
2024-10-14 14:44:19,004 - DEBUG - Instructor Raw Response: ChatCompletion(id='chatcmpl-AIDmkr3dyUubHOrDwPyk5JcmH8vXb', choices=[Choice(finish_reason='stop', index=0, logprobs=None, message=ChatCompletionMessage(content=None, refusal=None, role='assistant', function_call=None, tool_calls=[ChatCompletionMessageToolCall(id='call_0pQDxBTJAGK3IEOuqfnchUZX', function=Function(arguments='{\n"action": "extract_pii_data"\n}', name='AgentAction'), type='function')]))], created=1728906258, model='gpt-4-0613', object='chat.completion', service_tier=None, system_fingerprint=None, usage=CompletionUsage(completion_tokens=11, prompt_tokens=240, total_tokens=251, completion_tokens_details=None, prompt_tokens_details=None))
2024-10-14 14:44:19,005 - DEBUG - Instructor Request: mode.value='tool_call', response_model=<class 'models.AgentAction'>, new_kwargs={'model': 'gpt-4', 'messages': [{'role': 'system', 'content': '\nYou are an AI agent specializing in contract creation and personal information extraction. \n\nYour role is:\n 1. Guide the process of extracting information from documents..\n 2. Verifying the extracted information with human input.\n 3. Identifying parties. \n 4. Constructing a contract. \n\n\nFollow the workflow precisely and ask for human input when needed.\n\n'}, {'role': 'user', 'content': "Current state: {'verified_pii_data': [{'name': 'ELENA VASILESCU', 'address': 'Mun. Bucuresti Sec. 5 Str Nicolae Iorga nr.3 900 B'}], 'parties': {'buyer': 'ELENA VASILESCU', 'seller': ''}, 'contract_details': None, 'contract': None, 'current_action': None}\nWhat action should be taken next?"}], 'tools': [{'type': 'function', 'function': {'name': 'AgentAction', 'description': 'Correctly extracted `AgentAction` with all the required parameters with correct types', 'parameters': {'properties': {'action': {'description': 'Action to be performed by the agent', 'title': 'Action', 'type': 'string'}, 'parameters': {'additionalProperties': {'type': 'string'}, 'description': 'Parameters for the action', 'title': 'Parameters', 'type': 'object'}}, 'required': ['action', 'parameters'], 'type': 'object'}}}], 'tool_choice': {'type': 'function', 'function': {'name': 'AgentAction'}}}
2024-10-14 14:44:19,005 - DEBUG - max_retries: 1
2024-10-14 14:44:19,006 - DEBUG - Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'json_data': {'messages': [{'role': 'system', 'content': '\nYou are an AI agent specializing in contract creation and personal information extraction. \n\nYour role is:\n 1. Guide the process of extracting information from documents..\n 2. Verifying the extracted information with human input.\n 3. Identifying parties. \n 4. Constructing a contract. \n\n\nFollow the workflow precisely and ask for human input when needed.\n\n'}, {'role': 'user', 'content': "Current state: {'verified_pii_data': [{'name': 'ELENA VASILESCU', 'address': 'Mun. Bucuresti Sec. 5 Str Nicolae Iorga nr.3 900 B'}], 'parties': {'buyer': 'ELENA VASILESCU', 'seller': ''}, 'contract_details': None, 'contract': None, 'current_action': None}\nWhat action should be taken next?"}], 'model': 'gpt-4', 'tool_choice': {'type': 'function', 'function': {'name': 'AgentAction'}}, 'tools': [{'type': 'function', 'function': {'name': 'AgentAction', 'description': 'Correctly extracted `AgentAction` with all the required parameters with correct types', 'parameters': {'properties': {'action': {'description': 'Action to be performed by the agent', 'title': 'Action', 'type': 'string'}, 'parameters': {'additionalProperties': {'type': 'string'}, 'description': 'Parameters for the action', 'title': 'Parameters', 'type': 'object'}}, 'required': ['action', 'parameters'], 'type': 'object'}}}]}}
2024-10-14 14:44:19,007 - DEBUG - Sending HTTP Request: POST https://api.openai.com/v1/chat/completions
2024-10-14 14:44:19,007 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-10-14 14:44:19,007 - DEBUG - send_request_headers.complete
2024-10-14 14:44:19,007 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-10-14 14:44:19,007 - DEBUG - send_request_body.complete
2024-10-14 14:44:19,007 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-10-14 14:44:20,085 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Mon, 14 Oct 2024 11:44:20 GMT'), (b'Content-Type', b'application/json'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'user-kzzh9hik9ryjiou4ftvhondh'), (b'openai-processing-ms', b'921'), (b'openai-version', b'2020-10-01'), (b'x-ratelimit-limit-requests', b'10000'), (b'x-ratelimit-limit-tokens', b'10000'), (b'x-ratelimit-remaining-requests', b'9980'), (b'x-ratelimit-remaining-tokens', b'8683'), (b'x-ratelimit-reset-requests', b'2m46.094s'), (b'x-ratelimit-reset-tokens', b'7.899s'), (b'x-request-id', b'req_1eb554bf2500942cec1b3fe8102f7d66'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8d2751188f8eca1d-OTP'), (b'Content-Encoding', b'gzip'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-10-14 14:44:20,085 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2024-10-14 14:44:20,086 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-10-14 14:44:20,086 - DEBUG - receive_response_body.complete
2024-10-14 14:44:20,086 - DEBUG - response_closed.started
2024-10-14 14:44:20,086 - DEBUG - response_closed.complete
2024-10-14 14:44:20,086 - DEBUG - HTTP Response: POST https://api.openai.com/v1/chat/completions "200 OK" Headers({'date': 'Mon, 14 Oct 2024 11:44:20 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-expose-headers': 'X-Request-ID', 'openai-organization': 'user-kzzh9hik9ryjiou4ftvhondh', 'openai-processing-ms': '921', 'openai-version': '2020-10-01', 'x-ratelimit-limit-requests': '10000', 'x-ratelimit-limit-tokens': '10000', 'x-ratelimit-remaining-requests': '9980', 'x-ratelimit-remaining-tokens': '8683', 'x-ratelimit-reset-requests': '2m46.094s', 'x-ratelimit-reset-tokens': '7.899s', 'x-request-id': 'req_1eb554bf2500942cec1b3fe8102f7d66', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8d2751188f8eca1d-OTP', 'content-encoding': 'gzip', 'alt-svc': 'h3=":443"; ma=86400'})
2024-10-14 14:44:20,086 - DEBUG - request_id: req_1eb554bf2500942cec1b3fe8102f7d66
2024-10-14 14:44:20,086 - DEBUG - Instructor Raw Response: ChatCompletion(id='chatcmpl-AIDmlVxf8vx0ckCIlGULufRfhDjqq', choices=[Choice(finish_reason='stop', index=0, logprobs=None, message=ChatCompletionMessage(content=None, refusal=None, role='assistant', function_call=None, tool_calls=[ChatCompletionMessageToolCall(id='call_94AdoKxrhiMlRCslJEfoXmys', function=Function(arguments='{\n"action": "verify_seller_pii_data"\n}', name='AgentAction'), type='function')]))], created=1728906259, model='gpt-4-0613', object='chat.completion', service_tier=None, system_fingerprint=None, usage=CompletionUsage(completion_tokens=13, prompt_tokens=240, total_tokens=253, completion_tokens_details=None, prompt_tokens_details=None))
2024-10-14 14:44:20,087 - DEBUG - Instructor Request: mode.value='tool_call', response_model=<class 'models.AgentAction'>, new_kwargs={'model': 'gpt-4', 'messages': [{'role': 'system', 'content': '\nYou are an AI agent specializing in contract creation and personal information extraction. \n\nYour role is:\n 1. Guide the process of extracting information from documents..\n 2. Verifying the extracted information with human input.\n 3. Identifying parties. \n 4. Constructing a contract. \n\n\nFollow the workflow precisely and ask for human input when needed.\n\n'}, {'role': 'user', 'content': "Current state: {'verified_pii_data': [{'name': 'ELENA VASILESCU', 'address': 'Mun. Bucuresti Sec. 5 Str Nicolae Iorga nr.3 900 B'}], 'parties': {'buyer': 'ELENA VASILESCU', 'seller': ''}, 'contract_details': None, 'contract': None, 'current_action': None}\nWhat action should be taken next?"}], 'tools': [{'type': 'function', 'function': {'name': 'AgentAction', 'description': 'Correctly extracted `AgentAction` with all the required parameters with correct types', 'parameters': {'properties': {'action': {'description': 'Action to be performed by the agent', 'title': 'Action', 'type': 'string'}, 'parameters': {'additionalProperties': {'type': 'string'}, 'description': 'Parameters for the action', 'title': 'Parameters', 'type': 'object'}}, 'required': ['action', 'parameters'], 'type': 'object'}}}], 'tool_choice': {'type': 'function', 'function': {'name': 'AgentAction'}}}
2024-10-14 14:44:20,087 - DEBUG - max_retries: 1
2024-10-14 14:44:20,089 - DEBUG - Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'json_data': {'messages': [{'role': 'system', 'content': '\nYou are an AI agent specializing in contract creation and personal information extraction. \n\nYour role is:\n 1. Guide the process of extracting information from documents..\n 2. Verifying the extracted information with human input.\n 3. Identifying parties. \n 4. Constructing a contract. \n\n\nFollow the workflow precisely and ask for human input when needed.\n\n'}, {'role': 'user', 'content': "Current state: {'verified_pii_data': [{'name': 'ELENA VASILESCU', 'address': 'Mun. Bucuresti Sec. 5 Str Nicolae Iorga nr.3 900 B'}], 'parties': {'buyer': 'ELENA VASILESCU', 'seller': ''}, 'contract_details': None, 'contract': None, 'current_action': None}\nWhat action should be taken next?"}], 'model': 'gpt-4', 'tool_choice': {'type': 'function', 'function': {'name': 'AgentAction'}}, 'tools': [{'type': 'function', 'function': {'name': 'AgentAction', 'description': 'Correctly extracted `AgentAction` with all the required parameters with correct types', 'parameters': {'properties': {'action': {'description': 'Action to be performed by the agent', 'title': 'Action', 'type': 'string'}, 'parameters': {'additionalProperties': {'type': 'string'}, 'description': 'Parameters for the action', 'title': 'Parameters', 'type': 'object'}}, 'required': ['action', 'parameters'], 'type': 'object'}}}]}}
2024-10-14 14:44:20,089 - DEBUG - Sending HTTP Request: POST https://api.openai.com/v1/chat/completions
2024-10-14 14:44:20,089 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-10-14 14:44:20,089 - DEBUG - send_request_headers.complete
2024-10-14 14:44:20,089 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-10-14 14:44:20,089 - DEBUG - send_request_body.complete
2024-10-14 14:44:20,089 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-10-14 14:44:20,973 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Mon, 14 Oct 2024 11:44:21 GMT'), (b'Content-Type', b'application/json'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'user-kzzh9hik9ryjiou4ftvhondh'), (b'openai-processing-ms', b'688'), (b'openai-version', b'2020-10-01'), (b'x-ratelimit-limit-requests', b'10000'), (b'x-ratelimit-limit-tokens', b'10000'), (b'x-ratelimit-remaining-requests', b'9979'), (b'x-ratelimit-remaining-tokens', b'8611'), (b'x-ratelimit-reset-requests', b'2m53.651s'), (b'x-ratelimit-reset-tokens', b'8.333s'), (b'x-request-id', b'req_600235e1216deca45dbdff63fc00df95'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8d27511f4b1aca1d-OTP'), (b'Content-Encoding', b'gzip'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-10-14 14:44:20,974 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2024-10-14 14:44:20,974 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-10-14 14:44:20,974 - DEBUG - receive_response_body.complete
2024-10-14 14:44:20,974 - DEBUG - response_closed.started
2024-10-14 14:44:20,974 - DEBUG - response_closed.complete
2024-10-14 14:44:20,974 - DEBUG - HTTP Response: POST https://api.openai.com/v1/chat/completions "200 OK" Headers({'date': 'Mon, 14 Oct 2024 11:44:21 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-expose-headers': 'X-Request-ID', 'openai-organization': 'user-kzzh9hik9ryjiou4ftvhondh', 'openai-processing-ms': '688', 'openai-version': '2020-10-01', 'x-ratelimit-limit-requests': '10000', 'x-ratelimit-limit-tokens': '10000', 'x-ratelimit-remaining-requests': '9979', 'x-ratelimit-remaining-tokens': '8611', 'x-ratelimit-reset-requests': '2m53.651s', 'x-ratelimit-reset-tokens': '8.333s', 'x-request-id': 'req_600235e1216deca45dbdff63fc00df95', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8d27511f4b1aca1d-OTP', 'content-encoding': 'gzip', 'alt-svc': 'h3=":443"; ma=86400'})
2024-10-14 14:44:20,974 - DEBUG - request_id: req_600235e1216deca45dbdff63fc00df95
2024-10-14 14:44:20,974 - DEBUG - Instructor Raw Response: ChatCompletion(id='chatcmpl-AIDmmXgByhJhbaNNjYtAWrfVV5rj7', choices=[Choice(finish_reason='stop', index=0, logprobs=None, message=ChatCompletionMessage(content=None, refusal=None, role='assistant', function_call=None, tool_calls=[ChatCompletionMessageToolCall(id='call_t9fPOnhzcK9BsUXtlLDXG9bk', function=Function(arguments='{\n"action": "extract_seller_details"\n}', name='AgentAction'), type='function')]))], created=1728906260, model='gpt-4-0613', object='chat.completion', service_tier=None, system_fingerprint=None, usage=CompletionUsage(completion_tokens=11, prompt_tokens=240, total_tokens=251, completion_tokens_details=None, prompt_tokens_details=None))
2024-10-14 14:44:20,975 - DEBUG - Instructor Request: mode.value='tool_call', response_model=<class 'models.AgentAction'>, new_kwargs={'model': 'gpt-4', 'messages': [{'role': 'system', 'content': '\nYou are an AI agent specializing in contract creation and personal information extraction. \n\nYour role is:\n 1. Guide the process of extracting information from documents..\n 2. Verifying the extracted information with human input.\n 3. Identifying parties. \n 4. Constructing a contract. \n\n\nFollow the workflow precisely and ask for human input when needed.\n\n'}, {'role': 'user', 'content': "Current state: {'verified_pii_data': [{'name': 'ELENA VASILESCU', 'address': 'Mun. Bucuresti Sec. 5 Str Nicolae Iorga nr.3 900 B'}], 'parties': {'buyer': 'ELENA VASILESCU', 'seller': ''}, 'contract_details': None, 'contract': None, 'current_action': None}\nWhat action should be taken next?"}], 'tools': [{'type': 'function', 'function': {'name': 'AgentAction', 'description': 'Correctly extracted `AgentAction` with all the required parameters with correct types', 'parameters': {'properties': {'action': {'description': 'Action to be performed by the agent', 'title': 'Action', 'type': 'string'}, 'parameters': {'additionalProperties': {'type': 'string'}, 'description': 'Parameters for the action', 'title': 'Parameters', 'type': 'object'}}, 'required': ['action', 'parameters'], 'type': 'object'}}}], 'tool_choice': {'type': 'function', 'function': {'name': 'AgentAction'}}}
2024-10-14 14:44:20,976 - DEBUG - max_retries: 1
2024-10-14 14:44:20,977 - DEBUG - Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'json_data': {'messages': [{'role': 'system', 'content': '\nYou are an AI agent specializing in contract creation and personal information extraction. \n\nYour role is:\n 1. Guide the process of extracting information from documents..\n 2. Verifying the extracted information with human input.\n 3. Identifying parties. \n 4. Constructing a contract. \n\n\nFollow the workflow precisely and ask for human input when needed.\n\n'}, {'role': 'user', 'content': "Current state: {'verified_pii_data': [{'name': 'ELENA VASILESCU', 'address': 'Mun. Bucuresti Sec. 5 Str Nicolae Iorga nr.3 900 B'}], 'parties': {'buyer': 'ELENA VASILESCU', 'seller': ''}, 'contract_details': None, 'contract': None, 'current_action': None}\nWhat action should be taken next?"}], 'model': 'gpt-4', 'tool_choice': {'type': 'function', 'function': {'name': 'AgentAction'}}, 'tools': [{'type': 'function', 'function': {'name': 'AgentAction', 'description': 'Correctly extracted `AgentAction` with all the required parameters with correct types', 'parameters': {'properties': {'action': {'description': 'Action to be performed by the agent', 'title': 'Action', 'type': 'string'}, 'parameters': {'additionalProperties': {'type': 'string'}, 'description': 'Parameters for the action', 'title': 'Parameters', 'type': 'object'}}, 'required': ['action', 'parameters'], 'type': 'object'}}}]}}
2024-10-14 14:44:20,977 - DEBUG - Sending HTTP Request: POST https://api.openai.com/v1/chat/completions
2024-10-14 14:44:20,978 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-10-14 14:44:20,978 - DEBUG - send_request_headers.complete
2024-10-14 14:44:20,978 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-10-14 14:44:20,978 - DEBUG - send_request_body.complete
2024-10-14 14:44:20,978 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-10-14 14:44:21,969 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Mon, 14 Oct 2024 11:44:22 GMT'), (b'Content-Type', b'application/json'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'user-kzzh9hik9ryjiou4ftvhondh'), (b'openai-processing-ms', b'823'), (b'openai-version', b'2020-10-01'), (b'x-ratelimit-limit-requests', b'10000'), (b'x-ratelimit-limit-tokens', b'10000'), (b'x-ratelimit-remaining-requests', b'9979'), (b'x-ratelimit-remaining-tokens', b'8509'), (b'x-ratelimit-reset-requests', b'3m1.392s'), (b'x-ratelimit-reset-tokens', b'8.941s'), (b'x-request-id', b'req_5104394867465210441322799298860e'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8d275124dc4eca1d-OTP'), (b'Content-Encoding', b'gzip'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-10-14 14:44:21,969 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2024-10-14 14:44:21,969 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-10-14 14:44:21,970 - DEBUG - receive_response_body.complete
2024-10-14 14:44:21,970 - DEBUG - response_closed.started
2024-10-14 14:44:21,970 - DEBUG - response_closed.complete
2024-10-14 14:44:21,970 - DEBUG - HTTP Response: POST https://api.openai.com/v1/chat/completions "200 OK" Headers({'date': 'Mon, 14 Oct 2024 11:44:22 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-expose-headers': 'X-Request-ID', 'openai-organization': 'user-kzzh9hik9ryjiou4ftvhondh', 'openai-processing-ms': '823', 'openai-version': '2020-10-01', 'x-ratelimit-limit-requests': '10000', 'x-ratelimit-limit-tokens': '10000', 'x-ratelimit-remaining-requests': '9979', 'x-ratelimit-remaining-tokens': '8509', 'x-ratelimit-reset-requests': '3m1.392s', 'x-ratelimit-reset-tokens': '8.941s', 'x-request-id': 'req_5104394867465210441322799298860e', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8d275124dc4eca1d-OTP', 'content-encoding': 'gzip', 'alt-svc': 'h3=":443"; ma=86400'})
2024-10-14 14:44:21,970 - DEBUG - request_id: req_5104394867465210441322799298860e
2024-10-14 14:44:21,972 - DEBUG - Instructor Raw Response: ChatCompletion(id='chatcmpl-AIDmn8W4XcixswbnxWr4iPD3iGDQY', choices=[Choice(finish_reason='stop', index=0, logprobs=None, message=ChatCompletionMessage(content=None, refusal=None, role='assistant', function_call=None, tool_calls=[ChatCompletionMessageToolCall(id='call_P68bZ2W9L7QTGZIOBYZ0spgZ', function=Function(arguments='{\n"action": "extract_party_details"\n}', name='AgentAction'), type='function')]))], created=1728906261, model='gpt-4-0613', object='chat.completion', service_tier=None, system_fingerprint=None, usage=CompletionUsage(completion_tokens=10, prompt_tokens=240, total_tokens=250, completion_tokens_details=None, prompt_tokens_details=None))
2024-10-14 14:44:21,974 - DEBUG - Instructor Request: mode.value='tool_call', response_model=<class 'models.AgentAction'>, new_kwargs={'model': 'gpt-4', 'messages': [{'role': 'system', 'content': '\nYou are an AI agent specializing in contract creation and personal information extraction. \n\nYour role is:\n 1. Guide the process of extracting information from documents..\n 2. Verifying the extracted information with human input.\n 3. Identifying parties. \n 4. Constructing a contract. \n\n\nFollow the workflow precisely and ask for human input when needed.\n\n'}, {'role': 'user', 'content': "Current state: {'verified_pii_data': [{'name': 'ELENA VASILESCU', 'address': 'Mun. Bucuresti Sec. 5 Str Nicolae Iorga nr.3 900 B'}], 'parties': {'buyer': 'ELENA VASILESCU', 'seller': ''}, 'contract_details': None, 'contract': None, 'current_action': None}\nWhat action should be taken next?"}], 'tools': [{'type': 'function', 'function': {'name': 'AgentAction', 'description': 'Correctly extracted `AgentAction` with all the required parameters with correct types', 'parameters': {'properties': {'action': {'description': 'Action to be performed by the agent', 'title': 'Action', 'type': 'string'}, 'parameters': {'additionalProperties': {'type': 'string'}, 'description': 'Parameters for the action', 'title': 'Parameters', 'type': 'object'}}, 'required': ['action', 'parameters'], 'type': 'object'}}}], 'tool_choice': {'type': 'function', 'function': {'name': 'AgentAction'}}}
2024-10-14 14:44:21,974 - DEBUG - max_retries: 1
2024-10-14 14:44:21,977 - DEBUG - Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'json_data': {'messages': [{'role': 'system', 'content': '\nYou are an AI agent specializing in contract creation and personal information extraction. \n\nYour role is:\n 1. Guide the process of extracting information from documents..\n 2. Verifying the extracted information with human input.\n 3. Identifying parties. \n 4. Constructing a contract. \n\n\nFollow the workflow precisely and ask for human input when needed.\n\n'}, {'role': 'user', 'content': "Current state: {'verified_pii_data': [{'name': 'ELENA VASILESCU', 'address': 'Mun. Bucuresti Sec. 5 Str Nicolae Iorga nr.3 900 B'}], 'parties': {'buyer': 'ELENA VASILESCU', 'seller': ''}, 'contract_details': None, 'contract': None, 'current_action': None}\nWhat action should be taken next?"}], 'model': 'gpt-4', 'tool_choice': {'type': 'function', 'function': {'name': 'AgentAction'}}, 'tools': [{'type': 'function', 'function': {'name': 'AgentAction', 'description': 'Correctly extracted `AgentAction` with all the required parameters with correct types', 'parameters': {'properties': {'action': {'description': 'Action to be performed by the agent', 'title': 'Action', 'type': 'string'}, 'parameters': {'additionalProperties': {'type': 'string'}, 'description': 'Parameters for the action', 'title': 'Parameters', 'type': 'object'}}, 'required': ['action', 'parameters'], 'type': 'object'}}}]}}
2024-10-14 14:44:21,977 - DEBUG - Sending HTTP Request: POST https://api.openai.com/v1/chat/completions
2024-10-14 14:44:21,977 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-10-14 14:44:21,978 - DEBUG - send_request_headers.complete
2024-10-14 14:44:21,978 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-10-14 14:44:21,978 - DEBUG - send_request_body.complete
2024-10-14 14:44:21,978 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-10-14 14:44:23,073 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Mon, 14 Oct 2024 11:44:23 GMT'), (b'Content-Type', b'application/json'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'user-kzzh9hik9ryjiou4ftvhondh'), (b'openai-processing-ms', b'928'), (b'openai-version', b'2020-10-01'), (b'x-ratelimit-limit-requests', b'10000'), (b'x-ratelimit-limit-tokens', b'10000'), (b'x-ratelimit-remaining-requests', b'9978'), (b'x-ratelimit-remaining-tokens', b'8425'), (b'x-ratelimit-reset-requests', b'3m9.039s'), (b'x-ratelimit-reset-tokens', b'9.448s'), (b'x-request-id', b'req_d6be773401fc7ad313b47f1d531687f6'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8d27512b1e96ca1d-OTP'), (b'Content-Encoding', b'gzip'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-10-14 14:44:23,073 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2024-10-14 14:44:23,073 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-10-14 14:44:23,074 - DEBUG - receive_response_body.complete
2024-10-14 14:44:23,074 - DEBUG - response_closed.started
2024-10-14 14:44:23,074 - DEBUG - response_closed.complete
2024-10-14 14:44:23,074 - DEBUG - HTTP Response: POST https://api.openai.com/v1/chat/completions "200 OK" Headers({'date': 'Mon, 14 Oct 2024 11:44:23 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-expose-headers': 'X-Request-ID', 'openai-organization': 'user-kzzh9hik9ryjiou4ftvhondh', 'openai-processing-ms': '928', 'openai-version': '2020-10-01', 'x-ratelimit-limit-requests': '10000', 'x-ratelimit-limit-tokens': '10000', 'x-ratelimit-remaining-requests': '9978', 'x-ratelimit-remaining-tokens': '8425', 'x-ratelimit-reset-requests': '3m9.039s', 'x-ratelimit-reset-tokens': '9.448s', 'x-request-id': 'req_d6be773401fc7ad313b47f1d531687f6', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8d27512b1e96ca1d-OTP', 'content-encoding': 'gzip', 'alt-svc': 'h3=":443"; ma=86400'})
2024-10-14 14:44:23,074 - DEBUG - request_id: req_d6be773401fc7ad313b47f1d531687f6
2024-10-14 14:44:23,074 - DEBUG - Instructor Raw Response: ChatCompletion(id='chatcmpl-AIDmo1KSdb1TOEfPRYxpLUtQY3twU', choices=[Choice(finish_reason='stop', index=0, logprobs=None, message=ChatCompletionMessage(content=None, refusal=None, role='assistant', function_call=None, tool_calls=[ChatCompletionMessageToolCall(id='call_FzdttkZ9CIGymZPqhQ4A2iLj', function=Function(arguments='{\n"action": "verify_seller_details"\n}', name='AgentAction'), type='function')]))], created=1728906262, model='gpt-4-0613', object='chat.completion', service_tier=None, system_fingerprint=None, usage=CompletionUsage(completion_tokens=11, prompt_tokens=240, total_tokens=251, completion_tokens_details=None, prompt_tokens_details=None))
2024-10-14 14:44:23,076 - DEBUG - Instructor Request: mode.value='tool_call', response_model=<class 'models.AgentAction'>, new_kwargs={'model': 'gpt-4', 'messages': [{'role': 'system', 'content': '\nYou are an AI agent specializing in contract creation and personal information extraction. \n\nYour role is:\n 1. Guide the process of extracting information from documents..\n 2. Verifying the extracted information with human input.\n 3. Identifying parties. \n 4. Constructing a contract. \n\n\nFollow the workflow precisely and ask for human input when needed.\n\n'}, {'role': 'user', 'content': "Current state: {'verified_pii_data': [{'name': 'ELENA VASILESCU', 'address': 'Mun. Bucuresti Sec. 5 Str Nicolae Iorga nr.3 900 B'}], 'parties': {'buyer': 'ELENA VASILESCU', 'seller': ''}, 'contract_details': None, 'contract': None, 'current_action': None}\nWhat action should be taken next?"}], 'tools': [{'type': 'function', 'function': {'name': 'AgentAction', 'description': 'Correctly extracted `AgentAction` with all the required parameters with correct types', 'parameters': {'properties': {'action': {'description': 'Action to be performed by the agent', 'title': 'Action', 'type': 'string'}, 'parameters': {'additionalProperties': {'type': 'string'}, 'description': 'Parameters for the action', 'title': 'Parameters', 'type': 'object'}}, 'required': ['action', 'parameters'], 'type': 'object'}}}], 'tool_choice': {'type': 'function', 'function': {'name': 'AgentAction'}}}
2024-10-14 14:44:23,076 - DEBUG - max_retries: 1
2024-10-14 14:44:23,078 - DEBUG - Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'json_data': {'messages': [{'role': 'system', 'content': '\nYou are an AI agent specializing in contract creation and personal information extraction. \n\nYour role is:\n 1. Guide the process of extracting information from documents..\n 2. Verifying the extracted information with human input.\n 3. Identifying parties. \n 4. Constructing a contract. \n\n\nFollow the workflow precisely and ask for human input when needed.\n\n'}, {'role': 'user', 'content': "Current state: {'verified_pii_data': [{'name': 'ELENA VASILESCU', 'address': 'Mun. Bucuresti Sec. 5 Str Nicolae Iorga nr.3 900 B'}], 'parties': {'buyer': 'ELENA VASILESCU', 'seller': ''}, 'contract_details': None, 'contract': None, 'current_action': None}\nWhat action should be taken next?"}], 'model': 'gpt-4', 'tool_choice': {'type': 'function', 'function': {'name': 'AgentAction'}}, 'tools': [{'type': 'function', 'function': {'name': 'AgentAction', 'description': 'Correctly extracted `AgentAction` with all the required parameters with correct types', 'parameters': {'properties': {'action': {'description': 'Action to be performed by the agent', 'title': 'Action', 'type': 'string'}, 'parameters': {'additionalProperties': {'type': 'string'}, 'description': 'Parameters for the action', 'title': 'Parameters', 'type': 'object'}}, 'required': ['action', 'parameters'], 'type': 'object'}}}]}}
2024-10-14 14:44:23,078 - DEBUG - Sending HTTP Request: POST https://api.openai.com/v1/chat/completions
2024-10-14 14:44:23,078 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-10-14 14:44:23,079 - DEBUG - send_request_headers.complete
2024-10-14 14:44:23,079 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-10-14 14:44:23,079 - DEBUG - send_request_body.complete
2024-10-14 14:44:23,079 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-10-14 14:44:24,273 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Mon, 14 Oct 2024 11:44:24 GMT'), (b'Content-Type', b'application/json'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'user-kzzh9hik9ryjiou4ftvhondh'), (b'openai-processing-ms', b'1033'), (b'openai-version', b'2020-10-01'), (b'x-ratelimit-limit-requests', b'10000'), (b'x-ratelimit-limit-tokens', b'10000'), (b'x-ratelimit-remaining-requests', b'9977'), (b'x-ratelimit-remaining-tokens', b'8357'), (b'x-ratelimit-reset-requests', b'3m16.578s'), (b'x-ratelimit-reset-tokens', b'9.853s'), (b'x-request-id', b'req_00f1acbe9fb38ed1726638c6e1d29470'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8d275131fa55ca1d-OTP'), (b'Content-Encoding', b'gzip'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-10-14 14:44:24,273 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2024-10-14 14:44:24,273 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-10-14 14:44:24,273 - DEBUG - receive_response_body.complete
2024-10-14 14:44:24,274 - DEBUG - response_closed.started
2024-10-14 14:44:24,274 - DEBUG - response_closed.complete
2024-10-14 14:44:24,274 - DEBUG - HTTP Response: POST https://api.openai.com/v1/chat/completions "200 OK" Headers({'date': 'Mon, 14 Oct 2024 11:44:24 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-expose-headers': 'X-Request-ID', 'openai-organization': 'user-kzzh9hik9ryjiou4ftvhondh', 'openai-processing-ms': '1033', 'openai-version': '2020-10-01', 'x-ratelimit-limit-requests': '10000', 'x-ratelimit-limit-tokens': '10000', 'x-ratelimit-remaining-requests': '9977', 'x-ratelimit-remaining-tokens': '8357', 'x-ratelimit-reset-requests': '3m16.578s', 'x-ratelimit-reset-tokens': '9.853s', 'x-request-id': 'req_00f1acbe9fb38ed1726638c6e1d29470', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8d275131fa55ca1d-OTP', 'content-encoding': 'gzip', 'alt-svc': 'h3=":443"; ma=86400'})
2024-10-14 14:44:24,274 - DEBUG - request_id: req_00f1acbe9fb38ed1726638c6e1d29470
2024-10-14 14:44:24,274 - DEBUG - Instructor Raw Response: ChatCompletion(id='chatcmpl-AIDmpIhtIoT5mUlDNxhoeq8jXbnjK', choices=[Choice(finish_reason='stop', index=0, logprobs=None, message=ChatCompletionMessage(content=None, refusal=None, role='assistant', function_call=None, tool_calls=[ChatCompletionMessageToolCall(id='call_SRS5CGTL6yjO5gwexYmPpsbi', function=Function(arguments='{\n"action": "extract_seller_information"\n}', name='AgentAction'), type='function')]))], created=1728906263, model='gpt-4-0613', object='chat.completion', service_tier=None, system_fingerprint=None, usage=CompletionUsage(completion_tokens=11, prompt_tokens=240, total_tokens=251, completion_tokens_details=None, prompt_tokens_details=None))
2024-10-14 14:44:24,275 - DEBUG - Instructor Request: mode.value='tool_call', response_model=<class 'models.AgentAction'>, new_kwargs={'model': 'gpt-4', 'messages': [{'role': 'system', 'content': '\nYou are an AI agent specializing in contract creation and personal information extraction. \n\nYour role is:\n 1. Guide the process of extracting information from documents..\n 2. Verifying the extracted information with human input.\n 3. Identifying parties. \n 4. Constructing a contract. \n\n\nFollow the workflow precisely and ask for human input when needed.\n\n'}, {'role': 'user', 'content': "Current state: {'verified_pii_data': [{'name': 'ELENA VASILESCU', 'address': 'Mun. Bucuresti Sec. 5 Str Nicolae Iorga nr.3 900 B'}], 'parties': {'buyer': 'ELENA VASILESCU', 'seller': ''}, 'contract_details': None, 'contract': None, 'current_action': None}\nWhat action should be taken next?"}], 'tools': [{'type': 'function', 'function': {'name': 'AgentAction', 'description': 'Correctly extracted `AgentAction` with all the required parameters with correct types', 'parameters': {'properties': {'action': {'description': 'Action to be performed by the agent', 'title': 'Action', 'type': 'string'}, 'parameters': {'additionalProperties': {'type': 'string'}, 'description': 'Parameters for the action', 'title': 'Parameters', 'type': 'object'}}, 'required': ['action', 'parameters'], 'type': 'object'}}}], 'tool_choice': {'type': 'function', 'function': {'name': 'AgentAction'}}}
2024-10-14 14:44:24,275 - DEBUG - max_retries: 1
2024-10-14 14:44:24,276 - DEBUG - Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'json_data': {'messages': [{'role': 'system', 'content': '\nYou are an AI agent specializing in contract creation and personal information extraction. \n\nYour role is:\n 1. Guide the process of extracting information from documents..\n 2. Verifying the extracted information with human input.\n 3. Identifying parties. \n 4. Constructing a contract. \n\n\nFollow the workflow precisely and ask for human input when needed.\n\n'}, {'role': 'user', 'content': "Current state: {'verified_pii_data': [{'name': 'ELENA VASILESCU', 'address': 'Mun. Bucuresti Sec. 5 Str Nicolae Iorga nr.3 900 B'}], 'parties': {'buyer': 'ELENA VASILESCU', 'seller': ''}, 'contract_details': None, 'contract': None, 'current_action': None}\nWhat action should be taken next?"}], 'model': 'gpt-4', 'tool_choice': {'type': 'function', 'function': {'name': 'AgentAction'}}, 'tools': [{'type': 'function', 'function': {'name': 'AgentAction', 'description': 'Correctly extracted `AgentAction` with all the required parameters with correct types', 'parameters': {'properties': {'action': {'description': 'Action to be performed by the agent', 'title': 'Action', 'type': 'string'}, 'parameters': {'additionalProperties': {'type': 'string'}, 'description': 'Parameters for the action', 'title': 'Parameters', 'type': 'object'}}, 'required': ['action', 'parameters'], 'type': 'object'}}}]}}
2024-10-14 14:44:24,276 - DEBUG - Sending HTTP Request: POST https://api.openai.com/v1/chat/completions
2024-10-14 14:44:24,277 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-10-14 14:44:24,277 - DEBUG - send_request_headers.complete
2024-10-14 14:44:24,277 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-10-14 14:44:24,277 - DEBUG - send_request_body.complete
2024-10-14 14:44:24,277 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-10-14 14:44:25,294 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Mon, 14 Oct 2024 11:44:25 GMT'), (b'Content-Type', b'application/json'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'user-kzzh9hik9ryjiou4ftvhondh'), (b'openai-processing-ms', b'869'), (b'openai-version', b'2020-10-01'), (b'x-ratelimit-limit-requests', b'10000'), (b'x-ratelimit-limit-tokens', b'10000'), (b'x-ratelimit-remaining-requests', b'9976'), (b'x-ratelimit-remaining-tokens', b'8302'), (b'x-ratelimit-reset-requests', b'3m24.044s'), (b'x-ratelimit-reset-tokens', b'10.185s'), (b'x-request-id', b'req_04ed9d9d397d3c50ac0ab895bb42f6a8'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8d2751397c38ca1d-OTP'), (b'Content-Encoding', b'gzip'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-10-14 14:44:25,294 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2024-10-14 14:44:25,295 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-10-14 14:44:25,295 - DEBUG - receive_response_body.complete
2024-10-14 14:44:25,295 - DEBUG - response_closed.started
2024-10-14 14:44:25,295 - DEBUG - response_closed.complete
2024-10-14 14:44:25,295 - DEBUG - HTTP Response: POST https://api.openai.com/v1/chat/completions "200 OK" Headers({'date': 'Mon, 14 Oct 2024 11:44:25 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-expose-headers': 'X-Request-ID', 'openai-organization': 'user-kzzh9hik9ryjiou4ftvhondh', 'openai-processing-ms': '869', 'openai-version': '2020-10-01', 'x-ratelimit-limit-requests': '10000', 'x-ratelimit-limit-tokens': '10000', 'x-ratelimit-remaining-requests': '9976', 'x-ratelimit-remaining-tokens': '8302', 'x-ratelimit-reset-requests': '3m24.044s', 'x-ratelimit-reset-tokens': '10.185s', 'x-request-id': 'req_04ed9d9d397d3c50ac0ab895bb42f6a8', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8d2751397c38ca1d-OTP', 'content-encoding': 'gzip', 'alt-svc': 'h3=":443"; ma=86400'})
2024-10-14 14:44:25,295 - DEBUG - request_id: req_04ed9d9d397d3c50ac0ab895bb42f6a8
2024-10-14 14:44:25,296 - DEBUG - Instructor Raw Response: ChatCompletion(id='chatcmpl-AIDmqMATAObNVnNNbfnHxm0KepQl4', choices=[Choice(finish_reason='stop', index=0, logprobs=None, message=ChatCompletionMessage(content=None, refusal=None, role='assistant', function_call=None, tool_calls=[ChatCompletionMessageToolCall(id='call_SRS5CGTL6yjO5gwexYmPpsbi', function=Function(arguments='{\n"action": "extract_pii"\n}', name='AgentAction'), type='function')]))], created=1728906264, model='gpt-4-0613', object='chat.completion', service_tier=None, system_fingerprint=None, usage=CompletionUsage(completion_tokens=10, prompt_tokens=240, total_tokens=250, completion_tokens_details=None, prompt_tokens_details=None))
2024-10-14 14:44:25,297 - DEBUG - Instructor Request: mode.value='tool_call', response_model=<class 'models.PIIData'>, new_kwargs={'model': 'gpt-4', 'messages': [{'role': 'system', 'content': '\nYou are an AI agent specializing in contract creation and personal information extraction. \n\nYour role is:\n 1. Guide the process of extracting information from documents..\n 2. Verifying the extracted information with human input.\n 3. Identifying parties. \n 4. Constructing a contract. \n\n\nFollow the workflow precisely and ask for human input when needed.\n\n'}, {'role': 'user', 'content': "Extract the name and address from the given text:\n\nROUMANIE ROMAWI ROMANIA Carte CARTE De |Dentitate IDEnTITY D'iDENTITE seria TR Na 409131 CarD cNP 1891113341181 Nume/Nom/Last name T525M ISPILANTE Prenume/Prenom/First namo SENTIMENT BRUSLI Cetatenle/Nallonallte/Nallonallly Sox SexeiSox Romn\u0103 ROU M Loc nastere/Liou do naissancelPlace ol birth Or\u0219. Videle Jud.Teleorman Dom IlulAdresse/Addrass Videle Jud: Teleorman Sos. Giurgiului nr.1 695 TR Emisa dolDelivree parlIssuad by ValabilltatelValldlte Valldlty SPCLEP Videle 04.11.11-13.11.2018 IDROUISPILANTE<<SENTIMENT <BRUSLI<<<< TR409131<0R0u8911137M181113513411813 Or\u0219:"}], 'tools': [{'type': 'function', 'function': {'name': 'PIIData', 'description': 'Correctly extracted `PIIData` with all the required parameters with correct types', 'parameters': {'properties': {'name': {'description': 'Full name of the person', 'title': 'Name', 'type': 'string'}, 'address': {'description': 'Residential address of the person', 'title': 'Address', 'type': 'string'}}, 'required': ['address', 'name'], 'type': 'object'}}}], 'tool_choice': {'type': 'function', 'function': {'name': 'PIIData'}}}
2024-10-14 14:44:25,297 - DEBUG - max_retries: 1
2024-10-14 14:44:25,298 - DEBUG - Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'json_data': {'messages': [{'role': 'system', 'content': '\nYou are an AI agent specializing in contract creation and personal information extraction. \n\nYour role is:\n 1. Guide the process of extracting information from documents..\n 2. Verifying the extracted information with human input.\n 3. Identifying parties. \n 4. Constructing a contract. \n\n\nFollow the workflow precisely and ask for human input when needed.\n\n'}, {'role': 'user', 'content': "Extract the name and address from the given text:\n\nROUMANIE ROMAWI ROMANIA Carte CARTE De |Dentitate IDEnTITY D'iDENTITE seria TR Na 409131 CarD cNP 1891113341181 Nume/Nom/Last name T525M ISPILANTE Prenume/Prenom/First namo SENTIMENT BRUSLI Cetatenle/Nallonallte/Nallonallly Sox SexeiSox Romn\u0103 ROU M Loc nastere/Liou do naissancelPlace ol birth Or\u0219. Videle Jud.Teleorman Dom IlulAdresse/Addrass Videle Jud: Teleorman Sos. Giurgiului nr.1 695 TR Emisa dolDelivree parlIssuad by ValabilltatelValldlte Valldlty SPCLEP Videle 04.11.11-13.11.2018 IDROUISPILANTE<<SENTIMENT <BRUSLI<<<< TR409131<0R0u8911137M181113513411813 Or\u0219:"}], 'model': 'gpt-4', 'tool_choice': {'type': 'function', 'function': {'name': 'PIIData'}}, 'tools': [{'type': 'function', 'function': {'name': 'PIIData', 'description': 'Correctly extracted `PIIData` with all the required parameters with correct types', 'parameters': {'properties': {'name': {'description': 'Full name of the person', 'title': 'Name', 'type': 'string'}, 'address': {'description': 'Residential address of the person', 'title': 'Address', 'type': 'string'}}, 'required': ['address', 'name'], 'type': 'object'}}}]}}
2024-10-14 14:44:25,299 - DEBUG - Sending HTTP Request: POST https://api.openai.com/v1/chat/completions
2024-10-14 14:44:25,299 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-10-14 14:44:25,299 - DEBUG - send_request_headers.complete
2024-10-14 14:44:25,299 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-10-14 14:44:25,299 - DEBUG - send_request_body.complete
2024-10-14 14:44:25,299 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-10-14 14:44:27,090 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Mon, 14 Oct 2024 11:44:27 GMT'), (b'Content-Type', b'application/json'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'user-kzzh9hik9ryjiou4ftvhondh'), (b'openai-processing-ms', b'1638'), (b'openai-version', b'2020-10-01'), (b'x-ratelimit-limit-requests', b'10000'), (b'x-ratelimit-limit-tokens', b'10000'), (b'x-ratelimit-remaining-requests', b'9975'), (b'x-ratelimit-remaining-tokens', b'8142'), (b'x-ratelimit-reset-requests', b'3m31.642s'), (b'x-ratelimit-reset-tokens', b'11.146s'), (b'x-request-id', b'req_85600838515a0a41791f553e229f0019'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8d27513fdba1ca1d-OTP'), (b'Content-Encoding', b'gzip'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-10-14 14:44:27,090 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2024-10-14 14:44:27,091 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-10-14 14:44:27,091 - DEBUG - receive_response_body.complete
2024-10-14 14:44:27,091 - DEBUG - response_closed.started
2024-10-14 14:44:27,092 - DEBUG - response_closed.complete
2024-10-14 14:44:27,092 - DEBUG - HTTP Response: POST https://api.openai.com/v1/chat/completions "200 OK" Headers({'date': 'Mon, 14 Oct 2024 11:44:27 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-expose-headers': 'X-Request-ID', 'openai-organization': 'user-kzzh9hik9ryjiou4ftvhondh', 'openai-processing-ms': '1638', 'openai-version': '2020-10-01', 'x-ratelimit-limit-requests': '10000', 'x-ratelimit-limit-tokens': '10000', 'x-ratelimit-remaining-requests': '9975', 'x-ratelimit-remaining-tokens': '8142', 'x-ratelimit-reset-requests': '3m31.642s', 'x-ratelimit-reset-tokens': '11.146s', 'x-request-id': 'req_85600838515a0a41791f553e229f0019', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8d27513fdba1ca1d-OTP', 'content-encoding': 'gzip', 'alt-svc': 'h3=":443"; ma=86400'})
2024-10-14 14:44:27,093 - DEBUG - request_id: req_85600838515a0a41791f553e229f0019
2024-10-14 14:44:27,094 - DEBUG - Instructor Raw Response: ChatCompletion(id='chatcmpl-AIDmrNWjyDKKu0TkGaYj7Za41DHuC', choices=[Choice(finish_reason='stop', index=0, logprobs=None, message=ChatCompletionMessage(content=None, refusal=None, role='assistant', function_call=None, tool_calls=[ChatCompletionMessageToolCall(id='call_g9g3zkDPLuAZloO18HWBdWVo', function=Function(arguments='{\n"name": "ISPILANTE SENTIMENT BRUSLI",\n"address": "Videle Jud: Teleorman Sos. Giurgiului nr.1 695 TR"\n}', name='PIIData'), type='function')]))], created=1728906265, model='gpt-4-0613', object='chat.completion', service_tier=None, system_fingerprint=None, usage=CompletionUsage(completion_tokens=39, prompt_tokens=377, total_tokens=416, completion_tokens_details=None, prompt_tokens_details=None))
2024-10-14 14:44:32,219 - DEBUG - close.started
2024-10-14 14:44:32,219 - DEBUG - close.complete
2024-10-14 14:44:32,220 - ERROR - Task exception was never retrieved
future: <Task finished name='Task-1' coro=<agent_workflow() done, defined at D:\deve\contract_automation\src\main.py:25> exception=KeyboardInterrupt()>
Traceback (most recent call last):
  File "D:\deve\contract_automation\src\main.py", line 73, in <module>
    asyncio.run(agent_workflow())
  File "D:\deve\contract_automation\.venv\Lib\site-packages\nest_asyncio.py", line 30, in run
    return loop.run_until_complete(task)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\deve\contract_automation\.venv\Lib\site-packages\nest_asyncio.py", line 92, in run_until_complete
    self._run_once()
  File "D:\deve\contract_automation\.venv\Lib\site-packages\nest_asyncio.py", line 133, in _run_once
    handle._run()
  File "C:\Users\neuro\.rye\py\cpython@3.12.0\Lib\asyncio\events.py", line 84, in _run
    self._context.run(self._callback, *self._args)
  File "C:\Users\neuro\.rye\py\cpython@3.12.0\Lib\asyncio\tasks.py", line 386, in __wakeup
    self.__step()
  File "C:\Users\neuro\.rye\py\cpython@3.12.0\Lib\asyncio\tasks.py", line 293, in __step
    self.__step_run_and_handle_result(exc)
  File "C:\Users\neuro\.rye\py\cpython@3.12.0\Lib\asyncio\tasks.py", line 304, in __step_run_and_handle_result
    result = coro.send(None)
             ^^^^^^^^^^^^^^^
  File "D:\deve\contract_automation\src\main.py", line 38, in agent_workflow
    if verify_information(pii):
       ^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\deve\contract_automation\src\utils.py", line 7, in verify_information
    verification = input("Is this information correct? (yes/no): ").lower()
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
KeyboardInterrupt
2024-10-14 14:45:52,928 - WARNING - Neither CUDA nor MPS are available - defaulting to CPU. Note: This module is much faster with a GPU.
2024-10-14 14:45:54,211 - DEBUG - load_ssl_context verify=True cert=None trust_env=True http2=False
2024-10-14 14:45:54,211 - DEBUG - load_verify_locations cafile='D:\\deve\\contract_automation\\.venv\\Lib\\site-packages\\certifi\\cacert.pem'
2024-10-14 14:45:54,535 - DEBUG - Patching `client.chat.completions.create` with mode=<Mode.TOOLS: 'tool_call'>
2024-10-14 14:45:54,536 - DEBUG - Using proactor: IocpProactor
2024-10-14 14:45:54,557 - DEBUG - STREAM b'IHDR' 16 13
2024-10-14 14:45:54,557 - DEBUG - STREAM b'iCCP' 41 3152
2024-10-14 14:45:54,557 - DEBUG - iCCP profile name b'ICC Profile'
2024-10-14 14:45:54,557 - DEBUG - Compression method 0
2024-10-14 14:45:54,557 - DEBUG - STREAM b'eXIf' 3205 138
2024-10-14 14:45:54,557 - DEBUG - STREAM b'pHYs' 3355 9
2024-10-14 14:45:54,557 - DEBUG - STREAM b'iTXt' 3376 470
2024-10-14 14:45:54,557 - DEBUG - STREAM b'iDOT' 3858 28
2024-10-14 14:45:54,557 - DEBUG - b'iDOT' 3858 28 (unknown)
2024-10-14 14:45:54,557 - DEBUG - STREAM b'IDAT' 3898 16384
2024-10-14 14:45:54,557 - DEBUG - STREAM b'IHDR' 16 13
2024-10-14 14:45:54,557 - DEBUG - STREAM b'iCCP' 41 3152
2024-10-14 14:45:54,557 - DEBUG - iCCP profile name b'ICC Profile'
2024-10-14 14:45:54,557 - DEBUG - Compression method 0
2024-10-14 14:45:54,557 - DEBUG - STREAM b'eXIf' 3205 138
2024-10-14 14:45:54,557 - DEBUG - STREAM b'pHYs' 3355 9
2024-10-14 14:45:54,557 - DEBUG - STREAM b'iTXt' 3376 470
2024-10-14 14:45:54,558 - DEBUG - STREAM b'iDOT' 3858 28
2024-10-14 14:45:54,558 - DEBUG - b'iDOT' 3858 28 (unknown)
2024-10-14 14:45:54,558 - DEBUG - STREAM b'IDAT' 3898 16384
2024-10-14 14:45:54,568 - DEBUG - tag: XResolution (282) - type: rational (5) Tag Location: 22 - Data Location: 62 - value: b'\x00\x00\x00\x90\x00\x00\x00\x01'
2024-10-14 14:45:54,568 - DEBUG - tag: YResolution (283) - type: rational (5) Tag Location: 34 - Data Location: 70 - value: b'\x00\x00\x00\x90\x00\x00\x00\x01'
2024-10-14 14:45:54,568 - DEBUG - tag: ResolutionUnit (296) - type: short (3) - value: b'\x00\x02'
2024-10-14 14:45:54,568 - DEBUG - tag: ExifIFD (34665) - type: long (4) - value: b'\x00\x00\x00N'
2024-10-14 14:45:54,568 - DEBUG - Error closing: Operation on closed image
2024-10-14 14:45:56,588 - DEBUG - STREAM b'IHDR' 16 13
2024-10-14 14:45:56,588 - DEBUG - STREAM b'iCCP' 41 3152
2024-10-14 14:45:56,588 - DEBUG - iCCP profile name b'ICC Profile'
2024-10-14 14:45:56,588 - DEBUG - Compression method 0
2024-10-14 14:45:56,588 - DEBUG - STREAM b'eXIf' 3205 138
2024-10-14 14:45:56,588 - DEBUG - STREAM b'pHYs' 3355 9
2024-10-14 14:45:56,588 - DEBUG - STREAM b'iTXt' 3376 471
2024-10-14 14:45:56,588 - DEBUG - STREAM b'iDOT' 3859 28
2024-10-14 14:45:56,588 - DEBUG - b'iDOT' 3859 28 (unknown)
2024-10-14 14:45:56,588 - DEBUG - STREAM b'IDAT' 3899 16384
2024-10-14 14:45:56,589 - DEBUG - STREAM b'IHDR' 16 13
2024-10-14 14:45:56,589 - DEBUG - STREAM b'iCCP' 41 3152
2024-10-14 14:45:56,589 - DEBUG - iCCP profile name b'ICC Profile'
2024-10-14 14:45:56,589 - DEBUG - Compression method 0
2024-10-14 14:45:56,589 - DEBUG - STREAM b'eXIf' 3205 138
2024-10-14 14:45:56,589 - DEBUG - STREAM b'pHYs' 3355 9
2024-10-14 14:45:56,589 - DEBUG - STREAM b'iTXt' 3376 471
2024-10-14 14:45:56,589 - DEBUG - STREAM b'iDOT' 3859 28
2024-10-14 14:45:56,589 - DEBUG - b'iDOT' 3859 28 (unknown)
2024-10-14 14:45:56,589 - DEBUG - STREAM b'IDAT' 3899 16384
2024-10-14 14:45:56,606 - DEBUG - tag: XResolution (282) - type: rational (5) Tag Location: 22 - Data Location: 62 - value: b'\x00\x00\x00\x90\x00\x00\x00\x01'
2024-10-14 14:45:56,606 - DEBUG - tag: YResolution (283) - type: rational (5) Tag Location: 34 - Data Location: 70 - value: b'\x00\x00\x00\x90\x00\x00\x00\x01'
2024-10-14 14:45:56,606 - DEBUG - tag: ResolutionUnit (296) - type: short (3) - value: b'\x00\x02'
2024-10-14 14:45:56,606 - DEBUG - tag: ExifIFD (34665) - type: long (4) - value: b'\x00\x00\x00N'
2024-10-14 14:45:56,607 - DEBUG - Error closing: Operation on closed image
2024-10-14 14:45:59,165 - DEBUG - Instructor Request: mode.value='tool_call', response_model=<class 'models.AgentAction'>, new_kwargs={'model': 'gpt-4', 'messages': [{'role': 'system', 'content': '\nYou are an AI agent specializing in contract creation and personal information extraction. \n\nYour role is:\n 1. Guide the process of extracting information from documents..\n 2. Verifying the extracted information with human input.\n 3. Identifying parties. \n 4. Constructing a contract. \n\n\nFollow the workflow precisely and ask for human input when needed.\n\n'}, {'role': 'user', 'content': "Current state: {'verified_pii_data': [], 'parties': None, 'contract_details': None, 'contract': None, 'current_action': None}\nWhat action should be taken next? Choose from: extract_pii, identify_parties, determine_contract_type, construct_contract, finish"}], 'tools': [{'type': 'function', 'function': {'name': 'AgentAction', 'description': 'Correctly extracted `AgentAction` with all the required parameters with correct types', 'parameters': {'properties': {'action': {'description': 'Action to be performed by the agent', 'title': 'Action', 'type': 'string'}, 'parameters': {'additionalProperties': {'type': 'string'}, 'description': 'Parameters for the action', 'title': 'Parameters', 'type': 'object'}}, 'required': ['action', 'parameters'], 'type': 'object'}}}], 'tool_choice': {'type': 'function', 'function': {'name': 'AgentAction'}}}
2024-10-14 14:45:59,166 - DEBUG - max_retries: 1
2024-10-14 14:45:59,168 - DEBUG - Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'json_data': {'messages': [{'role': 'system', 'content': '\nYou are an AI agent specializing in contract creation and personal information extraction. \n\nYour role is:\n 1. Guide the process of extracting information from documents..\n 2. Verifying the extracted information with human input.\n 3. Identifying parties. \n 4. Constructing a contract. \n\n\nFollow the workflow precisely and ask for human input when needed.\n\n'}, {'role': 'user', 'content': "Current state: {'verified_pii_data': [], 'parties': None, 'contract_details': None, 'contract': None, 'current_action': None}\nWhat action should be taken next? Choose from: extract_pii, identify_parties, determine_contract_type, construct_contract, finish"}], 'model': 'gpt-4', 'tool_choice': {'type': 'function', 'function': {'name': 'AgentAction'}}, 'tools': [{'type': 'function', 'function': {'name': 'AgentAction', 'description': 'Correctly extracted `AgentAction` with all the required parameters with correct types', 'parameters': {'properties': {'action': {'description': 'Action to be performed by the agent', 'title': 'Action', 'type': 'string'}, 'parameters': {'additionalProperties': {'type': 'string'}, 'description': 'Parameters for the action', 'title': 'Parameters', 'type': 'object'}}, 'required': ['action', 'parameters'], 'type': 'object'}}}]}}
2024-10-14 14:45:59,206 - DEBUG - Sending HTTP Request: POST https://api.openai.com/v1/chat/completions
2024-10-14 14:45:59,206 - DEBUG - connect_tcp.started host='api.openai.com' port=443 local_address=None timeout=5.0 socket_options=None
2024-10-14 14:45:59,218 - DEBUG - connect_tcp.complete return_value=<httpcore._backends.sync.SyncStream object at 0x0000014CF907E840>
2024-10-14 14:45:59,218 - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x0000014CF8EC5B50> server_hostname='api.openai.com' timeout=5.0
2024-10-14 14:45:59,225 - DEBUG - start_tls.complete return_value=<httpcore._backends.sync.SyncStream object at 0x0000014CF907E570>
2024-10-14 14:45:59,225 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-10-14 14:45:59,226 - DEBUG - send_request_headers.complete
2024-10-14 14:45:59,226 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-10-14 14:45:59,226 - DEBUG - send_request_body.complete
2024-10-14 14:45:59,226 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-10-14 14:46:00,232 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Mon, 14 Oct 2024 11:46:00 GMT'), (b'Content-Type', b'application/json'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'user-kzzh9hik9ryjiou4ftvhondh'), (b'openai-processing-ms', b'842'), (b'openai-version', b'2020-10-01'), (b'x-ratelimit-limit-requests', b'10000'), (b'x-ratelimit-limit-tokens', b'10000'), (b'x-ratelimit-remaining-requests', b'9985'), (b'x-ratelimit-remaining-tokens', b'9829'), (b'x-ratelimit-reset-requests', b'2m6.343s'), (b'x-ratelimit-reset-tokens', b'1.026s'), (b'x-request-id', b'req_6685429035916041bbafce881378c8e4'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'CF-Cache-Status', b'DYNAMIC'), (b'Set-Cookie', b'__cf_bm=nAsmpYt3ZNA5q2szTXCcDHG60DNT7IGuy9WKVAtQIhE-1728906360-1.0.1.1-z7Fgq2FnI9jqQM4vjhqUoUqTB7iY.l6Dx6BI_qN8VahmBjGpF7w.QxUSxwo9Cji4Bp9Lcnx5xY7vIWKqk7jChg; path=/; expires=Mon, 14-Oct-24 12:16:00 GMT; domain=.api.openai.com; HttpOnly; Secure; SameSite=None'), (b'X-Content-Type-Options', b'nosniff'), (b'Set-Cookie', b'_cfuvid=f8Cedg8vxpToGJIRcD8Q.49VhZQZe19yaQLUxjVy2c0-1728906360505-0.0.1.1-604800000; path=/; domain=.api.openai.com; HttpOnly; Secure; SameSite=None'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8d27538aec4e26f6-OTP'), (b'Content-Encoding', b'gzip'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-10-14 14:46:00,234 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2024-10-14 14:46:00,234 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-10-14 14:46:00,235 - DEBUG - receive_response_body.complete
2024-10-14 14:46:00,235 - DEBUG - response_closed.started
2024-10-14 14:46:00,235 - DEBUG - response_closed.complete
2024-10-14 14:46:00,235 - DEBUG - HTTP Response: POST https://api.openai.com/v1/chat/completions "200 OK" Headers([('date', 'Mon, 14 Oct 2024 11:46:00 GMT'), ('content-type', 'application/json'), ('transfer-encoding', 'chunked'), ('connection', 'keep-alive'), ('access-control-expose-headers', 'X-Request-ID'), ('openai-organization', 'user-kzzh9hik9ryjiou4ftvhondh'), ('openai-processing-ms', '842'), ('openai-version', '2020-10-01'), ('x-ratelimit-limit-requests', '10000'), ('x-ratelimit-limit-tokens', '10000'), ('x-ratelimit-remaining-requests', '9985'), ('x-ratelimit-remaining-tokens', '9829'), ('x-ratelimit-reset-requests', '2m6.343s'), ('x-ratelimit-reset-tokens', '1.026s'), ('x-request-id', 'req_6685429035916041bbafce881378c8e4'), ('strict-transport-security', 'max-age=31536000; includeSubDomains; preload'), ('cf-cache-status', 'DYNAMIC'), ('set-cookie', '__cf_bm=nAsmpYt3ZNA5q2szTXCcDHG60DNT7IGuy9WKVAtQIhE-1728906360-1.0.1.1-z7Fgq2FnI9jqQM4vjhqUoUqTB7iY.l6Dx6BI_qN8VahmBjGpF7w.QxUSxwo9Cji4Bp9Lcnx5xY7vIWKqk7jChg; path=/; expires=Mon, 14-Oct-24 12:16:00 GMT; domain=.api.openai.com; HttpOnly; Secure; SameSite=None'), ('x-content-type-options', 'nosniff'), ('set-cookie', '_cfuvid=f8Cedg8vxpToGJIRcD8Q.49VhZQZe19yaQLUxjVy2c0-1728906360505-0.0.1.1-604800000; path=/; domain=.api.openai.com; HttpOnly; Secure; SameSite=None'), ('server', 'cloudflare'), ('cf-ray', '8d27538aec4e26f6-OTP'), ('content-encoding', 'gzip'), ('alt-svc', 'h3=":443"; ma=86400')])
2024-10-14 14:46:00,236 - DEBUG - request_id: req_6685429035916041bbafce881378c8e4
2024-10-14 14:46:00,239 - DEBUG - Instructor Raw Response: ChatCompletion(id='chatcmpl-AIDoNTarIb1QVrQu1U44BtJ7TroAu', choices=[Choice(finish_reason='stop', index=0, logprobs=None, message=ChatCompletionMessage(content=None, refusal=None, role='assistant', function_call=None, tool_calls=[ChatCompletionMessageToolCall(id='call_oG9XGxO6fVdg9gBkeyCOYesR', function=Function(arguments='{\n"action": "extract_pii"\n}', name='AgentAction'), type='function')]))], created=1728906359, model='gpt-4-0613', object='chat.completion', service_tier=None, system_fingerprint=None, usage=CompletionUsage(completion_tokens=10, prompt_tokens=202, total_tokens=212, completion_tokens_details=None, prompt_tokens_details=None))
2024-10-14 14:46:00,240 - DEBUG - Instructor Request: mode.value='tool_call', response_model=<class 'models.PIIData'>, new_kwargs={'model': 'gpt-4', 'messages': [{'role': 'system', 'content': '\nYou are an AI agent specializing in contract creation and personal information extraction. \n\nYour role is:\n 1. Guide the process of extracting information from documents..\n 2. Verifying the extracted information with human input.\n 3. Identifying parties. \n 4. Constructing a contract. \n\n\nFollow the workflow precisely and ask for human input when needed.\n\n'}, {'role': 'user', 'content': "Extract the name and address from the given text:\n\nROUMANIE ROMAWI ROMANIA Carte CARTE De |Dentitate IDEnTITY D'iDENTITE seria TR Na 409131 CarD cNP 1891113341181 Nume/Nom/Last name T525M ISPILANTE Prenume/Prenom/First namo SENTIMENT BRUSLI Cetatenle/Nallonallte/Nallonallly Sox SexeiSox Romn\u0103 ROU M Loc nastere/Liou do naissancelPlace ol birth Or\u0219. Videle Jud.Teleorman Dom IlulAdresse/Addrass Videle Jud: Teleorman Sos. Giurgiului nr.1 695 TR Emisa dolDelivree parlIssuad by ValabilltatelValldlte Valldlty SPCLEP Videle 04.11.11-13.11.2018 IDROUISPILANTE<<SENTIMENT <BRUSLI<<<< TR409131<0R0u8911137M181113513411813 Or\u0219:"}], 'tools': [{'type': 'function', 'function': {'name': 'PIIData', 'description': 'Correctly extracted `PIIData` with all the required parameters with correct types', 'parameters': {'properties': {'name': {'description': 'Full name of the person', 'title': 'Name', 'type': 'string'}, 'address': {'description': 'Residential address of the person', 'title': 'Address', 'type': 'string'}}, 'required': ['address', 'name'], 'type': 'object'}}}], 'tool_choice': {'type': 'function', 'function': {'name': 'PIIData'}}}
2024-10-14 14:46:00,240 - DEBUG - max_retries: 1
2024-10-14 14:46:00,241 - DEBUG - Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'json_data': {'messages': [{'role': 'system', 'content': '\nYou are an AI agent specializing in contract creation and personal information extraction. \n\nYour role is:\n 1. Guide the process of extracting information from documents..\n 2. Verifying the extracted information with human input.\n 3. Identifying parties. \n 4. Constructing a contract. \n\n\nFollow the workflow precisely and ask for human input when needed.\n\n'}, {'role': 'user', 'content': "Extract the name and address from the given text:\n\nROUMANIE ROMAWI ROMANIA Carte CARTE De |Dentitate IDEnTITY D'iDENTITE seria TR Na 409131 CarD cNP 1891113341181 Nume/Nom/Last name T525M ISPILANTE Prenume/Prenom/First namo SENTIMENT BRUSLI Cetatenle/Nallonallte/Nallonallly Sox SexeiSox Romn\u0103 ROU M Loc nastere/Liou do naissancelPlace ol birth Or\u0219. Videle Jud.Teleorman Dom IlulAdresse/Addrass Videle Jud: Teleorman Sos. Giurgiului nr.1 695 TR Emisa dolDelivree parlIssuad by ValabilltatelValldlte Valldlty SPCLEP Videle 04.11.11-13.11.2018 IDROUISPILANTE<<SENTIMENT <BRUSLI<<<< TR409131<0R0u8911137M181113513411813 Or\u0219:"}], 'model': 'gpt-4', 'tool_choice': {'type': 'function', 'function': {'name': 'PIIData'}}, 'tools': [{'type': 'function', 'function': {'name': 'PIIData', 'description': 'Correctly extracted `PIIData` with all the required parameters with correct types', 'parameters': {'properties': {'name': {'description': 'Full name of the person', 'title': 'Name', 'type': 'string'}, 'address': {'description': 'Residential address of the person', 'title': 'Address', 'type': 'string'}}, 'required': ['address', 'name'], 'type': 'object'}}}]}}
2024-10-14 14:46:00,242 - DEBUG - Sending HTTP Request: POST https://api.openai.com/v1/chat/completions
2024-10-14 14:46:00,242 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-10-14 14:46:00,242 - DEBUG - send_request_headers.complete
2024-10-14 14:46:00,242 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-10-14 14:46:00,242 - DEBUG - send_request_body.complete
2024-10-14 14:46:00,242 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-10-14 14:46:02,295 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Mon, 14 Oct 2024 11:46:02 GMT'), (b'Content-Type', b'application/json'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'user-kzzh9hik9ryjiou4ftvhondh'), (b'openai-processing-ms', b'1897'), (b'openai-version', b'2020-10-01'), (b'x-ratelimit-limit-requests', b'10000'), (b'x-ratelimit-limit-tokens', b'10000'), (b'x-ratelimit-remaining-requests', b'9984'), (b'x-ratelimit-remaining-tokens', b'9692'), (b'x-ratelimit-reset-requests', b'2m13.97s'), (b'x-ratelimit-reset-tokens', b'1.843s'), (b'x-request-id', b'req_b5be01c698cbc7a7d3300b2a7dbf7245'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8d2753914a6a26f6-OTP'), (b'Content-Encoding', b'gzip'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-10-14 14:46:02,295 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2024-10-14 14:46:02,295 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-10-14 14:46:02,295 - DEBUG - receive_response_body.complete
2024-10-14 14:46:02,295 - DEBUG - response_closed.started
2024-10-14 14:46:02,295 - DEBUG - response_closed.complete
2024-10-14 14:46:02,296 - DEBUG - HTTP Response: POST https://api.openai.com/v1/chat/completions "200 OK" Headers({'date': 'Mon, 14 Oct 2024 11:46:02 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-expose-headers': 'X-Request-ID', 'openai-organization': 'user-kzzh9hik9ryjiou4ftvhondh', 'openai-processing-ms': '1897', 'openai-version': '2020-10-01', 'x-ratelimit-limit-requests': '10000', 'x-ratelimit-limit-tokens': '10000', 'x-ratelimit-remaining-requests': '9984', 'x-ratelimit-remaining-tokens': '9692', 'x-ratelimit-reset-requests': '2m13.97s', 'x-ratelimit-reset-tokens': '1.843s', 'x-request-id': 'req_b5be01c698cbc7a7d3300b2a7dbf7245', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8d2753914a6a26f6-OTP', 'content-encoding': 'gzip', 'alt-svc': 'h3=":443"; ma=86400'})
2024-10-14 14:46:02,296 - DEBUG - request_id: req_b5be01c698cbc7a7d3300b2a7dbf7245
2024-10-14 14:46:02,296 - DEBUG - Instructor Raw Response: ChatCompletion(id='chatcmpl-AIDoOaMu96VmeLmPeSqFT6AeEZz9q', choices=[Choice(finish_reason='stop', index=0, logprobs=None, message=ChatCompletionMessage(content=None, refusal=None, role='assistant', function_call=None, tool_calls=[ChatCompletionMessageToolCall(id='call_t0A9jsxCVsNCFNhdcyrwmJUe', function=Function(arguments='{\n"name": "ISPILANTE SENTIMENT BRUSLI",\n"address": "Videle Jud: Teleorman Sos. Giurgiului nr.1 695 TR"\n}', name='PIIData'), type='function')]))], created=1728906360, model='gpt-4-0613', object='chat.completion', service_tier=None, system_fingerprint=None, usage=CompletionUsage(completion_tokens=39, prompt_tokens=377, total_tokens=416, completion_tokens_details=None, prompt_tokens_details=None))
2024-10-14 14:46:19,639 - DEBUG - Instructor Request: mode.value='tool_call', response_model=<class 'models.PIIData'>, new_kwargs={'model': 'gpt-4', 'messages': [{'role': 'system', 'content': '\nYou are an AI agent specializing in contract creation and personal information extraction. \n\nYour role is:\n 1. Guide the process of extracting information from documents..\n 2. Verifying the extracted information with human input.\n 3. Identifying parties. \n 4. Constructing a contract. \n\n\nFollow the workflow precisely and ask for human input when needed.\n\n'}, {'role': 'user', 'content': "Extract the name and address from the given text:\n\nROUMANIE ROVIAINIA ROMANIA Carte Carte DE iDentitate IdEnTITY Didentite seala SS Nr 099994 Card CNP 2410415400542 93coQ Nume/NomiLast name VASILESCU Pronume/Prenom/Flrst name ELENA < CetatenielNatlonallte/Natlonalily M Sex SexelSer Romn\u0103 ROU Loc nastore/Licu de naissancolF 'ar0 ol birth Mun: Dej Jud. Cluj Domiciliu/Adresse A ess Mun. Bucuresti Sec. 5 Str Nicolae Iorga nr.3 900 B Emisa delDelivree parllssued by Valabilitate/Vahidile Valiouy D.EPAB.D- 06.01.17-15.04.2077 IDROUVASILESCU<<ELENA<<<<<<<<<<<<<<< SS099994<0R0u4104151F770415824003421"}], 'tools': [{'type': 'function', 'function': {'name': 'PIIData', 'description': 'Correctly extracted `PIIData` with all the required parameters with correct types', 'parameters': {'properties': {'name': {'description': 'Full name of the person', 'title': 'Name', 'type': 'string'}, 'address': {'description': 'Residential address of the person', 'title': 'Address', 'type': 'string'}}, 'required': ['address', 'name'], 'type': 'object'}}}], 'tool_choice': {'type': 'function', 'function': {'name': 'PIIData'}}}
2024-10-14 14:46:19,640 - DEBUG - max_retries: 1
2024-10-14 14:46:19,643 - DEBUG - Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'json_data': {'messages': [{'role': 'system', 'content': '\nYou are an AI agent specializing in contract creation and personal information extraction. \n\nYour role is:\n 1. Guide the process of extracting information from documents..\n 2. Verifying the extracted information with human input.\n 3. Identifying parties. \n 4. Constructing a contract. \n\n\nFollow the workflow precisely and ask for human input when needed.\n\n'}, {'role': 'user', 'content': "Extract the name and address from the given text:\n\nROUMANIE ROVIAINIA ROMANIA Carte Carte DE iDentitate IdEnTITY Didentite seala SS Nr 099994 Card CNP 2410415400542 93coQ Nume/NomiLast name VASILESCU Pronume/Prenom/Flrst name ELENA < CetatenielNatlonallte/Natlonalily M Sex SexelSer Romn\u0103 ROU Loc nastore/Licu de naissancolF 'ar0 ol birth Mun: Dej Jud. Cluj Domiciliu/Adresse A ess Mun. Bucuresti Sec. 5 Str Nicolae Iorga nr.3 900 B Emisa delDelivree parllssued by Valabilitate/Vahidile Valiouy D.EPAB.D- 06.01.17-15.04.2077 IDROUVASILESCU<<ELENA<<<<<<<<<<<<<<< SS099994<0R0u4104151F770415824003421"}], 'model': 'gpt-4', 'tool_choice': {'type': 'function', 'function': {'name': 'PIIData'}}, 'tools': [{'type': 'function', 'function': {'name': 'PIIData', 'description': 'Correctly extracted `PIIData` with all the required parameters with correct types', 'parameters': {'properties': {'name': {'description': 'Full name of the person', 'title': 'Name', 'type': 'string'}, 'address': {'description': 'Residential address of the person', 'title': 'Address', 'type': 'string'}}, 'required': ['address', 'name'], 'type': 'object'}}}]}}
2024-10-14 14:46:19,643 - DEBUG - Sending HTTP Request: POST https://api.openai.com/v1/chat/completions
2024-10-14 14:46:19,643 - DEBUG - close.started
2024-10-14 14:46:19,644 - DEBUG - close.complete
2024-10-14 14:46:19,644 - DEBUG - connect_tcp.started host='api.openai.com' port=443 local_address=None timeout=5.0 socket_options=None
2024-10-14 14:46:19,648 - DEBUG - connect_tcp.complete return_value=<httpcore._backends.sync.SyncStream object at 0x0000014CF90A29F0>
2024-10-14 14:46:19,648 - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x0000014CF8EC5B50> server_hostname='api.openai.com' timeout=5.0
2024-10-14 14:46:19,656 - DEBUG - start_tls.complete return_value=<httpcore._backends.sync.SyncStream object at 0x0000014CF90A0C50>
2024-10-14 14:46:19,657 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-10-14 14:46:19,657 - DEBUG - send_request_headers.complete
2024-10-14 14:46:19,657 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-10-14 14:46:19,657 - DEBUG - send_request_body.complete
2024-10-14 14:46:19,657 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-10-14 14:46:22,302 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Mon, 14 Oct 2024 11:46:22 GMT'), (b'Content-Type', b'application/json'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'user-kzzh9hik9ryjiou4ftvhondh'), (b'openai-processing-ms', b'2479'), (b'openai-version', b'2020-10-01'), (b'x-ratelimit-limit-requests', b'10000'), (b'x-ratelimit-limit-tokens', b'10000'), (b'x-ratelimit-remaining-requests', b'9985'), (b'x-ratelimit-remaining-tokens', b'9742'), (b'x-ratelimit-reset-requests', b'2m3.185s'), (b'x-ratelimit-reset-tokens', b'1.548s'), (b'x-request-id', b'req_541388d7fe0f8091ab7ef0e068fa1d72'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8d27540a9ea8b6a7-OTP'), (b'Content-Encoding', b'gzip'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-10-14 14:46:22,303 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2024-10-14 14:46:22,303 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-10-14 14:46:22,303 - DEBUG - receive_response_body.complete
2024-10-14 14:46:22,304 - DEBUG - response_closed.started
2024-10-14 14:46:22,304 - DEBUG - response_closed.complete
2024-10-14 14:46:22,304 - DEBUG - HTTP Response: POST https://api.openai.com/v1/chat/completions "200 OK" Headers({'date': 'Mon, 14 Oct 2024 11:46:22 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-expose-headers': 'X-Request-ID', 'openai-organization': 'user-kzzh9hik9ryjiou4ftvhondh', 'openai-processing-ms': '2479', 'openai-version': '2020-10-01', 'x-ratelimit-limit-requests': '10000', 'x-ratelimit-limit-tokens': '10000', 'x-ratelimit-remaining-requests': '9985', 'x-ratelimit-remaining-tokens': '9742', 'x-ratelimit-reset-requests': '2m3.185s', 'x-ratelimit-reset-tokens': '1.548s', 'x-request-id': 'req_541388d7fe0f8091ab7ef0e068fa1d72', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8d27540a9ea8b6a7-OTP', 'content-encoding': 'gzip', 'alt-svc': 'h3=":443"; ma=86400'})
2024-10-14 14:46:22,304 - DEBUG - request_id: req_541388d7fe0f8091ab7ef0e068fa1d72
2024-10-14 14:46:22,305 - DEBUG - Instructor Raw Response: ChatCompletion(id='chatcmpl-AIDoi0qMUnDoyTL4ZRMdTd3rmoUiv', choices=[Choice(finish_reason='stop', index=0, logprobs=None, message=ChatCompletionMessage(content=None, refusal=None, role='assistant', function_call=None, tool_calls=[ChatCompletionMessageToolCall(id='call_ye3r6Q8OFdu8omqVrJ1Bb9vQ', function=Function(arguments='{\n"name": "VASILESCU ELENA",\n"address": "Mun. Bucuresti Sec. 5 Str Nicolae Iorga nr.3 900 B"\n}', name='PIIData'), type='function')]))], created=1728906380, model='gpt-4-0613', object='chat.completion', service_tier=None, system_fingerprint=None, usage=CompletionUsage(completion_tokens=41, prompt_tokens=380, total_tokens=421, completion_tokens_details=None, prompt_tokens_details=None))
2024-10-14 14:46:23,712 - DEBUG - Instructor Request: mode.value='tool_call', response_model=<class 'models.AgentAction'>, new_kwargs={'model': 'gpt-4', 'messages': [{'role': 'system', 'content': '\nYou are an AI agent specializing in contract creation and personal information extraction. \n\nYour role is:\n 1. Guide the process of extracting information from documents..\n 2. Verifying the extracted information with human input.\n 3. Identifying parties. \n 4. Constructing a contract. \n\n\nFollow the workflow precisely and ask for human input when needed.\n\n'}, {'role': 'user', 'content': "Current state: {'verified_pii_data': [{'name': 'ISPILANTE SENTIMENT BRUSLI', 'address': 'Videle Jud: Teleorman Sos. Giurgiului nr.1 695 TR'}, {'name': 'VASILESCU ELENA', 'address': 'Mun. Bucuresti Sec. 5 Str Nicolae Iorga nr.3 900 B'}], 'parties': None, 'contract_details': None, 'contract': None, 'current_action': None}\nWhat action should be taken next? Choose from: extract_pii, identify_parties, determine_contract_type, construct_contract, finish"}], 'tools': [{'type': 'function', 'function': {'name': 'AgentAction', 'description': 'Correctly extracted `AgentAction` with all the required parameters with correct types', 'parameters': {'properties': {'action': {'description': 'Action to be performed by the agent', 'title': 'Action', 'type': 'string'}, 'parameters': {'additionalProperties': {'type': 'string'}, 'description': 'Parameters for the action', 'title': 'Parameters', 'type': 'object'}}, 'required': ['action', 'parameters'], 'type': 'object'}}}], 'tool_choice': {'type': 'function', 'function': {'name': 'AgentAction'}}}
2024-10-14 14:46:23,712 - DEBUG - max_retries: 1
2024-10-14 14:46:23,714 - DEBUG - Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'json_data': {'messages': [{'role': 'system', 'content': '\nYou are an AI agent specializing in contract creation and personal information extraction. \n\nYour role is:\n 1. Guide the process of extracting information from documents..\n 2. Verifying the extracted information with human input.\n 3. Identifying parties. \n 4. Constructing a contract. \n\n\nFollow the workflow precisely and ask for human input when needed.\n\n'}, {'role': 'user', 'content': "Current state: {'verified_pii_data': [{'name': 'ISPILANTE SENTIMENT BRUSLI', 'address': 'Videle Jud: Teleorman Sos. Giurgiului nr.1 695 TR'}, {'name': 'VASILESCU ELENA', 'address': 'Mun. Bucuresti Sec. 5 Str Nicolae Iorga nr.3 900 B'}], 'parties': None, 'contract_details': None, 'contract': None, 'current_action': None}\nWhat action should be taken next? Choose from: extract_pii, identify_parties, determine_contract_type, construct_contract, finish"}], 'model': 'gpt-4', 'tool_choice': {'type': 'function', 'function': {'name': 'AgentAction'}}, 'tools': [{'type': 'function', 'function': {'name': 'AgentAction', 'description': 'Correctly extracted `AgentAction` with all the required parameters with correct types', 'parameters': {'properties': {'action': {'description': 'Action to be performed by the agent', 'title': 'Action', 'type': 'string'}, 'parameters': {'additionalProperties': {'type': 'string'}, 'description': 'Parameters for the action', 'title': 'Parameters', 'type': 'object'}}, 'required': ['action', 'parameters'], 'type': 'object'}}}]}}
2024-10-14 14:46:23,715 - DEBUG - Sending HTTP Request: POST https://api.openai.com/v1/chat/completions
2024-10-14 14:46:23,715 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-10-14 14:46:23,715 - DEBUG - send_request_headers.complete
2024-10-14 14:46:23,716 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-10-14 14:46:23,716 - DEBUG - send_request_body.complete
2024-10-14 14:46:23,716 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-10-14 14:46:24,869 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Mon, 14 Oct 2024 11:46:25 GMT'), (b'Content-Type', b'application/json'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'user-kzzh9hik9ryjiou4ftvhondh'), (b'openai-processing-ms', b'988'), (b'openai-version', b'2020-10-01'), (b'x-ratelimit-limit-requests', b'10000'), (b'x-ratelimit-limit-tokens', b'10000'), (b'x-ratelimit-remaining-requests', b'9985'), (b'x-ratelimit-remaining-tokens', b'9780'), (b'x-ratelimit-reset-requests', b'2m7.766s'), (b'x-ratelimit-reset-tokens', b'1.32s'), (b'x-request-id', b'req_077d18e980cfdaad803608437641098d'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8d275423fc78b6a7-OTP'), (b'Content-Encoding', b'gzip'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-10-14 14:46:24,869 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2024-10-14 14:46:24,869 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-10-14 14:46:24,869 - DEBUG - receive_response_body.complete
2024-10-14 14:46:24,869 - DEBUG - response_closed.started
2024-10-14 14:46:24,869 - DEBUG - response_closed.complete
2024-10-14 14:46:24,869 - DEBUG - HTTP Response: POST https://api.openai.com/v1/chat/completions "200 OK" Headers({'date': 'Mon, 14 Oct 2024 11:46:25 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-expose-headers': 'X-Request-ID', 'openai-organization': 'user-kzzh9hik9ryjiou4ftvhondh', 'openai-processing-ms': '988', 'openai-version': '2020-10-01', 'x-ratelimit-limit-requests': '10000', 'x-ratelimit-limit-tokens': '10000', 'x-ratelimit-remaining-requests': '9985', 'x-ratelimit-remaining-tokens': '9780', 'x-ratelimit-reset-requests': '2m7.766s', 'x-ratelimit-reset-tokens': '1.32s', 'x-request-id': 'req_077d18e980cfdaad803608437641098d', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8d275423fc78b6a7-OTP', 'content-encoding': 'gzip', 'alt-svc': 'h3=":443"; ma=86400'})
2024-10-14 14:46:24,869 - DEBUG - request_id: req_077d18e980cfdaad803608437641098d
2024-10-14 14:46:24,870 - DEBUG - Instructor Raw Response: ChatCompletion(id='chatcmpl-AIDom2bAp1t1n3gA74uU6jj2qhLNU', choices=[Choice(finish_reason='stop', index=0, logprobs=None, message=ChatCompletionMessage(content=None, refusal=None, role='assistant', function_call=None, tool_calls=[ChatCompletionMessageToolCall(id='call_Wz31eUdTFanX8NqqYZsbLCJt', function=Function(arguments='{\n"action": "identify_parties"\n}', name='AgentAction'), type='function')]))], created=1728906384, model='gpt-4-0613', object='chat.completion', service_tier=None, system_fingerprint=None, usage=CompletionUsage(completion_tokens=10, prompt_tokens=280, total_tokens=290, completion_tokens_details=None, prompt_tokens_details=None))
2024-10-14 14:46:24,871 - DEBUG - Instructor Request: mode.value='tool_call', response_model=<class 'models.ContractParties'>, new_kwargs={'model': 'gpt-4', 'messages': [{'role': 'system', 'content': '\nYou are an AI agent specializing in contract creation and personal information extraction. \n\nYour role is:\n 1. Guide the process of extracting information from documents..\n 2. Verifying the extracted information with human input.\n 3. Identifying parties. \n 4. Constructing a contract. \n\n\nFollow the workflow precisely and ask for human input when needed.\n\n'}, {'role': 'user', 'content': 'Identify the buyer and seller from the given information:\n\nName: ISPILANTE SENTIMENT BRUSLI, Address: Videle Jud: Teleorman Sos. Giurgiului nr.1 695 TR\nName: VASILESCU ELENA, Address: Mun. Bucuresti Sec. 5 Str Nicolae Iorga nr.3 900 B'}], 'tools': [{'type': 'function', 'function': {'name': 'ContractParties', 'description': 'Correctly extracted `ContractParties` with all the required parameters with correct types', 'parameters': {'properties': {'buyer': {'description': 'Name of the buyer', 'title': 'Buyer', 'type': 'string'}, 'seller': {'description': 'Name of the seller', 'title': 'Seller', 'type': 'string'}}, 'required': ['buyer', 'seller'], 'type': 'object'}}}], 'tool_choice': {'type': 'function', 'function': {'name': 'ContractParties'}}}
2024-10-14 14:46:24,871 - DEBUG - max_retries: 1
2024-10-14 14:46:24,873 - DEBUG - Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'json_data': {'messages': [{'role': 'system', 'content': '\nYou are an AI agent specializing in contract creation and personal information extraction. \n\nYour role is:\n 1. Guide the process of extracting information from documents..\n 2. Verifying the extracted information with human input.\n 3. Identifying parties. \n 4. Constructing a contract. \n\n\nFollow the workflow precisely and ask for human input when needed.\n\n'}, {'role': 'user', 'content': 'Identify the buyer and seller from the given information:\n\nName: ISPILANTE SENTIMENT BRUSLI, Address: Videle Jud: Teleorman Sos. Giurgiului nr.1 695 TR\nName: VASILESCU ELENA, Address: Mun. Bucuresti Sec. 5 Str Nicolae Iorga nr.3 900 B'}], 'model': 'gpt-4', 'tool_choice': {'type': 'function', 'function': {'name': 'ContractParties'}}, 'tools': [{'type': 'function', 'function': {'name': 'ContractParties', 'description': 'Correctly extracted `ContractParties` with all the required parameters with correct types', 'parameters': {'properties': {'buyer': {'description': 'Name of the buyer', 'title': 'Buyer', 'type': 'string'}, 'seller': {'description': 'Name of the seller', 'title': 'Seller', 'type': 'string'}}, 'required': ['buyer', 'seller'], 'type': 'object'}}}]}}
2024-10-14 14:46:24,874 - DEBUG - Sending HTTP Request: POST https://api.openai.com/v1/chat/completions
2024-10-14 14:46:24,874 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-10-14 14:46:24,874 - DEBUG - send_request_headers.complete
2024-10-14 14:46:24,874 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-10-14 14:46:24,875 - DEBUG - send_request_body.complete
2024-10-14 14:46:24,875 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-10-14 14:46:26,687 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Mon, 14 Oct 2024 11:46:26 GMT'), (b'Content-Type', b'application/json'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'user-kzzh9hik9ryjiou4ftvhondh'), (b'openai-processing-ms', b'1640'), (b'openai-version', b'2020-10-01'), (b'x-ratelimit-limit-requests', b'10000'), (b'x-ratelimit-limit-tokens', b'10000'), (b'x-ratelimit-remaining-requests', b'9984'), (b'x-ratelimit-remaining-tokens', b'9735'), (b'x-ratelimit-reset-requests', b'2m15.257s'), (b'x-ratelimit-reset-tokens', b'1.586s'), (b'x-request-id', b'req_896a78b39babe52f9f7771ab9255d77d'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8d27542b3cc5b6a7-OTP'), (b'Content-Encoding', b'gzip'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-10-14 14:46:26,688 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2024-10-14 14:46:26,688 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-10-14 14:46:26,688 - DEBUG - receive_response_body.complete
2024-10-14 14:46:26,688 - DEBUG - response_closed.started
2024-10-14 14:46:26,688 - DEBUG - response_closed.complete
2024-10-14 14:46:26,688 - DEBUG - HTTP Response: POST https://api.openai.com/v1/chat/completions "200 OK" Headers({'date': 'Mon, 14 Oct 2024 11:46:26 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-expose-headers': 'X-Request-ID', 'openai-organization': 'user-kzzh9hik9ryjiou4ftvhondh', 'openai-processing-ms': '1640', 'openai-version': '2020-10-01', 'x-ratelimit-limit-requests': '10000', 'x-ratelimit-limit-tokens': '10000', 'x-ratelimit-remaining-requests': '9984', 'x-ratelimit-remaining-tokens': '9735', 'x-ratelimit-reset-requests': '2m15.257s', 'x-ratelimit-reset-tokens': '1.586s', 'x-request-id': 'req_896a78b39babe52f9f7771ab9255d77d', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8d27542b3cc5b6a7-OTP', 'content-encoding': 'gzip', 'alt-svc': 'h3=":443"; ma=86400'})
2024-10-14 14:46:26,688 - DEBUG - request_id: req_896a78b39babe52f9f7771ab9255d77d
2024-10-14 14:46:26,688 - DEBUG - Instructor Raw Response: ChatCompletion(id='chatcmpl-AIDonZJ9YVGGnUs4l1oBoULnK3f5u', choices=[Choice(finish_reason='stop', index=0, logprobs=None, message=ChatCompletionMessage(content=None, refusal=None, role='assistant', function_call=None, tool_calls=[ChatCompletionMessageToolCall(id='call_SXcbGdrG27U6btfV8RI0Ttvj', function=Function(arguments='{\n  "buyer": "ISPILANTE SENTIMENT BRUSLI",\n  "seller": "VASILESCU ELENA"\n}', name='ContractParties'), type='function')]))], created=1728906385, model='gpt-4-0613', object='chat.completion', service_tier=None, system_fingerprint=None, usage=CompletionUsage(completion_tokens=29, prompt_tokens=232, total_tokens=261, completion_tokens_details=None, prompt_tokens_details=None))
2024-10-14 14:46:26,689 - DEBUG - Instructor Request: mode.value='tool_call', response_model=<class 'models.AgentAction'>, new_kwargs={'model': 'gpt-4', 'messages': [{'role': 'system', 'content': '\nYou are an AI agent specializing in contract creation and personal information extraction. \n\nYour role is:\n 1. Guide the process of extracting information from documents..\n 2. Verifying the extracted information with human input.\n 3. Identifying parties. \n 4. Constructing a contract. \n\n\nFollow the workflow precisely and ask for human input when needed.\n\n'}, {'role': 'user', 'content': "Current state: {'verified_pii_data': [{'name': 'ISPILANTE SENTIMENT BRUSLI', 'address': 'Videle Jud: Teleorman Sos. Giurgiului nr.1 695 TR'}, {'name': 'VASILESCU ELENA', 'address': 'Mun. Bucuresti Sec. 5 Str Nicolae Iorga nr.3 900 B'}], 'parties': {'buyer': 'ISPILANTE SENTIMENT BRUSLI', 'seller': 'VASILESCU ELENA'}, 'contract_details': None, 'contract': None, 'current_action': None}\nWhat action should be taken next? Choose from: extract_pii, identify_parties, determine_contract_type, construct_contract, finish"}], 'tools': [{'type': 'function', 'function': {'name': 'AgentAction', 'description': 'Correctly extracted `AgentAction` with all the required parameters with correct types', 'parameters': {'properties': {'action': {'description': 'Action to be performed by the agent', 'title': 'Action', 'type': 'string'}, 'parameters': {'additionalProperties': {'type': 'string'}, 'description': 'Parameters for the action', 'title': 'Parameters', 'type': 'object'}}, 'required': ['action', 'parameters'], 'type': 'object'}}}], 'tool_choice': {'type': 'function', 'function': {'name': 'AgentAction'}}}
2024-10-14 14:46:26,689 - DEBUG - max_retries: 1
2024-10-14 14:46:26,691 - DEBUG - Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'json_data': {'messages': [{'role': 'system', 'content': '\nYou are an AI agent specializing in contract creation and personal information extraction. \n\nYour role is:\n 1. Guide the process of extracting information from documents..\n 2. Verifying the extracted information with human input.\n 3. Identifying parties. \n 4. Constructing a contract. \n\n\nFollow the workflow precisely and ask for human input when needed.\n\n'}, {'role': 'user', 'content': "Current state: {'verified_pii_data': [{'name': 'ISPILANTE SENTIMENT BRUSLI', 'address': 'Videle Jud: Teleorman Sos. Giurgiului nr.1 695 TR'}, {'name': 'VASILESCU ELENA', 'address': 'Mun. Bucuresti Sec. 5 Str Nicolae Iorga nr.3 900 B'}], 'parties': {'buyer': 'ISPILANTE SENTIMENT BRUSLI', 'seller': 'VASILESCU ELENA'}, 'contract_details': None, 'contract': None, 'current_action': None}\nWhat action should be taken next? Choose from: extract_pii, identify_parties, determine_contract_type, construct_contract, finish"}], 'model': 'gpt-4', 'tool_choice': {'type': 'function', 'function': {'name': 'AgentAction'}}, 'tools': [{'type': 'function', 'function': {'name': 'AgentAction', 'description': 'Correctly extracted `AgentAction` with all the required parameters with correct types', 'parameters': {'properties': {'action': {'description': 'Action to be performed by the agent', 'title': 'Action', 'type': 'string'}, 'parameters': {'additionalProperties': {'type': 'string'}, 'description': 'Parameters for the action', 'title': 'Parameters', 'type': 'object'}}, 'required': ['action', 'parameters'], 'type': 'object'}}}]}}
2024-10-14 14:46:26,691 - DEBUG - Sending HTTP Request: POST https://api.openai.com/v1/chat/completions
2024-10-14 14:46:26,691 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-10-14 14:46:26,691 - DEBUG - send_request_headers.complete
2024-10-14 14:46:26,691 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-10-14 14:46:26,692 - DEBUG - send_request_body.complete
2024-10-14 14:46:26,692 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-10-14 14:46:27,611 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Mon, 14 Oct 2024 11:46:27 GMT'), (b'Content-Type', b'application/json'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'user-kzzh9hik9ryjiou4ftvhondh'), (b'openai-processing-ms', b'756'), (b'openai-version', b'2020-10-01'), (b'x-ratelimit-limit-requests', b'10000'), (b'x-ratelimit-limit-tokens', b'10000'), (b'x-ratelimit-remaining-requests', b'9983'), (b'x-ratelimit-remaining-tokens', b'9695'), (b'x-ratelimit-reset-requests', b'2m22.075s'), (b'x-ratelimit-reset-tokens', b'1.828s'), (b'x-request-id', b'req_259205e93b90a44a5e896cc644378501'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8d2754369996b6a7-OTP'), (b'Content-Encoding', b'gzip'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-10-14 14:46:27,612 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2024-10-14 14:46:27,612 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-10-14 14:46:27,612 - DEBUG - receive_response_body.complete
2024-10-14 14:46:27,612 - DEBUG - response_closed.started
2024-10-14 14:46:27,612 - DEBUG - response_closed.complete
2024-10-14 14:46:27,613 - DEBUG - HTTP Response: POST https://api.openai.com/v1/chat/completions "200 OK" Headers({'date': 'Mon, 14 Oct 2024 11:46:27 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-expose-headers': 'X-Request-ID', 'openai-organization': 'user-kzzh9hik9ryjiou4ftvhondh', 'openai-processing-ms': '756', 'openai-version': '2020-10-01', 'x-ratelimit-limit-requests': '10000', 'x-ratelimit-limit-tokens': '10000', 'x-ratelimit-remaining-requests': '9983', 'x-ratelimit-remaining-tokens': '9695', 'x-ratelimit-reset-requests': '2m22.075s', 'x-ratelimit-reset-tokens': '1.828s', 'x-request-id': 'req_259205e93b90a44a5e896cc644378501', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8d2754369996b6a7-OTP', 'content-encoding': 'gzip', 'alt-svc': 'h3=":443"; ma=86400'})
2024-10-14 14:46:27,613 - DEBUG - request_id: req_259205e93b90a44a5e896cc644378501
2024-10-14 14:46:27,613 - DEBUG - Instructor Raw Response: ChatCompletion(id='chatcmpl-AIDopzWDFHqaN0YzFXc1q1BOs5u5R', choices=[Choice(finish_reason='stop', index=0, logprobs=None, message=ChatCompletionMessage(content=None, refusal=None, role='assistant', function_call=None, tool_calls=[ChatCompletionMessageToolCall(id='call_7akbmKM3zanMMVPKQ57dua6b', function=Function(arguments='{\n"action": "determine_contract_type"\n}', name='AgentAction'), type='function')]))], created=1728906387, model='gpt-4-0613', object='chat.completion', service_tier=None, system_fingerprint=None, usage=CompletionUsage(completion_tokens=11, prompt_tokens=303, total_tokens=314, completion_tokens_details=None, prompt_tokens_details=None))
2024-10-14 14:46:39,036 - DEBUG - Instructor Request: mode.value='tool_call', response_model=<class 'models.ContractDetails'>, new_kwargs={'model': 'gpt-4', 'messages': [{'role': 'system', 'content': '\nYou are an AI agent specializing in contract creation and personal information extraction. \n\nYour role is:\n 1. Guide the process of extracting information from documents..\n 2. Verifying the extracted information with human input.\n 3. Identifying parties. \n 4. Constructing a contract. \n\n\nFollow the workflow precisely and ask for human input when needed.\n\n'}, {'role': 'user', 'content': 'Determine the contract details for a airbnb contract between ISPILANTE SENTIMENT BRUSLI and VASILESCU ELENA.'}], 'tools': [{'type': 'function', 'function': {'name': 'ContractDetails', 'description': 'Correctly extracted `ContractDetails` with all the required parameters with correct types', 'parameters': {'properties': {'contract_type': {'description': 'Type of contract (e.g., airbnb, buy-sell, it-consulting)', 'title': 'Contract Type', 'type': 'string'}, 'additional_info': {'additionalProperties': {'type': 'string'}, 'description': 'Additional information specific to the contract type', 'title': 'Additional Info', 'type': 'object'}}, 'required': ['additional_info', 'contract_type'], 'type': 'object'}}}], 'tool_choice': {'type': 'function', 'function': {'name': 'ContractDetails'}}}
2024-10-14 14:46:39,036 - DEBUG - max_retries: 1
2024-10-14 14:46:39,038 - DEBUG - Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'json_data': {'messages': [{'role': 'system', 'content': '\nYou are an AI agent specializing in contract creation and personal information extraction. \n\nYour role is:\n 1. Guide the process of extracting information from documents..\n 2. Verifying the extracted information with human input.\n 3. Identifying parties. \n 4. Constructing a contract. \n\n\nFollow the workflow precisely and ask for human input when needed.\n\n'}, {'role': 'user', 'content': 'Determine the contract details for a airbnb contract between ISPILANTE SENTIMENT BRUSLI and VASILESCU ELENA.'}], 'model': 'gpt-4', 'tool_choice': {'type': 'function', 'function': {'name': 'ContractDetails'}}, 'tools': [{'type': 'function', 'function': {'name': 'ContractDetails', 'description': 'Correctly extracted `ContractDetails` with all the required parameters with correct types', 'parameters': {'properties': {'contract_type': {'description': 'Type of contract (e.g., airbnb, buy-sell, it-consulting)', 'title': 'Contract Type', 'type': 'string'}, 'additional_info': {'additionalProperties': {'type': 'string'}, 'description': 'Additional information specific to the contract type', 'title': 'Additional Info', 'type': 'object'}}, 'required': ['additional_info', 'contract_type'], 'type': 'object'}}}]}}
2024-10-14 14:46:39,039 - DEBUG - Sending HTTP Request: POST https://api.openai.com/v1/chat/completions
2024-10-14 14:46:39,039 - DEBUG - close.started
2024-10-14 14:46:39,039 - DEBUG - close.complete
2024-10-14 14:46:39,039 - DEBUG - connect_tcp.started host='api.openai.com' port=443 local_address=None timeout=5.0 socket_options=None
2024-10-14 14:46:39,046 - DEBUG - connect_tcp.complete return_value=<httpcore._backends.sync.SyncStream object at 0x0000014CF90AD4C0>
2024-10-14 14:46:39,046 - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x0000014CF8EC5B50> server_hostname='api.openai.com' timeout=5.0
2024-10-14 14:46:39,053 - DEBUG - start_tls.complete return_value=<httpcore._backends.sync.SyncStream object at 0x0000014CF90AE9F0>
2024-10-14 14:46:39,053 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-10-14 14:46:39,053 - DEBUG - send_request_headers.complete
2024-10-14 14:46:39,053 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-10-14 14:46:39,053 - DEBUG - send_request_body.complete
2024-10-14 14:46:39,053 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-10-14 14:46:39,976 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Mon, 14 Oct 2024 11:46:40 GMT'), (b'Content-Type', b'application/json'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'user-kzzh9hik9ryjiou4ftvhondh'), (b'openai-processing-ms', b'754'), (b'openai-version', b'2020-10-01'), (b'x-ratelimit-limit-requests', b'10000'), (b'x-ratelimit-limit-tokens', b'10000'), (b'x-ratelimit-remaining-requests', b'9983'), (b'x-ratelimit-remaining-tokens', b'9865'), (b'x-ratelimit-reset-requests', b'2m18.362s'), (b'x-ratelimit-reset-tokens', b'810ms'), (b'x-request-id', b'req_eab72a4e50b2e6a625be3dae9f571541'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8d275483df05c9d8-OTP'), (b'Content-Encoding', b'gzip'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-10-14 14:46:39,976 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2024-10-14 14:46:39,976 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-10-14 14:46:39,977 - DEBUG - receive_response_body.complete
2024-10-14 14:46:39,977 - DEBUG - response_closed.started
2024-10-14 14:46:39,977 - DEBUG - response_closed.complete
2024-10-14 14:46:39,977 - DEBUG - HTTP Response: POST https://api.openai.com/v1/chat/completions "200 OK" Headers({'date': 'Mon, 14 Oct 2024 11:46:40 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-expose-headers': 'X-Request-ID', 'openai-organization': 'user-kzzh9hik9ryjiou4ftvhondh', 'openai-processing-ms': '754', 'openai-version': '2020-10-01', 'x-ratelimit-limit-requests': '10000', 'x-ratelimit-limit-tokens': '10000', 'x-ratelimit-remaining-requests': '9983', 'x-ratelimit-remaining-tokens': '9865', 'x-ratelimit-reset-requests': '2m18.362s', 'x-ratelimit-reset-tokens': '810ms', 'x-request-id': 'req_eab72a4e50b2e6a625be3dae9f571541', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8d275483df05c9d8-OTP', 'content-encoding': 'gzip', 'alt-svc': 'h3=":443"; ma=86400'})
2024-10-14 14:46:39,977 - DEBUG - request_id: req_eab72a4e50b2e6a625be3dae9f571541
2024-10-14 14:46:39,978 - DEBUG - Instructor Raw Response: ChatCompletion(id='chatcmpl-AIDp1hbfI0KS2cq31yuPc8ZAnatc0', choices=[Choice(finish_reason='stop', index=0, logprobs=None, message=ChatCompletionMessage(content=None, refusal=None, role='assistant', function_call=None, tool_calls=[ChatCompletionMessageToolCall(id='call_4vzuJSnUudEHTeOY5gOacCYB', function=Function(arguments='{\n  "contract_type": "airbnb"\n}', name='ContractDetails'), type='function')]))], created=1728906399, model='gpt-4-0613', object='chat.completion', service_tier=None, system_fingerprint=None, usage=CompletionUsage(completion_tokens=11, prompt_tokens=184, total_tokens=195, completion_tokens_details=None, prompt_tokens_details=None))
2024-10-14 14:46:39,980 - DEBUG - Instructor Request: mode.value='tool_call', response_model=<class 'models.AgentAction'>, new_kwargs={'model': 'gpt-4', 'messages': [{'role': 'system', 'content': '\nYou are an AI agent specializing in contract creation and personal information extraction. \n\nYour role is:\n 1. Guide the process of extracting information from documents..\n 2. Verifying the extracted information with human input.\n 3. Identifying parties. \n 4. Constructing a contract. \n\n\nFollow the workflow precisely and ask for human input when needed.\n\n'}, {'role': 'user', 'content': "Current state: {'verified_pii_data': [{'name': 'ISPILANTE SENTIMENT BRUSLI', 'address': 'Videle Jud: Teleorman Sos. Giurgiului nr.1 695 TR'}, {'name': 'VASILESCU ELENA', 'address': 'Mun. Bucuresti Sec. 5 Str Nicolae Iorga nr.3 900 B'}], 'parties': {'buyer': 'ISPILANTE SENTIMENT BRUSLI', 'seller': 'VASILESCU ELENA'}, 'contract_details': {'contract_type': 'airbnb', 'additional_info': {}}, 'contract': None, 'current_action': None}\nWhat action should be taken next? Choose from: extract_pii, identify_parties, determine_contract_type, construct_contract, finish"}], 'tools': [{'type': 'function', 'function': {'name': 'AgentAction', 'description': 'Correctly extracted `AgentAction` with all the required parameters with correct types', 'parameters': {'properties': {'action': {'description': 'Action to be performed by the agent', 'title': 'Action', 'type': 'string'}, 'parameters': {'additionalProperties': {'type': 'string'}, 'description': 'Parameters for the action', 'title': 'Parameters', 'type': 'object'}}, 'required': ['action', 'parameters'], 'type': 'object'}}}], 'tool_choice': {'type': 'function', 'function': {'name': 'AgentAction'}}}
2024-10-14 14:46:39,980 - DEBUG - max_retries: 1
2024-10-14 14:46:39,982 - DEBUG - Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'json_data': {'messages': [{'role': 'system', 'content': '\nYou are an AI agent specializing in contract creation and personal information extraction. \n\nYour role is:\n 1. Guide the process of extracting information from documents..\n 2. Verifying the extracted information with human input.\n 3. Identifying parties. \n 4. Constructing a contract. \n\n\nFollow the workflow precisely and ask for human input when needed.\n\n'}, {'role': 'user', 'content': "Current state: {'verified_pii_data': [{'name': 'ISPILANTE SENTIMENT BRUSLI', 'address': 'Videle Jud: Teleorman Sos. Giurgiului nr.1 695 TR'}, {'name': 'VASILESCU ELENA', 'address': 'Mun. Bucuresti Sec. 5 Str Nicolae Iorga nr.3 900 B'}], 'parties': {'buyer': 'ISPILANTE SENTIMENT BRUSLI', 'seller': 'VASILESCU ELENA'}, 'contract_details': {'contract_type': 'airbnb', 'additional_info': {}}, 'contract': None, 'current_action': None}\nWhat action should be taken next? Choose from: extract_pii, identify_parties, determine_contract_type, construct_contract, finish"}], 'model': 'gpt-4', 'tool_choice': {'type': 'function', 'function': {'name': 'AgentAction'}}, 'tools': [{'type': 'function', 'function': {'name': 'AgentAction', 'description': 'Correctly extracted `AgentAction` with all the required parameters with correct types', 'parameters': {'properties': {'action': {'description': 'Action to be performed by the agent', 'title': 'Action', 'type': 'string'}, 'parameters': {'additionalProperties': {'type': 'string'}, 'description': 'Parameters for the action', 'title': 'Parameters', 'type': 'object'}}, 'required': ['action', 'parameters'], 'type': 'object'}}}]}}
2024-10-14 14:46:39,983 - DEBUG - Sending HTTP Request: POST https://api.openai.com/v1/chat/completions
2024-10-14 14:46:39,983 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-10-14 14:46:39,983 - DEBUG - send_request_headers.complete
2024-10-14 14:46:39,983 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-10-14 14:46:39,984 - DEBUG - send_request_body.complete
2024-10-14 14:46:39,984 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-10-14 14:46:40,799 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Mon, 14 Oct 2024 11:46:41 GMT'), (b'Content-Type', b'application/json'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'user-kzzh9hik9ryjiou4ftvhondh'), (b'openai-processing-ms', b'667'), (b'openai-version', b'2020-10-01'), (b'x-ratelimit-limit-requests', b'10000'), (b'x-ratelimit-limit-tokens', b'10000'), (b'x-ratelimit-remaining-requests', b'9983'), (b'x-ratelimit-remaining-tokens', b'9712'), (b'x-ratelimit-reset-requests', b'2m26.069s'), (b'x-ratelimit-reset-tokens', b'1.725s'), (b'x-request-id', b'req_0dfaddada4890846e9861c1e8879b07c'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8d275489af81c9d8-OTP'), (b'Content-Encoding', b'gzip'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-10-14 14:46:40,799 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2024-10-14 14:46:40,799 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-10-14 14:46:40,799 - DEBUG - receive_response_body.complete
2024-10-14 14:46:40,799 - DEBUG - response_closed.started
2024-10-14 14:46:40,799 - DEBUG - response_closed.complete
2024-10-14 14:46:40,799 - DEBUG - HTTP Response: POST https://api.openai.com/v1/chat/completions "200 OK" Headers({'date': 'Mon, 14 Oct 2024 11:46:41 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-expose-headers': 'X-Request-ID', 'openai-organization': 'user-kzzh9hik9ryjiou4ftvhondh', 'openai-processing-ms': '667', 'openai-version': '2020-10-01', 'x-ratelimit-limit-requests': '10000', 'x-ratelimit-limit-tokens': '10000', 'x-ratelimit-remaining-requests': '9983', 'x-ratelimit-remaining-tokens': '9712', 'x-ratelimit-reset-requests': '2m26.069s', 'x-ratelimit-reset-tokens': '1.725s', 'x-request-id': 'req_0dfaddada4890846e9861c1e8879b07c', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8d275489af81c9d8-OTP', 'content-encoding': 'gzip', 'alt-svc': 'h3=":443"; ma=86400'})
2024-10-14 14:46:40,799 - DEBUG - request_id: req_0dfaddada4890846e9861c1e8879b07c
2024-10-14 14:46:40,800 - DEBUG - Instructor Raw Response: ChatCompletion(id='chatcmpl-AIDp2AstgizCC6cfjUjJWWKgtaSbh', choices=[Choice(finish_reason='stop', index=0, logprobs=None, message=ChatCompletionMessage(content=None, refusal=None, role='assistant', function_call=None, tool_calls=[ChatCompletionMessageToolCall(id='call_aBN3ELdyfohgkHoGZ9RgyhzQ', function=Function(arguments='{\n"action": "construct_contract"\n}', name='AgentAction'), type='function')]))], created=1728906400, model='gpt-4-0613', object='chat.completion', service_tier=None, system_fingerprint=None, usage=CompletionUsage(completion_tokens=9, prompt_tokens=315, total_tokens=324, completion_tokens_details=None, prompt_tokens_details=None))
2024-10-14 14:46:40,957 - DEBUG - close.started
2024-10-14 14:46:40,957 - DEBUG - close.complete
